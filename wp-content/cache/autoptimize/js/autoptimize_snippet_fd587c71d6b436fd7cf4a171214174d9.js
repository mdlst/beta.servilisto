var DOPBSPFrontEndFees=new function(){'use strict';var $=jQuery.noConflict();this.__construct=function(){};this.get=function(ID,reservationPrice,discountPrice,extrasPrice,ciDay,coDay,startHour,endHour,noItems){var dataDays=DOPBSPFrontEnd.calendar[ID]['days']['data'],dataFees=DOPBSPFrontEnd.calendar[ID]['fees']['data'],dataHours=DOPBSPFrontEnd.calendar[ID]['hours']['data'],dataWooCommerce=DOPBSPFrontEnd.calendar[ID]['woocommerce']['data'],fees=dataFees['fees'],i,timeLapse;coDay=coDay===''?ciDay:coDay;endHour=endHour===''?startHour:endHour;timeLapse=dataHours['enabled']?DOPPrototypes.getHoursDifference(startHour,endHour,'hours')+(dataHours['addLastHourToTotalPrice']?1:0):DOPPrototypes.getNoDays(ciDay,coDay)-(dataDays['morningCheckOut']?1:0);for(i=0;i<fees.length;i++){fees[i]['price_total']=this.getPrice(ID,[fees[i]],reservationPrice,discountPrice,extrasPrice,ciDay,coDay,startHour,endHour,noItems);}
return fees;};this.getPrice=function(ID,fees,reservationPrice,discountPrice,extrasPrice,ciDay,coDay,startHour,endHour,noItems){var dataDays=DOPBSPFrontEnd.calendar[ID]['days']['data'],dataHours=DOPBSPFrontEnd.calendar[ID]['hours']['data'],dataWooCommerce=DOPBSPFrontEnd.calendar[ID]['woocommerce']['data'],fee,i,price=0,timeLapse;coDay=coDay===''?ciDay:coDay;endHour=endHour===''?startHour:endHour;timeLapse=dataHours['enabled']?DOPPrototypes.getHoursDifference(startHour,endHour,'hours')+(dataHours['addLastHourToTotalPrice']?1:0):DOPPrototypes.getNoDays(ciDay,coDay)-(dataDays['morningCheckOut']?1:0);for(i=0;i<fees.length;i++){fee=fees[i];if(fee['included']==='false'){price+=(fee['operation']==='-'?-1:1)*(fee['price_by']==='once'?1:timeLapse)*parseFloat(fee['price'])*(fee['price_type']==='fixed'?noItems:(reservationPrice+discountPrice+(fee['extras']==='true'?extrasPrice:0)))/(fee['price_type']==='fixed'?1:100);}}
return price;};this.set=function(ID,type,fees,ciDay,coDay,startHour,endHour){var dataCart=DOPBSPFrontEnd.calendar[ID]['cart']['data'],dataHours=DOPBSPFrontEnd.calendar[ID]['hours']['data'],HTML=new Array(),i;coDay=coDay===''?ciDay:coDay;endHour=endHour===''?startHour:endHour;if(fees.length>0){HTML.push(' <tr class="dopbsp-separator">');HTML.push('     <td class="dopbsp-label"><div class="dopbsp-line"></div></td>');HTML.push('     <td class="dopbsp-value"><div class="dopbsp-line"></div></td>');HTML.push(' </tr>');}
for(i=0;i<fees.length;i++){if((type==='reservation'&&(fees[i]['cart']==='false'||!dataCart['enabled']))||(type==='cart'&&fees[i]['cart']==='true')){HTML.push(' <tr>');HTML.push('     <td class="dopbsp-label">'+fees[i]['translation']+'</td>');HTML.push('     <td class="dopbsp-value">');if(fees[i]['price_type']!=='fixed'||fees[i]['price_by']!=='once'){HTML.push('         <span class="dopbsp-info-rule">&#9632;&nbsp;');if(fees[i]['price_type']==='fixed'){HTML.push(fees[i]['operation']+DOPBSPFrontEnd.setPrice(ID,fees[i]['price']));}
else{HTML.push(fees[i]['operation']+fees[i]['price']+'%');}
if(fees[i]['price_by']!=='once'){HTML.push('/'+(dataHours['enabled']?DOPBSPFrontEnd.text(ID,'fees','byHour'):DOPBSPFrontEnd.text(ID,'fees','byDay')));}
HTML.push('         </span><br />');}
HTML.push('         <span class="dopbsp-info-price">');if(fees[i]['included']==='true'){HTML.push(DOPBSPFrontEnd.text(ID,'fees','included'));}
else{HTML.push(fees[i]['operation']+'&nbsp;'+DOPBSPFrontEnd.setPrice(ID,fees[i]['price_total']));}
HTML.push('         </span>');HTML.push('     </td>');HTML.push(' </tr>');}}
return HTML.join('');};return this.__construct();};