(function($){$(document).ready(function(e){var sTime=0,cTime=0,sTime2=0,cTime2=0;$('#daysofweek').on('change',function(){var timeOpen=Array(),timeClose=Array(),timeOpen2=Array(),timeClose2=Array();var totDays=0;$("#daysofweek option:selected").each(function(key,val){timeOpen[totDays]=parseInt($(this).attr('data-openingtime'));timeClose[totDays]=parseInt($(this).attr('data-closingtime'));timeOpen2[totDays]=parseInt($(this).attr('data-openingtime2'));timeClose2[totDays]=parseInt($(this).attr('data-closingtime2'));totDays++;});$("#sinceto").html("");$("#untilltime").html("");var timeAr=Array();for(var i=0;i<totDays;i++){var Ar=Array();var k=0;for(var j=timeOpen[i];j<timeClose[i];j++){Ar[k]=j;k++}for(var j=timeOpen2[i];j<timeClose2[i];j++){Ar[k]=j;k++}timeAr[i]=Ar;}if(timeAr.length>1){var cAr=Array();for(var i=0;i<(timeAr.length-1);i++){if(i==0)cAr=timeAr[i];cAr=intersectIntegers(cAr,timeAr[i+1]);}}else{var cAr=timeAr[0];}cAr.sort(function(a,b){return a-b});$.each(cAr,function(inx,itm){$("#sinceto").append("<option value='"+convertHour(itm)+"'>"+convertHour(itm)+"</option>");})
$('#sinceto').css({border:'1px solid blue'});$('#sinceto').removeAttr("disabled");$('#sinceto').change();});$('#sinceto').on('change',function($this){$("#untilltime").html("");var cTime=parseInt($(this).val());var timeAr=Array();var i=0;$("#sinceto option").each(function(){timeAr[i]=parseInt($(this).val());i++;});var flg=1;var lastVal=0;$.each(timeAr,function(key,val){if(cTime==val&&flg===1){$("#untilltime").append("<option value='"+convertHour(val+1)+"'>"+convertHour(val+1)+"</option>");lastVal=val;}if(cTime<=val&&(val-lastVal)==1){$("#untilltime").append("<option value='"+convertHour(val+1)+"'>"+convertHour(val+1)+"</option>");lastVal=val;}})
$('#untilltime').css({border:'1px solid blue'});$('#untilltime').removeAttr("disabled");calPrice();});$('#untilltime').on('change',function($this){calPrice();})
function calPrice(){var fTime=parseInt($("#sinceto option:selected").val());var tTime=parseInt($("#untilltime option:selected").val());var tHour=tTime-fTime;var totDays=$("#daysofweek option:selected").length;tHour=tHour*totDays;if(tHour>=30){var price=$("#hourly_rate30").val();}else if(tHour>=15){var price=$("#hourly_rate15").val();}else if(tHour>=6){var price=$("#hourly_rate6").val();}else{var price=$("#hourly_rate30").val();}tHour=tHour*4;var tPrice=tHour*price;var points=tPrice*3;$("#per_hour_rate").html(points);$("#tot_price").html("Coste "+tPrice+"â‚¬ Mensuales");}function intersectIntegers(array1,array2){var seen=[],result=[];for(var i=0;i<array1.length;i++){seen[array1[i]]=true;}for(var i=0;i<array2.length;i++){if(seen[array2[i]])result.push(array2[i]);}return result;}function convertHour(h){var h2='';if(h<10)h2='0'+h+':00';else
h2=h+':00';return h2;}$(".daysofweek").chosen({width:"95%"});});})(jQuery);