var url22='https://sedeportista.com/wp-admin/admin-ajax.php';var theme_url='https://sedeportista.com/wp-content/themes/directoryengine-child';var radius='51';var getIfApp=0;var site_url='https://sedeportista.com';;
function theChampLoadEvent(e){var t=window.onload;if(typeof window.onload!="function"){window.onload=e}else{window.onload=function(){t();e()}}};
var theChampSiteUrl='https://sedeportista.com',theChampVerified=0,theChampEmailPopup=0;;
var theChampLoadingImgPath='https://sedeportista.com/wp-content/plugins/super-socializer/images/ajax_loader.gif';var theChampAjaxUrl='https://sedeportista.com/wp-admin/admin-ajax.php';var theChampRedirectionUrl='https://sedeportista.com/pintor/?en=jaen';var theChampRegRedirectionUrl='https://sedeportista.com/pintor/?en=jaen';;
var theChampFacebookScope='public_profile,email',theChampFBKey='239321693197929',theChampVerified=0;var theChampAjaxUrl='https://sedeportista.com/wp-admin/admin-ajax.php';var theChampPopupTitle='';var theChampEmailPopup=0;var theChampEmailAjaxUrl='https://sedeportista.com/wp-admin/admin-ajax.php';var theChampEmailPopupTitle='';var theChampEmailPopupErrorMsg='';var theChampEmailPopupUniqueId='';var theChampEmailPopupVerifyMessage='';var theChampSteamAuthUrl="";var theChampTwitterRedirect='https%3A%2F%2Fsedeportista.com%2Fpintor%2F%3Fen%3Djaen';;
var theChampGoogleKey='524533250923-9s9ao52vbohigepev05uc2a02868c3u8.apps.googleusercontent.com';var theChampGoogleErrorMessage='Sigue los pasos 11 y 12 de la página de configuración de Google app, acerca de abrir';
var theChampFBKey='239321693197929',theChampFBLang='es_ES',theChampFbLikeMycred=0,theChampSsga=0,theChampCommentNotification=0,theChampFbIosLogin=0;;
/*! jQuery v1.12.4 | (c) jQuery Foundation | jquery.org/license | WordPress 2019-05-16 */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m="1.12.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?a<0?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],"__proto__"!==d&&g!==c&&(j&&c&&(n.isPlainObject(c)||(b=n.isArray(c)))?(b?(b=!1,f=a&&n.isArray(a)?a:[]):f=a&&n.isPlainObject(a)?a:{},g[d]=n.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray||function(a){return"array"===n.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;try{if(a.constructor&&!k.call(a,"constructor")&&!k.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(!l.ownFirst)for(b in a)return k.call(a,b);for(b in a);return void 0===b||k.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?i[j.call(a)]||"object":typeof a},globalEval:function(b){b&&n.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;d<c;d++)if(!1===b.call(a[d],d,a[d]))break}else for(d in a)if(!1===b.call(a[d],d,a[d]))break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(h)return h.call(b,a,c);for(d=b.length,c=c?c<0?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(d<c)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)(d=!b(a[f],f))!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;g<d;g++)null!=(e=b(a[g],g,c))&&h.push(e);else for(g in a)null!=(e=b(a[g],g,c))&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;if("string"==typeof b&&(f=a[b],b=a,a=f),n.isFunction(a))return c=e.call(arguments,2),d=function(){return a.apply(b||this,c.concat(e.call(arguments)))},d.guid=a.guid=a.guid||n.guid++,d},now:function(){return+new Date},support:l}),"function"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){i["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=!!a&&"length"in a&&a.length,c=n.type(a);return"function"!==c&&!n.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=fa(),z=fa(),A=fa(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,aa=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(xa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ea(a,b,d,e){var f,h,j,k,l,o,r,s,w=b&&b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==x&&9!==x&&11!==x)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==x&&(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w&&(j=w.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==x)w=b,s=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(aa,"\\$&"):b.setAttribute("id",k=u),r=g(a),h=r.length,l=V.test(k)?"#"+k:"[id='"+k+"']";while(h--)r[h]=l+" "+pa(r[h]);s=r.join(","),w=_.test(a)&&na(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function fa(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ga(a){return a[u]=!0,a}function ha(a){var b=n.createElement("div");try{return!!a(b)}catch(xa){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ia(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ja(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ka(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function la(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function ma(a){return ga(function(b){return b=+b,ga(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function na(a){return a&&void 0!==a.getElementsByTagName&&a}c=ea.support={},f=ea.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},m=ea.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ha(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ha(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ha(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(void 0!==b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c=void 0!==a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return void 0!==b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if(void 0!==b.getElementsByClassName&&p)return b.getElementsByClassName(a)},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))&&(ha(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ha(function(a){var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ha(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d||(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ja(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ja(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},ea.matches=function(a,b){return ea(a,null,null,b)},ea.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(xa){}return ea(b,n,null,[a]).length>0},ea.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ea.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ea.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ea.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ea.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ea.selectors={cacheLength:50,createPseudo:ga,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||"").replace(ba,ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ea.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ea.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||void 0!==a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ea.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),!1===t)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return(t-=e)===d||t%d==0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ea.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ga(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ga(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?ga(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ga(function(a){return function(b){return ea(a,b).length>0}}),contains:ga(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ga(function(a){return V.test(a||"")||ea.error("unsupported lang: "+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do{if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return(c=c.toLowerCase())===a||0===c.indexOf(a+"-")}while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:ma(function(){return[0]}),last:ma(function(a,b){return[b-1]}),eq:ma(function(a,b,c){return[c<0?c+b:c]}),even:ma(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:ma(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:ma(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:ma(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ka(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=la(b);function oa(){}oa.prototype=d.filters=d.pseudos,d.setFilters=new oa,g=ea.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=R.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ea.error(a):z(a,i).slice(0)};function pa(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function qa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===w&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function ra(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function sa(a,b,c){for(var d=0,e=b.length;d<e;d++)ea(a,b[d],c);return c}function ta(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function ua(a,b,c,d,e,f){return d&&!d[u]&&(d=ua(d)),e&&!e[u]&&(e=ua(e,f)),ga(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||sa(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ta(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ta(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ta(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function va(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=qa(function(a){return a===b},h,!0),l=qa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];i<f;i++)if(c=d.relative[a[i].type])m=[qa(ra(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;e<f;e++)if(d.relative[a[e].type])break;return ua(i>1&&ra(m),i>1&&pa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,i<e&&va(a.slice(i,e)),e<f&&va(a=a.slice(e)),e<f&&pa(a))}m.push(c)}return ra(m)}function wa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ta(u)}H.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&ea.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ga(f):f}return h=ea.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=va(b[c]),f[u]?d.push(f):e.push(f);f=A(a,wa(e,d)),f.selector=a}return f},i=ea.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(!(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0]))return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)&&na(b.parentNode)||b))){if(j.splice(i,1),!(a=f.length&&pa(j)))return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)&&na(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ha(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ha(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ia("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ha(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ia("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),ha(function(a){return null==a.getAttribute("disabled")})||ia(K,function(a,b,c){var d;if(!c)return!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ea}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},w=n.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,y=/^.[^:#\[\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return n.inArray(a,b)>-1!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;b<e;b++)if(n.contains(d[b],this))return!0}));for(b=0;b<e;b++)n.find(a,d[b],c);return c=this.pushStack(e>1?n.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,"string"==typeof a&&w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,"string"==typeof a){if(!(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:B.exec(a))||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])&&n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}if((f=d.getElementById(e[2]))&&f.parentNode){if(f.id!==e[2])return A.find(a);this.length=1,this[0]=f}return this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?void 0!==c.ready?c.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))}).prototype=n.fn,A=n(d);var C=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b,c=n(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(n.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||"string"!=typeof a?n(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?n.inArray(this[0],n(a)):n.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function E(a,b){do{a=a[b]}while(a&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return E(a,"nextSibling")},prev:function(a){return E(a,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return n.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(D[a]||(e=n.uniqueSort(e)),C.test(a)&&(e=e.reverse())),this.pushStack(e)}});var F=/\S+/g;function G(a){var b={};return n.each(a.match(F)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?G(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)!1===f[h].apply(c[0],c[1])&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function b(c){n.each(c,function(c,d){n.isFunction(d)?a.unique&&j.has(d)||f.push(d):d&&d.length&&"string"!==n.type(d)&&b(d)})}(arguments),c&&!b&&i()),this},remove:function(){return n.each(arguments,function(a,b){var c;while((c=n.inArray(b,f,c))>-1)f.splice(c,1),c<=h&&h--}),this},has:function(a){return a?n.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=!0,c||j.disable(),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a&&n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d>1)for(i=new Array(d),j=new Array(d),k=new Array(d);b<d;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(!0===a?--n.readyWait:n.isReady)||(n.isReady=!0,!0!==a&&--n.readyWait>0||(H.resolveWith(d,[n]),n.fn.triggerHandler&&(n(d).triggerHandler("ready"),n(d).off("ready"))))}});function I(){d.addEventListener?(d.removeEventListener("DOMContentLoaded",J),a.removeEventListener("load",J)):(d.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(d.addEventListener||"load"===a.event.type||"complete"===d.readyState)&&(I(),n.ready())}n.ready.promise=function(b){if(!H)if(H=n.Deferred(),"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll)a.setTimeout(n.ready);else if(d.addEventListener)d.addEventListener("DOMContentLoaded",J),a.addEventListener("load",J);else{d.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&d.documentElement}catch(e){}c&&c.doScroll&&function b(){if(!n.isReady){try{c.doScroll("left")}catch(e){return a.setTimeout(b,50)}I(),n.ready()}}()}return H.promise(b)},n.ready.promise();var K;for(K in n(l))break;l.ownFirst="0"===K,l.inlineBlockNeedsLayout=!1,n(function(){var a,b,c,e;(c=d.getElementsByTagName("body")[0])&&c.style&&(b=d.createElement("div"),e=d.createElement("div"),e.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(e).appendChild(b),void 0!==b.style.zoom&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",l.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(e))}),function(){var a=d.createElement("div");l.deleteExpando=!0;try{delete a.test}catch(b){l.deleteExpando=!1}a=null}();var L=function(a){var b=n.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return(1===c||9===c)&&(!b||!0!==b&&a.getAttribute("classid")===b)},M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if("string"==typeof(c=a.getAttribute(d))){try{c="true"===c||"false"!==c&&("null"===c?null:+c+""===c?+c:M.test(c)?n.parseJSON(c):c)}catch(e){}n.data(a,b,c)}else c=void 0}return c}function P(a){var b
;for(b in a)if(("data"!==b||!n.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function Q(a,b,d,e){if(L(a)){var f,g,h=n.expando,i=a.nodeType,j=i?n.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||n.guid++:h),j[k]||(j[k]=i?{}:{toJSON:n.noop}),"object"!=typeof b&&"function"!=typeof b||(e?j[k]=n.extend(j[k],b):j[k].data=n.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[n.camelCase(b)]=d),"string"==typeof b?null==(f=g[b])&&(f=g[n.camelCase(b)]):f=g,f}}function R(a,b,c){if(L(a)){var d,e,f=a.nodeType,g=f?n.cache:a,h=f?a[n.expando]:n.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){n.isArray(b)?b=b.concat(n.map(b,n.camelCase)):b in d?b=[b]:(b=n.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!P(d):!n.isEmptyObject(d))return}(c||(delete g[h].data,P(g[h])))&&(f?n.cleanData([a],!0):l.deleteExpando||g!=g.window?delete g[h]:g[h]=void 0)}}}n.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return!!(a=a.nodeType?n.cache[a[n.expando]]:a[n.expando])&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=n.data(f),1===f.nodeType&&!n._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),O(f,d,e[d])));n._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){n.data(this,a)}):arguments.length>1?this.each(function(){n.data(this,a,b)}):f?O(f,a,n.data(f,a)):void 0},removeData:function(a){return this.each(function(){n.removeData(this,a)})}}),n.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=n._data(a,b),c&&(!d||n.isArray(c)?d=n._data(a,b,n.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return n._data(a,c)||n._data(a,c,{empty:n.Callbacks("once memory").add(function(){n._removeData(a,b+"queue"),n._removeData(a,c)})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)(c=n._data(f[g],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}}),function(){var a;l.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,e;return(c=d.getElementsByTagName("body")[0])&&c.style?(b=d.createElement("div"),e=d.createElement("div"),e.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(e).appendChild(b),void 0!==b.style.zoom&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(d.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(e),a):void 0}}();var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)};function W(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return n.css(a,b,"")},i=h(),j=c&&c[3]||(n.cssNumber[b]?"":"px"),k=(n.cssNumber[b]||"px"!==j&&+i)&&T.exec(n.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do{f=f||".5",k/=f,n.style(a,b,k+j)}while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var X=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)X(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Y=/^(?:checkbox|radio)$/i,Z=/<([\w:-]+)/,$=/^$|\/(?:java|ecma)script/i,_=/^\s+/,aa="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";function ba(a){var b=aa.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}!function(){var a=d.createElement("div"),b=d.createDocumentFragment(),c=d.createElement("input");a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",l.leadingWhitespace=3===a.firstChild.nodeType,l.tbody=!a.getElementsByTagName("tbody").length,l.htmlSerialize=!!a.getElementsByTagName("link").length,l.html5Clone="<:nav></:nav>"!==d.createElement("nav").cloneNode(!0).outerHTML,c.type="checkbox",c.checked=!0,b.appendChild(c),l.appendChecked=c.checked,a.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue,b.appendChild(a),c=d.createElement("input"),c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),a.appendChild(c),l.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!!a.addEventListener,a[n.expando]=1,l.attributes=!a.getAttribute(n.expando)}();var ca={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};ca.optgroup=ca.option,ca.tbody=ca.tfoot=ca.colgroup=ca.caption=ca.thead,ca.th=ca.td;function da(a,b){var c,d,e=0,f=void 0!==a.getElementsByTagName?a.getElementsByTagName(b||"*"):void 0!==a.querySelectorAll?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||n.nodeName(d,b)?f.push(d):n.merge(f,da(d,b));return void 0===b||b&&n.nodeName(a,b)?n.merge([a],f):f}function ea(a,b){for(var c,d=0;null!=(c=a[d]);d++)n._data(c,"globalEval",!b||n._data(b[d],"globalEval"))}var fa=/<|&#?\w+;/,ga=/<tbody/i;function ha(a){Y.test(a.type)&&(a.defaultChecked=a.checked)}function ia(a,b,c,d,e){for(var f,g,h,i,j,k,m,o=a.length,p=ba(b),q=[],r=0;r<o;r++)if((g=a[r])||0===g)if("object"===n.type(g))n.merge(q,g.nodeType?[g]:g);else if(fa.test(g)){i=i||p.appendChild(b.createElement("div")),j=(Z.exec(g)||["",""])[1].toLowerCase(),m=ca[j]||ca._default,i.innerHTML=m[1]+n.htmlPrefilter(g)+m[2],f=m[0];while(f--)i=i.lastChild;if(!l.leadingWhitespace&&_.test(g)&&q.push(b.createTextNode(_.exec(g)[0])),!l.tbody){g="table"!==j||ga.test(g)?"<table>"!==m[1]||ga.test(g)?0:i:i.firstChild,f=g&&g.childNodes.length;while(f--)n.nodeName(k=g.childNodes[f],"tbody")&&!k.childNodes.length&&g.removeChild(k)}n.merge(q,i.childNodes),i.textContent="";while(i.firstChild)i.removeChild(i.firstChild);i=p.lastChild}else q.push(b.createTextNode(g));i&&p.removeChild(i),l.appendChecked||n.grep(da(q,"input"),ha),r=0;while(g=q[r++])if(d&&n.inArray(g,d)>-1)e&&e.push(g);else if(h=n.contains(g.ownerDocument,g),i=da(p.appendChild(g),"script"),h&&ea(i),c){f=0;while(g=i[f++])$.test(g.type||"")&&c.push(g)}return i=null,p}!function(){var b,c,e=d.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(l[b]=c in a)||(e.setAttribute(c,"t"),l[b]=!1===e.attributes[c].expando);e=null}();var ja=/^(?:input|select|textarea)$/i,ka=/^key/,la=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ma=/^(?:focusinfocus|focusoutblur)$/,na=/^([^.]*)(?:\.(.+)|)/;function oa(){return!0}function pa(){return!1}function qa(){try{return d.activeElement}catch(a){}}function ra(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)ra(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),!1===e)e=pa;else if(!e)return a;return 1===f&&(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=n.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return void 0===n||a&&n.event.triggered===a.type?void 0:n.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(F)||[""],h=b.length;while(h--)f=na.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=n.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=n.event.special[o]||{},l=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},i),(m=g[o])||(m=g[o]=[],m.delegateCount=0,j.setup&&!1!==j.setup.call(a,d,p,k)||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),n.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n.hasData(a)&&n._data(a);if(r&&(k=r.events)){b=(b||"").match(F)||[""],j=b.length;while(j--)if(h=na.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;while(f--)g=m[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&!1!==l.teardown.call(a,p,r.handle)||n.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(k)&&(delete r.handle,n._removeData(a,"events"))}},trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,"type")?b.type:b,r=k.call(b,"namespace")?b.namespace.split("."):[];if(i=m=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!ma.test(q+n.event.triggered)&&(q.indexOf(".")>-1&&(r=q.split("."),q=r.shift(),r.sort()),h=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=r.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:n.makeArray(c,[b]),l=n.event.special[q]||{},f||!l.trigger||!1!==l.trigger.apply(e,c))){if(!f&&!l.noBubble&&!n.isWindow(e)){for(j=l.delegateType||q,ma.test(j+q)||(i=i.parentNode);i;i=i.parentNode)p.push(i),m=i;m===(e.ownerDocument||d)&&p.push(m.defaultView||m.parentWindow||a)}o=0;while((i=p[o++])&&!b.isPropagationStopped())b.type=o>1?j:l.bindType||q,g=(n._data(i,"events")||{})[b.type]&&n._data(i,"handle"),g&&g.apply(i,c),(g=h&&i[h])&&g.apply&&L(i)&&(b.result=g.apply(i,c),!1===b.result&&b.preventDefault());if(b.type=q,!f&&!b.isDefaultPrevented()&&(!l._default||!1===l._default.apply(p.pop(),c))&&L(e)&&h&&e[q]&&!n.isWindow(e)){m=e[h],m&&(e[h]=null),n.event.triggered=q;try{e[q]()}catch(s){}n.event.triggered=void 0,m&&(e[h]=m)}return b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(n._data(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||!1!==k.preDispatch.call(this,a)){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())a.rnamespace&&!a.rnamespace.test(g.namespace)||(a.handleObj=g,a.data=g.data,void 0!==(d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i))&&!1===(a.result=d)&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(!0!==i.disabled||"click"!==a.type)){for(d=[],c=0;c<h;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>-1:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[n.expando])return a;var b,c,e,f=a.type,g=a,h=this.fixHooks[f];h||(this.fixHooks[f]=h=la.test(f)?this.mouseHooks:ka.test(f)?this.keyHooks:{}),e=h.props?this.props.concat(h.props):this.props,a=new n.Event(g),b=e.length;while(b--)c=e[b],a[c]=g[c];return a.target||(a.target=g.srcElement||d),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,h.filter?h.filter(a,g):a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button,h=b.fromElement;return null==a.pageX&&null!=b.clientX&&(e=a.target.ownerDocument||d,f=e.documentElement,c=e.body,a.pageX=b.clientX+(f&&f.scrollLeft||c&&c.scrollLeft||0)-(f&&f.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(f&&f.scrollTop||c&&c.scrollTop||0)-(f&&f.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?b.toElement:h),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==qa()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){if(this===qa()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(n.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c){var d=n.extend(new n.Event,c,{type:a,isSimulated:!0});n.event.trigger(d,null,b),d.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=d.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)}:function(a,b,c){var d="on"+b;a.detachEvent&&(void 0===a[d]&&(a[d]=null),a.detachEvent(d,c))},n.Event=function(a,b){if(!(this instanceof n.Event))return new n.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?oa:pa):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),this[n.expando]=!0},n.Event.prototype={constructor:n.Event,isDefaultPrevented:pa,isPropagationStopped:pa,isImmediatePropagationStopped:pa,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=oa,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=oa,a&&!this.isSimulated&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=oa,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||n.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.submit||(n.event.special.submit={setup:function(){if(n.nodeName(this,"form"))return!1;n.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=n.nodeName(b,"input")||n.nodeName(b,"button")?n.prop(b,"form"):void 0;c&&!n._data(c,"submit")&&(n.event.add(c,"submit._submit",function(a){a._submitBubble=!0}),n._data(c,"submit",!0))})},postDispatch:function(a){a._submitBubble&&(delete a._submitBubble,this.parentNode&&!a.isTrigger&&n.event.simulate("submit",this.parentNode,a))},teardown:function(){if(n.nodeName(this,"form"))return!1;n.event.remove(this,"._submit")}}),l.change||(n.event.special.change={setup:function(){if(ja.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(n.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._justChanged=!0)}),n.event.add(this,"click._change",function(a){this._justChanged&&!a.isTrigger&&(this._justChanged=!1),n.event.simulate("change",this,a)})),!1;n.event.add(this,"beforeactivate._change",function(a){var b=a.target;ja.test(b.nodeName)&&!n._data(b,"change")&&(n.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||n.event.simulate("change",this.parentNode,a)}),n._data(b,"change",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){return n.event.remove(this,"._change"),!ja.test(this.nodeName)}}),l.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a))};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=n._data(d,b);e||d.addEventListener(a,c,!0),n._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=n._data(d,b)-1;e?n._data(d,b,e):(d.removeEventListener(a,c,!0),n._removeData(d,b))}}}),n.fn.extend({on:function(a,b,c,d){return ra(this,a,b,c,d)},one:function(a,b,c,d){return ra(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return!1!==b&&"function"!=typeof b||(c=b,b=void 0),!1===c&&(c=pa),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return n.event.trigger(a,b,c,!0)}});var sa=/ jQuery\d+="(?:null|\d+)"/g,ta=new RegExp("<(?:"+aa+")[\\s/>]","i"),ua=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,va=/<script|<style|<link/i,wa=/checked\s*(?:[^=]|=\s*.checked.)/i,xa=/^true\/(.*)/,ya=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,za=ba(d),Aa=za.appendChild(d.createElement("div"));function Ba(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function Ca(a){return a.type=(null!==n.find.attr(a,"type"))+"/"+a.type,a}function Da(a){var b=xa.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ea(a,b){if(1===b.nodeType&&n.hasData(a)){var c,d,e,f=n._data(a),g=n._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)n.event.add(b,c,h[c][d])}g.data&&(g.data=n.extend({},g.data))}}function Fa(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!l.noCloneEvent&&b[n.expando]){e=n._data(b);for(d in e.events)n.removeEvent(b,d,e.handle);b.removeAttribute(n.expando)}"script"===c&&b.text!==a.text?(Ca(b).text=a.text,Da(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),l.html5Clone&&a.innerHTML&&!n.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Y.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}}function Ga(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o>1&&"string"==typeof q&&!l.checkClone&&wa.test(q))return a.each(function(e){var f=a.eq(e);r&&(b[0]=q.call(this,e,f.html())),Ga(f,b,c,d)});if(o&&(k=ia(b,a[0].ownerDocument,!1,a,d),e=k.firstChild,1===k.childNodes.length&&(k=e),e||d)){for(i=n.map(da(k,"script"),Ca),h=i.length;m<o;m++)g=k,m!==p&&(g=n.clone(g,!0,!0),h&&n.merge(i,da(g,"script"))),c.call(a[m],g,m);if(h)for(j=i[i.length-1].ownerDocument,n.map(i,Da),m=0;m<h;m++)g=i[m],$.test(g.type||"")&&!n._data(g,"globalEval")&&n.contains(j,g)&&(g.src?n._evalUrl&&n._evalUrl(g.src):n.globalEval((g.text||g.textContent||g.innerHTML||"").replace(ya,"")));k=e=null}return a}function Ha(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(da(d)),d.parentNode&&(c&&n.contains(d.ownerDocument,d)&&ea(da(d,"script")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(ua,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h,i=n.contains(a.ownerDocument,a);if(l.html5Clone||n.isXMLDoc(a)||!ta.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(Aa.innerHTML=a.outerHTML,Aa.removeChild(f=Aa.firstChild)),!(l.noCloneEvent&&l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(d=da(f),h=da(a),g=0;null!=(e=h[g]);++g)d[g]&&Fa(e,d[g]);if(b)if(c)for(h=h||da(a),d=d||da(f),g=0;null!=(e=h[g]);g++)Ea(e,d[g]);else Ea(a,f);return d=da(f,"script"),d.length>0&&ea(d,!i&&da(a,"script")),d=h=e=null,f},cleanData:function(a,b){for(var d,e,f,g,h=0,i=n.expando,j=n.cache,k=l.attributes,m=n.event.special;null!=(d=a[h]);h++)if((b||L(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)m[e]?n.event.remove(d,e):n.removeEvent(d,e,g.handle);j[f]&&(delete j[f],k||void 0===d.removeAttribute?d[i]=void 0:d.removeAttribute(i),c.push(f))}}}),n.fn.extend({domManip:Ga,detach:function(a){return Ha(this,a,!0)},remove:function(a){return Ha(this,a)},text:function(a){return X(this,function(a){return void 0===a?n.text(this):this.empty().append((this[0]&&this[0].ownerDocument||d).createTextNode(a))},null,a,arguments.length)},append:function(){return Ga(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){Ba(this,a).appendChild(a)}})},prepend:function(){return Ga(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ba(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ga(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ga(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&n.cleanData(da(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&n.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return X(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(sa,""):void 0;if("string"==typeof a&&!va.test(a)&&(l.htmlSerialize||!ta.test(a))&&(l.leadingWhitespace||!_.test(a))&&!ca[(Z.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(da(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ga(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)<0&&(n.cleanData(da(this)),c&&c.replaceChild(b,this))},a)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=0,e=[],f=n(a),h=f.length-1;d<=h;d++)c=d===h?this:this.clone(!0),n(f[d])[b](c),g.apply(e,c.get());return this.pushStack(e)}});var Ia,Ja={HTML:"block",BODY:"block"};function Ka(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],"display");return c.detach(),d}function La(a){var b=d,c=Ja[a];return c||(c=Ka(a,b),"none"!==c&&c||(Ia=(Ia||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Ia[0].contentWindow||Ia[0].contentDocument).document,b.write(),b.close(),c=Ka(a,b),Ia.detach()),Ja[a]=c),c}var Ma=/^margin/,Na=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Oa=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Pa=d.documentElement;!function(){var b,c,e,f,g,h,i=d.createElement("div"),j=d.createElement("div");function k(){var k,l,m=d.documentElement;m.appendChild(i),j.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",b=e=h=!1,c=g=!0,a.getComputedStyle&&(l=a.getComputedStyle(j),b="1%"!==(l||{}).top,h="2px"===(l||{}).marginLeft,e="4px"===(l||{width:"4px"}).width,j.style.marginRight="50%",c="4px"===(l||{marginRight:"4px"}).marginRight,k=j.appendChild(d.createElement("div")),k.style.cssText=j.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",k.style.marginRight=k.style.width="0",j.style.width="1px",g=!parseFloat((a.getComputedStyle(k)||{}).marginRight),j.removeChild(k)),j.style.display="none",f=0===j.getClientRects().length,f&&(j.style.display="",j.innerHTML="<table><tr><td></td><td>t</td></tr></table>",j.childNodes[0].style.borderCollapse="separate",k=j.getElementsByTagName("td"),k[0].style.cssText="margin:0;border:0;padding:0;display:none",(f=0===k[0].offsetHeight)&&(k[0].style.display="",k[1].style.display="none",f=0===k[0].offsetHeight)),m.removeChild(i)}j.style&&(j.style.cssText="float:left;opacity:.5",l.opacity="0.5"===j.style.opacity,l.cssFloat=!!j.style.cssFloat,j.style.backgroundClip="content-box",j.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===j.style.backgroundClip,i=d.createElement("div"),i.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",j.innerHTML="",i.appendChild(j),l.boxSizing=""===j.style.boxSizing||""===j.style.MozBoxSizing||""===j.style.WebkitBoxSizing,n.extend(l,{reliableHiddenOffsets:function(){return null==b&&k(),f},boxSizingReliable:function(){return null==b&&k(),e},pixelMarginRight:function(){return null==b&&k(),c},pixelPosition:function(){return null==b&&k(),b},reliableMarginRight:function(){return null==b&&k(),g},reliableMarginLeft:function(){return null==b&&k(),h}}))}();var Qa,Ra,Sa=/^(top|right|bottom|left)$/;a.getComputedStyle?(Qa=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Ra=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Qa(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),c&&!l.pixelMarginRight()&&Na.test(g)&&Ma.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0===g?g:g+""}):Pa.currentStyle&&(Qa=function(a){return a.currentStyle},Ra=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Qa(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Na.test(g)&&!Sa.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Ta(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Ua=/alpha\([^)]*\)/i,Va=/opacity\s*=\s*([^)]*)/i,Wa=/^(none|table(?!-c[ea]).+)/,Xa=new RegExp("^("+S+")(.*)$","i"),Ya={position:"absolute",visibility:"hidden",display:"block"},Za={letterSpacing:"0",fontWeight:"400"},$a=["Webkit","O","Moz","ms"],_a=d.createElement("div").style;function ab(a){if(a in _a)return a;var b=a.charAt(0).toUpperCase()+a.slice(1),c=$a.length;while(c--)if((a=$a[c]+b)in _a)return a}function bb(a,b){for(var c,d,e,f=[],g=0,h=a.length;g<h;g++)d=a[g],d.style&&(f[g]=n._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=n._data(d,"olddisplay",La(d.nodeName)))):(e=V(d),(c&&"none"!==c||!e)&&n._data(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;g<h;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function cb(a,b,c){var d=Xa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function db(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;f<4;f+=2)"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)));return g}function eb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Qa(a),g=l.boxSizing&&"border-box"===n.css(a,"boxSizing",!1,f);if(e<=0||null==e){if(e=Ra(a,b,f),(e<0||null==e)&&(e=a.style[b]),Na.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+db(a,b,c||(g?"border":"content"),d,f)+"px"}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Ra(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:l.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;if(b=n.cssProps[h]||(n.cssProps[h]=ab(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=T.exec(c))&&e[1]&&(c=W(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(n.cssNumber[h]?"":"px")),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=ab(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Ra(a,b,d)),"normal"===f&&b in Za&&(f=Za[b]),""===c||c?(e=parseFloat(f),!0===c||isFinite(e)?e||0:f):f}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){if(c)return Wa.test(n.css(a,"display"))&&0===a.offsetWidth?Oa(a,Ya,function(){return eb(a,b,d)}):eb(a,b,d)},set:function(a,c,d){var e=d&&Qa(a);return cb(a,c,d?db(a,b,d,l.boxSizing&&"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),l.opacity||(n.cssHooks.opacity={get:function(a,b){return Va.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=n.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===n.trim(f.replace(Ua,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Ua.test(f)?f.replace(Ua,e):f+" "+e)}}),n.cssHooks.marginRight=Ta(l.reliableMarginRight,function(a,b){if(b)return Oa(a,{display:"inline-block"},Ra,[a,"marginRight"])}),n.cssHooks.marginLeft=Ta(l.reliableMarginLeft,function(a,b){if(b)return(parseFloat(Ra(a,"marginLeft"))||(n.contains(a.ownerDocument,a)?a.getBoundingClientRect().left-Oa(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}):0))+"px"}),n.each({
margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+U[d]+b]=f[d]||f[d-2]||f[0];return e}},Ma.test(a)||(n.cssHooks[a+b].set=cb)}),n.fn.extend({css:function(a,b){return X(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Qa(a),e=b.length;g<e;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return bb(this,!0)},hide:function(){return bb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}});function fb(a,b,c,d,e){return new fb.prototype.init(a,b,c,d,e)}n.Tween=fb,fb.prototype={constructor:fb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=fb.propHooks[this.prop];return a&&a.get?a.get(this):fb.propHooks._default.get(this)},run:function(a){var b,c=fb.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):fb.propHooks._default.set(this),this}},fb.prototype.init.prototype=fb.prototype,fb.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},fb.propHooks.scrollTop=fb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},n.fx=fb.prototype.init,n.fx.step={};var gb,hb,ib=/^(?:toggle|show|hide)$/,jb=/queueHooks$/;function kb(){return a.setTimeout(function(){gb=void 0}),gb=n.now()}function lb(a,b){var c,d={height:a},e=0;for(b=b?1:0;e<4;e+=2-b)c=U[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function mb(a,b,c){for(var d,e=(pb.tweeners[b]||[]).concat(pb.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function nb(a,b,c){var d,e,f,g,h,i,j,k,m=this,o={},p=a.style,q=a.nodeType&&V(a),r=n._data(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=n.css(a,"display"),"inline"===(k="none"===j?n._data(a,"olddisplay")||La(a.nodeName):j)&&"none"===n.css(a,"float")&&(l.inlineBlockNeedsLayout&&"inline"!==La(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",l.shrinkWrapBlocks()||m.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ib.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(o))"inline"===("none"===j?La(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=n._data(a,"fxshow",{}),f&&(r.hidden=!q),q?n(a).show():m.done(function(){n(a).hide()}),m.done(function(){var b;n._removeData(a,"fxshow");for(b in o)n.style(a,b,o[b])});for(d in o)g=mb(q?r[d]:0,d,m),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function ob(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),(g=n.cssHooks[d])&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function pb(a,b,c){var d,e,f=0,g=pb.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=gb||kb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:gb||kb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(ob(k,j.opts.specialEasing);f<g;f++)if(d=pb.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)&&(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,mb,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(pb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return W(c.elem,a,T.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.match(F);for(var c,d=0,e=a.length;d<e;d++)c=a[d],pb.tweeners[c]=pb.tweeners[c]||[],pb.tweeners[c].unshift(b)},prefilters:[nb],prefilter:function(a,b){b?pb.prefilters.unshift(a):pb.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,null!=d.queue&&!0!==d.queue||(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=pb(this,n.extend({},a),f);(e||n._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||!1===f.queue?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=n._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&jb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||n.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b,c=n._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(lb(b,!0),a,d,e)}}),n.each({slideDown:lb("show"),slideUp:lb("hide"),slideToggle:lb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=n.timers,c=0;for(gb=n.now();c<b.length;c++)(a=b[c])()||b[c]!==a||b.splice(c--,1);b.length||n.fx.stop(),gb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){hb||(hb=a.setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){a.clearInterval(hb),hb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(b,c){return b=n.fx?n.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a,b=d.createElement("input"),c=d.createElement("div"),e=d.createElement("select"),f=e.appendChild(d.createElement("option"));c=d.createElement("div"),c.setAttribute("className","t"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=c.getElementsByTagName("a")[0],b.setAttribute("type","checkbox"),c.appendChild(b),a=c.getElementsByTagName("a")[0],a.style.cssText="top:1px",l.getSetAttribute="t"!==c.className,l.style=/top/.test(a.getAttribute("style")),l.hrefNormalized="/a"===a.getAttribute("href"),l.checkOn=!!b.value,l.optSelected=f.selected,l.enctype=!!d.createElement("form").enctype,e.disabled=!0,l.optDisabled=!f.disabled,b=d.createElement("input"),b.setAttribute("value",""),l.input=""===b.getAttribute("value"),b.value="t",b.setAttribute("type","radio"),l.radioValue="t"===b.value}();var qb=/\r/g,rb=/[\x20\t\r\n\f]+/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),(b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()])&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return(b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(qb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a)).replace(rb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(c=d[i],(c.selected||i===e)&&(l.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)if(d=e[g],n.inArray(n.valHooks.option.get(d),f)>-1)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){if(n.isArray(b))return a.checked=n.inArray(n(a).val(),b)>-1}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var sb,tb,ub=n.expr.attrHandle,vb=/^(?:checked|selected)$/i,wb=l.getSetAttribute,xb=l.input;n.fn.extend({attr:function(a,b){return X(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return void 0===a.getAttribute?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?tb:sb)),void 0!==c?null===c?void n.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(F);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)?xb&&wb||!vb.test(c)?a[d]=!1:a[n.camelCase("default-"+c)]=a[d]=!1:n.attr(a,c,""),a.removeAttribute(wb?c:d)}}),tb={set:function(a,b,c){return!1===b?n.removeAttr(a,c):xb&&wb||!vb.test(c)?a.setAttribute(!wb&&n.propFix[c]||c,c):a[n.camelCase("default-"+c)]=a[c]=!0,c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ub[b]||n.find.attr;xb&&wb||!vb.test(b)?ub[b]=function(a,b,d){var e,f;return d||(f=ub[b],ub[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,ub[b]=f),e}:ub[b]=function(a,b,c){if(!c)return a[n.camelCase("default-"+b)]?b.toLowerCase():null}}),xb&&wb||(n.attrHooks.value={set:function(a,b,c){if(!n.nodeName(a,"input"))return sb&&sb.set(a,b,c);a.defaultValue=b}}),wb||(sb={set:function(a,b,c){var d=a.getAttributeNode(c);if(d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c))return b}},ub.id=ub.name=ub.coords=function(a,b,c){var d;if(!c)return(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},n.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);if(c&&c.specified)return c.value},set:sb.set},n.attrHooks.contenteditable={set:function(a,b,c){sb.set(a,""!==b&&b,c)}},n.each(["width","height"],function(a,b){n.attrHooks[b]={set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}}})),l.style||(n.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var yb=/^(?:input|select|textarea|button|object)$/i,zb=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return X(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return a=n.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&n.isXMLDoc(a)||(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):yb.test(a.nodeName)||zb.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),l.hrefNormalized||n.each(["href","src"],function(a,b){n.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this}),l.enctype||(n.propFix.enctype="encoding");var Ab=/[\t\r\n\f]/g;function Bb(a){return n.attr(a,"class")||""}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,Bb(this)))});if("string"==typeof a&&a){b=a.match(F)||[];while(c=this[i++])if(e=Bb(c),d=1===c.nodeType&&(" "+e+" ").replace(Ab," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=n.trim(d),e!==h&&n.attr(c,"class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,Bb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(F)||[];while(c=this[i++])if(e=Bb(c),d=1===c.nodeType&&(" "+e+" ").replace(Ab," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=n.trim(d),e!==h&&n.attr(c,"class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,Bb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=n(this),f=a.match(F)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=Bb(this),b&&n._data(this,"__className__",b),n.attr(this,"class",b||!1===a?"":n._data(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+Bb(c)+" ").replace(Ab," ").indexOf(b)>-1)return!0;return!1}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var Cb=a.location,Db=n.now(),Eb=/\?/,Fb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;n.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=n.trim(b+"");return e&&!n.trim(e.replace(Fb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():n.error("Invalid JSON: "+b)},n.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new a.DOMParser,c=d.parseFromString(b,"text/xml")):(c=new a.ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var Gb=/#.*$/,Hb=/([?&])_=[^&]*/,Ib=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Jb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Kb=/^(?:GET|HEAD)$/,Lb=/^\/\//,Mb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Nb={},Ob={},Pb="*/".concat("*"),Qb=Cb.href,Rb=Mb.exec(Qb.toLowerCase())||[];function Sb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(F)||[];if(n.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Tb(a,b,c,d){var e={},f=a===Ob;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Ub(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&n.extend(!0,a,c),a}function Vb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}if(f)return f!==i[0]&&i.unshift(f),c[f]}function Wb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(!(g=j[i+" "+f]||j["* "+f]))for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){!0===g?g=j[e]:!0!==j[e]&&(f=h[0],k.unshift(h[1]));break}if(!0!==g)if(g&&a.throws)b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Qb,type:"GET",isLocal:Jb.test(Rb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Pb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Ub(Ub(a,n.ajaxSettings),b):Ub(n.ajaxSettings,a)},ajaxPrefilter:Sb(Nb),ajaxTransport:Sb(Ob),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var d,e,f,g,h,i,j,k,l=n.ajaxSetup({},c),m=l.context||l,o=l.context&&(m.nodeType||m.jquery)?n(m):n.event,p=n.Deferred(),q=n.Callbacks("once memory"),r=l.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!k){k={};while(b=Ib.exec(g))k[b[1].toLowerCase()]=b[2]}b=k[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(u<2)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return j&&j.abort(b),x(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,l.url=((b||l.url||Qb)+"").replace(Gb,"").replace(Lb,Rb[1]+"//"),l.type=c.method||c.type||l.method||l.type,l.dataTypes=n.trim(l.dataType||"*").toLowerCase().match(F)||[""],null==l.crossDomain&&(d=Mb.exec(l.url.toLowerCase()),l.crossDomain=!(!d||d[1]===Rb[1]&&d[2]===Rb[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(Rb[3]||("http:"===Rb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=n.param(l.data,l.traditional)),Tb(Nb,l,c,w),2===u)return w;i=n.event&&l.global,i&&0==n.active++&&n.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Kb.test(l.type),f=l.url,l.hasContent||(l.data&&(f=l.url+=(Eb.test(f)?"&":"?")+l.data,delete l.data),!1===l.cache&&(l.url=Hb.test(f)?f.replace(Hb,"$1_="+Db++):f+(Eb.test(f)?"&":"?")+"_="+Db++)),l.ifModified&&(n.lastModified[f]&&w.setRequestHeader("If-Modified-Since",n.lastModified[f]),n.etag[f]&&w.setRequestHeader("If-None-Match",n.etag[f])),(l.data&&l.hasContent&&!1!==l.contentType||c.contentType)&&w.setRequestHeader("Content-Type",l.contentType),w.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Pb+"; q=0.01":""):l.accepts["*"]);for(e in l.headers)w.setRequestHeader(e,l.headers[e]);if(l.beforeSend&&(!1===l.beforeSend.call(m,w,l)||2===u))return w.abort();v="abort";for(e in{success:1,error:1,complete:1})w[e](l[e]);if(j=Tb(Ob,l,c,w)){if(w.readyState=1,i&&o.trigger("ajaxSend",[w,l]),2===u)return w;l.async&&l.timeout>0&&(h=a.setTimeout(function(){w.abort("timeout")},l.timeout));try{u=1,j.send(s,x)}catch(y){if(!(u<2))throw y;x(-1,y)}}else x(-1,"No Transport");function x(b,c,d,e){var k,s,t,v,x,y=c;2!==u&&(u=2,h&&a.clearTimeout(h),j=void 0,g=e||"",w.readyState=b>0?4:0,k=b>=200&&b<300||304===b,d&&(v=Vb(l,w,d)),v=Wb(l,v,w,k),k?(l.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(n.lastModified[f]=x),(x=w.getResponseHeader("etag"))&&(n.etag[f]=x)),204===b||"HEAD"===l.type?y="nocontent":304===b?y="notmodified":(y=v.state,s=v.data,t=v.error,k=!t)):(t=y,!b&&y||(y="error",b<0&&(b=0))),w.status=b,w.statusText=(c||y)+"",k?p.resolveWith(m,[s,y,w]):p.rejectWith(m,[w,y,t]),w.statusCode(r),r=void 0,i&&o.trigger(k?"ajaxSuccess":"ajaxError",[w,l,k?s:t]),q.fireWith(m,[w,y]),i&&(o.trigger("ajaxComplete",[w,l]),--n.active||n.event.trigger("ajaxStop")))}return w},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)&&a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},n.fn.extend({wrapAll:function(a){if(n.isFunction(a))return this.each(function(b){n(this).wrapAll(a.call(this,b))});if(this[0]){var b=n(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}});function Xb(a){return a.style&&a.style.display||n.css(a,"display")}function Yb(a){if(!n.contains(a.ownerDocument||d,a))return!0;while(a&&1===a.nodeType){if("none"===Xb(a)||"hidden"===a.type)return!0;a=a.parentNode}return!1}n.expr.filters.hidden=function(a){return l.reliableHiddenOffsets()?a.offsetWidth<=0&&a.offsetHeight<=0&&!a.getClientRects().length:Yb(a)},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var Zb=/%20/g,$b=/\[\]$/,_b=/\r?\n/g,ac=/^(?:submit|button|image|reset|file)$/i,bc=/^(?:input|select|textarea|keygen)/i;function cc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||$b.test(a)?d(a,e):cc(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)cc(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)cc(c,a[c],b,e);return d.join("&").replace(Zb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&bc.test(this.nodeName)&&!ac.test(a)&&(this.checked||!Y.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(_b,"\r\n")}}):{name:b.name,value:c.replace(_b,"\r\n")}}).get()}}),n.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return this.isLocal?hc():d.documentMode>8?gc():/^(get|post|head|put|delete|options)$/i.test(this.type)&&gc()||hc()}:gc;var dc=0,ec={},fc=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in ec)ec[a](void 0,!0)}),l.cors=!!fc&&"withCredentials"in fc,(fc=l.ajax=!!fc)&&n.ajaxTransport(function(b){if(!b.crossDomain||l.cors){var c;return{send:function(d,e){var f,g=b.xhr(),h=++dc;if(g.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(f in b.xhrFields)g[f]=b.xhrFields[f];b.mimeType&&g.overrideMimeType&&g.overrideMimeType(b.mimeType),b.crossDomain||d["X-Requested-With"]||(d["X-Requested-With"]="XMLHttpRequest");for(f in d)void 0!==d[f]&&g.setRequestHeader(f,d[f]+"");g.send(b.hasContent&&b.data||null),c=function(a,d){var f,i,j;if(c&&(d||4===g.readyState))if(delete ec[h],c=void 0,g.onreadystatechange=n.noop,d)4!==g.readyState&&g.abort();else{j={},f=g.status,"string"==typeof g.responseText&&(j.text=g.responseText);try{i=g.statusText}catch(k){i=""}f||!b.isLocal||b.crossDomain?1223===f&&(f=204):f=j.text?200:404}j&&e(f,i,j,g.getAllResponseHeaders())},b.async?4===g.readyState?a.setTimeout(c):g.onreadystatechange=ec[h]=c:c()},abort:function(){c&&c(void 0,!0)}}}});function gc(){try{return new a.XMLHttpRequest}catch(b){}}function hc(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=d.head||n("head")[0]||d.documentElement;return{send:function(e,f){b=d.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||f(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var ic=[],jc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ic.pop()||n.expando+"_"+Db++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=!1!==b.jsonp&&(jc.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&jc.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(jc,"$1"+e):!1!==b.jsonp&&(b.url+=(Eb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,ic.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||d;var e=x.exec(a),f=!c&&[];return e?[b.createElement(e[1])]:(e=ia([a],b,f),f&&f.length&&n(f).remove(),n.merge([],e.childNodes))};var kc=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&kc)return kc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=n.trim(a.slice(h,a.length)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function lc(a){return n.isWindow(a)?a:9===a.nodeType&&(a.defaultView||a.parentWindow)}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&n.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,n.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,n.contains(b,e)?(void 0!==e.getBoundingClientRect&&(d=e.getBoundingClientRect()),c=lc(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===n.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(c=a.offset()),c.top+=n.css(a[0],"borderTopWidth",!0),c.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-n.css(d,"marginTop",!0),left:b.left-c.left-n.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Pa})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);n.fn[a]=function(d){return X(this,function(a,d,e){var f=lc(a);if(void 0===e)return f?b in f?f[b]:f.document.documentElement[d]:a[d];f?f.scrollTo(c?n(f).scrollLeft():e,c?e:n(f).scrollTop()):a[d]=e},a,d,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Ta(l.pixelPosition,function(a,c){if(c)return c=Ra(a,b),Na.test(c)?n(a).position()[b]+"px":c})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(!0===d||!0===e?"margin":"border")
;return X(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var mc=a.jQuery,nc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=nc),b&&a.jQuery===n&&(a.jQuery=mc),n},b||(a.jQuery=a.$=n),n});
jQuery.noConflict();
/*! This file is auto-generated */
(function(){function r(){}var n=this,t=n._,e=Array.prototype,o=Object.prototype,u=Function.prototype,i=e.push,c=e.slice,s=o.toString,a=o.hasOwnProperty,f=Array.isArray,l=Object.keys,p=u.bind,h=Object.create,v=function(n){return n instanceof v?n:this instanceof v?void(this._wrapped=n):new v(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports._=v):n._=v,v.VERSION="1.8.3";var y=function(u,i,n){if(void 0===i)return u;switch(null==n?3:n){case 1:return function(n){return u.call(i,n)};case 2:return function(n,t){return u.call(i,n,t)};case 3:return function(n,t,r){return u.call(i,n,t,r)};case 4:return function(n,t,r,e){return u.call(i,n,t,r,e)}}return function(){return u.apply(i,arguments)}},d=function(n,t,r){return null==n?v.identity:v.isFunction(n)?y(n,t,r):v.isObject(n)?v.matcher(n):v.property(n)};v.iteratee=function(n,t){return d(n,t,1/0)};function g(c,f){return function(n){var t=arguments.length;if(t<2||null==n)return n;for(var r=1;r<t;r++)for(var e=arguments[r],u=c(e),i=u.length,o=0;o<i;o++){var a=u[o];f&&void 0!==n[a]||(n[a]=e[a])}return n}}function m(n){if(!v.isObject(n))return{};if(h)return h(n);r.prototype=n;var t=new r;return r.prototype=null,t}function b(t){return function(n){return null==n?void 0:n[t]}}var x=Math.pow(2,53)-1,_=b("length"),j=function(n){var t=_(n);return"number"==typeof t&&0<=t&&t<=x};function w(a){return function(n,t,r,e){t=y(t,e,4);var u=!j(n)&&v.keys(n),i=(u||n).length,o=0<a?0:i-1;return arguments.length<3&&(r=n[u?u[o]:o],o+=a),function(n,t,r,e,u,i){for(;0<=u&&u<i;u+=a){var o=e?e[u]:u;r=t(r,n[o],o,n)}return r}(n,t,r,u,o,i)}}v.each=v.forEach=function(n,t,r){var e,u;if(t=y(t,r),j(n))for(e=0,u=n.length;e<u;e++)t(n[e],e,n);else{var i=v.keys(n);for(e=0,u=i.length;e<u;e++)t(n[i[e]],i[e],n)}return n},v.map=v.collect=function(n,t,r){t=d(t,r);for(var e=!j(n)&&v.keys(n),u=(e||n).length,i=Array(u),o=0;o<u;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},v.reduce=v.foldl=v.inject=w(1),v.reduceRight=v.foldr=w(-1),v.find=v.detect=function(n,t,r){var e;if(void 0!==(e=j(n)?v.findIndex(n,t,r):v.findKey(n,t,r))&&-1!==e)return n[e]},v.filter=v.select=function(n,e,t){var u=[];return e=d(e,t),v.each(n,function(n,t,r){e(n,t,r)&&u.push(n)}),u},v.reject=function(n,t,r){return v.filter(n,v.negate(d(t)),r)},v.every=v.all=function(n,t,r){t=d(t,r);for(var e=!j(n)&&v.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},v.some=v.any=function(n,t,r){t=d(t,r);for(var e=!j(n)&&v.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},v.contains=v.includes=v.include=function(n,t,r,e){return j(n)||(n=v.values(n)),"number"==typeof r&&!e||(r=0),0<=v.indexOf(n,t,r)},v.invoke=function(n,r){var e=c.call(arguments,2),u=v.isFunction(r);return v.map(n,function(n){var t=u?r:n[r];return null==t?t:t.apply(n,e)})},v.pluck=function(n,t){return v.map(n,v.property(t))},v.where=function(n,t){return v.filter(n,v.matcher(t))},v.findWhere=function(n,t){return v.find(n,v.matcher(t))},v.max=function(n,e,t){var r,u,i=-1/0,o=-1/0;if(null==e&&null!=n)for(var a=0,c=(n=j(n)?n:v.values(n)).length;a<c;a++)r=n[a],i<r&&(i=r);else e=d(e,t),v.each(n,function(n,t,r){u=e(n,t,r),(o<u||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},v.min=function(n,e,t){var r,u,i=1/0,o=1/0;if(null==e&&null!=n)for(var a=0,c=(n=j(n)?n:v.values(n)).length;a<c;a++)(r=n[a])<i&&(i=r);else e=d(e,t),v.each(n,function(n,t,r){((u=e(n,t,r))<o||u===1/0&&i===1/0)&&(i=n,o=u)});return i},v.shuffle=function(n){for(var t,r=j(n)?n:v.values(n),e=r.length,u=Array(e),i=0;i<e;i++)(t=v.random(0,i))!==i&&(u[i]=u[t]),u[t]=r[i];return u},v.sample=function(n,t,r){return null==t||r?(j(n)||(n=v.values(n)),n[v.random(n.length-1)]):v.shuffle(n).slice(0,Math.max(0,t))},v.sortBy=function(n,e,t){return e=d(e,t),v.pluck(v.map(n,function(n,t,r){return{value:n,index:t,criteria:e(n,t,r)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(e<r||void 0===r)return 1;if(r<e||void 0===e)return-1}return n.index-t.index}),"value")};function A(o){return function(e,u,n){var i={};return u=d(u,n),v.each(e,function(n,t){var r=u(n,t,e);o(i,n,r)}),i}}v.groupBy=A(function(n,t,r){v.has(n,r)?n[r].push(t):n[r]=[t]}),v.indexBy=A(function(n,t,r){n[r]=t}),v.countBy=A(function(n,t,r){v.has(n,r)?n[r]++:n[r]=1}),v.toArray=function(n){return n?v.isArray(n)?c.call(n):j(n)?v.map(n,v.identity):v.values(n):[]},v.size=function(n){return null==n?0:j(n)?n.length:v.keys(n).length},v.partition=function(n,e,t){e=d(e,t);var u=[],i=[];return v.each(n,function(n,t,r){(e(n,t,r)?u:i).push(n)}),[u,i]},v.first=v.head=v.take=function(n,t,r){if(null!=n)return null==t||r?n[0]:v.initial(n,n.length-t)},v.initial=function(n,t,r){return c.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},v.last=function(n,t,r){if(null!=n)return null==t||r?n[n.length-1]:v.rest(n,Math.max(0,n.length-t))},v.rest=v.tail=v.drop=function(n,t,r){return c.call(n,null==t||r?1:t)},v.compact=function(n){return v.filter(n,v.identity)};var O=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=_(n);o<a;o++){var c=n[o];if(j(c)&&(v.isArray(c)||v.isArguments(c))){t||(c=O(c,t,r));var f=0,l=c.length;for(u.length+=l;f<l;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};function k(i){return function(n,t,r){t=d(t,r);for(var e=_(n),u=0<i?0:e-1;0<=u&&u<e;u+=i)if(t(n[u],u,n))return u;return-1}}function F(i,o,a){return function(n,t,r){var e=0,u=_(n);if("number"==typeof r)0<i?e=0<=r?r:Math.max(r+u,e):u=0<=r?Math.min(r+1,u):r+u+1;else if(a&&r&&u)return n[r=a(n,t)]===t?r:-1;if(t!=t)return 0<=(r=o(c.call(n,e,u),v.isNaN))?r+e:-1;for(r=0<i?e:u-1;0<=r&&r<u;r+=i)if(n[r]===t)return r;return-1}}v.flatten=function(n,t){return O(n,t,!1)},v.without=function(n){return v.difference(n,c.call(arguments,1))},v.uniq=v.unique=function(n,t,r,e){v.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=d(r,e));for(var u=[],i=[],o=0,a=_(n);o<a;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?v.contains(i,f)||(i.push(f),u.push(c)):v.contains(u,c)||u.push(c)}return u},v.union=function(){return v.uniq(O(arguments,!0,!0))},v.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=_(n);e<u;e++){var i=n[e];if(!v.contains(t,i)){for(var o=1;o<r&&v.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},v.difference=function(n){var t=O(arguments,!0,!0,1);return v.filter(n,function(n){return!v.contains(t,n)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(n){for(var t=n&&v.max(n,_).length||0,r=Array(t),e=0;e<t;e++)r[e]=v.pluck(n,e);return r},v.object=function(n,t){for(var r={},e=0,u=_(n);e<u;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},v.findIndex=k(1),v.findLastIndex=k(-1),v.sortedIndex=function(n,t,r,e){for(var u=(r=d(r,e,1))(t),i=0,o=_(n);i<o;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},v.indexOf=F(1,v.findIndex,v.sortedIndex),v.lastIndexOf=F(-1,v.findLastIndex),v.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;i<e;i++,n+=r)u[i]=n;return u};function S(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=m(n.prototype),o=n.apply(i,u);return v.isObject(o)?o:i}v.bind=function(n,t){if(p&&n.bind===p)return p.apply(n,c.call(arguments,1));if(!v.isFunction(n))throw new TypeError("Bind must be called on a function");var r=c.call(arguments,2),e=function(){return S(n,e,t,this,r.concat(c.call(arguments)))};return e},v.partial=function(u){var i=c.call(arguments,1),o=function(){for(var n=0,t=i.length,r=Array(t),e=0;e<t;e++)r[e]=i[e]===v?arguments[n++]:i[e];for(;n<arguments.length;)r.push(arguments[n++]);return S(u,o,this,this,r)};return o},v.bindAll=function(n){var t,r,e=arguments.length;if(e<=1)throw new Error("bindAll must be passed function names");for(t=1;t<e;t++)n[r=arguments[t]]=v.bind(n[r],n);return n},v.memoize=function(e,u){var i=function(n){var t=i.cache,r=""+(u?u.apply(this,arguments):n);return v.has(t,r)||(t[r]=e.apply(this,arguments)),t[r]};return i.cache={},i},v.delay=function(n,t){var r=c.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},v.defer=v.partial(v.delay,v,1),v.throttle=function(r,e,u){var i,o,a,c=null,f=0;u=u||{};function l(){f=!1===u.leading?0:v.now(),c=null,a=r.apply(i,o),c||(i=o=null)}return function(){var n=v.now();f||!1!==u.leading||(f=n);var t=e-(n-f);return i=this,o=arguments,t<=0||e<t?(c&&(clearTimeout(c),c=null),f=n,a=r.apply(i,o),c||(i=o=null)):c||!1===u.trailing||(c=setTimeout(l,t)),a}},v.debounce=function(t,r,e){var u,i,o,a,c,f=function(){var n=v.now()-a;n<r&&0<=n?u=setTimeout(f,r-n):(u=null,e||(c=t.apply(o,i),u||(o=i=null)))};return function(){o=this,i=arguments,a=v.now();var n=e&&!u;return u=u||setTimeout(f,r),n&&(c=t.apply(o,i),o=i=null),c}},v.wrap=function(n,t){return v.partial(t,n)},v.negate=function(n){return function(){return!n.apply(this,arguments)}},v.compose=function(){var r=arguments,e=r.length-1;return function(){for(var n=e,t=r[e].apply(this,arguments);n--;)t=r[n].call(this,t);return t}},v.after=function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}},v.before=function(n,t){var r;return function(){return 0<--n&&(r=t.apply(this,arguments)),n<=1&&(t=null),r}},v.once=v.partial(v.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function I(n,t){var r=M.length,e=n.constructor,u=v.isFunction(e)&&e.prototype||o,i="constructor";for(v.has(n,i)&&!v.contains(t,i)&&t.push(i);r--;)(i=M[r])in n&&n[i]!==u[i]&&!v.contains(t,i)&&t.push(i)}v.keys=function(n){if(!v.isObject(n))return[];if(l)return l(n);var t=[];for(var r in n)v.has(n,r)&&t.push(r);return E&&I(n,t),t},v.allKeys=function(n){if(!v.isObject(n))return[];var t=[];for(var r in n)t.push(r);return E&&I(n,t),t},v.values=function(n){for(var t=v.keys(n),r=t.length,e=Array(r),u=0;u<r;u++)e[u]=n[t[u]];return e},v.mapObject=function(n,t,r){t=d(t,r);for(var e,u=v.keys(n),i=u.length,o={},a=0;a<i;a++)o[e=u[a]]=t(n[e],e,n);return o},v.pairs=function(n){for(var t=v.keys(n),r=t.length,e=Array(r),u=0;u<r;u++)e[u]=[t[u],n[t[u]]];return e},v.invert=function(n){for(var t={},r=v.keys(n),e=0,u=r.length;e<u;e++)t[n[r[e]]]=r[e];return t},v.functions=v.methods=function(n){var t=[];for(var r in n)v.isFunction(n[r])&&t.push(r);return t.sort()},v.extend=g(v.allKeys),v.extendOwn=v.assign=g(v.keys),v.findKey=function(n,t,r){t=d(t,r);for(var e,u=v.keys(n),i=0,o=u.length;i<o;i++)if(t(n[e=u[i]],e,n))return e},v.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;v.isFunction(t)?(u=v.allKeys(o),e=y(t,r)):(u=O(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;a<c;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},v.omit=function(n,t,r){if(v.isFunction(t))t=v.negate(t);else{var e=v.map(O(arguments,!1,!1,1),String);t=function(n,t){return!v.contains(e,t)}}return v.pick(n,t,r)},v.defaults=g(v.allKeys,!0),v.create=function(n,t){var r=m(n);return t&&v.extendOwn(r,t),r},v.clone=function(n){return v.isObject(n)?v.isArray(n)?n.slice():v.extend({},n):n},v.tap=function(n,t){return t(n),n},v.isMatch=function(n,t){var r=v.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;i<e;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof v&&(n=n._wrapped),t instanceof v&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!=+n?+t!=+t:0==+n?1/+n==1/t:+n==+t;case"[object Date]":case"[object Boolean]":return+n==+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(v.isFunction(o)&&o instanceof o&&v.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}e=e||[];for(var c=(r=r||[]).length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if((c=n.length)!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=v.keys(n);if(c=l.length,v.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!v.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};v.isEqual=function(n,t){return N(n,t)},v.isEmpty=function(n){return null==n||(j(n)&&(v.isArray(n)||v.isString(n)||v.isArguments(n))?0===n.length:0===v.keys(n).length)},v.isElement=function(n){return!(!n||1!==n.nodeType)},v.isArray=f||function(n){return"[object Array]"===s.call(n)},v.isObject=function(n){var t=typeof n;return"function"==t||"object"==t&&!!n},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){v["is"+t]=function(n){return s.call(n)==="[object "+t+"]"}}),v.isArguments(arguments)||(v.isArguments=function(n){return v.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(n){return"function"==typeof n||!1}),v.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},v.isNaN=function(n){return v.isNumber(n)&&n!==+n},v.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"===s.call(n)},v.isNull=function(n){return null===n},v.isUndefined=function(n){return void 0===n},v.has=function(n,t){return null!=n&&a.call(n,t)},v.noConflict=function(){return n._=t,this},v.identity=function(n){return n},v.constant=function(n){return function(){return n}},v.noop=function(){},v.property=b,v.propertyOf=function(t){return null==t?function(){}:function(n){return t[n]}},v.matcher=v.matches=function(t){return t=v.extendOwn({},t),function(n){return v.isMatch(n,t)}},v.times=function(n,t,r){var e=Array(Math.max(0,n));t=y(t,r,1);for(var u=0;u<n;u++)e[u]=t(u);return e},v.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},v.now=Date.now||function(){return(new Date).getTime()};function B(t){function r(n){return t[n]}var n="(?:"+v.keys(t).join("|")+")",e=RegExp(n),u=RegExp(n,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,r):n}}var T={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},R=v.invert(T);v.escape=B(T),v.unescape=B(R),v.result=function(n,t,r){var e=null==n?void 0:n[t];return void 0===e&&(e=r),v.isFunction(e)?e.call(n):e};var q=0;v.uniqueId=function(n){var t=++q+"";return n?n+t:t},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};function K(n){return"\\"+D[n]}var z=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\u2028|\u2029/g;v.template=function(i,n,t){!n&&t&&(n=t),n=v.defaults({},n,v.templateSettings);var r=RegExp([(n.escape||z).source,(n.interpolate||z).source,(n.evaluate||z).source].join("|")+"|$","g"),o=0,a="__p+='";i.replace(r,function(n,t,r,e,u){return a+=i.slice(o,u).replace(L,K),o=u+n.length,t?a+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":e&&(a+="';\n"+e+"\n__p+='"),n}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var e=new Function(n.variable||"obj","_",a)}catch(n){throw n.source=a,n}function u(n){return e.call(this,n,v)}var c=n.variable||"obj";return u.source="function("+c+"){\n"+a+"}",u},v.chain=function(n){var t=v(n);return t._chain=!0,t};function P(n,t){return n._chain?v(t).chain():t}v.mixin=function(r){v.each(v.functions(r),function(n){var t=v[n]=r[n];v.prototype[n]=function(){var n=[this._wrapped];return i.apply(n,arguments),P(this,t.apply(v,n))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var r=e[t];v.prototype[t]=function(){var n=this._wrapped;return r.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],P(this,n)}}),v.each(["concat","join","slice"],function(n){var t=e[n];v.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}).call(this);
/*! This file is auto-generated */
!function(n){var s="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(t,e,i){s.Backbone=n(s,i,t,e)});else if("undefined"!=typeof exports){var t,e=require("underscore");try{t=require("jquery")}catch(t){}n(s,exports,e,t)}else s.Backbone=n(s,{},s._,s.jQuery||s.Zepto||s.ender||s.$)}(function(t,h,x,e){var i=t.Backbone,o=Array.prototype.slice;h.VERSION="1.4.0",h.$=e,h.noConflict=function(){return t.Backbone=i,this},h.emulateHTTP=!1,h.emulateJSON=!1;var a,n=h.Events={},u=/\s+/,l=function(t,e,i,n,s){var r,o=0;if(i&&"object"==typeof i){void 0!==n&&"context"in s&&void 0===s.context&&(s.context=n);for(r=x.keys(i);o<r.length;o++)e=l(t,e,r[o],i[r[o]],s)}else if(i&&u.test(i))for(r=i.split(u);o<r.length;o++)e=t(e,r[o],n,s);else e=t(e,i,n,s);return e};n.on=function(t,e,i){this._events=l(s,this._events||{},t,e,{context:i,ctx:this,listening:a}),a&&(((this._listeners||(this._listeners={}))[a.id]=a).interop=!1);return this},n.listenTo=function(t,e,i){if(!t)return this;var n=t._listenId||(t._listenId=x.uniqueId("l")),s=this._listeningTo||(this._listeningTo={}),r=a=s[n];r||(this._listenId||(this._listenId=x.uniqueId("l")),r=a=s[n]=new g(this,t));var o=c(t,e,i,this);if(a=void 0,o)throw o;return r.interop&&r.on(e,i),this};var s=function(t,e,i,n){if(i){var s=t[e]||(t[e]=[]),r=n.context,o=n.ctx,a=n.listening;a&&a.count++,s.push({callback:i,context:r,ctx:r||o,listening:a})}return t},c=function(t,e,i,n){try{t.on(e,i,n)}catch(t){return t}};n.off=function(t,e,i){return this._events&&(this._events=l(r,this._events,t,e,{context:i,listeners:this._listeners})),this},n.stopListening=function(t,e,i){var n=this._listeningTo;if(!n)return this;for(var s=t?[t._listenId]:x.keys(n),r=0;r<s.length;r++){var o=n[s[r]];if(!o)break;o.obj.off(e,i,this),o.interop&&o.off(e,i)}return x.isEmpty(n)&&(this._listeningTo=void 0),this};var r=function(t,e,i,n){if(t){var s,r=n.context,o=n.listeners,a=0;if(e||r||i){for(s=e?[e]:x.keys(t);a<s.length;a++){var h=t[e=s[a]];if(!h)break;for(var u=[],l=0;l<h.length;l++){var c=h[l];if(i&&i!==c.callback&&i!==c.callback._callback||r&&r!==c.context)u.push(c);else{var d=c.listening;d&&d.off(e,i)}}u.length?t[e]=u:delete t[e]}return t}for(s=x.keys(o);a<s.length;a++)o[s[a]].cleanup()}};n.once=function(t,e,i){var n=l(d,{},t,e,this.off.bind(this));return"string"==typeof t&&null==i&&(e=void 0),this.on(n,e,i)},n.listenToOnce=function(t,e,i){var n=l(d,{},e,i,this.stopListening.bind(this,t));return this.listenTo(t,n)};var d=function(t,e,i,n){if(i){var s=t[e]=x.once(function(){n(e,s),i.apply(this,arguments)});s._callback=i}return t};n.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;n<e;n++)i[n]=arguments[n+1];return l(f,this._events,t,void 0,i),this};var f=function(t,e,i,n){if(t){var s=t[e],r=t.all;s&&r&&(r=r.slice()),s&&p(s,n),r&&p(r,[e].concat(n))}return t},p=function(t,e){var i,n=-1,s=t.length,r=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,o);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,o,a);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}},g=function(t,e){this.id=t._listenId,this.listener=t,this.obj=e,this.interop=!0,this.count=0,this._events=void 0};g.prototype.on=n.on,g.prototype.off=function(t,e){(this.interop?(this._events=l(r,this._events,t,e,{context:void 0,listeners:void 0}),this._events):(this.count--,0!==this.count))||this.cleanup()},g.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},n.bind=n.on,n.unbind=n.off,x.extend(h,n);var v=h.Model=function(t,e){var i=t||{};e=e||{},this.preinitialize.apply(this,arguments),this.cid=x.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{});var n=x.result(this,"defaults");i=x.defaults(x.extend({},n,i),n),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};x.extend(v.prototype,n,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(t){return x.clone(this.attributes)},sync:function(){return h.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return x.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!x.iteratee(t,this)(this.attributes)},set:function(t,e,i){if(null==t)return this;var n;if("object"==typeof t?(n=t,i=e):(n={})[t]=e,i=i||{},!this._validate(n,i))return!1;var s=i.unset,r=i.silent,o=[],a=this._changing;this._changing=!0,a||(this._previousAttributes=x.clone(this.attributes),this.changed={});var h=this.attributes,u=this.changed,l=this._previousAttributes;for(var c in n)e=n[c],x.isEqual(h[c],e)||o.push(c),x.isEqual(l[c],e)?delete u[c]:u[c]=e,s?delete h[c]:h[c]=e;if(this.idAttribute in n&&(this.id=this.get(this.idAttribute)),!r){o.length&&(this._pending=i);for(var d=0;d<o.length;d++)this.trigger("change:"+o[d],this,h[o[d]],i)}if(a)return this;if(!r)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,x.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,x.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!x.isEmpty(this.changed):x.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&x.clone(this.changed);var e,i=this._changing?this._previousAttributes:this.attributes,n={};for(var s in t){var r=t[s];x.isEqual(i[s],r)||(n[s]=r,e=!0)}return!!e&&n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return x.clone(this._previousAttributes)},fetch:function(i){i=x.extend({parse:!0},i);var n=this,s=i.success;return i.success=function(t){var e=i.parse?n.parse(t,i):t;if(!n.set(e,i))return!1;s&&s.call(i.context,n,t,i),n.trigger("sync",n,t,i)},L(this,i),this.sync("read",this,i)},save:function(t,e,i){var n;null==t||"object"==typeof t?(n=t,i=e):(n={})[t]=e;var s=(i=x.extend({validate:!0,parse:!0},i)).wait;if(n&&!s){if(!this.set(n,i))return!1}else if(!this._validate(n,i))return!1;var r=this,o=i.success,a=this.attributes;i.success=function(t){r.attributes=a;var e=i.parse?r.parse(t,i):t;if(s&&(e=x.extend({},n,e)),e&&!r.set(e,i))return!1;o&&o.call(i.context,r,t,i),r.trigger("sync",r,t,i)},L(this,i),n&&s&&(this.attributes=x.extend({},a,n));var h=this.isNew()?"create":i.patch?"patch":"update";"patch"!=h||i.attrs||(i.attrs=n);var u=this.sync(h,this,i);return this.attributes=a,u},destroy:function(e){e=e?x.clone(e):{};function i(){n.stopListening(),n.trigger("destroy",n,n.collection,e)}var n=this,s=e.success,r=e.wait,t=!(e.success=function(t){r&&i(),s&&s.call(e.context,n,t,e),n.isNew()||n.trigger("sync",n,t,e)});return this.isNew()?x.defer(e.success):(L(this,e),t=this.sync("delete",this,e)),r||i(),t},url:function(){var t=x.result(this,"urlRoot")||x.result(this.collection,"url")||J();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},x.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=x.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,x.extend(e,{validationError:i})),!1)}});function w(t,e,i){i=Math.min(Math.max(i,0),t.length);var n,s=Array(t.length-i),r=e.length;for(n=0;n<s.length;n++)s[n]=t[n+i];for(n=0;n<r;n++)t[n+i]=e[n];for(n=0;n<s.length;n++)t[n+r+i]=s[n]}var m=h.Collection=function(t,e){e=e||{},this.preinitialize.apply(this,arguments),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,x.extend({silent:!0},e))},E={add:!0,remove:!0,merge:!0},_={add:!0,remove:!1};x.extend(m.prototype,n,{model:v,preinitialize:function(){},initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return h.sync.apply(this,arguments)},add:function(t,e){return this.set(t,x.extend({merge:!1},e,_))},remove:function(t,e){e=x.extend({},e);var i=!x.isArray(t);t=i?[t]:t.slice();var n=this._removeModels(t,e);return!e.silent&&n.length&&(e.changes={added:[],merged:[],removed:n},this.trigger("update",this,e)),i?n[0]:n},set:function(t,e){if(null!=t){(e=x.extend({},E,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var i=!x.isArray(t);t=i?[t]:t.slice();var n=e.at;null!=n&&(n=+n),n>this.length&&(n=this.length),n<0&&(n+=this.length+1);var s,r,o=[],a=[],h=[],u=[],l={},c=e.add,d=e.merge,f=e.remove,p=!1,g=this.comparator&&null==n&&!1!==e.sort,v=x.isString(this.comparator)?this.comparator:null;for(r=0;r<t.length;r++){s=t[r];var m=this.get(s);if(m){if(d&&s!==m){var _=this._isModel(s)?s.attributes:s;e.parse&&(_=m.parse(_,e)),m.set(_,e),h.push(m),g&&!p&&(p=m.hasChanged(v))}l[m.cid]||(l[m.cid]=!0,o.push(m)),t[r]=m}else c&&(s=t[r]=this._prepareModel(s,e))&&(a.push(s),this._addReference(s,e),l[s.cid]=!0,o.push(s))}if(f){for(r=0;r<this.length;r++)l[(s=this.models[r]).cid]||u.push(s);u.length&&this._removeModels(u,e)}var y=!1,b=!g&&c&&f;if(o.length&&b?(y=this.length!==o.length||x.some(this.models,function(t,e){return t!==o[e]}),this.models.length=0,w(this.models,o,0),this.length=this.models.length):a.length&&(g&&(p=!0),w(this.models,a,null==n?this.length:n),this.length=this.models.length),p&&this.sort({silent:!0}),!e.silent){for(r=0;r<a.length;r++)null!=n&&(e.index=n+r),(s=a[r]).trigger("add",s,this,e);(p||y)&&this.trigger("sort",this,e),(a.length||u.length||h.length)&&(e.changes={added:a,removed:u,merged:h},this.trigger("update",this,e))}return i?t[0]:t}},reset:function(t,e){e=e?x.clone(e):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,x.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,x.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,x.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(this._isModel(t)?t.attributes:t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t=t||{};var i=e.length;return x.isFunction(e)&&(e=e.bind(this)),1===i||x.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(i){var n=(i=x.extend({parse:!0},i)).success,s=this;return i.success=function(t){var e=i.reset?"reset":"set";s[e](t,i),n&&n.call(i.context,s,t,i),s.trigger("sync",s,t,i)},L(this,i),this.sync("read",this,i)},create:function(t,e){var n=(e=e?x.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;n||this.add(t,e);var s=this,r=e.success;return e.success=function(t,e,i){n&&s.add(t,i),r&&r.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},values:function(){return new b(this,k)},keys:function(){return new b(this,I)},entries:function(){return new b(this,S)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;var i=new(((e=e?x.clone(e):{}).collection=this).model)(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeModels:function(t,e){for(var i=[],n=0;n<t.length;n++){var s=this.get(t[n]);if(s){var r=this.indexOf(s);this.models.splice(r,1),this.length--,delete this._byId[s.cid];var o=this.modelId(s.attributes);null!=o&&delete this._byId[o],e.silent||(e.index=r,s.trigger("remove",s,this,e)),i.push(s),this._removeReference(s,e)}}return i},_isModel:function(t){return t instanceof v},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if(e){if(("add"===t||"remove"===t)&&i!==this)return;if("destroy"===t&&this.remove(e,n),"change"===t){var s=this.modelId(e.previousAttributes()),r=this.modelId(e.attributes);s!==r&&(null!=s&&delete this._byId[s],null!=r&&(this._byId[r]=e))}}this.trigger.apply(this,arguments)}});var y="function"==typeof Symbol&&Symbol.iterator;y&&(m.prototype[y]=m.prototype.values);var b=function(t,e){this._collection=t,this._kind=e,this._index=0},k=1,I=2,S=3;y&&(b.prototype[y]=function(){return this}),b.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var t,e=this._collection.at(this._index);if(this._index++,this._kind===k)t=e;else{var i=this._collection.modelId(e.attributes);t=this._kind===I?i:[i,e]}return{value:t,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var T=h.View=function(t){this.cid=x.uniqueId("view"),this.preinitialize.apply(this,arguments),x.extend(this,x.pick(t,H)),this._ensureElement(),this.initialize.apply(this,arguments)},P=/^(\S+)\s*(.*)$/,H=["model","collection","el","id","attributes","className","tagName","events"];x.extend(T.prototype,n,{tagName:"div",$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof h.$?t:h.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(!(t=t||x.result(this,"events")))return this;for(var e in this.undelegateEvents(),t){var i=t[e];if(x.isFunction(i)||(i=this[i]),i){var n=e.match(P);this.delegate(n[1],n[2],i.bind(this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(x.result(this,"el"));else{var t=x.extend({},x.result(this,"attributes"));this.id&&(t.id=x.result(this,"id")),this.className&&(t.class=x.result(this,"className")),this.setElement(this._createElement(x.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}});function $(i,n,t,s){x.each(t,function(t,e){n[e]&&(i.prototype[e]=function(n,t,s,r){switch(t){case 1:return function(){return n[s](this[r])};case 2:return function(t){return n[s](this[r],t)};case 3:return function(t,e){return n[s](this[r],A(t,this),e)};case 4:return function(t,e,i){return n[s](this[r],A(t,this),e,i)};default:return function(){var t=o.call(arguments);return t.unshift(this[r]),n[s].apply(n,t)}}}(n,t,e,s))})}var A=function(e,t){return x.isFunction(e)?e:x.isObject(e)&&!t._isModel(e)?C(e):x.isString(e)?function(t){return t.get(e)}:e},C=function(t){var e=x.matches(t);return function(t){return e(t.attributes)}};x.each([[m,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[v,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(t){var i=t[0],e=t[1],n=t[2];i.mixin=function(t){var e=x.reduce(x.functions(t),function(t,e){return t[e]=0,t},{});$(i,t,e,n)},$(i,x,e,n)}),h.sync=function(t,e,n){var i=R[t];x.defaults(n=n||{},{emulateHTTP:h.emulateHTTP,emulateJSON:h.emulateJSON});var s={type:i,dataType:"json"};if(n.url||(s.url=x.result(e,"url")||J()),null!=n.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(n.attrs||e.toJSON(n))),n.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),n.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){s.type="POST",n.emulateJSON&&(s.data._method=i);var r=n.beforeSend;n.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",i),r)return r.apply(this,arguments)}}"GET"===s.type||n.emulateJSON||(s.processData=!1);var o=n.error;n.error=function(t,e,i){n.textStatus=e,n.errorThrown=i,o&&o.call(n.context,t,e,i)};var a=n.xhr=h.ajax(x.extend(s,n));return e.trigger("request",e,a,n),a};var R={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};h.ajax=function(){return h.$.ajax.apply(h.$,arguments)};var M=h.Router=function(t){t=t||{},this.preinitialize.apply(this,arguments),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},N=/\((.*?)\)/g,j=/(\(\?)?:\w+/g,O=/\*\w+/g,U=/[\-{}\[\]+?.,\\\^$|#\s]/g;x.extend(M.prototype,n,{preinitialize:function(){},initialize:function(){},route:function(i,n,s){x.isRegExp(i)||(i=this._routeToRegExp(i)),x.isFunction(n)&&(s=n,n=""),s=s||this[n];var r=this;return h.history.route(i,function(t){var e=r._extractParameters(i,t);!1!==r.execute(s,e,n)&&(r.trigger.apply(r,["route:"+n].concat(e)),r.trigger("route",n,e),h.history.trigger("route",r,n,e))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,e){return h.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=x.result(this,"routes");for(var t,e=x.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(U,"\\$&").replace(N,"(?:$1)?").replace(j,function(t,e){return e?t:"([^/?]+)"}).replace(O,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return x.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var z=h.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},q=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,B=/#.*$/;z.started=!1,x.extend(z.prototype,n,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(q,"")},start:function(t){if(z.started)throw new Error("Backbone.history has already been started");if(z.started=!0,this.options=x.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||7<document.documentMode),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(F,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,n=i.insertBefore(this.iframe,i.firstChild).contentWindow;n.document.open(),n.document.close(),n.location.hash="#"+this.fragment}var s=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?s("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?s("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),z.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),x.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(t,e){if(!z.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;""!==t&&"?"!==t.charAt(0)||(i=i.slice(0,-1)||"/");var n=i+t;t=t.replace(B,"");var s=this.decodeFragment(t);if(this.fragment!==s){if(this.fragment=s,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;e.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),h.history=new z;v.extend=m.extend=M.extend=T.extend=z.extend=function(t,e){var i,n=this;return i=t&&x.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},x.extend(i,n,e),i.prototype=x.create(n.prototype,t),(i.prototype.constructor=i).__super__=n.prototype,i};var J=function(){throw new Error('A "url" property or function must be specified')},L=function(e,i){var n=i.error;i.error=function(t){n&&n.call(i.context,e,t,i),e.trigger("error",e,t,i)}};return h});
var Marionette=function(e,t,n){"use strict";function s(e,t){var n=new Error(e);n.name=t||"Error";throw n}(function(e,t){"use strict";var n=e.ChildViewContainer;e.ChildViewContainer=function(e,t){var n=function(e){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();t.each(e,this.add,this)};t.extend(n.prototype,{add:function(e,t){var n=e.cid;this._views[n]=e;if(e.model){this._indexByModel[e.model.cid]=n}if(t){this._indexByCustom[t]=n}this._updateLength();return this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var n=e.cid;if(e.model){delete this._indexByModel[e.model.cid]}t.any(this._indexByCustom,function(e,t){if(e===n){delete this._indexByCustom[t];return true}},this);delete this._views[n];this._updateLength();return this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(r){if(t.isFunction(r[e])){r[e].apply(r,n||[])}})},_updateLength:function(){this.length=t.size(this._views)}});var r=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];t.each(r,function(e){n.prototype[e]=function(){var n=t.values(this._views);var r=[n].concat(t.toArray(arguments));return t[e].apply(t,r)}});return n}(e,t);e.ChildViewContainer.VERSION="0.1.4";e.ChildViewContainer.noConflict=function(){e.ChildViewContainer=n;return this};return e.ChildViewContainer})(t,n);(function(e,t){"use strict";var n=e.Wreqr;var r=e.Wreqr={};e.Wreqr.VERSION="1.3.1";e.Wreqr.noConflict=function(){e.Wreqr=n;return this};r.Handlers=function(e,t){"use strict";var n=function(e){this.options=e;this._wreqrHandlers={};if(t.isFunction(this.initialize)){this.initialize(e)}};n.extend=e.Model.extend;t.extend(n.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,n){var r=null;if(t.isObject(e)&&!t.isFunction(e)){r=e.context;e=e.callback}this.setHandler(n,e,r)},this)},setHandler:function(e,t,n){var r={callback:t,context:n};this._wreqrHandlers[e]=r;this.trigger("handler:add",e,t,n)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(!t){return}return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}});return n}(e,t);r.CommandStorage=function(){"use strict";var n=function(e){this.options=e;this._commands={};if(t.isFunction(this.initialize)){this.initialize(e)}};t.extend(n.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];if(!t){t={command:e,instances:[]};this._commands[e]=t}return t},addCommand:function(e,t){var n=this.getCommands(e);n.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}});return n}();r.Commands=function(e){"use strict";return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,n)},execute:function(e,t){e=arguments[0];t=Array.prototype.slice.call(arguments,1);if(this.hasHandler(e)){this.getHandler(e).apply(this,t)}else{this.storage.addCommand(e,t)}},_executeCommands:function(e,n,r){var i=this.storage.getCommands(e);t.each(i.instances,function(e){n.apply(r,e)});this.storage.clearCommands(e)},_initializeStorage:function(e){var n;var r=e.storageType||this.storageType;if(t.isFunction(r)){n=new r}else{n=r}this.storage=n}})}(r);r.RequestResponse=function(e){"use strict";return e.Handlers.extend({request:function(){var e=arguments[0];var t=Array.prototype.slice.call(arguments,1);if(this.hasHandler(e)){return this.getHandler(e).apply(this,t)}}})}(r);r.EventAggregator=function(e,t){"use strict";var n=function(){};n.extend=e.Model.extend;t.extend(n.prototype,e.Events);return n}(e,t);r.Channel=function(n){"use strict";var r=function(t){this.vent=new e.Wreqr.EventAggregator;this.reqres=new e.Wreqr.RequestResponse;this.commands=new e.Wreqr.Commands;this.channelName=t};t.extend(r.prototype,{reset:function(){this.vent.off();this.vent.stopListening();this.reqres.removeAllHandlers();this.commands.removeAllHandlers();return this},connectEvents:function(e,t){this._connect("vent",e,t);return this},connectCommands:function(e,t){this._connect("commands",e,t);return this},connectRequests:function(e,t){this._connect("reqres",e,t);return this},_connect:function(e,n,r){if(!n){return}r=r||this;var i=e==="vent"?"on":"setHandler";t.each(n,function(n,s){this[e][i](s,t.bind(n,r))},this)}});return r}(r);r.radio=function(e){"use strict";var n=function(){this._channels={};this.vent={};this.commands={};this.reqres={};this._proxyMethods()};t.extend(n.prototype,{channel:function(e){if(!e){throw new Error("Channel must receive a name")}return this._getChannel(e)},_getChannel:function(t){var n=this._channels[t];if(!n){n=new e.Channel(t);this._channels[t]=n}return n},_proxyMethods:function(){t.each(["vent","commands","reqres"],function(e){t.each(r[e],function(t){this[e][t]=i(this,e,t)},this)},this)}});var r={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]};var i=function(e,t,n){return function(r){var i=e._getChannel(r)[t];var s=Array.prototype.slice.call(arguments,1);return i[n].apply(i,s)}};return new n}(r);return e.Wreqr})(t,n);var r={};t.Marionette=r;r.$=t.$;var i=Array.prototype.slice;r.extend=t.Model.extend;r.getOption=function(e,t){if(!e||!t){return}var n;if(e.options&&t in e.options&&e.options[t]!==undefined){n=e.options[t]}else{n=e[t]}return n};r.normalizeMethods=function(e){var t={},r;n.each(e,function(e,i){r=e;if(!n.isFunction(r)){r=this[r]}if(!r){return}t[i]=r},this);return t};r.normalizeUIKeys=function(e,t){if(typeof e==="undefined"){return}n.each(n.keys(e),function(n){var r=/@ui.[a-zA-Z_$0-9]*/g;if(n.match(r)){e[n.replace(r,function(e){return t[e.slice(4)]})]=e[n];delete e[n]}});return e};r.actAsCollection=function(e,t){var r=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];n.each(r,function(r){e[r]=function(){var e=n.values(n.result(this,t));var i=[e].concat(n.toArray(arguments));return n[r].apply(n,i)}})};r.triggerMethod=function(){function t(e,t,n){return n.toUpperCase()}var e=/(^|:)(\w)/gi;var r=function(r){var i="on"+r.replace(e,t);var s=this[i];if(n.isFunction(this.trigger)){this.trigger.apply(this,arguments)}if(n.isFunction(s)){return s.apply(this,n.tail(arguments))}};return r}();r.MonitorDOMRefresh=function(e){function t(e){e._isShown=true;i(e)}function r(e){e._isRendered=true;i(e)}function i(e){if(e._isShown&&e._isRendered&&s(e)){if(n.isFunction(e.triggerMethod)){e.triggerMethod("dom:refresh")}}}function s(t){return e.contains(t.el)}return function(e){e.listenTo(e,"show",function(){t(e)});e.listenTo(e,"render",function(){r(e)})}}(document.documentElement);(function(e){"use strict";function t(e,t,r,i){var o=i.split(/\s+/);n.each(o,function(n){var i=e[n];if(!i){s("Method '"+n+"' was configured as an event handler, but does not exist.")}e.listenTo(t,r,i)})}function r(e,t,n,r){e.listenTo(t,n,r)}function i(e,t,r,i){var s=i.split(/\s+/);n.each(s,function(n){var i=e[n];e.stopListening(t,r,i)})}function o(e,t,n,r){e.stopListening(t,n,r)}function u(e,t,r,i,s){if(!t||!r){return}if(n.isFunction(r)){r=r.call(e)}n.each(r,function(r,o){if(n.isFunction(r)){i(e,t,o,r)}else{s(e,t,o,r)}})}e.bindEntityEvents=function(e,n,i){u(e,n,i,r,t)};e.unbindEntityEvents=function(e,t,n){u(e,t,n,o,i)}})(r);r.Callbacks=function(){this._deferred=r.$.Deferred();this._callbacks=[]};n.extend(r.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t});this._deferred.done(function(n,r){if(t){n=t}e.call(n,r)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=r.$.Deferred();this._callbacks=[];n.each(e,function(e){this.add(e.cb,e.ctx)},this)}});r.Controller=function(e){this.triggerMethod=r.triggerMethod;this.options=e||{};if(n.isFunction(this.initialize)){this.initialize(this.options)}};r.Controller.extend=r.extend;n.extend(r.Controller.prototype,t.Events,{close:function(){this.stopListening();var e=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["close"].concat(e));this.off()}});r.Region=function(e){this.options=e||{};this.el=r.getOption(this,"el");if(!this.el){s("An 'el' must be specified for a region.","NoElError")}if(this.initialize){var t=Array.prototype.slice.apply(arguments);this.initialize.apply(this,t)}};n.extend(r.Region,{buildRegion:function(e,t){var r=n.isString(e);var i=n.isString(e.selector);var o=n.isUndefined(e.regionType);var u=n.isFunction(e);if(!u&&!r&&!i){s("Region must be specified as a Region type, a selector string or an object with selector property")}var a,f;if(r){a=e}if(e.selector){a=e.selector;delete e.selector}if(u){f=e}if(!u&&o){f=t}if(e.regionType){f=e.regionType;delete e.regionType}if(r||u){e={}}e.el=a;var l=new f(e);if(e.parentEl){l.getEl=function(t){var r=e.parentEl;if(n.isFunction(r)){r=r()}return r.find(t)}}return l}});n.extend(r.Region.prototype,t.Events,{show:function(e,t){this.ensureEl();var i=t||{};var s=e.isClosed||n.isUndefined(e.$el);var o=e!==this.currentView;var u=!!i.preventClose;var a=!u&&o;if(a){this.close()}e.render();r.triggerMethod.call(this,"before:show",e);if(n.isFunction(e.triggerMethod)){e.triggerMethod("before:show")}else{r.triggerMethod.call(e,"before:show")}if(o||s){this.open(e)}this.currentView=e;r.triggerMethod.call(this,"show",e);if(n.isFunction(e.triggerMethod)){e.triggerMethod("show")}else{r.triggerMethod.call(e,"show")}return this},ensureEl:function(){if(!this.$el||this.$el.length===0){this.$el=this.getEl(this.el)}},getEl:function(e){return r.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;if(!e||e.isClosed){return}if(e.close){e.close()}else if(e.remove){e.remove()}r.triggerMethod.call(this,"close",e);delete this.currentView},attachView:function(e){this.currentView=e},reset:function(){this.close();delete this.$el}});r.Region.extend=r.extend;r.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={};e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var r={};n.each(e,function(e,i){if(n.isString(e)){e={selector:e}}if(e.selector){e=n.defaults({},e,t)}var s=this.addRegion(i,e);r[i]=s},this);return r},addRegion:function(t,r){var i;var s=n.isObject(r);var o=n.isString(r);var u=!!r.selector;if(o||s&&u){i=e.Region.buildRegion(r,e.Region)}else if(n.isFunction(r)){i=e.Region.buildRegion(r,e.Region)}else{i=r}this._store(t,i);this.triggerMethod("region:add",t,i);return i},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){n.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){n.each(this._regions,function(e,t){e.close()},this)},close:function(){this.removeRegions();e.Controller.prototype.close.apply(this,arguments)},_store:function(e,t){this._regions[e]=t;this._setLength()},_remove:function(e,t){t.close();t.stopListening();delete this._regions[e];this._setLength();this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=n.size(this._regions)}});e.actAsCollection(t.prototype,"_regions");return t}(r);r.TemplateCache=function(e){this.templateId=e};n.extend(r.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];if(!t){t=new r.TemplateCache(e);this.templateCaches[e]=t}return t.load()},clear:function(){var e;var t=i.call(arguments);var n=t.length;if(n>0){for(e=0;e<n;e++){delete this.templateCaches[t[e]]}}else{this.templateCaches={}}}});n.extend(r.TemplateCache.prototype,{load:function(){if(this.compiledTemplate){return this.compiledTemplate}var e=this.loadTemplate(this.templateId);this.compiledTemplate=this.compileTemplate(e);return this.compiledTemplate},loadTemplate:function(e){var t=r.$(e).html();if(!t||t.length===0){s("Could not find template: '"+e+"'","NoTemplateError")}return t},compileTemplate:function(e){return n.template(e)}});r.Renderer={render:function(e,t){if(!e){s("Cannot render the template since it's false, null or undefined.","TemplateNotFoundError")}var n;if(typeof e==="function"){n=e}else{n=r.TemplateCache.get(e)}return n(t)}};r.View=t.View.extend({constructor:function(e){n.bindAll(this,"render");this.options=n.extend({},n.result(this,"options"),n.isFunction(e)?e.call(this):e);this.events=this.normalizeUIKeys(n.result(this,"events"));if(n.isObject(this.behaviors)){new r.Behaviors(this)}t.View.prototype.constructor.apply(this,arguments);r.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled)},triggerMethod:r.triggerMethod,normalizeMethods:r.normalizeMethods,getTemplate:function(){return r.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=r.getOption(this,"templateHelpers");if(n.isFunction(t)){t=t.call(this)}return n.extend(e,t)},normalizeUIKeys:function(e){var t=n.result(this,"ui");return r.normalizeUIKeys(e,t)},configureTriggers:function(){if(!this.triggers){return}var e={};var t=this.normalizeUIKeys(n.result(this,"triggers"));n.each(t,function(t,r){var i=n.isObject(t);var s=i?t.event:t;e[r]=function(e){if(e){var n=e.preventDefault;var r=e.stopPropagation;var o=i?t.preventDefault:n;var u=i?t.stopPropagation:r;if(o&&n){n.apply(e)}if(u&&r){r.apply(e)}}var a={view:this,model:this.model,collection:this.collection};this.triggerMethod(s,a)}},this);return e},delegateEvents:function(e){this._delegateDOMEvents(e);r.bindEntityEvents(this,this.model,r.getOption(this,"modelEvents"));r.bindEntityEvents(this,this.collection,r.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events;if(n.isFunction(e)){e=e.call(this)}var r={};var i=n.result(this,"behaviorEvents")||{};var s=this.configureTriggers();n.extend(r,i,e,s);t.View.prototype.delegateEvents.call(this,r)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e);r.unbindEntityEvents(this,this.model,r.getOption(this,"modelEvents"));r.unbindEntityEvents(this,this.collection,r.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(this.isClosed){return}var e=Array.prototype.slice.call(arguments);var t=this.triggerMethod.apply(this,["before:close"].concat(e));if(t===false){return}this.isClosed=true;this.triggerMethod.apply(this,["close"].concat(e));this.unbindUIElements();this.remove()},bindUIElements:function(){if(!this.ui){return}if(!this._uiBindings){this._uiBindings=this.ui}var e=n.result(this,"_uiBindings");this.ui={};n.each(n.keys(e),function(t){var n=e[t];this.ui[t]=this.$(n)},this)},unbindUIElements:function(){if(!this.ui||!this._uiBindings){return}n.each(this.ui,function(e,t){delete this.ui[t]},this);this.ui=this._uiBindings;delete this._uiBindings}});r.ItemView=r.View.extend({constructor:function(){r.View.prototype.constructor.apply(this,arguments)},serializeData:function(){var e={};if(this.model){e=this.model.toJSON()}else if(this.collection){e={items:this.collection.toJSON()}}return e},render:function(){this.isClosed=false;this.triggerMethod("before:render",this);this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate();var n=r.Renderer.render(t,e);this.$el.html(n);this.bindUIElements();this.triggerMethod("render",this);this.triggerMethod("item:rendered",this);return this},close:function(){if(this.isClosed){return}this.triggerMethod("item:before:close");r.View.prototype.close.apply(this,arguments);this.triggerMethod("item:closed")}});r.CollectionView=r.View.extend({itemViewEventPrefix:"itemview",constructor:function(e){this._initChildViewStorage();r.View.prototype.constructor.apply(this,arguments);this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=true},endBuffering:function(){this.isBuffering=false;this.appendBuffer(this,this.elBuffer);this._triggerShowBufferedChildren();this.initRenderBuffer()},_triggerShowBufferedChildren:function(){if(this._isShown){n.each(this._bufferedChildren,function(e){r.triggerMethod.call(e,"show")});this._bufferedChildren=[]}},_initialEvents:function(){if(this.collection){this.listenTo(this.collection,"add",this.addChildView);this.listenTo(this.collection,"remove",this.removeItemView);this.listenTo(this.collection,"reset",this.render)}},addChildView:function(e,t,n){this.closeEmptyView();var r=this.getItemView(e);var i=this.collection.indexOf(e);this.addItemView(e,r,i)},onShowCalled:function(){this.children.each(function(e){r.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this);this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this);this.triggerMethod("collection:rendered",this)},render:function(){this.isClosed=false;this.triggerBeforeRender();this._renderChildren();this.triggerRendered();return this},_renderChildren:function(){this.startBuffering();this.closeEmptyView();this.closeChildren();if(!this.isEmpty(this.collection)){this.showCollection()}else{this.showEmptyView()}this.endBuffering()},showCollection:function(){var e;this.collection.each(function(t,n){e=this.getItemView(t);this.addItemView(t,e,n)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this._showingEmptyView=true;var n=new t.Model;this.addItemView(n,e,0)}},closeEmptyView:function(){if(this._showingEmptyView){this.closeChildren();delete this._showingEmptyView}},getEmptyView:function(){return r.getOption(this,"emptyView")},getItemView:function(e){var t=r.getOption(this,"itemView");if(!t){s("An `itemView` must be specified","NoItemViewError")}return t},addItemView:function(e,t,i){var s=r.getOption(this,"itemViewOptions");if(n.isFunction(s)){s=s.call(this,e,i)}var o=this.buildItemView(e,t,s);this.addChildViewEventForwarding(o);this.triggerMethod("before:item:added",o);this.children.add(o);this.renderItemView(o,i);if(this._isShown&&!this.isBuffering){r.triggerMethod.call(o,"show")}this.triggerMethod("after:item:added",o);return o},addChildViewEventForwarding:function(e){var t=r.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var s=i.call(arguments);var o=s[0];var u=this.normalizeMethods(this.getItemEvents());s[0]=t+":"+o;s.splice(1,0,e);if(typeof u!=="undefined"&&n.isFunction(u[o])){u[o].apply(this,s)}r.triggerMethod.apply(this,s)},this)},getItemEvents:function(){if(n.isFunction(this.itemEvents)){return this.itemEvents.call(this)}return this.itemEvents},renderItemView:function(e,t){e.render();this.appendHtml(this,e,t)},buildItemView:function(e,t,r){var i=n.extend({model:e},r);return new t(i)},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t);this.checkEmpty()},removeChildView:function(e){if(e){if(e.close){e.close()}else if(e.remove){e.remove()}this.stopListening(e);this.children.remove(e)}this.triggerMethod("item:removed",e)},isEmpty:function(e){return!this.collection||this.collection.length===0},checkEmpty:function(){if(this.isEmpty(this.collection)){this.showEmptyView()}},appendBuffer:function(e,t){e.$el.append(t)},appendHtml:function(e,t,n){if(e.isBuffering){t.$el.addClass("out");e.elBuffer.appendChild(t.el);e._bufferedChildren.push(t);t.$el.addClass("in")}else{t.$el.addClass("out");e.$el.append(t.el);t.$el.addClass("in")}},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){if(this.isClosed){return}this.triggerMethod("collection:before:close");this.closeChildren();this.triggerMethod("collection:closed");r.View.prototype.close.apply(this,arguments)},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this);this.checkEmpty()}});r.CompositeView=r.CollectionView.extend({constructor:function(){r.CollectionView.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){if(this.collection){this.listenTo(this.collection,"add",this.addChildView);this.listenTo(this.collection,"remove",this.removeItemView);this.listenTo(this.collection,"reset",this._renderChildren)}})},getItemView:function(e){var t=r.getOption(this,"itemView")||this.constructor;if(!t){s("An `itemView` must be specified","NoItemViewError")}return t},serializeData:function(){var e={};if(this.model){e=this.model.toJSON()}return e},render:function(){this.isRendered=true;this.isClosed=false;this.resetItemViewContainer();this.triggerBeforeRender();var e=this.renderModel();this.$el.html(e);this.bindUIElements();this.triggerMethod("composite:model:rendered");this._renderChildren();this.triggerMethod("composite:rendered");this.triggerRendered();return this},_renderChildren:function(){if(this.isRendered){this.triggerMethod("composite:collection:before:render");r.CollectionView.prototype._renderChildren.call(this);this.triggerMethod("composite:collection:rendered")}},renderModel:function(){var e={};e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return r.Renderer.render(t,e)},appendBuffer:function(e,t){var n=this.getItemViewContainer(e);n.append(t)},appendHtml:function(e,t,n){if(e.isBuffering){e.elBuffer.appendChild(t.el);e._bufferedChildren.push(t)}else{var r=this.getItemViewContainer(e);r.append(t.el)}},getItemViewContainer:function(e){if("$itemViewContainer"in e){return e.$itemViewContainer}var t;var i=r.getOption(e,"itemViewContainer");if(i){var o=n.isFunction(i)?i.call(e):i;if(o.charAt(0)==="@"&&e.ui){t=e.ui[o.substr(4)]}else{t=e.$(o)}if(t.length<=0){s("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}}else{t=e.$el}e.$itemViewContainer=t;return t},resetItemViewContainer:function(){if(this.$itemViewContainer){delete this.$itemViewContainer}}});r.Layout=r.ItemView.extend({regionType:r.Region,constructor:function(e){e=e||{};this._firstRender=true;this._initializeRegions(e);r.ItemView.prototype.constructor.call(this,e)},render:function(){if(this.isClosed){this._initializeRegions()}if(this._firstRender){this._firstRender=false}else if(!this.isClosed){this._reInitializeRegions()}return r.ItemView.prototype.render.apply(this,arguments)},close:function(){if(this.isClosed){return}this.regionManager.close();r.ItemView.prototype.close.apply(this,arguments)},addRegion:function(e,t){var n={};n[e]=t;return this._buildRegions(n)[e]},addRegions:function(e){this.regions=n.extend({},this.regions,e);return this._buildRegions(e)},removeRegion:function(e){delete this.regions[e];return this.regionManager.removeRegion(e)},getRegion:function(e){return this.regionManager.get(e)},_buildRegions:function(e){var t=this;var n={regionType:r.getOption(this,"regionType"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,n)},_initializeRegions:function(e){var t;this._initRegionManager();if(n.isFunction(this.regions)){t=this.regions(e)}else{t=this.regions||{}}this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions();this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new r.RegionManager;this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t;this.trigger("region:add",e,t)});this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e];this.trigger("region:remove",e,t)})}});r.Behavior=function(e,t){function n(t,n){this.view=n;this.defaults=e.result(this,"defaults")||{};this.options=e.extend({},this.defaults,t);this.$=function(){return this.view.$.apply(this.view,arguments)};this.initialize.apply(this,arguments)}e.extend(n.prototype,t.Events,{initialize:function(){},close:function(){this.stopListening()},triggerMethod:r.triggerMethod});n.extend=r.extend;return n}(n,t);r.Behaviors=function(e,t){function n(e){this.behaviors=n.parseBehaviors(e,t.result(e,"behaviors"));n.wrap(e,this.behaviors,["bindUIElements","unbindUIElements","delegateEvents","undelegateEvents","behaviorEvents","triggerMethod","setElement","close"])}var r={setElement:function(e,n){e.apply(this,t.tail(arguments,2));t.each(n,function(e){e.$el=this.$el},this)},close:function(e,n){var r=t.tail(arguments,2);e.apply(this,r);t.invoke(n,"close",r)},bindUIElements:function(e,n){e.apply(this);t.invoke(n,e)},unbindUIElements:function(e,n){e.apply(this);t.invoke(n,e)},triggerMethod:function(e,n){var r=t.tail(arguments,2);e.apply(this,r);t.each(n,function(t){e.apply(t,r)})},delegateEvents:function(n,r){var i=t.tail(arguments,2);n.apply(this,i);t.each(r,function(t){e.bindEntityEvents(t,this.model,e.getOption(t,"modelEvents"));e.bindEntityEvents(t,this.collection,e.getOption(t,"collectionEvents"))},this)},undelegateEvents:function(n,r){var i=t.tail(arguments,2);n.apply(this,i);t.each(r,function(t){e.unbindEntityEvents(t,this.model,e.getOption(t,"modelEvents"));e.unbindEntityEvents(t,this.collection,e.getOption(t,"collectionEvents"))},this)},behaviorEvents:function(n,r){var i={};var s=t.result(this,"ui");t.each(r,function(n,r){var o={};var u=t.clone(t.result(n,"events"))||{};var a=t.result(n,"ui");var f=t.extend({},s,a);u=e.normalizeUIKeys(u,f);t.each(t.keys(u),function(e){var i=(new Array(r+2)).join(" ");var s=e+i;var a=t.isFunction(u[e])?u[e]:n[u[e]];o[s]=t.bind(a,n)});i=t.extend(i,o)});return i}};t.extend(n,{behaviorsLookup:function(){throw new Error("You must define where your behaviors are stored. See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup")},getBehaviorClass:function(e,r){if(e.behaviorClass){return e.behaviorClass}return t.isFunction(n.behaviorsLookup)?n.behaviorsLookup.apply(this,arguments)[r]:n.behaviorsLookup[r]},parseBehaviors:function(e,r){return t.map(r,function(t,r){var i=n.getBehaviorClass(t,r);return new i(t,e)})},wrap:function(e,n,i){t.each(i,function(i){e[i]=t.partial(r[i],e[i],n)})}});return n}(r,n);r.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,arguments);this.options=e||{};var n=r.getOption(this,"appRoutes");var i=this._getController();this.processAppRoutes(i,n);this.on("route",this._processOnRoute,this)},appRoute:function(e,t){var n=this._getController();this._addAppRoute(n,e,t)},_processOnRoute:function(e,t){var r=n.invert(this.appRoutes)[e];if(n.isFunction(this.onRoute)){this.onRoute(e,r,t)}},processAppRoutes:function(e,t){if(!t){return}var r=n.keys(t).reverse();n.each(r,function(n){this._addAppRoute(e,n,t[n])},this)},_getController:function(){return r.getOption(this,"controller")},_addAppRoute:function(e,t,r){var i=e[r];if(!i){s("Method '"+r+"' was not found on the controller")}this.route(t,r,n.bind(i,e))}});r.Application=function(e){this._initRegionManager();this._initCallbacks=new r.Callbacks;this.vent=new t.Wreqr.EventAggregator;this.commands=new t.Wreqr.Commands;this.reqres=new t.Wreqr.RequestResponse;this.submodules={};n.extend(this,e);this.triggerMethod=r.triggerMethod};n.extend(r.Application.prototype,t.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e);this._initCallbacks.run(e,this);this.triggerMethod("initialize:after",e);this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(e){this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},module:function(e,t){var n=r.Module.getClass(t);var s=i.call(arguments);s.unshift(this);return n.create.apply(n,s)},_initRegionManager:function(){this._regionManager=new r.RegionManager;this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t});this.listenTo(this._regionManager,"region:remove",function(e,t){delete this[e]})}});r.Application.extend=r.extend;r.Module=function(e,t,i){this.moduleName=e;this.options=n.extend({},this.options,i);this.initialize=i.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=t;this.startWithParent=true;this.triggerMethod=r.triggerMethod;if(n.isFunction(this.initialize)){this.initialize(this.options,e,t)}};r.Module.extend=r.extend;n.extend(r.Module.prototype,t.Events,{initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){if(this._isInitialized){return}n.each(this.submodules,function(t){if(t.startWithParent){t.start(e)}});this.triggerMethod("before:start",e);this._initializerCallbacks.run(e,this);this._isInitialized=true;this.triggerMethod("start",e)},stop:function(){if(!this._isInitialized){return}this._isInitialized=false;r.triggerMethod.call(this,"before:stop");n.each(this.submodules,function(e){e.stop()});this._finalizerCallbacks.run(undefined,this);this._initializerCallbacks.reset();this._finalizerCallbacks.reset();r.triggerMethod.call(this,"stop")},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,i){if(!e){return}var s=n.flatten([this,this.app,t,r,r.$,n,i]);e.apply(this,s)},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new r.Callbacks;this._finalizerCallbacks=new r.Callbacks}});n.extend(r.Module,{create:function(e,t,r){var s=e;var o=i.call(arguments);o.splice(0,3);t=t.split(".");var u=t.length;var a=[];a[u-1]=r;n.each(t,function(t,n){var i=s;s=this._getModule(i,t,e,r);this._addModuleDefinition(i,s,a[n],o)},this);return s},_getModule:function(e,t,r,i,s){var o=n.extend({},i);var u=this.getClass(i);var a=e[t];if(!a){a=new u(t,r,o);e[t]=a;e.submodules[t]=a}return a},getClass:function(e){var t=r.Module;if(!e){return t}if(e.prototype instanceof t){return e}return e.moduleClass||t},_addModuleDefinition:function(e,t,n,r){var i=this._getDefine(n);var s=this._getStartWithParent(n,t);if(i){t.addDefinition(i,r)}this._addStartWithParent(e,t,s)},_getStartWithParent:function(e,t){var i;if(n.isFunction(e)&&e.prototype instanceof r.Module){i=t.constructor.prototype.startWithParent;return n.isUndefined(i)?true:i}if(n.isObject(e)){i=e.startWithParent;return n.isUndefined(i)?true:i}return true},_getDefine:function(e){if(n.isFunction(e)&&!(e.prototype instanceof r.Module)){return e}if(n.isObject(e)){return e.define}return null},_addStartWithParent:function(e,t,n){t.startWithParent=t.startWithParent&&n;if(!t.startWithParent||!!t.startWithParentIsConfigured){return}t.startWithParentIsConfigured=true;e.addInitializer(function(e){if(t.startWithParent){t.start(e)}})}});return r}(this,Backbone,_);
var MXI_DEBUG=!1;!function(a,v){"use strict";var s={};function e(e,t,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(t===v)throw"invalid module definition, dependencies must be specified";if(i===v)throw"invalid module definition, definition function must be specified";!function(e,t){for(var i,n=[],r=0;r<e.length;++r){if(!(i=s[e[r]]||o(e[r])))throw"module definition dependecy not found: "+e[r];n.push(i)}t.apply(null,n)}(t,function(){s[e]=i.apply(null,arguments)})}function o(e){for(var t=a,i=e.split(/[.\/]/),n=0;n<i.length;++n){if(!t[i[n]])return;t=t[i[n]]}return t}e("moxie/core/utils/Basic",[],function(){function o(e){return void 0===e?"undefined":null===e?"null":e.nodeType?"node":{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()}var n,r=function(i){return s(arguments,function(e,t){0<t&&s(e,function(e,t){void 0!==e&&(o(i[t])===o(e)&&~a(o(e),["array","object"])?r(i[t],e):i[t]=e)})}),i},s=function(e,t){var i,n,r;if(e)if("number"===o(e.length)){for(r=0,i=e.length;r<i;r++)if(!1===t(e[r],r))return}else if("object"===o(e))for(n in e)if(e.hasOwnProperty(n)&&!1===t(e[n],n))return},a=function(e,t){if(t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i}return-1};return{guid:(n=0,function(e){var t,i=(new Date).getTime().toString(32);for(t=0;t<5;t++)i+=Math.floor(65535*Math.random()).toString(32);return(e||"o_")+i+(n++).toString(32)}),typeOf:o,extend:r,each:s,isEmptyObj:function(e){var t;if(!e||"object"!==o(e))return!0;for(t in e)return!1;return!0},inSeries:function(e,n){var r=e.length;"function"!==o(n)&&(n=function(){}),e&&e.length||n(),function t(i){"function"===o(e[i])&&e[i](function(e){++i<r&&!e?t(i):n(e)})}(0)},inParallel:function(e,n){var r=0,o=e.length,a=new Array(o);s(e,function(e,i){e(function(e){if(e)return n(e);var t=[].slice.call(arguments);t.shift(),a[i]=t,++r===o&&(a.unshift(null),n.apply(this,a))})})},inArray:a,arrayDiff:function(e,t){var i=[];for(var n in"array"!==o(e)&&(e=[e]),"array"!==o(t)&&(t=[t]),e)-1===a(e[n],t)&&i.push(e[n]);return!!i.length&&i},arrayIntersect:function(e,t){var i=[];return s(e,function(e){-1!==a(e,t)&&i.push(e)}),i.length?i:null},toArray:function(e){var t,i=[];for(t=0;t<e.length;t++)i[t]=e[t];return i},trim:function(e){return e?String.prototype.trim?String.prototype.trim.call(e):e.toString().replace(/^\s*/,"").replace(/\s*$/,""):e},sprintf:function(e){var t=[].slice.call(arguments,1);return e.replace(/%[a-z]/g,function(){var e=t.shift();return"undefined"!==o(e)?e:""})},parseSizeStr:function(e){if("string"!=typeof e)return e;var t,i={t:1099511627776,g:1073741824,m:1048576,k:1024};return t=(e=/^([0-9\.]+)([tmgk]?)$/.exec(e.toLowerCase().replace(/[^0-9\.tmkg]/g,"")))[2],e=+e[1],i.hasOwnProperty(t)&&(e*=i[t]),Math.floor(e)}}}),e("moxie/core/utils/Env",["moxie/core/utils/Basic"],function(n){var d,h,m,e,t,r,i,o,a,s=(h="function",m="object",r=function(e,t){return-1!==t.toLowerCase().indexOf(e.toLowerCase())},a={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[e="name",t="version"],[/\s(opr)\/([\w\.]+)/i],[[e,"Opera"],t],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi)\/([\w\.-]+)/i],[e,t],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[e,"IE"],t],[/(edge)\/((\d+)?[\w\.]+)/i],[e,t],[/(yabrowser)\/([\w\.]+)/i],[[e,"Yandex"],t],[/(comodo_dragon)\/([\w\.]+)/i],[[e,/_/g," "],t],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],[e,t],[/(dolfin)\/([\w\.]+)/i],[[e,"Dolphin"],t],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[e,"Chrome"],t],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[t,[e,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[t,[e,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[t,[e,"Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[t,[e,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[t,e],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[e,[t,(i={rgx:function(){for(var e,t,i,n,r,o,a,s=0,u=arguments;s<u.length;s+=2){var c=u[s],l=u[s+1];if(void 0===e)for(n in e={},l)typeof(r=l[n])==m?e[r[0]]=d:e[r]=d;for(t=i=0;t<c.length;t++)if(o=c[t].exec(this.getUA())){for(n=0;n<l.length;n++)a=o[++i],typeof(r=l[n])==m&&0<r.length?2==r.length?typeof r[1]==h?e[r[0]]=r[1].call(this,a):e[r[0]]=r[1]:3==r.length?typeof r[1]!=h||r[1].exec&&r[1].test?e[r[0]]=a?a.replace(r[1],r[2]):d:e[r[0]]=a?r[1].call(this,a,r[2]):d:4==r.length&&(e[r[0]]=a?r[3].call(this,a.replace(r[1],r[2])):d):e[r]=a||d;break}if(o)break}return e},str:function(e,t){for(var i in t)if(typeof t[i]==m&&0<t[i].length){for(var n=0;n<t[i].length;n++)if(r(t[i][n],e))return"?"===i?d:i}else if(r(t[i],e))return"?"===i?d:i;return e}}).str,(o={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}}).browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[e,t],[/(navigator|netscape)\/([\w\.-]+)/i],[[e,"Netscape"],t],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[e,t]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[t,[e,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[e,t],[/rv\:([\w\.]+).*(gecko)/i],[t,e]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[e,t],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[e,[t,i.str,o.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[e,"Windows"],[t,i.str,o.os.windows.version]],[/\((bb)(10);/i],[[e,"BlackBerry"],t],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[e,t],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[e,"Symbian"],t],[/\((series40);/i],[e],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[e,"Firefox OS"],t],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[e,t],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[e,"Chromium OS"],t],[/(sunos)\s?([\w\.]+\d)*/i],[[e,"Solaris"],t],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[e,t],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[e,"iOS"],[t,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[e,"Mac OS"],[t,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[e,t]]},function(e){var t=e||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"");this.getBrowser=function(){return i.rgx.apply(this,a.browser)},this.getEngine=function(){return i.rgx.apply(this,a.engine)},this.getOS=function(){return i.rgx.apply(this,a.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}},this.getUA=function(){return t},this.setUA=function(e){return t=e,this},this.setUA(t)});var u,c,l,f=(l={define_property:!1,create_canvas:(c=document.createElement("canvas"),!(!c.getContext||!c.getContext("2d"))),return_response_type:function(e){try{if(-1!==n.inArray(e,["","text","document"]))return!0;if(window.XMLHttpRequest){var t=new XMLHttpRequest;if(t.open("get","/"),"responseType"in t)return t.responseType=e,t.responseType===e}}catch(e){}return!1},use_data_uri:(u=new Image,u.onload=function(){l.use_data_uri=1===u.width&&1===u.height},setTimeout(function(){u.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1),use_data_uri_over32kb:function(){return l.use_data_uri&&("IE"!==g.browser||9<=g.version)},use_data_uri_of:function(e){return l.use_data_uri&&e<33e3||l.use_data_uri_over32kb()},use_fileinput:function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return!1;var e=document.createElement("input");return e.setAttribute("type","file"),!e.disabled}},function(e){var t=[].slice.call(arguments);return t.shift(),"function"===n.typeOf(l[e])?l[e].apply(this,t):!!l[e]}),p=(new s).getResult(),g={can:f,uaParser:s,browser:p.browser.name,version:p.browser.version,os:p.os.name,osVersion:p.os.version,verComp:function(e,t,i){function n(e){return(e=(e=(""+e).replace(/[_\-+]/g,".")).replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,".")).length?e.split("."):[-8]}function r(e){return e?isNaN(e)?u[e]||-7:parseInt(e,10):0}var o,a=0,s=0,u={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1};for(e=n(e),t=n(t),o=Math.max(e.length,t.length),a=0;a<o;a++)if(e[a]!=t[a]){if(e[a]=r(e[a]),t[a]=r(t[a]),e[a]<t[a]){s=-1;break}if(e[a]>t[a]){s=1;break}}if(!i)return s;switch(i){case">":case"gt":return 0<s;case">=":case"ge":return 0<=s;case"<=":case"le":return s<=0;case"==":case"=":case"eq":return 0===s;case"<>":case"!=":case"ne":return 0!==s;case"":case"<":case"lt":return s<0;default:return null}},global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};return g.OS=g.os,MXI_DEBUG&&(g.debug={runtime:!0,events:!1},g.log=function(){var e,t=arguments[0];if("string"===n.typeOf(t)&&(t=n.sprintf.apply(this,arguments)),window&&window.console&&window.console.log)window.console.log(t);else if(document){var i=document.getElementById("moxie-console");i||((i=document.createElement("pre")).id="moxie-console",document.body.appendChild(i)),-1!==n.inArray(n.typeOf(t),["object","array"])?(e=t,i.appendChild(document.createTextNode(e+"\n"))):i.appendChild(document.createTextNode(t+"\n"))}}),g}),e("moxie/core/I18n",["moxie/core/utils/Basic"],function(i){var t={};return{addI18n:function(e){return i.extend(t,e)},translate:function(e){return t[e]||e},_:function(e){return this.translate(e)},sprintf:function(e){var t=[].slice.call(arguments,1);return e.replace(/%[a-z]/g,function(){var e=t.shift();return"undefined"!==i.typeOf(e)?e:""})}}}),e("moxie/core/utils/Mime",["moxie/core/utils/Basic","moxie/core/I18n"],function(s,n){var e={mimes:{},extensions:{},addMimeType:function(e){var t,i,n,r=e.split(/,/);for(t=0;t<r.length;t+=2){for(n=r[t+1].split(/ /),i=0;i<n.length;i++)this.mimes[n[i]]=r[t];this.extensions[r[t]]=n}},extList2mimes:function(e,t){var i,n,r,o,a=[];for(n=0;n<e.length;n++)for(i=e[n].extensions.split(/\s*,\s*/),r=0;r<i.length;r++){if("*"===i[r])return[];if((o=this.mimes[i[r]])&&-1===s.inArray(o,a)&&a.push(o),t&&/^\w+$/.test(i[r]))a.push("."+i[r]);else if(!o)return[]}return a},mimes2exts:function(e){var n=this,r=[];return s.each(e,function(e){if("*"===e)return!(r=[]);var i=e.match(/^(\w+)\/(\*|\w+)$/);i&&("*"===i[2]?s.each(n.extensions,function(e,t){new RegExp("^"+i[1]+"/").test(t)&&[].push.apply(r,n.extensions[t])}):n.extensions[e]&&[].push.apply(r,n.extensions[e]))}),r},mimes2extList:function(e){var t=[],i=[];return"string"===s.typeOf(e)&&(e=s.trim(e).split(/\s*,\s*/)),i=this.mimes2exts(e),t.push({title:n.translate("Files"),extensions:i.length?i.join(","):"*"}),t.mimes=e,t},getFileExtension:function(e){var t=e&&e.match(/\.([^.]+)$/);return t?t[1].toLowerCase():""},getFileMime:function(e){return this.mimes[this.getFileExtension(e)]||""}};return e.addMimeType("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe"),e}),e("moxie/core/utils/Dom",["moxie/core/utils/Env"],function(c){function i(e,t){return!!e.className&&new RegExp("(^|\\s+)"+t+"(\\s+|$)").test(e.className)}return{get:function(e){return"string"!=typeof e?e:document.getElementById(e)},hasClass:i,addClass:function(e,t){i(e,t)||(e.className=e.className?e.className.replace(/\s+$/,"")+" "+t:t)},removeClass:function(e,t){if(e.className){var i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e.className=e.className.replace(i,function(e,t,i){return" "===t&&" "===i?" ":""})}},getStyle:function(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null)[t]:void 0},getPos:function(e,t){var i,n,r,o=0,a=0,s=document;function u(e){var t,i,n=0,r=0;return e&&(i=e.getBoundingClientRect(),t="CSS1Compat"===s.compatMode?s.documentElement:s.body,n=i.left+t.scrollLeft,r=i.top+t.scrollTop),{x:n,y:r}}if(e=e,t=t||s.body,e&&e.getBoundingClientRect&&"IE"===c.browser&&(!s.documentMode||s.documentMode<8))return n=u(e),r=u(t),{x:n.x-r.x,y:n.y-r.y};for(i=e;i&&i!=t&&i.nodeType;)o+=i.offsetLeft||0,a+=i.offsetTop||0,i=i.offsetParent;for(i=e.parentNode;i&&i!=t&&i.nodeType;)o-=i.scrollLeft||0,a-=i.scrollTop||0,i=i.parentNode;return{x:o,y:a}},getSize:function(e){return{w:e.offsetWidth||e.clientWidth,h:e.offsetHeight||e.clientHeight}}}}),e("moxie/core/Exceptions",["moxie/core/utils/Basic"],function(e){function t(e,t){var i;for(i in e)if(e[i]===t)return i;return null}return{RuntimeError:(s={NOT_INIT_ERR:1,NOT_SUPPORTED_ERR:9,JS_ERR:4},e.extend(d,s),d.prototype=Error.prototype,d),OperationNotAllowedException:(e.extend(l,{NOT_ALLOWED_ERR:1}),l.prototype=Error.prototype,l),ImageError:(a={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2,INVALID_META_ERR:3},e.extend(c,a),c.prototype=Error.prototype,c),FileException:(o={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8},e.extend(u,o),u.prototype=Error.prototype,u),DOMException:(r={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},e.extend(n,r),n.prototype=Error.prototype,n),EventException:(e.extend(i,{UNSPECIFIED_EVENT_TYPE_ERR:0}),i.prototype=Error.prototype,i)};function i(e){this.code=e,this.name="EventException"}function n(e){this.code=e,this.name=t(r,e),this.message=this.name+": DOMException "+this.code}var r,o,a,s;function u(e){this.code=e,this.name=t(o,e),this.message=this.name+": FileException "+this.code}function c(e){this.code=e,this.name=t(a,e),this.message=this.name+": ImageError "+this.code}function l(e){this.code=e,this.name="OperationNotAllowedException"}function d(e){this.code=e,this.name=t(s,e),this.message=this.name+": RuntimeError "+this.code}}),e("moxie/core/EventTarget",["moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Basic"],function(l,d,h){function e(){var c={};h.extend(this,{uid:null,init:function(){this.uid||(this.uid=h.guid("uid_"))},addEventListener:function(e,t,i,n){var r,o=this;this.hasOwnProperty("uid")||(this.uid=h.guid("uid_")),e=h.trim(e),/\s/.test(e)?h.each(e.split(/\s+/),function(e){o.addEventListener(e,t,i,n)}):(e=e.toLowerCase(),i=parseInt(i,10)||0,(r=c[this.uid]&&c[this.uid][e]||[]).push({fn:t,priority:i,scope:n||this}),c[this.uid]||(c[this.uid]={}),c[this.uid][e]=r)},hasEventListener:function(e){var t=e?c[this.uid]&&c[this.uid][e]:c[this.uid];return t||!1},removeEventListener:function(e,t){e=e.toLowerCase();var i,n=c[this.uid]&&c[this.uid][e];if(n){if(t){for(i=n.length-1;0<=i;i--)if(n[i].fn===t){n.splice(i,1);break}}else n=[];n.length||(delete c[this.uid][e],h.isEmptyObj(c[this.uid])&&delete c[this.uid])}},removeAllEventListeners:function(){c[this.uid]&&delete c[this.uid]},dispatchEvent:function(e){var t,i,n,r,o,a={},s=!0;if("string"!==h.typeOf(e)){if(r=e,"string"!==h.typeOf(r.type))throw new d.EventException(d.EventException.UNSPECIFIED_EVENT_TYPE_ERR);e=r.type,void 0!==r.total&&void 0!==r.loaded&&(a.total=r.total,a.loaded=r.loaded),a.async=r.async||!1}if(-1!==e.indexOf("::")?(o=e.split("::"),t=o[0],e=o[1]):t=this.uid,e=e.toLowerCase(),i=c[t]&&c[t][e]){i.sort(function(e,t){return t.priority-e.priority}),(n=[].slice.call(arguments)).shift(),a.type=e,n.unshift(a),MXI_DEBUG&&l.debug.events&&l.log("Event '%s' fired on %u",a.type,t);var u=[];h.each(i,function(t){n[0].target=t.scope,a.async?u.push(function(e){setTimeout(function(){e(!1===t.fn.apply(t.scope,n))},1)}):u.push(function(e){e(!1===t.fn.apply(t.scope,n))})}),u.length&&h.inSeries(u,function(e){s=!e})}return s},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},handleEventProps:function(e){var t=this;this.bind(e.join(" "),function(e){var t="on"+e.type.toLowerCase();"function"===h.typeOf(this[t])&&this[t].apply(this,arguments)}),h.each(e,function(e){e="on"+e.toLowerCase(e),"undefined"===h.typeOf(t[e])&&(t[e]=null)})}})}return e.instance=new e,e}),e("moxie/runtime/Runtime",["moxie/core/utils/Env","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/EventTarget"],function(l,d,h,i){var n={},m={};function f(e,t,r,i,n){var o,a,s=this,u=d.guid(t+"_"),c=n||"browser";e=e||{},m[u]=this,r=d.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,use_http_method:!0},r),e.preferred_caps&&(c=f.getMode(i,e.preferred_caps,c)),MXI_DEBUG&&l.debug.runtime&&l.log("\tdefault mode: %s",c),a={},o={exec:function(e,t,i,n){if(o[t]&&(a[e]||(a[e]={context:this,instance:new o[t]}),a[e].instance[i]))return a[e].instance[i].apply(this,n)},removeInstance:function(e){delete a[e]},removeAllInstances:function(){var i=this;d.each(a,function(e,t){"function"===d.typeOf(e.instance.destroy)&&e.instance.destroy.call(e.context),i.removeInstance(t)})}},d.extend(this,{initialized:!1,uid:u,type:t,mode:f.getMode(i,e.required_caps,c),shimid:u+"_container",clients:0,options:e,can:function(e,t){var i=arguments[2]||r;if("string"===d.typeOf(e)&&"undefined"===d.typeOf(t)&&(e=f.parseCaps(e)),"object"!==d.typeOf(e))return"function"===d.typeOf(i[e])?i[e].call(this,t):t===i[e];for(var n in e)if(!this.can(n,e[n],i))return!1;return!0},getShimContainer:function(){var e,t=h.get(this.shimid);return t||(e=this.options.container?h.get(this.options.container):document.body,(t=document.createElement("div")).id=this.shimid,t.className="moxie-shim moxie-shim-"+this.type,d.extend(t.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),e.appendChild(t),e=null),t},getShim:function(){return o},shimExec:function(e,t){var i=[].slice.call(arguments,2);return s.getShim().exec.call(this,this.uid,e,t,i)},exec:function(e,t){var i=[].slice.call(arguments,2);return s[e]&&s[e][t]?s[e][t].apply(this,i):s.shimExec.apply(this,arguments)},destroy:function(){if(s){var e=h.get(this.shimid);e&&e.parentNode.removeChild(e),o&&o.removeAllInstances(),this.unbindAll(),delete m[this.uid],this.uid=null,u=s=o=e=null}}}),this.mode&&e.required_caps&&!this.can(e.required_caps)&&(this.mode=!1)}return f.order="html5,html4",f.getRuntime=function(e){return!!m[e]&&m[e]},f.addConstructor=function(e,t){t.prototype=i.instance,n[e]=t},f.getConstructor=function(e){return n[e]||null},f.getInfo=function(e){var t=f.getRuntime(e);return t?{uid:t.uid,type:t.type,mode:t.mode,can:function(){return t.can.apply(t,arguments)}}:null},f.parseCaps=function(e){var t={};return"string"!==d.typeOf(e)?e||{}:(d.each(e.split(","),function(e){t[e]=!0}),t)},f.can=function(e,t){var i,n,r=f.getConstructor(e);return!!r&&(n=(i=new r({required_caps:t})).mode,i.destroy(),!!n)},f.thatCan=function(e,t){var i=(t||f.order).split(/\s*,\s*/);for(var n in i)if(f.can(i[n],e))return i[n];return null},f.getMode=function(n,e,t){var r=null;if("undefined"===d.typeOf(t)&&(t="browser"),e&&!d.isEmptyObj(n)){if(d.each(e,function(e,t){if(n.hasOwnProperty(t)){var i=n[t](e);if("string"==typeof i&&(i=[i]),r){if(!(r=d.arrayIntersect(r,i)))return MXI_DEBUG&&l.debug.runtime&&l.log("\t\t%c: %v (conflicting mode requested: %s)",t,e,i),r=!1}else r=i}MXI_DEBUG&&l.debug.runtime&&l.log("\t\t%c: %v (compatible modes: %s)",t,e,r)}),r)return-1!==d.inArray(t,r)?t:r[0];if(!1===r)return!1}return t},f.capTrue=function(){return!0},f.capFalse=function(){return!1},f.capTest=function(e){return function(){return!!e}},f}),e("moxie/runtime/RuntimeClient",["moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/Runtime"],function(s,u,t,c){return function(){var a;t.extend(this,{connectRuntime:function(r){var e,o=this;if("string"===t.typeOf(r)?e=r:"string"===t.typeOf(r.ruid)&&(e=r.ruid),e){if(a=c.getRuntime(e))return a.clients++,a;throw new u.RuntimeError(u.RuntimeError.NOT_INIT_ERR)}!function e(t){var i,n;if(!t.length)return o.trigger("RuntimeError",new u.RuntimeError(u.RuntimeError.NOT_INIT_ERR)),void(a=null);i=t.shift().toLowerCase(),(n=c.getConstructor(i))?(MXI_DEBUG&&s.debug.runtime&&(s.log("Trying runtime: %s",i),s.log(r)),(a=new n(r)).bind("Init",function(){a.initialized=!0,MXI_DEBUG&&s.debug.runtime&&s.log("Runtime '%s' initialized",a.type),setTimeout(function(){a.clients++,o.trigger("RuntimeInit",a)},1)}),a.bind("Error",function(){MXI_DEBUG&&s.debug.runtime&&s.log("Runtime '%s' failed to initialize",a.type),a.destroy(),e(t)}),MXI_DEBUG&&s.debug.runtime&&s.log("\tselected mode: %s",a.mode),a.mode?a.init():a.trigger("Error")):e(t)}((r.runtime_order||c.order).split(/\s*,\s*/))},disconnectRuntime:function(){a&&--a.clients<=0&&a.destroy(),a=null},getRuntime:function(){return a&&a.uid?a:a=null},exec:function(){return a?a.exec.apply(this,arguments):null}})}}),e("moxie/file/FileInput",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Mime","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/I18n","moxie/runtime/Runtime","moxie/runtime/RuntimeClient"],function(a,r,s,u,c,e,l,d,h){var m=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];function t(o){MXI_DEBUG&&r.log("Instantiating FileInput...");var e,t,i,n=this;if(-1!==a.inArray(a.typeOf(o),["string","node"])&&(o={browse_button:o}),!(t=u.get(o.browse_button)))throw new c.DOMException(c.DOMException.NOT_FOUND_ERR);i={accept:[{title:l.translate("All Files"),extensions:"*"}],name:"file",multiple:!1,required_caps:!1,container:t.parentNode||document.body},"string"==typeof(o=a.extend({},i,o)).required_caps&&(o.required_caps=d.parseCaps(o.required_caps)),"string"==typeof o.accept&&(o.accept=s.mimes2extList(o.accept)),e=(e=u.get(o.container))||document.body,"static"===u.getStyle(e,"position")&&(e.style.position="relative"),e=t=null,h.call(n),a.extend(n,{uid:a.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){n.bind("RuntimeInit",function(e,r){n.ruid=r.uid,n.shimid=r.shimid,n.bind("Ready",function(){n.trigger("Refresh")},999),n.bind("Refresh",function(){var e,t,i,n;i=u.get(o.browse_button),n=u.get(r.shimid),i&&(e=u.getPos(i,u.get(o.container)),t=u.getSize(i),n&&a.extend(n.style,{top:e.y+"px",left:e.x+"px",width:t.w+"px",height:t.h+"px"})),n=i=null}),r.exec.call(n,"FileInput","init",o)}),n.connectRuntime(a.extend({},o,{required_caps:{select_file:!0}}))},disable:function(e){var t=this.getRuntime();t&&t.exec.call(this,"FileInput","disable","undefined"===a.typeOf(e)||e)},refresh:function(){n.trigger("Refresh")},destroy:function(){var e=this.getRuntime();e&&(e.exec.call(this,"FileInput","destroy"),this.disconnectRuntime()),"array"===a.typeOf(this.files)&&a.each(this.files,function(e){e.destroy()}),this.files=null,this.unbindAll()}}),this.handleEventProps(m)}return t.prototype=e.instance,t}),e("moxie/core/utils/Encode",[],function(){function m(e){return unescape(encodeURIComponent(e))}function f(e){return decodeURIComponent(escape(e))}return{utf8_encode:m,utf8_decode:f,atob:function(e,t){if("function"==typeof window.atob)return t?f(window.atob(e)):window.atob(e);var i,n,r,o,a,s,u,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,d=0,h=[];if(!e)return e;for(e+="";i=(s=c.indexOf(e.charAt(l++))<<18|c.indexOf(e.charAt(l++))<<12|(o=c.indexOf(e.charAt(l++)))<<6|(a=c.indexOf(e.charAt(l++))))>>16&255,n=s>>8&255,r=255&s,h[d++]=64==o?String.fromCharCode(i):64==a?String.fromCharCode(i,n):String.fromCharCode(i,n,r),l<e.length;);return u=h.join(""),t?f(u):u},btoa:function(e,t){if(t&&(e=m(e)),"function"==typeof window.btoa)return window.btoa(e);var i,n,r,o,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=0,c=0,l="",d=[];if(!e)return e;for(;i=(a=e.charCodeAt(u++)<<16|e.charCodeAt(u++)<<8|e.charCodeAt(u++))>>18&63,n=a>>12&63,r=a>>6&63,o=63&a,d[c++]=s.charAt(i)+s.charAt(n)+s.charAt(r)+s.charAt(o),u<e.length;);l=d.join("");var h=e.length%3;return(h?l.slice(0,h-3):l)+"===".slice(h||3)}}}),e("moxie/file/Blob",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient"],function(a,i,n){var s={};return function o(e,t){n.call(this),e&&this.connectRuntime(e),t?"string"===a.typeOf(t)&&(t={data:t}):t={},a.extend(this,{uid:t.uid||a.guid("uid_"),ruid:e,size:t.size||0,type:t.type||"",slice:function(e,t,i){return this.isDetached()?function(e,t,i){var n,r=s[this.uid];return"string"===a.typeOf(r)&&r.length?((n=new o(null,{type:i,size:t-e})).detach(r.substr(e,n.size)),n):null}.apply(this,arguments):this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),e,t,i)},getSource:function(){return s[this.uid]?s[this.uid]:null},detach:function(e){if(this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy"),this.disconnectRuntime(),this.ruid=null),"data:"==(e=e||"").substr(0,5)){var t=e.indexOf(";base64,");this.type=e.substring(5,t),e=i.atob(e.substring(t+8))}this.size=e.length,s[this.uid]=e},isDetached:function(){return!this.ruid&&"string"===a.typeOf(s[this.uid])},destroy:function(){this.detach(),delete s[this.uid]}}),t.data?this.detach(t.data):s[this.uid]=t}}),e("moxie/file/File",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/file/Blob"],function(r,o,a){function e(e,t){var i;if(t=t||{},a.apply(this,arguments),this.type||(this.type=o.getFileMime(t.name)),t.name)i=(i=t.name.replace(/\\/g,"/")).substr(i.lastIndexOf("/")+1);else if(this.type){var n=this.type.split("/")[0];i=r.guid((""!==n?n:"file")+"_"),o.extensions[this.type]&&(i+="."+o.extensions[this.type][0])}r.extend(this,{name:i||r.guid("file_"),relativePath:"",lastModifiedDate:t.lastModifiedDate||(new Date).toLocaleString()})}return e.prototype=a.prototype,e}),e("moxie/file/FileDrop",["moxie/core/I18n","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/core/utils/Env","moxie/file/File","moxie/runtime/RuntimeClient","moxie/core/EventTarget","moxie/core/utils/Mime"],function(t,r,e,o,a,i,s,n,u){var c=["ready","dragenter","dragleave","drop","error"];function l(i){MXI_DEBUG&&a.log("Instantiating FileDrop...");var e,n=this;"string"==typeof i&&(i={drop_zone:i}),e={accept:[{title:t.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0}},(i="object"==typeof i?o.extend({},e,i):e).container=r.get(i.drop_zone)||document.body,"static"===r.getStyle(i.container,"position")&&(i.container.style.position="relative"),"string"==typeof i.accept&&(i.accept=u.mimes2extList(i.accept)),s.call(n),o.extend(n,{uid:o.guid("uid_"),ruid:null,files:null,init:function(){n.bind("RuntimeInit",function(e,t){n.ruid=t.uid,t.exec.call(n,"FileDrop","init",i),n.dispatchEvent("ready")}),n.connectRuntime(i)},destroy:function(){var e=this.getRuntime();e&&(e.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime()),this.files=null,this.unbindAll()}}),this.handleEventProps(c)}return l.prototype=n.instance,l}),e("moxie/file/FileReader",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/core/Exceptions","moxie/core/EventTarget","moxie/file/Blob","moxie/runtime/RuntimeClient"],function(e,n,r,t,o,i){var a=["loadstart","progress","load","abort","error","loadend"];function s(){function t(e,t){if(this.trigger("loadstart"),this.readyState===s.LOADING)return this.trigger("error",new r.DOMException(r.DOMException.INVALID_STATE_ERR)),void this.trigger("loadend");if(!(t instanceof o))return this.trigger("error",new r.DOMException(r.DOMException.NOT_FOUND_ERR)),void this.trigger("loadend");if(this.result=null,this.readyState=s.LOADING,t.isDetached()){var i=t.getSource();switch(e){case"readAsText":case"readAsBinaryString":this.result=i;break;case"readAsDataURL":this.result="data:"+t.type+";base64,"+n.btoa(i)}this.readyState=s.DONE,this.trigger("load"),this.trigger("loadend")}else this.connectRuntime(t.ruid),this.exec("FileReader","read",e,t)}i.call(this),e.extend(this,{uid:e.guid("uid_"),readyState:s.EMPTY,result:null,error:null,readAsBinaryString:function(e){t.call(this,"readAsBinaryString",e)},readAsDataURL:function(e){t.call(this,"readAsDataURL",e)},readAsText:function(e){t.call(this,"readAsText",e)},abort:function(){this.result=null,-1===e.inArray(this.readyState,[s.EMPTY,s.DONE])&&(this.readyState===s.LOADING&&(this.readyState=s.DONE),this.exec("FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort(),this.exec("FileReader","destroy"),this.disconnectRuntime(),this.unbindAll()}}),this.handleEventProps(a),this.bind("Error",function(e,t){this.readyState=s.DONE,this.error=t},999),this.bind("Load",function(e){this.readyState=s.DONE},999)}return s.EMPTY=0,s.LOADING=1,s.DONE=2,s.prototype=t.instance,s}),e("moxie/core/utils/Url",[],function(){var s=function(e,t){for(var i=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],n=i.length,r={},o=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(e||"");n--;)o[n]&&(r[i[n]]=o[n]);if(!r.scheme){t&&"string"!=typeof t||(t=s(t||document.location.href)),r.scheme=t.scheme,r.host=t.host,r.port=t.port;var a="";/^[^\/]/.test(r.path)&&(a=t.path,a=/\/[^\/]*\.[^\/]*$/.test(a)?a.replace(/\/[^\/]+$/,"/"):a.replace(/\/?$/,"/")),r.path=a+(r.path||"")}return r.port||(r.port={http:80,https:443}[r.scheme]||80),r.port=parseInt(r.port,10),r.path||(r.path="/"),delete r.source,r};return{parseUrl:s,resolveUrl:function(e){var t="object"==typeof e?e:s(e);return t.scheme+"://"+t.host+(t.port!=={http:80,https:443}[t.scheme]?":"+t.port:"")+t.path+(t.query?t.query:"")},hasSameOrigin:function(e){function t(e){return[e.scheme,e.host,e.port].join("/")}return"string"==typeof e&&(e=s(e)),t(s())===t(e)}}}),e("moxie/runtime/RuntimeTarget",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(e,t,i){function n(){this.uid=e.guid("uid_"),t.call(this),this.destroy=function(){this.disconnectRuntime(),this.unbindAll()}}return n.prototype=i.instance,n}),e("moxie/file/FileReaderSync",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/utils/Encode"],function(e,i,s){return function(){function t(e,t){if(!t.isDetached()){var i=this.connectRuntime(t.ruid).exec.call(this,"FileReaderSync","read",e,t);return this.disconnectRuntime(),i}var n=t.getSource();switch(e){case"readAsBinaryString":return n;case"readAsDataURL":return"data:"+t.type+";base64,"+s.btoa(n);case"readAsText":for(var r="",o=0,a=n.length;o<a;o++)r+=String.fromCharCode(n[o]);return r}}i.call(this),e.extend(this,{uid:e.guid("uid_"),readAsBinaryString:function(e){return t.call(this,"readAsBinaryString",e)},readAsDataURL:function(e){return t.call(this,"readAsDataURL",e)},readAsText:function(e){return t.call(this,"readAsText",e)}})}}),e("moxie/xhr/FormData",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/Blob"],function(e,a,s){return function(){var r,o=[];a.extend(this,{append:function(i,e){var n=this,t=a.typeOf(e);e instanceof s?r={name:i,value:e}:"array"===t?(i+="[]",a.each(e,function(e){n.append(i,e)})):"object"===t?a.each(e,function(e,t){n.append(i+"["+t+"]",e)}):"null"===t||"undefined"===t||"number"===t&&isNaN(e)?n.append(i,"false"):o.push({name:i,value:e.toString()})},hasBlob:function(){return!!this.getBlob()},getBlob:function(){return r&&r.value||null},getBlobName:function(){return r&&r.name||null},each:function(t){a.each(o,function(e){t(e.value,e.name)}),r&&t(r.value,r.name)},destroy:function(){r=null,o=[]}})}}),e("moxie/xhr/XMLHttpRequest",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/core/utils/Url","moxie/runtime/Runtime","moxie/runtime/RuntimeTarget","moxie/file/Blob","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/core/utils/Env","moxie/core/utils/Mime"],function(_,b,e,A,I,T,S,O,t,D,N,C){var M={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};function L(){this.uid=_.guid("uid_")}L.prototype=e.instance;var F=["loadstart","progress","abort","error","load","timeout","loadend"];function B(){var a,s,u,c,o,i,n=this,r={timeout:0,readyState:B.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},l=!0,d={},h=null,m=null,f=!1,p=!1,g=!1,x=!1,E=!1,v=!1,y={},w="";function R(e,t){if(r.hasOwnProperty(e))return 1===arguments.length?N.can("define_property")?r[e]:n[e]:void(N.can("define_property")?r[e]=t:n[e]=t)}_.extend(this,r,{uid:_.guid("uid_"),upload:new L,open:function(e,t,i,n,r){var o;if(!e||!t)throw new b.DOMException(b.DOMException.SYNTAX_ERR);if(/[\u0100-\uffff]/.test(e)||A.utf8_encode(e)!==e)throw new b.DOMException(b.DOMException.SYNTAX_ERR);if(~_.inArray(e.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])&&(s=e.toUpperCase()),~_.inArray(s,["CONNECT","TRACE","TRACK"]))throw new b.DOMException(b.DOMException.SECURITY_ERR);if(t=A.utf8_encode(t),o=I.parseUrl(t),v=I.hasSameOrigin(o),a=I.resolveUrl(t),(n||r)&&!v)throw new b.DOMException(b.DOMException.INVALID_ACCESS_ERR);if(u=n||o.user,c=r||o.pass,!1===(l=i||!0)&&(R("timeout")||R("withCredentials")||""!==R("responseType")))throw new b.DOMException(b.DOMException.INVALID_ACCESS_ERR);f=!l,p=!1,d={},function(){R("responseText",""),R("responseXML",null),R("response",null),R("status",0),R("statusText",""),null}.call(this),R("readyState",B.OPENED),this.dispatchEvent("readystatechange")},setRequestHeader:function(e,t){if(R("readyState")!==B.OPENED||p)throw new b.DOMException(b.DOMException.INVALID_STATE_ERR);if(/[\u0100-\uffff]/.test(e)||A.utf8_encode(e)!==e)throw new b.DOMException(b.DOMException.SYNTAX_ERR);return e=_.trim(e).toLowerCase(),!~_.inArray(e,["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"])&&!/^(proxy\-|sec\-)/.test(e)&&(d[e]?d[e]+=", "+t:d[e]=t,!0)},getAllResponseHeaders:function(){return w||""},getResponseHeader:function(e){return e=e.toLowerCase(),E||~_.inArray(e,["set-cookie","set-cookie2"])?null:w&&""!==w&&(i||(i={},_.each(w.split(/\r\n/),function(e){var t=e.split(/:\s+/);2===t.length&&(t[0]=_.trim(t[0]),i[t[0].toLowerCase()]={header:t[0],value:_.trim(t[1])})})),i.hasOwnProperty(e))?i[e].header+": "+i[e].value:null},overrideMimeType:function(e){var t,i;if(~_.inArray(R("readyState"),[B.LOADING,B.DONE]))throw new b.DOMException(b.DOMException.INVALID_STATE_ERR);if(e=_.trim(e.toLowerCase()),/;/.test(e)&&(t=e.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))&&(e=t[1],t[2]&&(i=t[2])),!C.mimes[e])throw new b.DOMException(b.DOMException.SYNTAX_ERR);e,i},send:function(e,t){if(y="string"===_.typeOf(t)?{ruid:t}:t||{},this.readyState!==B.OPENED||p)throw new b.DOMException(b.DOMException.INVALID_STATE_ERR);if(e instanceof O)y.ruid=e.ruid,m=e.type||"application/octet-stream";else if(e instanceof D){if(e.hasBlob()){var i=e.getBlob();y.ruid=i.ruid,m=i.type||"application/octet-stream"}}else"string"==typeof e&&(h="UTF-8",m="text/plain;charset=UTF-8",e=A.utf8_encode(e));this.withCredentials||(this.withCredentials=y.required_caps&&y.required_caps.send_browser_cookies&&!v),g=!f&&this.upload.hasEventListener(),E=!1,x=!e,f||(p=!0),function(e){var i=this;function n(){o&&(o.destroy(),o=null),i.dispatchEvent("loadend"),i=null}function r(t){o.bind("LoadStart",function(e){R("readyState",B.LOADING),i.dispatchEvent("readystatechange"),i.dispatchEvent(e),g&&i.upload.dispatchEvent(e)}),o.bind("Progress",function(e){R("readyState")!==B.LOADING&&(R("readyState",B.LOADING),i.dispatchEvent("readystatechange")),i.dispatchEvent(e)}),o.bind("UploadProgress",function(e){g&&i.upload.dispatchEvent({type:"progress",lengthComputable:!1,total:e.total,loaded:e.loaded})}),o.bind("Load",function(e){R("readyState",B.DONE),R("status",Number(t.exec.call(o,"XMLHttpRequest","getStatus")||0)),R("statusText",M[R("status")]||""),R("response",t.exec.call(o,"XMLHttpRequest","getResponse",R("responseType"))),~_.inArray(R("responseType"),["text",""])?R("responseText",R("response")):"document"===R("responseType")&&R("responseXML",R("response")),w=t.exec.call(o,"XMLHttpRequest","getAllResponseHeaders"),i.dispatchEvent("readystatechange"),0<R("status")?(g&&i.upload.dispatchEvent(e),i.dispatchEvent(e)):(E=!0,i.dispatchEvent("error")),n()}),o.bind("Abort",function(e){i.dispatchEvent(e),n()}),o.bind("Error",function(e){E=!0,R("readyState",B.DONE),i.dispatchEvent("readystatechange"),x=!0,i.dispatchEvent(e),n()}),t.exec.call(o,"XMLHttpRequest","send",{url:a,method:s,async:l,user:u,password:c,headers:d,mimeType:m,encoding:h,responseType:i.responseType,withCredentials:i.withCredentials,options:y},e)}(new Date).getTime(),o=new S,"string"==typeof y.required_caps&&(y.required_caps=T.parseCaps(y.required_caps));y.required_caps=_.extend({},y.required_caps,{return_response_type:i.responseType}),e instanceof D&&(y.required_caps.send_multipart=!0);_.isEmptyObj(d)||(y.required_caps.send_custom_headers=!0);v||(y.required_caps.do_cors=!0);y.ruid?r(o.connectRuntime(y)):(o.bind("RuntimeInit",function(e,t){r(t)}),o.bind("RuntimeError",function(e,t){i.dispatchEvent("RuntimeError",t)}),o.connectRuntime(y))}.call(this,e)},abort:function(){if(f=!(E=!0),~_.inArray(R("readyState"),[B.UNSENT,B.OPENED,B.DONE]))R("readyState",B.UNSENT);else{if(R("readyState",B.DONE),p=!1,!o)throw new b.DOMException(b.DOMException.INVALID_STATE_ERR);o.getRuntime().exec.call(o,"XMLHttpRequest","abort",x),x=!0}},destroy:function(){o&&("function"===_.typeOf(o.destroy)&&o.destroy(),o=null),this.unbindAll(),this.upload&&(this.upload.unbindAll(),this.upload=null)}}),this.handleEventProps(F.concat(["readystatechange"])),this.upload.handleEventProps(F)}return B.UNSENT=0,B.OPENED=1,B.HEADERS_RECEIVED=2,B.LOADING=3,B.DONE=4,B.prototype=e.instance,B}),e("moxie/runtime/Transporter",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(h,i,e,t){function m(){var o,n,a,s,r,u;function c(){s=r=0,a=this.result=null}function l(e,t){var i=this;n=t,i.bind("TransportingProgress",function(e){(r=e.loaded)<s&&-1===h.inArray(i.state,[m.IDLE,m.DONE])&&d.call(i)},999),i.bind("TransportingComplete",function(){r=s,i.state=m.DONE,a=null,i.result=n.exec.call(i,"Transporter","getAsBlob",e||"")},999),i.state=m.BUSY,i.trigger("TransportingStarted"),d.call(i)}function d(){var e,t=s-r;t<u&&(u=t),e=i.btoa(a.substr(r,u)),n.exec.call(this,"Transporter","receive",e,s)}e.call(this),h.extend(this,{uid:h.guid("uid_"),state:m.IDLE,result:null,transport:function(e,i,t){var n=this;if(t=h.extend({chunk_size:204798},t),(o=t.chunk_size%3)&&(t.chunk_size+=3-o),u=t.chunk_size,c.call(this),s=(a=e).length,"string"===h.typeOf(t)||t.ruid)l.call(n,i,this.connectRuntime(t));else{var r=function(e,t){n.unbind("RuntimeInit",r),l.call(n,i,t)};this.bind("RuntimeInit",r),this.connectRuntime(t)}},abort:function(){this.state=m.IDLE,n&&(n.exec.call(this,"Transporter","clear"),this.trigger("TransportingAborted")),c.call(this)},destroy:function(){this.unbindAll(),n=null,this.disconnectRuntime(),c.call(this)}})}return m.IDLE=0,m.BUSY=1,m.DONE=2,m.prototype=t.instance,m}),e("moxie/image/Image",["moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/file/FileReaderSync","moxie/xhr/XMLHttpRequest","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/runtime/Transporter","moxie/core/utils/Env","moxie/core/EventTarget","moxie/file/Blob","moxie/file/File","moxie/core/utils/Encode"],function(c,i,l,e,a,s,t,d,h,n,u,m,f){var p=["progress","load","error","resize","embedded"];function g(){function n(e,t){var i=this.connectRuntime(e.ruid);this.ruid=i.uid,i.exec.call(this,"Image","loadFromImage",e,"undefined"===c.typeOf(t)||t)}function r(t,e){var i=this;function n(e){i.ruid=e.uid,e.exec.call(i,"Image","loadFromBlob",t)}i.name=t.name||"",t.isDetached()?(this.bind("RuntimeInit",function(e,t){n(t)}),e&&"string"==typeof e.required_caps&&(e.required_caps=s.parseCaps(e.required_caps)),this.connectRuntime(c.extend({required_caps:{access_image_binary:!0,resize_image:!0}},e))):n(this.connectRuntime(t.ruid))}function o(e,t){var i,n=this;(i=new a).open("get",e),i.responseType="blob",i.onprogress=function(e){n.trigger(e)},i.onload=function(){r.call(n,i.response,!0)},i.onerror=function(e){n.trigger(e)},i.onloadend=function(){i.destroy()},i.bind("RuntimeError",function(e,t){n.trigger("RuntimeError",t)}),i.send(null,t)}t.call(this),c.extend(this,{uid:c.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){(function e(t){var i=c.typeOf(t);try{if(t instanceof g){if(!t.size)throw new l.DOMException(l.DOMException.INVALID_STATE_ERR);n.apply(this,arguments)}else if(t instanceof u){if(!~c.inArray(t.type,["image/jpeg","image/png"]))throw new l.ImageError(l.ImageError.WRONG_FORMAT);r.apply(this,arguments)}else if(-1!==c.inArray(i,["blob","file"]))e.call(this,new m(null,t),arguments[1]);else if("string"===i)"data:"===t.substr(0,5)?e.call(this,new u(null,{data:t}),arguments[1]):o.apply(this,arguments);else{if("node"!==i||"img"!==t.nodeName.toLowerCase())throw new l.DOMException(l.DOMException.TYPE_MISMATCH_ERR);e.call(this,t.src,arguments[1])}}catch(e){this.trigger("error",e.code)}}).apply(this,arguments)},downsize:function(e){var t={width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90,crop:!1,preserveHeaders:!0,resample:!1};e="object"==typeof e?c.extend(t,e):c.extend(t,{width:arguments[0],height:arguments[1],crop:arguments[2],preserveHeaders:arguments[3]});try{if(!this.size)throw new l.DOMException(l.DOMException.INVALID_STATE_ERR);if(this.width>g.MAX_RESIZE_WIDTH||this.height>g.MAX_RESIZE_HEIGHT)throw new l.ImageError(l.ImageError.MAX_RESOLUTION_ERR);this.exec("Image","downsize",e.width,e.height,e.crop,e.preserveHeaders)}catch(e){this.trigger("error",e.code)}},crop:function(e,t,i){this.downsize(e,t,!0,i)},getAsCanvas:function(){if(!h.can("create_canvas"))throw new l.RuntimeError(l.RuntimeError.NOT_SUPPORTED_ERR);return this.connectRuntime(this.ruid).exec.call(this,"Image","getAsCanvas")},getAsBlob:function(e,t){if(!this.size)throw new l.DOMException(l.DOMException.INVALID_STATE_ERR);return this.exec("Image","getAsBlob",e||"image/jpeg",t||90)},getAsDataURL:function(e,t){if(!this.size)throw new l.DOMException(l.DOMException.INVALID_STATE_ERR);return this.exec("Image","getAsDataURL",e||"image/jpeg",t||90)},getAsBinaryString:function(e,t){var i=this.getAsDataURL(e,t);return f.atob(i.substring(i.indexOf("base64,")+7))},embed:function(a,e){var s,u=this;e=c.extend({width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90},e||{});try{if(!(a=i.get(a)))throw new l.DOMException(l.DOMException.INVALID_NODE_TYPE_ERR);if(!this.size)throw new l.DOMException(l.DOMException.INVALID_STATE_ERR);this.width>g.MAX_RESIZE_WIDTH||this.height;var t=new g;return t.bind("Resize",function(){(function(e,t){var i=this;if(h.can("create_canvas")){var n=i.getAsCanvas();if(n)return a.appendChild(n),n=null,i.destroy(),void u.trigger("embedded")}var r=i.getAsDataURL(e,t);if(!r)throw new l.ImageError(l.ImageError.WRONG_FORMAT);if(h.can("use_data_uri_of",r.length))a.innerHTML='<img src="'+r+'" width="'+i.width+'" height="'+i.height+'" />',i.destroy(),u.trigger("embedded");else{var o=new d;o.bind("TransportingComplete",function(){s=u.connectRuntime(this.result.ruid),u.bind("Embedded",function(){c.extend(s.getShimContainer().style,{top:"0px",left:"0px",width:i.width+"px",height:i.height+"px"}),s=null},999),s.exec.call(u,"ImageView","display",this.result.uid,width,height),i.destroy()}),o.transport(f.atob(r.substring(r.indexOf("base64,")+7)),e,{required_caps:{display_media:!0},runtime_order:"flash,silverlight",container:a})}}).call(this,e.type,e.quality)}),t.bind("Load",function(){t.downsize(e)}),this.meta.thumb&&this.meta.thumb.width>=e.width&&this.meta.thumb.height>=e.height?t.load(this.meta.thumb.data):t.clone(this,!1),t}catch(e){this.trigger("error",e.code)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime()),this.unbindAll()}}),this.handleEventProps(p),this.bind("Load Resize",function(){(function(e){e=e||this.exec("Image","getInfo");this.size=e.size,this.width=e.width,this.height=e.height,this.type=e.type,this.meta=e.meta,""===this.name&&(this.name=e.name)}).call(this)},999)}return g.MAX_RESIZE_WIDTH=8192,g.MAX_RESIZE_HEIGHT=8192,g.prototype=n.instance,g}),e("moxie/runtime/html5/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(s,e,u,c){var l={};return u.addConstructor("html5",function(e){var t,i,n=this,r=u.capTest,o=u.capTrue,a=s.extend({access_binary:r(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return n.can("access_binary")&&!!l.Image},display_media:r(c.can("create_canvas")||c.can("use_data_uri_over32kb")),do_cors:r(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),drag_and_drop:r((t=document.createElement("div"),("draggable"in t||"ondragstart"in t&&"ondrop"in t)&&("IE"!==c.browser||c.verComp(c.version,9,">")))),filter_by_extension:r("Chrome"===c.browser&&c.verComp(c.version,28,">=")||"IE"===c.browser&&c.verComp(c.version,10,">=")||"Safari"===c.browser&&c.verComp(c.version,7,">=")),return_response_headers:o,return_response_type:function(e){return!("json"!==e||!window.JSON)||c.can("return_response_type",e)},return_status_code:o,report_upload_progress:r(window.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return n.can("access_binary")&&c.can("create_canvas")},select_file:function(){return c.can("use_fileinput")&&window.File},select_folder:function(){return n.can("select_file")&&"Chrome"===c.browser&&c.verComp(c.version,21,">=")},select_multiple:function(){return n.can("select_file")&&!("Safari"===c.browser&&"Windows"===c.os)&&!("iOS"===c.os&&c.verComp(c.osVersion,"7.0.0",">")&&c.verComp(c.osVersion,"8.0.0","<"))},send_binary_string:r(window.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:r(window.XMLHttpRequest),send_multipart:function(){return!!(window.XMLHttpRequest&&(new XMLHttpRequest).upload&&window.FormData)||n.can("send_binary_string")},slice_blob:r(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return n.can("slice_blob")&&n.can("send_multipart")},summon_file_dialog:function(){return n.can("select_file")&&("Firefox"===c.browser&&c.verComp(c.version,4,">=")||"Opera"===c.browser&&c.verComp(c.version,12,">=")||"IE"===c.browser&&c.verComp(c.version,10,">=")||!!~s.inArray(c.browser,["Chrome","Safari"]))},upload_filesize:o},arguments[2]);u.call(this,e,arguments[1]||"html5",a),s.extend(this,{init:function(){this.trigger("Init")},destroy:(i=this.destroy,function(){i.call(n),i=n=null})}),s.extend(this.getShim(),l)}),l}),e("moxie/core/utils/Events",["moxie/core/utils/Basic"],function(a){var s={},u="moxie_"+a.guid();function c(){this.returnValue=!1}function l(){this.cancelBubble=!0}function r(t,e,i){var n;if(e=e.toLowerCase(),t[u]&&s[t[u]]&&s[t[u]][e]){for(var r=(n=s[t[u]][e]).length-1;0<=r&&(n[r].orig!==i&&n[r].key!==i||(t.removeEventListener?t.removeEventListener(e,n[r].func,!1):t.detachEvent&&t.detachEvent("on"+e,n[r].func),n[r].orig=null,n[r].func=null,n.splice(r,1),void 0===i));r--);if(n.length||delete s[t[u]][e],a.isEmptyObj(s[t[u]])){delete s[t[u]];try{delete t[u]}catch(e){t[u]=void 0}}}}return{addEvent:function(e,t,i,n){var r,o;t=t.toLowerCase(),e.addEventListener?(r=i,e.addEventListener(t,r,!1)):e.attachEvent&&(r=function(){var e=window.event;e.target||(e.target=e.srcElement),e.preventDefault=c,e.stopPropagation=l,i(e)},e.attachEvent("on"+t,r)),e[u]||(e[u]=a.guid()),s.hasOwnProperty(e[u])||(s[e[u]]={}),(o=s[e[u]]).hasOwnProperty(t)||(o[t]=[]),o[t].push({func:r,orig:i,key:n})},removeEvent:r,removeAllEvents:function(i,n){i&&i[u]&&a.each(s[i[u]],function(e,t){r(i,t,n)})}}}),e("moxie/runtime/html5/file/FileInput",["moxie/runtime/html5/Runtime","moxie/file/File","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(e,l,d,h,m,f,p){return e.FileInput=function(){var c;d.extend(this,{init:function(e){var t,i,n,r,o,a,s=this,u=s.getRuntime();n=(c=e).accept.mimes||f.extList2mimes(c.accept,u.can("filter_by_extension")),(i=u.getShimContainer()).innerHTML='<input id="'+u.uid+'" type="file" style="font-size:999px;opacity:0;"'+(c.multiple&&u.can("select_multiple")?"multiple":"")+(c.directory&&u.can("select_folder")?"webkitdirectory directory":"")+(n?' accept="'+n.join(",")+'"':"")+" />",t=h.get(u.uid),d.extend(t.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),r=h.get(c.browse_button),u.can("summon_file_dialog")&&("static"===h.getStyle(r,"position")&&(r.style.position="relative"),o=parseInt(h.getStyle(r,"z-index"),10)||1,r.style.zIndex=o,i.style.zIndex=o-1,m.addEvent(r,"click",function(e){var t=h.get(u.uid);t&&!t.disabled&&t.click(),e.preventDefault()},s.uid)),a=u.can("summon_file_dialog")?r:i,m.addEvent(a,"mouseover",function(){s.trigger("mouseenter")},s.uid),m.addEvent(a,"mouseout",function(){s.trigger("mouseleave")},s.uid),m.addEvent(a,"mousedown",function(){s.trigger("mousedown")},s.uid),m.addEvent(h.get(c.container),"mouseup",function(){s.trigger("mouseup")},s.uid),t.onchange=function e(t){if(s.files=[],d.each(this.files,function(e){var t="";if(c.directory&&"."==e.name)return!0;e.webkitRelativePath&&(t="/"+e.webkitRelativePath.replace(/^\//,"")),(e=new l(u.uid,e)).relativePath=t,s.files.push(e)}),"IE"!==p.browser&&"IEMobile"!==p.browser)this.value="";else{var i=this.cloneNode(!0);this.parentNode.replaceChild(i,this),i.onchange=e}s.files.length&&s.trigger("change")},s.trigger({type:"ready",async:!0}),i=null},disable:function(e){var t,i=this.getRuntime();(t=h.get(i.uid))&&(t.disabled=!!e)},destroy:function(){var e=this.getRuntime(),t=e.getShim(),i=e.getShimContainer();m.removeAllEvents(i,this.uid),m.removeAllEvents(c&&h.get(c.container),this.uid),m.removeAllEvents(c&&h.get(c.browse_button),this.uid),i&&(i.innerHTML=""),t.removeInstance(this.uid),c=i=t=null}})}}),e("moxie/runtime/html5/file/Blob",["moxie/runtime/html5/Runtime","moxie/file/Blob"],function(e,t){return e.Blob=function(){this.slice=function(){return new t(this.getRuntime().uid,function(t,i,n){var e;if(!window.File.prototype.slice)return(e=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)?e.call(t,i,n):null;try{return t.slice(),t.slice(i,n)}catch(e){return t.slice(i,n-i)}}.apply(this,arguments))}}}),e("moxie/runtime/html5/file/FileDrop",["moxie/runtime/html5/Runtime","moxie/file/File","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime"],function(e,l,d,t,h,m){return e.FileDrop=function(){var n,r,o=[],a=[];function s(e){if(!e.dataTransfer||!e.dataTransfer.types)return!1;var t=d.toArray(e.dataTransfer.types||[]);return-1!==d.inArray("Files",t)||-1!==d.inArray("public.file-url",t)||-1!==d.inArray("application/x-moz-file",t)}function u(e,t){if(function(e){if(!a.length)return!0;var t=m.getFileExtension(e.name);return!t||-1!==d.inArray(t,a)}(e)){var i=new l(r,e);i.relativePath=t||"",o.push(i)}}function c(e,t){var i=[];d.each(e,function(t){i.push(function(e){!function(t,i){t.isFile?t.file(function(e){u(e,t.fullPath),i()},function(){i()}):t.isDirectory?function(e,t){var n=[],r=e.createReader();!function t(i){r.readEntries(function(e){e.length?([].push.apply(n,e),t(i)):i()},i)}(function(){c(n,t)})}(t,i):i()}(t,e)})}),d.inSeries(i,function(){t()})}d.extend(this,{init:function(e){var t,i=this;n=e,r=i.ruid,a=function(e){for(var t=[],i=0;i<e.length;i++)[].push.apply(t,e[i].extensions.split(/\s*,\s*/));return-1===d.inArray("*",t)?t:[]}(n.accept),t=n.container,h.addEvent(t,"dragover",function(e){s(e)&&(e.preventDefault(),e.dataTransfer.dropEffect="copy")},i.uid),h.addEvent(t,"drop",function(e){s(e)&&(e.preventDefault(),o=[],e.dataTransfer.items&&e.dataTransfer.items[0].webkitGetAsEntry?function(e,t){var i=[];d.each(e,function(e){var t=e.webkitGetAsEntry();t&&(t.isFile?u(e.getAsFile(),t.fullPath):i.push(t))}),i.length?c(i,t):t()}(e.dataTransfer.items,function(){i.files=o,i.trigger("drop")}):(d.each(e.dataTransfer.files,function(e){u(e)}),i.files=o,i.trigger("drop")))},i.uid),h.addEvent(t,"dragenter",function(e){i.trigger("dragenter")},i.uid),h.addEvent(t,"dragleave",function(e){i.trigger("dragleave")},i.uid)},destroy:function(){h.removeAllEvents(n&&t.get(n.container),this.uid),r=o=a=n=null}})}}),e("moxie/runtime/html5/file/FileReader",["moxie/runtime/html5/Runtime","moxie/core/utils/Encode","moxie/core/utils/Basic"],function(e,o,a){return e.FileReader=function(){var n,r=!1;a.extend(this,{read:function(e,t){var i=this;i.result="",(n=new window.FileReader).addEventListener("progress",function(e){i.trigger(e)}),n.addEventListener("load",function(e){i.result=r?function(e){return o.atob(e.substring(e.indexOf("base64,")+7))}(n.result):n.result,i.trigger(e)}),n.addEventListener("error",function(e){i.trigger(e,n.error)}),n.addEventListener("loadend",function(e){n=null,i.trigger(e)}),"function"===a.typeOf(n[e])?(r=!1,n[e](t.getSource())):"readAsBinaryString"===e&&(r=!0,n.readAsDataURL(t.getSource()))},abort:function(){n&&n.abort()},destroy:function(){n=null}})}}),e("moxie/runtime/html5/xhr/XMLHttpRequest",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/core/utils/Url","moxie/file/File","moxie/file/Blob","moxie/xhr/FormData","moxie/core/Exceptions","moxie/core/utils/Env"],function(e,l,o,d,a,h,m,f,p){return e.XMLHttpRequest=function(){var s,u,c=this;l.extend(this,{send:function(e,i){var n=this,t="Mozilla"===p.browser&&p.verComp(p.version,4,">=")&&p.verComp(p.version,7,"<"),r="Android Browser"===p.browser,o=!1;if(u=e.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),(s=!window.XMLHttpRequest||"IE"===p.browser&&p.verComp(p.version,8,"<")?function(){for(var e=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],t=0;t<e.length;t++)try{return new ActiveXObject(e[t])}catch(e){}}():new window.XMLHttpRequest).open(e.method,e.url,e.async,e.user,e.password),i instanceof h)i.isDetached()&&(o=!0),i=i.getSource();else if(i instanceof m){if(i.hasBlob())if(i.getBlob().isDetached())i=function(e){var i="----moxieboundary"+(new Date).getTime(),n="\r\n",r="";if(this.getRuntime().can("send_binary_string"))return s.setRequestHeader("Content-Type","multipart/form-data; boundary="+i),e.each(function(e,t){r+=e instanceof h?"--"+i+n+'Content-Disposition: form-data; name="'+t+'"; filename="'+unescape(encodeURIComponent(e.name||"blob"))+'"'+n+"Content-Type: "+(e.type||"application/octet-stream")+n+n+e.getSource()+n:"--"+i+n+'Content-Disposition: form-data; name="'+t+'"'+n+n+unescape(encodeURIComponent(e))+n}),r+="--"+i+"--"+n;throw new f.RuntimeError(f.RuntimeError.NOT_SUPPORTED_ERR)}.call(n,i),o=!0;else if((t||r)&&"blob"===l.typeOf(i.getBlob().getSource())&&window.FileReader)return void function(e,t){var i,n,r=this;i=t.getBlob().getSource(),(n=new window.FileReader).onload=function(){t.append(t.getBlobName(),new h(null,{type:i.type,data:n.result})),c.send.call(r,e,t)},n.readAsBinaryString(i)}.call(n,e,i);if(i instanceof m){var a=new window.FormData;i.each(function(e,t){e instanceof h?a.append(t,e.getSource()):a.append(t,e)}),i=a}}s.upload?(e.withCredentials&&(s.withCredentials=!0),s.addEventListener("load",function(e){n.trigger(e)}),s.addEventListener("error",function(e){n.trigger(e)}),s.addEventListener("progress",function(e){n.trigger(e)}),s.upload.addEventListener("progress",function(e){n.trigger({type:"UploadProgress",loaded:e.loaded,total:e.total})})):s.onreadystatechange=function(){switch(s.readyState){case 1:case 2:break;case 3:var t,i;try{d.hasSameOrigin(e.url)&&(t=s.getResponseHeader("Content-Length")||0),s.responseText&&(i=s.responseText.length)}catch(e){t=i=0}n.trigger({type:"progress",lengthComputable:!!t,total:parseInt(t,10),loaded:i});break;case 4:s.onreadystatechange=function(){},0===s.status?n.trigger("error"):n.trigger("load")}},l.isEmptyObj(e.headers)||l.each(e.headers,function(e,t){s.setRequestHeader(t,e)}),""!==e.responseType&&"responseType"in s&&("json"!==e.responseType||p.can("return_response_type","json")?s.responseType=e.responseType:s.responseType="text"),o?s.sendAsBinary?s.sendAsBinary(i):function(){for(var e=new Uint8Array(i.length),t=0;t<i.length;t++)e[t]=255&i.charCodeAt(t);s.send(e.buffer)}():s.send(i),n.trigger("loadstart")},getStatus:function(){try{if(s)return s.status}catch(e){}return 0},getResponse:function(e){var t=this.getRuntime();try{switch(e){case"blob":var i=new a(t.uid,s.response),n=s.getResponseHeader("Content-Disposition");if(n){var r=n.match(/filename=([\'\"'])([^\1]+)\1/);r&&(u=r[2])}return i.name=u,i.type||(i.type=o.getFileMime(u)),i;case"json":return p.can("return_response_type","json")?s.response:200===s.status&&window.JSON?JSON.parse(s.responseText):null;case"document":return function(e){var t=e.responseXML,i=e.responseText;"IE"===p.browser&&i&&t&&!t.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(e.getResponseHeader("Content-Type"))&&((t=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,t.validateOnParse=!1,t.loadXML(i));if(t&&("IE"===p.browser&&0!==t.parseError||!t.documentElement||"parsererror"===t.documentElement.tagName))return null;return t}(s);default:return""!==s.responseText?s.responseText:null}}catch(e){return null}},getAllResponseHeaders:function(){try{return s.getAllResponseHeaders()}catch(e){}return""},abort:function(){s&&s.abort()},destroy:function(){c=u=null}})}}),e("moxie/runtime/html5/utils/BinaryReader",["moxie/core/utils/Basic"],function(t){function e(e){e instanceof ArrayBuffer?function(r){var o=new DataView(r);t.extend(this,{readByteAt:function(e){return o.getUint8(e)},writeByteAt:function(e,t){o.setUint8(e,t)},SEGMENT:function(e,t,i){switch(arguments.length){case 2:return r.slice(e,e+t);case 1:return r.slice(e);case 3:if(null===i&&(i=new ArrayBuffer),i instanceof ArrayBuffer){var n=new Uint8Array(this.length()-t+i.byteLength);0<e&&n.set(new Uint8Array(r.slice(0,e)),0),n.set(new Uint8Array(i),e),n.set(new Uint8Array(r.slice(e+t)),e+i.byteLength),this.clear(),r=n.buffer,o=new DataView(r);break}default:return r}},length:function(){return r?r.byteLength:0},clear:function(){o=r=null}})}.apply(this,arguments):function(n){function r(e,t,i){i=3===arguments.length?i:n.length-t-1,n=n.substr(0,t)+e+n.substr(i+t)}t.extend(this,{readByteAt:function(e){return n.charCodeAt(e)},writeByteAt:function(e,t){r(String.fromCharCode(t),e,1)},SEGMENT:function(e,t,i){switch(arguments.length){case 1:return n.substr(e);case 2:return n.substr(e,t);case 3:r(null!==i?i:"",e,t);break;default:return n}},length:function(){return n?n.length:0},clear:function(){n=null}})}.apply(this,arguments)}return t.extend(e.prototype,{littleEndian:!1,read:function(e,t){var i,n,r;if(e+t>this.length())throw new Error("You are trying to read outside the source boundaries.");for(n=this.littleEndian?0:-8*(t-1),i=r=0;r<t;r++)i|=this.readByteAt(e+r)<<Math.abs(n+8*r);return i},write:function(e,t,i){var n,r;if(e>this.length())throw new Error("You are trying to write outside the source boundaries.");for(n=this.littleEndian?0:-8*(i-1),r=0;r<i;r++)this.writeByteAt(e+r,t>>Math.abs(n+8*r)&255)},BYTE:function(e){return this.read(e,1)},SHORT:function(e){return this.read(e,2)},LONG:function(e){return this.read(e,4)},SLONG:function(e){var t=this.read(e,4);return 2147483647<t?t-4294967296:t},CHAR:function(e){return String.fromCharCode(this.read(e,1))},STRING:function(e,t){return this.asArray("CHAR",e,t).join("")},asArray:function(e,t,i){for(var n=[],r=0;r<i;r++)n[r]=this[e](t+r);return n}}),e}),e("moxie/runtime/html5/image/JPEGHeaders",["moxie/runtime/html5/utils/BinaryReader","moxie/core/Exceptions"],function(s,u){return function o(e){var t,r,i,a=[],n=0;if(65496!==(t=new s(e)).SHORT(0))throw t.clear(),new u.ImageError(u.ImageError.WRONG_FORMAT);for(r=2;r<=t.length();)if(65488<=(i=t.SHORT(r))&&i<=65495)r+=2;else{if(65498===i||65497===i)break;n=t.SHORT(r+2)+2,65505<=i&&i<=65519&&a.push({hex:i,name:"APP"+(15&i),start:r,length:n,segment:t.SEGMENT(r,n)}),r+=n}return t.clear(),{headers:a,restore:function(e){var t,i,n;for(n=new s(e),r=65504==n.SHORT(2)?4+n.SHORT(4):2,i=0,t=a.length;i<t;i++)n.SEGMENT(r,0,a[i].segment),r+=a[i].length;return e=n.SEGMENT(),n.clear(),e},strip:function(e){var t,i,n,r;for(i=(n=new o(e)).headers,n.purge(),t=new s(e),r=i.length;r--;)t.SEGMENT(i[r].start,i[r].length,"");return e=t.SEGMENT(),t.clear(),e},get:function(e){for(var t=[],i=0,n=a.length;i<n;i++)a[i].name===e.toUpperCase()&&t.push(a[i].segment);return t},set:function(e,t){var i,n,r,o=[];for("string"==typeof t?o.push(t):o=t,i=n=0,r=a.length;i<r&&(a[i].name===e.toUpperCase()&&(a[i].segment=o[n],a[i].length=o[n].length,n++),!(n>=o.length));i++);},purge:function(){this.headers=a=[]}}}}),e("moxie/runtime/html5/image/ExifParser",["moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader","moxie/core/Exceptions"],function(x,a,E){function s(e){var t,l,p,g,i,n;if(a.call(this,e),l={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"},thumb:{513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength"}},p={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},i=(g={tiffHeader:10}).tiffHeader,t={clear:this.clear},x.extend(this,{read:function(){try{return s.prototype.read.apply(this,arguments)}catch(e){throw new E.ImageError(E.ImageError.INVALID_META_ERR)}},write:function(){try{return s.prototype.write.apply(this,arguments)}catch(e){throw new E.ImageError(E.ImageError.INVALID_META_ERR)}},UNDEFINED:function(){return this.BYTE.apply(this,arguments)},RATIONAL:function(e){return this.LONG(e)/this.LONG(e+4)},SRATIONAL:function(e){return this.SLONG(e)/this.SLONG(e+4)},ASCII:function(e){return this.CHAR(e)},TIFF:function(){return n||null},EXIF:function(){var e=null;if(g.exifIFD){try{e=o.call(this,g.exifIFD,l.exif)}catch(e){return null}if(e.ExifVersion&&"array"===x.typeOf(e.ExifVersion)){for(var t=0,i="";t<e.ExifVersion.length;t++)i+=String.fromCharCode(e.ExifVersion[t]);e.ExifVersion=i}}return e},GPS:function(){var e=null;if(g.gpsIFD){try{e=o.call(this,g.gpsIFD,l.gps)}catch(e){return null}e.GPSVersionID&&"array"===x.typeOf(e.GPSVersionID)&&(e.GPSVersionID=e.GPSVersionID.join("."))}return e},thumb:function(){if(g.IFD1)try{var e=o.call(this,g.IFD1,l.thumb);if("JPEGInterchangeFormat"in e)return this.SEGMENT(g.tiffHeader+e.JPEGInterchangeFormat,e.JPEGInterchangeFormatLength)}catch(e){}return null},setExif:function(e,t){return("PixelXDimension"===e||"PixelYDimension"===e)&&function(e,t,i){var n,r,o,a=0;if("string"==typeof t){var s=l[e.toLowerCase()];for(var u in s)if(s[u]===t){t=u;break}}n=g[e.toLowerCase()+"IFD"],r=this.SHORT(n);for(var c=0;c<r;c++)if(o=n+12*c+2,this.SHORT(o)==t){a=o+8;break}if(!a)return!1;try{this.write(a,i,4)}catch(e){return!1}return!0}.call(this,"exif",e,t)},clear:function(){t.clear(),e=l=p=n=g=t=null}}),65505!==this.SHORT(0)||"EXIF\0"!==this.STRING(4,5).toUpperCase())throw new E.ImageError(E.ImageError.INVALID_META_ERR);if(this.littleEndian=18761==this.SHORT(i),42!==this.SHORT(i+=2))throw new E.ImageError(E.ImageError.INVALID_META_ERR);g.IFD0=g.tiffHeader+this.LONG(i+=2),"ExifIFDPointer"in(n=o.call(this,g.IFD0,l.tiff))&&(g.exifIFD=g.tiffHeader+n.ExifIFDPointer,delete n.ExifIFDPointer),"GPSInfoIFDPointer"in n&&(g.gpsIFD=g.tiffHeader+n.GPSInfoIFDPointer,delete n.GPSInfoIFDPointer),x.isEmptyObj(n)&&(n=null);var r=this.LONG(g.IFD0+12*this.SHORT(g.IFD0)+2);function o(e,t){var i,n,r,o,a,s,u,c,l=this,d=[],h={},m={1:"BYTE",7:"UNDEFINED",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",9:"SLONG",10:"SRATIONAL"},f={BYTE:1,UNDEFINED:1,ASCII:1,SHORT:2,LONG:4,RATIONAL:8,SLONG:4,SRATIONAL:8};for(i=l.SHORT(e),n=0;n<i;n++)if(d=[],u=e+2+12*n,(r=t[l.SHORT(u)])!==v){if(o=m[l.SHORT(u+=2)],a=l.LONG(u+=2),!(s=f[o]))throw new E.ImageError(E.ImageError.INVALID_META_ERR);if(u+=4,4<s*a&&(u=l.LONG(u)+g.tiffHeader),u+s*a>=this.length())throw new E.ImageError(E.ImageError.INVALID_META_ERR);"ASCII"!==o?(d=l.asArray(o,u,a),c=1==a?d[0]:d,p.hasOwnProperty(r)&&"object"!=typeof c?h[r]=p[r][c]:h[r]=c):h[r]=x.trim(l.STRING(u,a).replace(/\0$/,""))}return h}r&&(g.IFD1=g.tiffHeader+r)}return s.prototype=a.prototype,s}),e("moxie/runtime/html5/image/JPEG",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEGHeaders","moxie/runtime/html5/utils/BinaryReader","moxie/runtime/html5/image/ExifParser"],function(a,s,u,c,l){return function(e){var r,i,n,t;if(65496!==(r=new c(e)).SHORT(0))throw new s.ImageError(s.ImageError.WRONG_FORMAT);i=new u(e);try{n=new l(i.get("app1")[0])}catch(e){}function o(e){var t,i,n=0;for(e=e||r;n<=e.length();){if(65472<=(t=e.SHORT(n+=2))&&t<=65475)return n+=5,{height:e.SHORT(n),width:e.SHORT(n+=2)};i=e.SHORT(n+=2),n+=i-2}return null}t=o.call(this),a.extend(this,{type:"image/jpeg",size:r.length(),width:t&&t.width||0,height:t&&t.height||0,setExif:function(e,t){if(!n)return!1;"object"===a.typeOf(e)?a.each(e,function(e,t){n.setExif(t,e)}):n.setExif(e,t),i.set("app1",n.SEGMENT())},writeHeaders:function(){return arguments.length?i.restore(arguments[0]):i.restore(e)},stripHeaders:function(e){return i.strip(e)},purge:function(){(function(){if(!n||!i||!r)return;n.clear(),i.purge(),r.clear(),t=i=n=r=null}).call(this)}}),n&&(this.meta={tiff:n.TIFF(),exif:n.EXIF(),gps:n.GPS(),thumb:function(){var e,t,i=n.thumb();if(i&&(e=new c(i),t=o(e),e.clear(),t))return t.data=i,t;return null}()})}}),e("moxie/runtime/html5/image/PNG",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(n,r,a){return function(e){var o,t;function i(){o&&(o.clear(),e=t=o=null)}o=new a(e),function(){var e=0,t=0,i=[35152,20039,3338,6666];for(t=0;t<i.length;t++,e+=2)if(i[t]!=o.SHORT(e))throw new n.ImageError(n.ImageError.WRONG_FORMAT)}(),t=function(){var e,t;return"IHDR"==(e=function(e){var t,i,n,r;return t=o.LONG(e),i=o.STRING(e+=4,4),n=e+=4,r=o.LONG(e+t),{length:t,type:i,start:n,CRC:r}}.call(this,8)).type?(t=e.start,{width:o.LONG(t),height:o.LONG(t+=4)}):null}.call(this),r.extend(this,{type:"image/png",size:o.length(),width:t.width,height:t.height,purge:function(){i.call(this)}}),i.call(this)}}),e("moxie/runtime/html5/image/ImageInfo",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEG","moxie/runtime/html5/image/PNG"],function(n,r,o,a){return function(t){var e,i=[o,a];e=function(){for(var e=0;e<i.length;e++)try{return new i[e](t)}catch(e){}throw new r.ImageError(r.ImageError.WRONG_FORMAT)}(),n.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(e){return e},stripHeaders:function(e){return e},purge:function(){t=null}}),n.extend(this,e),this.purge=function(){e.purge(),e=null}}}),e("moxie/runtime/html5/image/MegaPixel",[],function(){function R(e){var t=e.naturalWidth;if(1048576<t*e.naturalHeight){var i=document.createElement("canvas");i.width=i.height=1;var n=i.getContext("2d");return n.drawImage(e,1-t,0),0===n.getImageData(0,0,1,1).data[3]}return!1}return{isSubsampled:R,renderTo:function(e,t,i){var n=e.naturalWidth,r=e.naturalHeight,o=i.width,a=i.height,s=i.x||0,u=i.y||0,c=t.getContext("2d");R(e)&&(n/=2,r/=2);var l=1024,d=document.createElement("canvas");d.width=d.height=l;for(var h=d.getContext("2d"),m=function(e,t,i){var n=document.createElement("canvas");n.width=1,n.height=i;var r=n.getContext("2d");r.drawImage(e,0,0);var o=r.getImageData(0,0,1,i).data,a=0,s=i,u=i;for(;a<u;){0===o[4*(u-1)+3]?s=u:a=u,u=s+a>>1}n=null;var c=u/i;return 0==c?1:c}(e,0,r),f=0;f<r;){for(var p=r<f+l?r-f:l,g=0;g<n;){var x=n<g+l?n-g:l;h.clearRect(0,0,l,l),h.drawImage(e,-g,-f);var E=g*o/n+s<<0,v=Math.ceil(x*o/n),y=f*a/r/m+u<<0,w=Math.ceil(p*a/r/m);c.drawImage(d,0,0,x,p,E,y,v,w),g+=l}f+=l}d=h=null}}}),e("moxie/runtime/html5/image/Image",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/utils/Encode","moxie/file/Blob","moxie/file/File","moxie/runtime/html5/image/ImageInfo","moxie/runtime/html5/image/MegaPixel","moxie/core/utils/Mime","moxie/core/utils/Env"],function(e,g,d,x,E,v,y,w,R,_){return e.Image=function(){var i,n,h,r,o,a=this,m=!1,f=!0;function p(){if(!h&&!i)throw new d.ImageError(d.DOMException.INVALID_STATE_ERR);return h||i}function s(e){return x.atob(e.substring(e.indexOf("base64,")+7))}function u(e){var t=this;(i=new Image).onerror=function(){l.call(this),t.trigger("error",d.ImageError.WRONG_FORMAT)},i.onload=function(){t.trigger("load")},i.src="data:"==e.substr(0,5)?e:function(e,t){return"data:"+(t||"")+";base64,"+x.btoa(e)}(e,o.type)}function c(e,t,i,n){var r,o,a,s,u,c=0,l=0;if(f=n,u=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1,-1!==g.inArray(u,[5,6,7,8])){var d=e;e=t,t=d}o=p(),1<(r=i?(e=Math.min(e,o.width),t=Math.min(t,o.height),Math.max(e/o.width,t/o.height)):Math.min(e/o.width,t/o.height))&&!i&&n||(h=h||document.createElement("canvas"),a=Math.round(o.width*r),s=Math.round(o.height*r),i?(h.width=e,h.height=t,e<a&&(c=Math.round((a-e)/2)),t<s&&(l=Math.round((s-t)/2))):(h.width=a,h.height=s),f||function(e,t,i){switch(i){case 5:case 6:case 7:case 8:h.width=t,h.height=e;break;default:h.width=e,h.height=t}var n=h.getContext("2d");switch(i){case 2:n.translate(e,0),n.scale(-1,1);break;case 3:n.translate(e,t),n.rotate(Math.PI);break;case 4:n.translate(0,t),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-t);break;case 7:n.rotate(.5*Math.PI),n.translate(e,-t),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-e,0)}}(h.width,h.height,u),function(e,t,i,n,r,o){if("iOS"===_.OS)w.renderTo(e,t,{width:r,height:o,x:i,y:n});else{t.getContext("2d").drawImage(e,i,n,r,o)}}.call(this,o,h,-c,-l,a,s),this.width=h.width,this.height=h.height,m=!0),this.trigger("Resize")}function l(){n&&(n.purge(),n=null),r=i=h=o=null,m=!1}g.extend(this,{loadFromBlob:function(e){var t=this,i=t.getRuntime(),n=!(1<arguments.length)||arguments[1];if(!i.can("access_binary"))throw new d.RuntimeError(d.RuntimeError.NOT_SUPPORTED_ERR);if((o=e).isDetached())return r=e.getSource(),void u.call(this,r);(function(e,t){var i,n=this;{if(!window.FileReader)return t(e.getAsDataURL());(i=new FileReader).onload=function(){t(this.result)},i.onerror=function(){n.trigger("error",d.ImageError.WRONG_FORMAT)},i.readAsDataURL(e)}}).call(this,e.getSource(),function(e){n&&(r=s(e)),u.call(t,e)})},loadFromImage:function(e,t){this.meta=e.meta,o=new v(null,{name:e.name,size:e.size,type:e.type}),u.call(this,t?r=e.getAsBinaryString():e.getAsDataURL())},getInfo:function(){var e,t=this.getRuntime();return!n&&r&&t.can("access_image_binary")&&(n=new y(r)),!(e={width:p().width||0,height:p().height||0,type:o.type||R.getFileMime(o.name),size:r&&r.length||o.size||0,name:o.name||"",meta:n&&n.meta||this.meta||{}}).meta||!e.meta.thumb||e.meta.thumb.data instanceof E||(e.meta.thumb.data=new E(null,{type:"image/jpeg",data:e.meta.thumb.data})),e},downsize:function(){c.apply(this,arguments)},getAsCanvas:function(){return h&&(h.id=this.uid+"_canvas"),h},getAsBlob:function(e,t){return e!==this.type&&c.call(this,this.width,this.height,!1),new v(null,{name:o.name||"",type:e,data:a.getAsBinaryString.call(this,e,t)})},getAsDataURL:function(e){var t=arguments[1]||90;if(!m)return i.src;if("image/jpeg"!==e)return h.toDataURL("image/png");try{return h.toDataURL("image/jpeg",t/100)}catch(e){return h.toDataURL("image/jpeg")}},getAsBinaryString:function(e,t){if(!m)return r=r||s(a.getAsDataURL(e,t));if("image/jpeg"!==e)r=s(a.getAsDataURL(e,t));else{var i;t=t||90;try{i=h.toDataURL("image/jpeg",t/100)}catch(e){i=h.toDataURL("image/jpeg")}r=s(i),n&&(r=n.stripHeaders(r),f&&(n.meta&&n.meta.exif&&n.setExif({PixelXDimension:this.width,PixelYDimension:this.height}),r=n.writeHeaders(r)),n.purge(),n=null)}return m=!1,r},destroy:function(){a=null,l.call(this),this.getRuntime().getShim().removeInstance(this.uid)}})}}),e("moxie/runtime/flash/Runtime",[],function(){return{}}),e("moxie/runtime/silverlight/Runtime",[],function(){return{}}),e("moxie/runtime/html4/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(o,e,a,s){var u={};return a.addConstructor("html4",function(e){var t,i=this,n=a.capTest,r=a.capTrue;a.call(this,e,"html4",{access_binary:n(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:!1,display_media:n(u.Image&&(s.can("create_canvas")||s.can("use_data_uri_over32kb"))),do_cors:!1,drag_and_drop:!1,filter_by_extension:n("Chrome"===s.browser&&s.verComp(s.version,28,">=")||"IE"===s.browser&&s.verComp(s.version,10,">=")||"Safari"===s.browser&&s.verComp(s.version,7,">=")),resize_image:function(){return u.Image&&i.can("access_binary")&&s.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,return_response_type:function(e){return!("json"!==e||!window.JSON)||!!~o.inArray(e,["text","document",""])},return_status_code:function(e){return!o.arrayDiff(e,[200,404])},select_file:function(){return s.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return i.can("select_file")},summon_file_dialog:function(){return i.can("select_file")&&("Firefox"===s.browser&&s.verComp(s.version,4,">=")||"Opera"===s.browser&&s.verComp(s.version,12,">=")||"IE"===s.browser&&s.verComp(s.version,10,">=")||!!~o.inArray(s.browser,["Chrome","Safari"]))},upload_filesize:r,use_http_method:function(e){return!o.arrayDiff(e,["GET","POST"])}}),o.extend(this,{init:function(){this.trigger("Init")},destroy:(t=this.destroy,function(){t.call(i),t=i=null})}),o.extend(this.getShim(),u)}),u}),e("moxie/runtime/html4/file/FileInput",["moxie/runtime/html4/Runtime","moxie/file/File","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(e,h,m,f,p,s,g){return e.FileInput=function(){var c,l,d=[];m.extend(this,{init:function(e){var t,i,n,r,o=this,a=o.getRuntime();d=(l=e).accept.mimes||s.extList2mimes(e.accept,a.can("filter_by_extension")),t=a.getShimContainer(),i=f.get(e.browse_button),a.can("summon_file_dialog")&&("static"===f.getStyle(i,"position")&&(i.style.position="relative"),n=parseInt(f.getStyle(i,"z-index"),10)||1,i.style.zIndex=n,t.style.zIndex=n-1),r=a.can("summon_file_dialog")?i:t,p.addEvent(r,"mouseover",function(){o.trigger("mouseenter")},o.uid),p.addEvent(r,"mouseout",function(){o.trigger("mouseleave")},o.uid),p.addEvent(r,"mousedown",function(){o.trigger("mousedown")},o.uid),p.addEvent(f.get(e.container),"mouseup",function(){o.trigger("mouseup")},o.uid),i=null,function t(){var e,i,n,r,o,a,s=this,u=s.getRuntime();a=m.guid("uid_"),e=u.getShimContainer(),c&&(n=f.get(c+"_form"))&&m.extend(n.style,{top:"100%"}),(r=document.createElement("form")).setAttribute("id",a+"_form"),r.setAttribute("method","post"),r.setAttribute("enctype","multipart/form-data"),r.setAttribute("encoding","multipart/form-data"),m.extend(r.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"}),(o=document.createElement("input")).setAttribute("id",a),o.setAttribute("type","file"),o.setAttribute("name",l.name||"Filedata"),o.setAttribute("accept",d.join(",")),m.extend(o.style,{fontSize:"999px",opacity:0}),r.appendChild(o),e.appendChild(r),m.extend(o.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),"IE"===g.browser&&g.verComp(g.version,10,"<")&&m.extend(o.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}),o.onchange=function(){var e;if(this.value){if(this.files){if(0===(e=this.files[0]).size)return void r.parentNode.removeChild(r)}else e={name:this.value};e=new h(u.uid,e),this.onchange=function(){},t.call(s),s.files=[e],o.setAttribute("id",e.uid),r.setAttribute("id",e.uid+"_form"),s.trigger("change"),o=r=null}},u.can("summon_file_dialog")&&(i=f.get(l.browse_button),p.removeEvent(i,"click",s.uid),p.addEvent(i,"click",function(e){o&&!o.disabled&&o.click(),e.preventDefault()},s.uid)),c=a,e=n=i=null}.call(this),t=null,o.trigger({type:"ready",async:!0})},disable:function(e){var t;(t=f.get(c))&&(t.disabled=!!e)},destroy:function(){var e=this.getRuntime(),t=e.getShim(),i=e.getShimContainer();p.removeAllEvents(i,this.uid),p.removeAllEvents(l&&f.get(l.container),this.uid),p.removeAllEvents(l&&f.get(l.browse_button),this.uid),i&&(i.innerHTML=""),t.removeInstance(this.uid),c=d=l=i=t=null}})}}),e("moxie/runtime/html4/file/FileReader",["moxie/runtime/html4/Runtime","moxie/runtime/html5/file/FileReader"],function(e,t){return e.FileReader=t}),e("moxie/runtime/html4/xhr/XMLHttpRequest",["moxie/runtime/html4/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Url","moxie/core/Exceptions","moxie/core/utils/Events","moxie/file/Blob","moxie/xhr/FormData"],function(e,f,p,g,x,E,v,y){return e.XMLHttpRequest=function(){var l,d,h;function m(t){var e,i,n,r,o=this,a=!1;if(h){if(e=h.id.replace(/_iframe$/,""),i=p.get(e+"_form")){for(r=(n=i.getElementsByTagName("input")).length;r--;)switch(n[r].getAttribute("type")){case"hidden":n[r].parentNode.removeChild(n[r]);break;case"file":a=!0}n=[],a||i.parentNode.removeChild(i),i=null}setTimeout(function(){E.removeEvent(h,"load",o.uid),h.parentNode&&h.parentNode.removeChild(h);var e=o.getRuntime().getShimContainer();e.children.length||e.parentNode.removeChild(e),e=h=null,t()},1)}}f.extend(this,{send:function(t,e){var i,n,r,o,a,s,u=this,c=u.getRuntime();if(l=d=null,e instanceof y&&e.hasBlob()){if(o=e.getBlob(),i=o.uid,r=p.get(i),!(n=p.get(i+"_form")))throw new x.DOMException(x.DOMException.NOT_FOUND_ERR)}else i=f.guid("uid_"),(n=document.createElement("form")).setAttribute("id",i+"_form"),n.setAttribute("method",t.method),n.setAttribute("enctype","multipart/form-data"),n.setAttribute("encoding","multipart/form-data"),c.getShimContainer().appendChild(n);n.setAttribute("target",i+"_iframe"),e instanceof y&&e.each(function(e,t){if(e instanceof v)r&&r.setAttribute("name",t);else{var i=document.createElement("input");f.extend(i,{type:"hidden",name:t,value:e}),r?n.insertBefore(i,r):n.appendChild(i)}}),n.setAttribute("action",t.url),a=c.getShimContainer()||document.body,(s=document.createElement("div")).innerHTML='<iframe id="'+i+'_iframe" name="'+i+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',h=s.firstChild,a.appendChild(h),E.addEvent(h,"load",function(){var e;try{e=h.contentWindow.document||h.contentDocument||window.frames[h.id].document,/^4(0[0-9]|1[0-7]|2[2346])\s/.test(e.title)?l=e.title.replace(/^(\d+).*$/,"$1"):(l=200,d=f.trim(e.body.innerHTML),u.trigger({type:"progress",loaded:d.length,total:d.length}),o&&u.trigger({type:"uploadprogress",loaded:o.size||1025,total:o.size||1025}))}catch(e){if(!g.hasSameOrigin(t.url))return void m.call(u,function(){u.trigger("error")});l=404}m.call(u,function(){u.trigger("load")})},u.uid),n.submit(),u.trigger("loadstart")},getStatus:function(){return l},getResponse:function(e){if("json"===e&&"string"===f.typeOf(d)&&window.JSON)try{return JSON.parse(d.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch(e){return null}return d},abort:function(){var e=this;h&&h.contentWindow&&(h.contentWindow.stop?h.contentWindow.stop():h.contentWindow.document.execCommand?h.contentWindow.document.execCommand("Stop"):h.src="about:blank"),m.call(this,function(){e.dispatchEvent("abort")})}})}}),e("moxie/runtime/html4/image/Image",["moxie/runtime/html4/Runtime","moxie/runtime/html5/image/Image"],function(e,t){return e.Image=t}),function(e){for(var t=0;t<e.length;t++){for(var i=a,n=e[t],r=n.split(/[.\/]/),o=0;o<r.length-1;++o)i[r[o]]===v&&(i[r[o]]={}),i=i[r[o]];i[r[r.length-1]]=s[n]}}(["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/I18n","moxie/core/utils/Mime","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/file/FileInput","moxie/core/utils/Encode","moxie/file/Blob","moxie/file/File","moxie/file/FileDrop","moxie/file/FileReader","moxie/core/utils/Url","moxie/runtime/RuntimeTarget","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/xhr/XMLHttpRequest","moxie/runtime/Transporter","moxie/image/Image","moxie/core/utils/Events"])}(this),function(e){"use strict";var r={},o=e.moxie.core.utils.Basic.inArray;(function e(t){var i,n;for(i in t)"object"!=(n=typeof t[i])||~o(i,["Exceptions","Env","Mime"])?"function"==n&&(r[i]=t[i]):e(t[i])})(e.moxie),r.Env=e.moxie.core.utils.Env,r.Mime=e.moxie.core.utils.Mime,r.Exceptions=e.moxie.core.Exceptions,e.mOxie=r,e.o||(e.o=r)}(this);
!function(e,I,S){var T=e.setTimeout,D={};function w(e){var t=e.required_features,r={};function i(e,t,i){var n={chunks:"slice_blob",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",urlstream_upload:"send_binary_string",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};n[e]?r[n[e]]=t:i||(r[e]=t)}return"string"==typeof t?F.each(t.split(/\s*,\s*/),function(e){i(e,!0)}):"object"==typeof t?F.each(t,function(e,t){i(t,e)}):!0===t&&(0<e.chunk_size&&(r.slice_blob=!0),!e.resize.enabled&&e.multipart||(r.send_binary_string=!0),F.each(e,function(e,t){i(t,!!e,!0)})),e.runtimes="html5,html4",r}var t,F={VERSION:"2.1.9",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:I.mimes,ua:I.ua,typeOf:I.typeOf,extend:I.extend,guid:I.guid,getAll:function(e){var t,i=[];"array"!==F.typeOf(e)&&(e=[e]);for(var n=e.length;n--;)(t=F.get(e[n]))&&i.push(t);return i.length?i:null},get:I.get,each:I.each,getPos:I.getPos,getSize:I.getSize,xmlEncode:function(e){var t={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"};return e?(""+e).replace(/[<>&\"\']/g,function(e){return t[e]?"&"+t[e]+";":e}):e},toArray:I.toArray,inArray:I.inArray,addI18n:I.addI18n,translate:I.translate,isEmptyObj:I.isEmptyObj,hasClass:I.hasClass,addClass:I.addClass,removeClass:I.removeClass,getStyle:I.getStyle,addEvent:I.addEvent,removeEvent:I.removeEvent,removeAllEvents:I.removeAllEvents,cleanName:function(e){var t,i;for(i=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],t=0;t<i.length;t+=2)e=e.replace(i[t],i[t+1]);return e=(e=e.replace(/\s+/g,"_")).replace(/[^a-z0-9_\-\.]+/gi,"")},buildUrl:function(e,t){var i="";return F.each(t,function(e,t){i+=(i?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)}),i&&(e+=(0<e.indexOf("?")?"&":"?")+i),e},formatSize:function(e){if(e===S||/\D/.test(e))return F.translate("N/A");function t(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}var i=Math.pow(1024,4);return i<e?t(e/i,1)+" "+F.translate("tb"):e>(i/=1024)?t(e/i,1)+" "+F.translate("gb"):e>(i/=1024)?t(e/i,1)+" "+F.translate("mb"):1024<e?Math.round(e/1024)+" "+F.translate("kb"):e+" "+F.translate("b")},parseSize:I.parseSizeStr,predictRuntime:function(e,t){var i,n;return i=new F.Uploader(e),n=I.Runtime.thatCan(i.getOption().required_features,t||e.runtimes),i.destroy(),n},addFileFilter:function(e,t){D[e]=t}};F.addFileFilter("mime_types",function(e,t,i){e.length&&!e.regexp.test(t.name)?(this.trigger("Error",{code:F.FILE_EXTENSION_ERROR,message:F.translate("File extension error."),file:t}),i(!1)):i(!0)}),F.addFileFilter("max_file_size",function(e,t,i){e=F.parseSize(e),void 0!==t.size&&e&&t.size>e?(this.trigger("Error",{code:F.FILE_SIZE_ERROR,message:F.translate("File size error."),file:t}),i(!1)):i(!0)}),F.addFileFilter("prevent_duplicates",function(e,t,i){if(e)for(var n=this.files.length;n--;)if(t.name===this.files[n].name&&t.size===this.files[n].size)return this.trigger("Error",{code:F.FILE_DUPLICATE_ERROR,message:F.translate("Duplicate file error."),file:t}),void i(!1);i(!0)}),F.Uploader=function(e){var u,i,n,p,t=F.guid(),l=[],h={},o=[],d=[],c=!1;function r(){var e,t,i=0;if(this.state==F.STARTED){for(t=0;t<l.length;t++)e||l[t].status!=F.QUEUED?i++:(e=l[t],this.trigger("BeforeUpload",e)&&(e.status=F.UPLOADING,this.trigger("UploadFile",e)));i==l.length&&(this.state!==F.STOPPED&&(this.state=F.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",l))}}function s(e){e.percent=0<e.size?Math.ceil(e.loaded/e.size*100):100,a()}function a(){var e,t;for(n.reset(),e=0;e<l.length;e++)(t=l[e]).size!==S?(n.size+=t.origSize,n.loaded+=t.loaded*t.origSize/t.size):n.size=S,t.status==F.DONE?n.uploaded++:t.status==F.FAILED?n.failed++:n.queued++;n.size===S?n.percent=0<l.length?Math.ceil(n.uploaded/l.length*100):0:(n.bytesPerSec=Math.ceil(n.loaded/((+new Date-i||1)/1e3)),n.percent=0<n.size?Math.ceil(n.loaded/n.size*100):0)}function f(){var e=o[0]||d[0];return!!e&&e.getRuntime().uid}function g(n,e){var r=this,s=0,t=[],a={runtime_order:n.runtimes,required_caps:n.required_features,preferred_caps:h};F.each(n.runtimes.split(/\s*,\s*/),function(e){n[e]&&(a[e]=n[e])}),n.browse_button&&F.each(n.browse_button,function(i){t.push(function(t){var e=new I.FileInput(F.extend({},a,{accept:n.filters.mime_types,name:n.file_data_name,multiple:n.multi_selection,container:n.container,browse_button:i}));e.onready=function(){var e=I.Runtime.getInfo(this.ruid);I.extend(r.features,{chunks:e.can("slice_blob"),multipart:e.can("send_multipart"),multi_selection:e.can("select_multiple")}),s++,o.push(this),t()},e.onchange=function(){r.addFile(this.files)},e.bind("mouseenter mouseleave mousedown mouseup",function(e){c||(n.browse_button_hover&&("mouseenter"===e.type?I.addClass(i,n.browse_button_hover):"mouseleave"===e.type&&I.removeClass(i,n.browse_button_hover)),n.browse_button_active&&("mousedown"===e.type?I.addClass(i,n.browse_button_active):"mouseup"===e.type&&I.removeClass(i,n.browse_button_active)))}),e.bind("mousedown",function(){r.trigger("Browse")}),e.bind("error runtimeerror",function(){e=null,t()}),e.init()})}),n.drop_element&&F.each(n.drop_element,function(i){t.push(function(t){var e=new I.FileDrop(F.extend({},a,{drop_zone:i}));e.onready=function(){var e=I.Runtime.getInfo(this.ruid);I.extend(r.features,{chunks:e.can("slice_blob"),multipart:e.can("send_multipart"),dragdrop:e.can("drag_and_drop")}),s++,d.push(this),t()},e.ondrop=function(){r.addFile(this.files)},e.bind("error runtimeerror",function(){e=null,t()}),e.init()})}),I.inSeries(t,function(){"function"==typeof e&&e(s)})}function _(e,t,i){var a=this,o=!1;function n(e,t,i){var n,r,s=u[e];switch(e){case"max_file_size":"max_file_size"===e&&(u.max_file_size=u.filters.max_file_size=t);break;case"chunk_size":(t=F.parseSize(t))&&(u[e]=t,u.send_file_name=!0);break;case"multipart":(u[e]=t)||(u.send_file_name=!0);break;case"unique_names":(u[e]=t)&&(u.send_file_name=!0);break;case"filters":"array"===F.typeOf(t)&&(t={mime_types:t}),i?F.extend(u.filters,t):u.filters=t,t.mime_types&&(u.filters.mime_types.regexp=(n=u.filters.mime_types,r=[],F.each(n,function(e){F.each(e.extensions.split(/,/),function(e){/^\s*\*\s*$/.test(e)?r.push("\\.*"):r.push("\\."+e.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+r.join("|")+")$","i")));break;case"resize":i?F.extend(u.resize,t,{enabled:!0}):u.resize=t;break;case"prevent_duplicates":u.prevent_duplicates=u.filters.prevent_duplicates=!!t;break;case"container":case"browse_button":case"drop_element":t="container"===e?F.get(t):F.getAll(t);case"runtimes":case"multi_selection":u[e]=t,i||(o=!0);break;default:u[e]=t}i||a.trigger("OptionChanged",e,t,s)}"object"==typeof e?F.each(e,function(e,t){n(t,e,i)}):n(e,t,i),i?(u.required_features=w(F.extend({},u)),h=w(F.extend({},u,{required_features:!0}))):o&&(a.trigger("Destroy"),g.call(a,u,function(e){e?(a.runtime=I.Runtime.getInfo(f()).type,a.trigger("Init",{runtime:a.runtime}),a.trigger("PostInit")):a.trigger("Error",{code:F.INIT_ERROR,message:F.translate("Init error.")})}))}function m(e,t){if(e.settings.unique_names){var i=t.name.match(/\.([^.]+)$/),n="part";i&&(n=i[1]),t.target_name=t.id+"."+n}}function b(r,s){var a,o=r.settings.url,u=r.settings.chunk_size,l=r.settings.max_retries,d=r.features,c=0;function f(){0<l--?T(g,1e3):(s.loaded=c,r.trigger("Error",{code:F.HTTP_ERROR,message:F.translate("HTTP Error."),file:s,response:p.responseText,status:p.status,responseHeaders:p.getAllResponseHeaders()}))}function g(){var e,i,t,n={};s.status===F.UPLOADING&&r.state!==F.STOPPED&&(r.settings.send_file_name&&(n.name=s.target_name||s.name),e=u&&d.chunks&&a.size>u?(t=Math.min(u,a.size-c),a.slice(c,c+t)):(t=a.size,a),u&&d.chunks&&(r.settings.send_chunk_number?(n.chunk=Math.ceil(c/u),n.chunks=Math.ceil(a.size/u)):(n.offset=c,n.total=a.size)),(p=new I.XMLHttpRequest).upload&&(p.upload.onprogress=function(e){s.loaded=Math.min(s.size,c+e.loaded),r.trigger("UploadProgress",s)}),p.onload=function(){400<=p.status?f():(l=r.settings.max_retries,t<a.size?(e.destroy(),c+=t,s.loaded=Math.min(c,a.size),r.trigger("ChunkUploaded",s,{offset:s.loaded,total:a.size,response:p.responseText,status:p.status,responseHeaders:p.getAllResponseHeaders()}),"Android Browser"===I.Env.browser&&r.trigger("UploadProgress",s)):s.loaded=s.size,e=i=null,!c||c>=a.size?(s.size!=s.origSize&&(a.destroy(),a=null),r.trigger("UploadProgress",s),s.status=F.DONE,r.trigger("FileUploaded",s,{response:p.responseText,status:p.status,responseHeaders:p.getAllResponseHeaders()})):T(g,1))},p.onerror=function(){f()},p.onloadend=function(){this.destroy(),p=null},r.settings.multipart&&d.multipart?(p.open("post",o,!0),F.each(r.settings.headers,function(e,t){p.setRequestHeader(t,e)}),i=new I.FormData,F.each(F.extend(n,r.settings.multipart_params),function(e,t){i.append(t,e)}),i.append(r.settings.file_data_name,e),p.send(i,{runtime_order:r.settings.runtimes,required_caps:r.settings.required_features,preferred_caps:h})):(o=F.buildUrl(r.settings.url,F.extend(n,r.settings.multipart_params)),p.open("post",o,!0),p.setRequestHeader("Content-Type","application/octet-stream"),F.each(r.settings.headers,function(e,t){p.setRequestHeader(t,e)}),p.send(e,{runtime_order:r.settings.runtimes,required_caps:r.settings.required_features,preferred_caps:h})))}s.loaded&&(c=s.loaded=u?u*Math.floor(s.loaded/u):0),a=s.getSource(),r.settings.resize.enabled&&function(e,t){if(e.ruid){var i=I.Runtime.getInfo(e.ruid);if(i)return i.can(t)}return!1}(a,"send_binary_string")&&~I.inArray(a.type,["image/jpeg","image/png"])?function(t,e,i){var n=new I.Image;try{n.onload=function(){if(e.width>this.width&&e.height>this.height&&e.quality===S&&e.preserve_headers&&!e.crop)return this.destroy(),i(t);n.downsize(e.width,e.height,e.crop,e.preserve_headers)},n.onresize=function(){i(this.getAsBlob(t.type,e.quality)),this.destroy()},n.onerror=function(){i(t)},n.load(t)}catch(e){i(t)}}.call(this,a,r.settings.resize,function(e){a=e,s.size=e.size,g()}):g()}function R(e,t){s(t)}function E(e){if(e.state==F.STARTED)i=+new Date;else if(e.state==F.STOPPED)for(var t=e.files.length-1;0<=t;t--)e.files[t].status==F.UPLOADING&&(e.files[t].status=F.QUEUED,a())}function y(){p&&p.abort()}function v(e){a(),T(function(){r.call(e)},1)}function z(e,t){t.code===F.INIT_ERROR?e.destroy():t.code===F.HTTP_ERROR&&(t.file.status=F.FAILED,s(t.file),e.state==F.STARTED&&(e.trigger("CancelUpload"),T(function(){r.call(e)},1)))}function O(e){e.stop(),F.each(l,function(e){e.destroy()}),l=[],o.length&&(F.each(o,function(e){e.destroy()}),o=[]),d.length&&(F.each(d,function(e){e.destroy()}),d=[]),c=!(h={}),i=p=null,n.reset()}u={runtimes:I.Runtime.order,max_retries:0,chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:{mime_types:[],prevent_duplicates:!1,max_file_size:0},resize:{enabled:!1,preserve_headers:!0,crop:!1},send_file_name:!0,send_chunk_number:!0},_.call(this,e,null,!0),n=new F.QueueProgress,F.extend(this,{id:t,uid:t,state:F.STOPPED,features:{},runtime:null,files:l,settings:u,total:n,init:function(){var e,t,i=this;return"function"==typeof(e=i.getOption("preinit"))?e(i):F.each(e,function(e,t){i.bind(t,e)}),function(){this.bind("FilesAdded FilesRemoved",function(e){e.trigger("QueueChanged"),e.refresh()}),this.bind("CancelUpload",y),this.bind("BeforeUpload",m),this.bind("UploadFile",b),this.bind("UploadProgress",R),this.bind("StateChanged",E),this.bind("QueueChanged",a),this.bind("Error",z),this.bind("FileUploaded",v),this.bind("Destroy",O)}.call(i),F.each(["container","browse_button","drop_element"],function(e){if(null===i.getOption(e))return!(t={code:F.INIT_ERROR,message:F.translate("'%' specified, but cannot be found.")})}),t?i.trigger("Error",t):u.browse_button||u.drop_element?void g.call(i,u,function(e){var t=i.getOption("init");"function"==typeof t?t(i):F.each(t,function(e,t){i.bind(t,e)}),e?(i.runtime=I.Runtime.getInfo(f()).type,i.trigger("Init",{runtime:i.runtime}),i.trigger("PostInit")):i.trigger("Error",{code:F.INIT_ERROR,message:F.translate("Init error.")})}):i.trigger("Error",{code:F.INIT_ERROR,message:F.translate("You must specify either 'browse_button' or 'drop_element'.")})},setOption:function(e,t){_.call(this,e,t,!this.runtime)},getOption:function(e){return e?u[e]:u},refresh:function(){o.length&&F.each(o,function(e){e.trigger("Refresh")}),this.trigger("Refresh")},start:function(){this.state!=F.STARTED&&(this.state=F.STARTED,this.trigger("StateChanged"),r.call(this))},stop:function(){this.state!=F.STOPPED&&(this.state=F.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(){c=arguments[0]===S||arguments[0],o.length&&F.each(o,function(e){e.disable(c)}),this.trigger("DisableBrowse",c)},getFile:function(e){var t;for(t=l.length-1;0<=t;t--)if(l[t].id===e)return l[t]},addFile:function(e,n){var r,s=this,a=[],o=[];r=f(),function e(i){var t=I.typeOf(i);if(i instanceof I.File){if(!i.ruid&&!i.isDetached()){if(!r)return!1;i.ruid=r,i.connectRuntime(r)}e(new F.File(i))}else i instanceof I.Blob?(e(i.getSource()),i.destroy()):i instanceof F.File?(n&&(i.name=n),a.push(function(t){!function(n,e){var t=[];I.each(s.settings.filters,function(e,i){D[i]&&t.push(function(t){D[i].call(s,e,n,function(e){t(!e)})})}),I.inSeries(t,e)}(i,function(e){e||(l.push(i),o.push(i),s.trigger("FileFiltered",i)),T(t,1)})})):-1!==I.inArray(t,["file","blob"])?e(new I.File(null,i)):"node"===t&&"filelist"===I.typeOf(i.files)?I.each(i.files,e):"array"===t&&(n=null,I.each(i,e))}(e),a.length&&I.inSeries(a,function(){o.length&&s.trigger("FilesAdded",o)})},removeFile:function(e){for(var t="string"==typeof e?e:e.id,i=l.length-1;0<=i;i--)if(l[i].id===t)return this.splice(i,1)[0]},splice:function(e,t){var i=l.splice(e===S?0:e,t===S?l.length:t),n=!1;return this.state==F.STARTED&&(F.each(i,function(e){if(e.status===F.UPLOADING)return!(n=!0)}),n&&this.stop()),this.trigger("FilesRemoved",i),F.each(i,function(e){e.destroy()}),n&&this.start(),i},dispatchEvent:function(e){var t,i;if(e=e.toLowerCase(),t=this.hasEventListener(e)){t.sort(function(e,t){return t.priority-e.priority}),(i=[].slice.call(arguments)).shift(),i.unshift(this);for(var n=0;n<t.length;n++)if(!1===t[n].fn.apply(t[n].scope,i))return!1}return!0},bind:function(e,t,i,n){F.Uploader.prototype.bind.call(this,e,t,n,i)},destroy:function(){this.trigger("Destroy"),u=n=null,this.unbindAll()}})},F.Uploader.prototype=I.EventTarget.instance,F.File=(t={},function(e){F.extend(this,{id:F.guid(),name:e.name||e.fileName,type:e.type||"",size:e.size||e.fileSize,origSize:e.size||e.fileSize,loaded:0,percent:0,status:F.QUEUED,lastModifiedDate:e.lastModifiedDate||(new Date).toLocaleString(),getNative:function(){var e=this.getSource().getSource();return-1!==I.inArray(I.typeOf(e),["blob","file"])?e:null},getSource:function(){return t[this.id]?t[this.id]:null},destroy:function(){var e=this.getSource();e&&(e.destroy(),delete t[this.id])}}),t[this.id]=e}),F.QueueProgress=function(){var e=this;e.size=0,e.loaded=0,e.uploaded=0,e.failed=0,e.queued=0,e.percent=0,e.bytesPerSec=0,e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}},e.plupload=F}(window,mOxie);
var ae_globals={"ajaxURL":"https:\/\/sedeportista.com\/wp-admin\/admin-ajax.php","imgURL":"https:\/\/sedeportista.com\/wp-content\/themes\/directoryengine\/includes\/aecore\/assets\/img\/","jsURL":"https:\/\/sedeportista.com\/wp-content\/themes\/directoryengine\/includes\/aecore\/assets\/js\/","loadingImg":"<img class=\"loading loading-wheel\" src=\"https:\/\/sedeportista.com\/wp-content\/themes\/directoryengine\/includes\/aecore\/assets\/img\/loading.gif\" alt=\"Cargando...\">","loading":"Cargando","ae_is_mobile":"0","plupload_config":{"max_file_size":"128mb","url":"https:\/\/sedeportista.com\/wp-admin\/admin-ajax.php","flash_swf_url":"https:\/\/sedeportista.com\/wp-includes\/js\/plupload\/plupload.flash.swf","silverlight_xap_url":"https:\/\/sedeportista.com\/wp-includes\/js\/plupload\/plupload.silverlight.xap","filters":[{"title":"Archivo de Imagen","extensions":"jpg,jpeg,gif,png"}]},"homeURL":"https:\/\/sedeportista.com","is_submit_post":"","is_submit_project":"","is_archive":"1","is_single":"","max_images":"5","user_confirm":"0","max_cat":"10","confirm_message":"\u00bfEst\u00e1 seguro que desea eliminar este anuncio?","map_zoom":"5","map_center":{"address":"Madrid","latitude":"40.4167754","longitude":"-3.7037901999999576","style":"style_0","map_zoom_default":"5","mobile_map_zoom_default":""},"file_extension_error":"File extension error","fitbounds":"1","limit_free_msg":"Has alcanzado el numero m\u00e1ximo de anuncios gratuitos. Por favor selecciona otro Pack","error":"Por favor introduce los datos requeridos","geolocation":"1","date_format":"j F, Y","time_format":"g:i a","dates":{"days":["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","S\u00e1bado","Domingo"],"daysShort":["Dom","Lun","Mar","Mie","Jue","Vie","Sab","Dom"],"daysMin":["Do","Lu","Ma","Mi","Ju","Vi","Sa","Do"],"months":["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],"monthsShort":["Jan","Feb","Mar","Apr","Mayo","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},"global_map_style":[],"mobile_map_zoom":"1","map_typestyle":"0","start_of_week":"1","single_map_marker":"1","current_possition_title":"You are here","current_possition_img":"https:\/\/sedeportista.com\/wp-content\/themes\/directoryengine\/img\/geolocation-icon.png","map_gohome_title":"Mostrar mi localizacion","geolocation_failed":"Su dispositivo no esta compartiendo su localizaci\u00f3n.<br> Aseg\u00farese que tiene activada la geolocalizaci\u00f3n en su navegador.","geolocation_success":"Has sido geolocalizado correctamente","browser_supported":"Su navegador no soporta la localizaci\u00f3n","geo_direction":{"driving":"CONDUCIENDO","walking":"ANDANDO","bicycling":"EN BICICLETA","transit":"TRANSPORTE P\u00daBLICO"},"user_ID":"0","units_of_measurement":"km","invalid_time":"Introduce una hora v\u00e1lida","is_search":"0","is_tax":"1","max_images_comment":"6","translate_select":"Seleccionar todos","translate_deselect":"Deseleccionar"};
window.AE=window.AE||{};(function(AE,$,Backbone){AE.Models=AE.Models||{};AE.Collections=AE.Collections||{};AE.Views=AE.Views||{};AE.Routers=AE.Routers||{};AE.pubsub=AE.pubsub||{};_.extend(AE.pubsub,Backbone.Events);AE.globals=ae_globals;Backbone.Model.prototype.sync=function(method,model,options){var data=model.attributes;data.action=model.action||'ae-sync';switch(method){case'create':data.method='create';break;case'update':data.method='update';break;case'delete':data.method='remove';break;case'read':data.method='read';break;}
var ajaxParams={type:'POST',dataType:'json',data:data,url:ae_globals.ajaxURL,contentType:'application/x-www-form-urlencoded;charset=UTF-8'};ajaxParams=_.extend(ajaxParams,options);if(options.beforeSend!=='undefined')ajaxParams.beforeSend=options.beforeSend;ajaxParams.success=function(result,status,jqXHR){AE.pubsub.trigger('ae:success',result,status,jqXHR);options.success(result,status,jqXHR);};ajaxParams.error=function(jqXHR,status,errorThrown){AE.pubsub.trigger('ae:error',jqXHR,status,errorThrown);options.error(jqXHR,status,errorThrown);};$.ajax(ajaxParams);};Backbone.Collection.prototype.sync=function(method,collection,options){var ajaxParams={type:'POST',dataType:'json',data:{},url:ae_globals.ajaxURL,contentType:'application/x-www-form-urlencoded;charset=UTF-8'};ajaxParams.data=_.extend(ajaxParams.data,options.data);if(typeof collection.action!=='undefined'){ajaxParams.data.action=collection.action;}
if(options.beforeSend!=='undefined')ajaxParams.beforeSend=options.beforeSend;ajaxParams.success=function(result,status,jqXHR){AE.pubsub.trigger('ae:success',result,status,jqXHR);options.success(result,status,jqXHR);};ajaxParams.error=function(jqXHR,status,errorThrown){AE.pubsub.trigger('ae:error',jqXHR,status,errorThrown);options.error(jqXHR,status,errorThrown);};$.ajax(ajaxParams);};Backbone.Model.prototype.parse=function(result){if(_.isObject(result.data)){return result.data;}else{return result;}};Backbone.Collection.prototype.parse=function(result){if(_.isObject(result)&&_.isObject(result.data)){return result.data;}else{return[];}};})(window.AE,jQuery,Backbone);_.templateSettings={evaluate:/\<\#(.+?)\#\>/g,interpolate:/\{\{=(.+?)\}\}/g,escape:/\{\{-(.+?)\}\}/g};(function(AE,$,Backbone,Views,Models,Collections){AE.ajaxParams={type:'POST',dataType:'json',url:AE.globals.ajaxURL,contentType:'application/x-www-form-urlencoded;charset=UTF-8'};var ajaxParams=AE.ajaxParams;AE.Views.LoadingEffect=Backbone.View.extend({initialize:function(){},render:function(){this.$el.html(AE.globals.loadingImg);return this;},finish:function(){this.$el.html(AE.globals.loadingFinish);var view=this;setTimeout(function(){view.$el.fadeOut(500,function(){$(this).remove();});},1000);},remove:function(){view.$el.remove();}});AE.Views.BlockUi=Backbone.View.extend({defaults:{image:AE.globals.imgURL+'loading.gif',opacity:'0.6',background_position:'center center',background_color:'#FFFFFF'},isLoading:false,initialize:function(options){options=_.extend(_.clone(this.defaults),options);var loadingImg=options.image;this.overlay=$('<div class="loading-blur loading"><div class="loading-overlay"></div><div class="loading-img"></div></div>');this.overlay.find('.loading-img').css({'background-image':'url('+options.image+')','background-position':options.background_position});this.overlay.find('.loading-overlay').css({'opacity':options.opacity,'filter':'alpha(opacity='+options.opacity*100+')','background-color':options.background_color});this.$el.html(this.overlay);this.isLoading=false;},render:function(){this.$el.html(this.overlay);return this;},block:function(element,caption){var $ele=$(element);this.overlay.css({'position':'absolute','z-index':20000,'top':$ele.offset().top,'left':$ele.offset().left,'width':$ele.outerWidth(),'height':$ele.outerHeight()});this.isLoading=true;this.render().$el.show().appendTo($('body'));if(caption){this.$el.find('.loading-img').text(caption);}},setMessage:function(message){if(this.$el){this.$el.find('.loading-img').text(message);}},unblock:function(){this.$el.remove();this.isLoading=false;},finish:function(){this.$el.fadeOut(500,function(){$(this).remove();});this.isLoading=false;}});AE.Views.LoadingButton=Backbone.View.extend({dotCount:3,isLoading:false,initialize:function(){if(this.$el.length<=0)return false;var dom=this.$el[0];if(this.$el[0].tagName=='INPUT'){this.title=this.$el.val();}else{this.title=this.$el.html();}
this.isLoading=false;},loopFunc:function(view){var dots='';for(i=0;i<view.dotCount;i++)dots=dots+'.';view.dotCount=(view.dotCount+1)%3;view.setTitle(AE.globals.loading+dots);},setTitle:function(title){if(this.$el[0].tagName==='INPUT'){this.$el.val(title);}else{this.$el.html(title);}},loading:function(){this.setTitle(AE.globals.loading);this.$el.addClass('disabled');var view=this;view.isLoading=true;view.dots='...';view.setTitle(AE.globals.loading+view.dots);this.loop=setInterval(function(){if(view.dots==='...')view.dots='';else if(view.dots==='..')view.dots='...';else if(view.dots==='.')view.dots='..';else view.dots='.';view.setTitle(AE.globals.loading+view.dots);},500);},finish:function(){var dom=this.$el[0];this.isLoading=false;clearInterval(this.loop);this.setTitle(this.title);this.$el.removeClass('disabled');}});AE.Views.Modal_Box=Backbone.View.extend({defaults:{top:100,overlay:0.5},$overlay:null,initialize:function(){this.options=$.extend(this.defaults,this.options);},openModal:function(){var view=this;this.$el.modal('show');},closeModal:function(time,callback){var modal=this;modal.$el.modal('hide');return false;},loading:function(){if(typeof this.blockUi==='undefined'){this.blockUi=new AE.Views.BlockUi();}
this.blockUi.block(this.$el.find('input[type="submit"]'));},finish:function(){this.blockUi.unblock();},error:function(res){AE.pubsub.trigger('ae:notification',{msg:res.msg,notice_type:'error',});},success:function(res){AE.pubsub.trigger('ae:notification',{msg:res.msg,notice_type:'success',});}});plupload.addFileFilter('resolution_limit',function(limit,file,cb){var self=this;var reader=new FileReader();var image=new Image();var blodFile=file.getNative();reader.readAsDataURL(blodFile);reader.onload=function(_file){image.src=_file.target.result;image.onload=function(){var width=this.width;var height=this.height;var isValid=true;var errorMesage='';if(typeof limit.min!='undefined'){if(typeof limit.min.width!='undefined'){if(width<limit.min.width){isValid=false;errorMesage=plupload.translate('The width of the image must be greater than ')+limit.min.width+'px';}}
if(typeof limit.min.height!='undefined'){if(height<limit.min.height){isValid=false;errorMesage=plupload.translate('The height of the image must be greater than ')+limit.min.height+'px';}}}
if(typeof limit.max!='undefined'){if(typeof limit.max.width!='undefined'){if(width>limit.max.width){isValid=false;errorMesage=plupload.translate('The height of the image must be less than ')+limit.max.width+'px';}}
if(typeof limit.max.height!='undefined'){if(height>limit.max.height){isValid=false;errorMesage=plupload.translate('The height of the image must be less than ')+limit.max.height+'px';}}}
if(!isValid){self.trigger('Error',{code:plupload.IMAGE_DIMENSIONS_ERROR,message:errorMesage,file:file});}
cb(isValid);};image.onerror=function(e){console.log(e);self.trigger('Error',{code:plupload.IMAGE_FORMAT_ERROR,message:plupload.translate('Image format error.'),file:file});cb(false);};};});AE.Views.File_Uploader=Backbone.View.extend({events:{'click .btn-remove-option-image':'removeOptionImage'},initialize:function(options){_.bindAll(this,'onFileUploaded','onFileAdded','onFilesBeforeSend','onUploadComplete','onUploadErrorResponse');this.options=options;this.uploaderID=(this.options.uploaderID)?this.options.uploaderID:'et_uploader';this.processEl=$("#"+this.uploaderID+'_progress');this.config={runtimes:'html5,gears,flash,silverlight,browserplus,html4',multiple_queues:true,multipart:true,urlstream_upload:true,multi_selection:false,upload_later:false,container:this.uploaderID+'_container',drop_element:this.uploaderID+'_container',browse_button:this.uploaderID+'_browse_button',remove_button:this.uploaderID+'_remove_button',thumbnail:this.uploaderID+'_thumbnail',thumbsize:'thumbnail',file_data_name:this.uploaderID,max_file_size:'1mb',filters:{mime_types:[{title:'Image Files',extensions:(this.options.extensions)?this.options.extensions:'pdf,jpg,jpeg,gif,png,ico'}]},multipart_params:{fileID:this.uploaderID,action:'et-upload-image'},onProgress:function(up,file){if(this.processEl){this.processEl.text(file.percent+"%");}},Error:function(up,error){alert(error.message);}};if(typeof this.options.filters!='undefined'){jQuery.extend(true,this.options.filters,this.config.filters);}
jQuery.extend(true,this.config,AE.globals.plupload_config,this.options);this.controller=new plupload.Uploader(this.config);this.controller.init();this.controller.bind('FileUploaded',this.onFileUploaded);this.controller.bind('FilesAdded',this.onFileAdded);this.controller.bind('BeforeUpload',this.onFilesBeforeSend);this.bind('UploadSuccessfully',this.onUploadComplete);this.bind('UploadErrorResponse',this.onUploadErrorResponse);if(typeof this.controller.settings.onProgress==='function'){this.controller.bind('UploadProgress',this.controller.settings.onProgress);}
if(typeof this.controller.settings.onError==='function'){this.controller.bind('Error',this.controller.settings.onError);}else{this.controller.bind('Error',this.errorLog);}
if(typeof this.controller.settings.cbRemoved==='function'){this.controller.bind('FilesRemoved',this.controller.settings.cbRemoved);}
this.blockUi=new AE.Views.BlockUi();if(this.$el.find('#'+this.config.remove_button).length>0&&this.$el.find('#'+this.config.remove_button).attr('data-id')!=''){this.$el.find('#'+this.config.remove_button).show();}},getControler:function(){return this.controller;},errorLog:function(e,b){alert(b.message);},onFileAdded:function(up,files){if(typeof this.controller.settings.cbAdded==='function'){this.controller.settings.cbAdded(up,files);}
if(!this.controller.settings.upload_later){up.refresh();up.start();}},onFileUploaded:function(up,file,res){res=$.parseJSON(res.response);if(typeof this.controller.settings.cbUploaded==='function'){this.controller.settings.cbUploaded(up,file,res);}
if(res.success){this.updateThumbnail(res.data);this.trigger('UploadSuccessfully',res);}
else{this.trigger('UploadErrorResponse',res);}},updateThumbnail:function(res){var that=this,$thumb_div=this.$('#'+this.controller.settings['thumbnail']),$existing_imgs,thumbsize;if($thumb_div.length>0){$existing_imgs=$thumb_div.find('img'),thumbsize=this.controller.settings['thumbsize'];if($existing_imgs.length>0){$existing_imgs.fadeOut(100,function(){$existing_imgs.remove();if(_.isArray(res[thumbsize])){that.insertThumb(res[thumbsize][0],$thumb_div);}});}else if(_.isArray(res[thumbsize])){this.insertThumb(res[thumbsize][0],$thumb_div);}}},insertThumb:function(src,target){$('<img>').attr({'id':this.uploaderID+'_thumb','src':src}).appendTo(target).fadeIn(300);},updateConfig:function(options){if('updateThumbnail'in options&&'data'in options){this.updateThumbnail(options.data);}
$.extend(true,this.controller.settings,options);this.controller.refresh();},onFilesBeforeSend:function(){if('beforeSend'in this.options&&typeof this.options.beforeSend==='function'){this.options.beforeSend(this.$el);}},onUploadComplete:function(res){var view=this;if('success'in this.options&&typeof this.options.success==='function'){this.options.success(res);$('#'+this.config.remove_button).attr('data-id',res.data.attach_id);$('#'+this.config.remove_button).show();}},onUploadErrorResponse:function(res){if('errorResponsed'in this.options&&typeof this.options.errorResponsed==='function'){this.options.errorResponsed(res);}
else{if(res.hasOwnProperty('msg')){console.log(res);alert(res.msg);}}},removeOptionImage:function(e){var view=this;e.preventDefault();$target=$(e.currentTarget);var param={url:ae_globals.ajaxURL,type:'POST',data:{ID:$target.attr('data-id'),name:$target.attr('data-name'),action:'ae-remove-option-image',},beforeSend:function(){view.blockUi.block($target);},success:function(resp){if(resp.success){view.$el.find('.image img').attr('src','');AE.pubsub.trigger('ae:notification',{msg:resp.msg,notice_type:'success'});$target.hide();}},complete:function(){view.blockUi.unblock();}};$.ajax(param);}});AE.Views.UserItem=Backbone.View.extend({tagName:'li',className:'et-member',template:'',model:[],events:{'click a.action':'acting','change .regular-input':'change','click .et-act-ban':'renderBanForm','click .et-act-unban':'unbanUser',},initialize:function(){this.listenTo(this.model,'change',this.render);this.listenTo(this.model,'destroy',this.remove);if($('#user-item-template').length>0){this.template=_.template($('#user-item-template').html());}
this.blockUi=new AE.Views.BlockUi();},render:function(){if(this.template){this.$el.html(this.template(this.model.toJSON()));}
return this;},acting:function(e){e.preventDefault();var target=$(e.currentTarget),action=target.attr('data-act'),view=this;if(action=="confirm"){this.model.save('register_status','',{beforeSend:function(){view.blockUi.block(view.$el);},success:function(result,status,xhr){view.blockUi.unblock();view.$el.find('a.et-act-confirm').fadeOut();}});}},change:function(e){var $target=$(e.currentTarget);name=$target.attr('name'),val=$target.val(),view=this;this.model.save(name,val,{beforeSend:function(){view.blockUi.block(view.$el);},success:function(result,status,xhr){view.blockUi.unblock();}});},renderBanForm:function(e){var form=$('#form_ban_user');$('#ban_modal .modal-header .display-name').text(this.model.get('display_name'));$('#form_ban_user input[name=id]').val(this.model.get('id'));},unbanUser:function(e){var view=this;var params={url:ae_globals.ajaxURL,type:'POST',data:{ID:this.model.get('id'),action:'ae-sync-user',method:'update',do:'unban',},beforeSend:function(){view.blockUi.block(view.$el);},success:function(resp){if(resp.success){view.model.set(resp.data);view.render();}},complete:function(){view.blockUi.unblock();}};$.ajax(params);return false;}});AE.Views.ListUsers=Backbone.View.extend({});Views.PostItem=Backbone.Marionette.ItemView.extend({tagName:"li",className:'col-md-3 col-xs-6 place-item ae-item',events:{'click .action':'acting'},modelEvents:{"change":"modelChanged","change:post_status":"statusChange"},modelChanged:function(model){this.render();},statusChange:function(model){AE.pubsub.trigger('ae:model:statuschange',model);},acting:function(e){e.preventDefault();var target=$(e.currentTarget),action=target.attr('data-action'),view=this;switch(action){case'edit':AE.pubsub.trigger('ae:model:onEdit',this.model);$('#place_category').trigger('render.drop');break;case'reject':AE.pubsub.trigger('ae:model:onReject',this.model);break;case'archive':if(confirm(ae_globals.confirm_message)){this.model.set('archive',1);this.model.set('alguna_opcion_date_seleccionada',1);this.model.save('archive','1',{beforeSend:function(){view.blockItem();},success:function(result,res,xhr){AE.pubsub.trigger('ae:post:archiveSuccess',result,res,xhr);view.unblockItem();}});}else{return false;}
break;case'toggleFeature':this.model.save('et_featured',1);break;case'approve':this.model.save('publish','1',{beforeSend:function(){view.blockItem();},success:function(result,res,xhr){view.triggerMethod("before:approve",view,res);view.unblockItem();}});break;case'delete':if(confirm(ae_globals.confirm_message)){this.model.save('delete','1',{beforeSend:function(){view.blockItem();},success:function(result,res,xhr){view.unblockItem();if(res.success){view.model.destroy();location.reload();}}});}
break;default:AE.pubsub.trigger('ae:model:on'+action,this.model);break;}},blockItem:function(){if(typeof this.blockUi==='undefined'){this.blockUi=new Views.BlockUi();}
this.blockUi.block(this.$el);},unblockItem:function(){this.blockUi.unblock();}});Views.ListPost=Backbone.Marionette.CollectionView.extend({constructor:function(options){var view=this;Marionette.CollectionView.prototype.constructor.apply(this,arguments);if(typeof this.collection!=='undefined'){this.collection.each(function(pack,index,col){var el=view.$('.'+view.itemClass).eq(index);itemView=view.getItemView(pack);view.triggerMethod("before:item:added",view);view.children.add(new itemView({el:el,model:pack}));view.triggerMethod("after:item:added",view);});}}});Views.Index=Backbone.View.extend({initialize:function(options){_.bindAll(this,'onModelChange');var view=this;view.collections={};view.list={};this.options=_.extend(this,options);if(this.pending.length>0){view.list['pending']=new ListView({itemView:PostItem,collection:this.pending,el:'#pending-places',thumb:$('#pending-places').attr('data-thumb')});}
if(this.publish.length>0){view.list['publish']=new ListView({itemView:PostItem,collection:this.publish,el:'#publish-places',thumb:$('#publish-places').attr('data-thumb')});}
AE.pubsub.on('ae:model:statuschange',view.onModelChange,this);},onModelChange:function(model){var status=model.get('post_status'),view=this;if(status=='publish'||status=='reject'||status=='trash'){if(typeof view.pending!=='undefined'){view.pending.remove(model);view.publish.add(model);}}
if(status=='archive'){if(typeof view.publish!=='undefined'){view.publish.remove(model);}}}});Views.Skill_Item=Backbone.View.extend({'tagName':'li','className':'skill-item',events:{'click a.delete':'deleteItem'},initialize:function(){if($('#skill_item').length>0){this.template=_.template($('#skill_item').html());}else{alert('Hi dev, you forgot add item view skill_item');}
this.model.on('remove',this.removeView,this);this.model.on('destroy',this.removeView,this);},render:function(){this.$el.html(this.template(this.model.toJSON()));return this;},removeView:function(){this.$el.fadeOut('normal',function(){$(this).remove();});},deleteItem:function(event){event.preventDefault();this.model.destroy();}});Views.Skill_Control=Backbone.View.extend({max_length:5,events:{'keypress input.skill':'onAddSkill','click .add-skill':'onClickAddSkill',},initialize:function(options){_.bindAll(this,'addOne','removeOne');var view=this;this.options=_.extend(this,options);if(typeof this.options.name==='undefined'){this.options.name='skill';}
if(typeof this.collection==="undefined"){this.collection=new Collections.Skills();}
this.skill_list=this.$('ul.skills-list');view.skills={};this.$el.find('input.skill').typeahead({minLength:0,items:99,source:function(query,process){if(view.skills.length>0)return view.skills;return $.getJSON(ae_globals.ajaxURL,{action:'fre_get_skills',query:query},function(data){view.skills=data;return process(data);});},updater:function(item){var filter=$('#filter_skill').val();view.addSkill(item);}});this.collection.on('add',this.addOne,this);this.collection.on('remove',this.removeOne,this);if(typeof this.model!=='undefined'){this.render();}},setModel:function(model){this.model=model;this.render();},render:function(){var tax_input=this.model.get('tax_input'),skills=(typeof tax_input!=='undefined')?tax_input[this.options.name]:[],skill=[];this.collection.reset();for(var i=skills.length-1;i>=0;i--){var model=new Models.Skill(skills[i]);this.collection.add(model);};},addOne:function(model){var skillView=new Views.Skill_Item({model:model});this.model.set(this.options.name,this.collection.toJSON());this.skill_list.append(skillView.render().$el);},removeOne:function(model){this.model.set(this.options.name,this.collection.toJSON());},addSkill:function(skill){var duplicates=this.skill_list.find('input[type=hidden][value="'+skill+'"]'),count=this.skill_list.find('li');var max_length=this.max_length;if(typeof this.options.max_length!=='undefined'){max_length=parseInt(this.options.max_length);}
if(duplicates.length==0&&skill!=''&&count.length<max_length){var data={'name':skill};this.collection.add(new Models.Skill(data));$('input#skill').val('');}},onClickAddSkill:function(e){e.preventDefault();var val=this.$("input#skill").val();if(val)this.addSkill(val);},onAddSkill:function(event){var val=$(event.currentTarget).val();var filter=$('#filter_skill').val();if(event.which==13){this.addSkill(val);}
return event.which!=13;},filterSkill:function(){}});FilterRouter=Backbone.Router.extend({routes:{'!filter/:query':'filter'},filter:function(query){this.trigger('filter',query);}});Views.BlockControl=Backbone.Marionette.View.extend({initialize:function(options){_.bindAll(this,'addPost','onModelChange');var view=this;this.page=1;this.options=_.extend(this,options);this.blockUi=new Views.BlockUi();if(this.$('.ae_query').length>0){this.query=JSON.parse(this.$('.ae_query').html());}else{this.$('.paginations').remove();}
this.collection.on('add',this.addPost,this);AE.pubsub.on('ae:model:statuschange',this.onModelChange,this);this.grid=(options.grid)?options.grid:'grid';this.searchDebounce=_.debounce(this.onSearchDebounce,500);if(this.$('.skill-control').length>0&&this.$('.skill_filter').val()!=''){this.post=new Models.Post();this.skill_view=new Views.Skill_Control({collection:this.skills,model:this.post,el:view.$('.skill-control')});this.skills.on('add',this.filterSkill,this);this.skills.on('remove',this.filterSkill,this);}
view.triggerMethod("after:init");},filterSkill:function(){var skill=this.skills.toJSON();var view=this;var input_skill=$('.skill');skill=_.map(skill,function(element){return element['name'];});view.query['skill']=skill;view.page=1;view.fetch(input_skill);},events:{'click a.load-more-post':'loadMore','click .paginations a.page-numbers':'selectPage','click .paginations a.prev':'prev','click .paginations a.next':'next','change select ':'selectFilter','click a.orderby':'order','click a.click-type':'clickType','click .icon-view':'changeView','keyup input.search':'search','slideStop .slider-ranger':'filterRange','change .slider-ranger':'filterRange','changeDate .datepicker':'filterDate','click .refresh-post':'Refresh',},search:function(event){var target=$(event.currentTarget);this.searchDebounce(target);},onSearchDebounce:function($target){var name=$target.attr('name'),view=this;if(name!=='undefined'){view.query[name]=$target.val();view.page=1;view.fetch($target);}},addPost:function(post,col,options){post.set('page',this.page);},loadMore:function(e){e.preventDefault();var view=this,$target=$(e.currentTarget);view.page++;view.collection.fetch({remove:false,data:{query:view.query,page:view.page,paged:view.page,action:'ae-fetch-posts',paginate:true,thumbnail:view.thumbnail,},thumbnail:view.thumbnail,beforeSend:function(){view.blockUi.block($target);view.triggerMethod("before:loadMore");},success:function(result,res,xhr){view.blockUi.unblock();view.$('.paginations-wrapper').html(res.paginate);AE.pubsub.trigger('aeBlockControl:after:loadMore',result,res);if(res.max_num_pages==view.page||!res.success){$target.parents('.paginations').hide();$target.remove();}
view.switchTo();view.triggerMethod("after:loadMore",result,res);}});},selectFilter:function(event){event.stopImmediatePropagation();var $target=$(event.currentTarget),name=$target.attr('name'),view=this;if(name!=='undefined'){view.query[name]=$target.val();view.page=1;view.fetch($target);}},clickType:function(event){event.preventDefault();var $target=$(event.currentTarget),name=$target.attr('data-name'),type=$target.attr('data-type'),view=this;if($target.hasClass('active'))return;if(name!=='undefined'){view.$el.find('.click-type').parent().removeClass('active');$target.parent().addClass('active');view.query[name]=type;view.page=1;view.fetch($target);}},order:function(event){event.preventDefault();var $target=$(event.currentTarget),name=$target.attr('data-sort'),theme=$target.attr('data-theme'),view=this;if(name!=='undefined'){view.$('.orderby').removeClass('active');$target.addClass('active');if(name=="hourly_rate1"){if($target.next('i').hasClass('fa-sort-numeric-desc')){view.query['extra']='ASC';$target.next('i').removeClass('fa-sort-numeric-desc').addClass('fa-sort-numeric-asc');}
else{view.query['extra']='DESC';$target.next('i').removeClass('fa-sort-numeric-asc').addClass('fa-sort-numeric-desc');}}
view.query['orderby']=name;if(theme=="de"){var meta_key=$target.attr('data-meta-key'),random=$target.attr('data-random'),post_in=$target.attr('data-post-in');if(meta_key==='latest')
view.query['meta_key']='';else if(meta_key==='rating_score'){view.query['orderby']=meta_key;view.query['meta_key']=meta_key;}
if(post_in!=="")
view.query['post__in']=post_in;view.query['order']="DESC";}
view.page=1;view.fetch($target);}},changeView:function(event){var $target=$(event.currentTarget),view=this;if($target.hasClass('active'))return;this.$('.icon-view').removeClass('active');$target.addClass('active');if($target.hasClass('grid-style')){view.grid='grid';}else{view.grid='list';}
view.switchTo();view.triggerMethod("after:changeView",$target);},filterRange:function(event){event.preventDefault();var view=this,$target=$(event.currentTarget),name=$target.attr('name');view.query[name]=$target.val();view.page=1;view.fetch($target);},filterDate:function(event){event.preventDefault();var view=this,$target=$(event.currentTarget),name=$target.attr('name');view.query[name]=$target.val();$(event.currentTarget).datepicker('hide');view.fetch($target);},selectPage:function(event){event.preventDefault();var $target=$(event.currentTarget),page=parseInt($target.text().replace(/,/g,'')),view=this;if($target.hasClass('current')||$target.hasClass('next')||$target.hasClass('prev'))return;view.page=page;view.fetch($target);$('html, body').animate({scrollTop:view.$el.offset().top-180},800);},prev:function(event){event.preventDefault();var $target=$(event.currentTarget),view=this;view.page--;view.fetch($target);},next:function(event){event.preventDefault();var $target=$(event.currentTarget),view=this;view.page=view.page+1;view.fetch($target);},fetch:function($target){var view=this,page=view.page;view.collection.fetch({wait:true,remove:true,reset:true,data:{query:view.query,page:view.page,paged:view.page,paginate:view.query.paginate,thumbnail:view.thumbnail,},beforeSend:function(){view.blockUi.block($target);view.triggerMethod("before:fetch");},success:function(result,res,xhr){view.blockUi.unblock();var address="";if(res&&!res.success){var html_no_encontrado='<div class="event-active-wrapper not-result"><div class="col-md-12"><div class="event-wrapper tab-style-event"><h2 class="title-envent">Ups, no hemos encontrado anuncios</h2></div></div></div>';view.$('.paginations-wrapper').html(html_no_encontrado);view.$('.paginations').remove();view.$('.found_post').html(0);view.$('.plural').addClass('hide');view.$('.singular').removeClass('hide');address="spain";var post="";}else{if(jQuery("#place-list .not-result").length){jQuery("#place-list .not-result").remove();}
view.$('.paginations-wrapper').show();view.$('.paginations-wrapper').html(res.paginate);view.$('.replace').html(res.map);$('#place-status').html(res.status);view.$('.found_post').html(res.total);if(res.total>1){view.$('.plural').removeClass('hide');view.$('.singular').addClass('hide');}else{view.$('.plural').addClass('hide');view.$('.singular').removeClass('hide');}
view.switchTo();address=$('select[name="location"]').val()+' spain';post=new Models.Post(JSON.parse($('#place_id').html()));}
GMaps.geocode({region:"es",address:address,componentRestrictions:{country:'ES'},callback:function(results,status){if(status==='OK'){var latlng=results[0].geometry.location;var lat=latlng.lat();var lon=latlng.lng();AE.MapView=new Views.Map({el:$('body'),model:post,ajax:'1',latitude:lat,longitude:lon});}
else{if(address==""){var lat=ae_globals.map_center.latitude;var lon=ae_globals.map_center.longitude;}
AE.MapView=new Views.Map({el:$('body'),model:post,ajax:'1',latitude:lat,longitude:lon,});}}});if(jQuery("#your_current_location_search").length>0){if(view.query.location==""){jQuery("#your_current_location_search").html('Anuncios encontrados en toda España');}
else{if(view.query.location=="cerca-de-ti"){var localizacion_user="";if(frontGetCookie('current_user_province')){localizacion_user=frontGetCookie('current_user_province');}
if(frontGetCookie('current_user_locality')&&frontGetCookie('current_user_province')){localizacion_user=frontGetCookie('current_user_locality')+", "+frontGetCookie('current_user_province');}
jQuery("#your_current_location_search").html('Anuncios encontrados cerca de ti ('+localizacion_user+', a '+radius+'Km) <span><span class="quitar_geo"><img src="'+theme_url+'/img/loading.gif"><span class="txt">No utilizar<br>geolocalización</span></span></span>');}
else{jQuery("#your_current_location_search").html('Anuncios encontrados en la provincia de "'+capitalizeFirstLetter(view.query.location)+'" <span><span class="quitar_geo"><img src="'+theme_url+'/img/loading.gif"><span class="txt">No utilizar<br>geolocalización</span></span></span>');}}}
view.triggerMethod("after:fetch",result,res);}});},onModelChange:function(model){var post_status=model.get('post_status');if(post_status==='archive'||post_status==='reject'||'post_status'=='trash'){this.collection.remove(model);}},switchTo:function(){if(this.$('.list-option-filter').length==0)return;var view=this;if(view.grid=='grid'){view.$('ul > li').addClass('col-md-3 col-xs-6').removeClass('col-md-12');view.$('ul').removeClass('fullwidth');}else{view.$('ul > li').removeClass('col-md-3 col-xs-6').addClass('col-md-12');view.$('ul').addClass('fullwidth');}},Refresh:function(event){event.preventDefault();var view=this;var $target=$(event.currentTarget);var meta_key=$target.attr('data-meta-key');view['query']['orderby']='rand';view['query']['meta_key']=meta_key;view['query']['paginate']='refresh';view.page=1;view.fetch($target);},});Views.RejectPostModal=Views.Modal_Box.extend({events:{'submit form.reject-ad':'submitReject'},initialize:function(){AE.Views.Modal_Box.prototype.initialize.call();this.blockUi=new Views.BlockUi();},onReject:function(model){this.model=model;this.openModal();this.$el.find('input[name=id]').val(model.get('ID'));this.$el.find('span.post_name').text(model.get('post_title'));},submitReject:function(event){event.preventDefault();var view=this,form=$(event.target),message=$(form).find('textarea[name=reject_message]').val();this.model.set('reject_message',message);this.model.save('post_status','reject',{beforeSend:function(){view.blockUi.block(form);},success:function(model,res){view.blockUi.unblock();var type='error';if(res.success){type='success';view.closeModal();}
AE.pubsub.trigger('ae:post:afterReject',model,res);AE.pubsub.trigger('ae:afterRejectPost',model,res);AE.pubsub.trigger('ae:notification',{msg:res.msg,notice_type:type});}});}});Views.Carousel=Backbone.View.extend({action:'ae_request_thumb',events:{'hover .catelory-img-upload':'hoverCarousel','mouseleave .catelory-img-upload':'unhoverCarousel','click  .delete ':'removeCarousel','click .catelory-img-upload img':'setFeatured','click .rotat':'rotate'},initialize:function(options){this.maxFileUpload=ae_globals.max_images;this.options=options;this.setupView();AE.pubsub.on('ae:user:auth',this.handleAuth,this);if($('#ae_carousel_template').length>0){this.template=_.template($('#ae_carousel_template').html());}else{alert('Hi dev, to user ad carousels you have to add a template for image item ae_carousel_template ');}},handleAuth:function(model,resp,jqXHR){if(resp.success){this.carousel_uploader.config.multipart_params._ajax_nonce=resp.data.ajaxnonce;}},setModel:function(model){this.model=model;},setupView:function(){var that=this,$carousel=this.$el,i=0,j=0;this.carousels=[];this.carousels=this.model.get('et_carousels')||[];this.featured_image=this.model.get('featured_image')||'';this.blockUi=new Views.BlockUi();that.numberOfFile=this.carousels.length;this.$('#image-list').find('li.image-item').remove();var items=[];$.each(this.carousels,function(index,item){items.push(item);});$.ajax({url:ae_globals.ajaxURL,type:'get',data:{item:items,action:that.action},beforeSend:function(){},success:function(res){if(res.success){$.each(res.data,function(index,item){if(typeof item.thumbnail!=='undefined'){var $ul=$('#image-list');if(item.attach_id===that.model.get('featured_image'))item.is_feature=true;var li=that.template(item);$ul.prepend(li);}});if(res.data){$('#et_have_image').val(1);}
if(res.data.length>=that.maxFileUpload){$('#carousel_browse_button').hide('slow');}}}});var uploaderID='carousel';if(typeof this.carousel_uploader==='undefined')this.carousel_uploader=new Views.File_Uploader({el:$carousel,extensions:(this.options.extensions)?this.options.extensions:'jpg,jpeg,gif,png,ico',uploaderID:'carousel',thumbsize:'thumbnail',multi_selection:true,multipart_params:{_ajax_nonce:$carousel.find('.et_ajaxnonce').attr('id'),imgType:'ad_carousels',author:that.model.get('post_author'),data:uploaderID},filters:[{title:'Image Files',extensions:(this.options.extensions)?this.options.extensions:'jpg,jpeg,gif,png,ico'}],cbUploaded:function(up,file,res){if(res.success){var $ul=$('#image-list');var li=that.template(res.data);$ul.prepend(li);that.carousels.push(res.data.attach_id);that.model.set('et_carousels',that.carousels);}},cbAdded:function(up,files){var max_files=that.maxFileUpload;var carousels=that.model.get('et_carousels')||[];that.numberOfFile=that.$('.image-item').length;j=that.numberOfFile;i=that.numberOfFile;if(files.length>(max_files-that.numberOfFile)){alert('You are allowed to add only '+(max_files-that.numberOfFile)+' files.');}
plupload.each(files,function(file){if(files.length>(max_files-that.numberOfFile)){up.removeFile(file);}else{i++;}});that.numberOfFile=i;if(that.numberOfFile>=max_files){$('#carousel_browse_button').hide('slow');}},beforeSend:function(element){that.model.set('uploadingCarousel',true);that.blockUi.block($('#carousel_container'));},success:function(){var max_files=that.maxFileUpload;if($('#image-list').find('li.image-item').size()>0){j=$('#image-list').find('li.image-item').size();}
if(j==max_files){that.blockUi.unblock();$("#carousel_browse_button").hide('slow');}
if(j==that.numberOfFile){that.model.set('uploadingCarousel',false);}
var featured=that.$el.find('span.featured');if(featured.length==0){var last=that.$el.find('.catelory-img-upload:last');last.addClass('featured');that.model.set('featured_image',last.attr('id'));}
that.blockUi.unblock();j++;var photo_cnt=$('.image-item').length;if(photo_cnt>0){$('#et_have_image').val(photo_cnt);$("#et_have_image").parent().removeClass("error")
$("#et_have_image").parent().find("div.message").remove();}else{$('#et_have_image').val('');}}});},rotate:function(e){e.preventDefault();var that=this;this.blockUi=new Views.BlockUi();var selc=$('input[name=featured_image]:checked').val();var img=$('img[data-id='+selc+']').attr('src');if(selc){$.ajax({url:ae_globals.ajaxURL,type:'post',data:{id:selc,action:'ae-sync-image-rotate'},beforeSend:function(){that.blockUi.block($('#image-list'));},success:function(){$('img[data-id='+selc+']').attr('src',img+'?timestamp='+new Date().getTime());$(".img-small-place img").attr("src",$(".img-small-place img").attr("src")+'?timestamp='+new Date().getTime())
$(".list-gallery img").each(function(){var attr=$(this).attr("src");$(this).attr("src",attr+'?timestamp='+new Date().getTime())});that.blockUi.unblock();}});}},resetUploader:function(){if(typeof this.carousel_uploader==='undefined')return;this.carousel_uploader.controller.splice();this.carousel_uploader.controller.refresh();this.carousel_uploader.controller.destroy();},removeCarousel:function(event){event.preventDefault();var $target=$(event.currentTarget),$span=$target.parents('.image-item'),id=$span.attr('id'),that=this,max_files=that.maxFileUpload;var carousels=this.carousels;carousels=$.grep(carousels,function(a){return a!=id;});this.model.set('et_carousels',carousels);$.ajax({type:'post',url:ae_globals.ajaxURL,data:{action:'ae_remove_carousel',id:id},beforeSend:function(){},success:function(){$('#carousel_browse_button').show('slow');}});$span.remove();this.numberOfFile=this.numberOfFile-1;var total_image=$('#image-list').find('li.image-item').size();if(total_image<max_files){$('#carousel_browse_button').show('slow');}
var photo_cnt=$('.image-item').length;if(photo_cnt>0){$('#et_have_image').val(photo_cnt);$("#et_have_image").parent().removeClass("error")
$("#et_have_image").parent().find("div.message").remove();}else{$('#et_have_image').val('');}},setFeatured:function(event){var $target=$(event.currentTarget);this.model.set('featured_image',$target.attr('data-id'));$('.catelory-img-upload').removeClass('featured');$target.parents('.catelory-img-upload').addClass('featured');},hoverCarousel:function(event){var $target=$(event.currentTarget);$target.find('img').animate({'opacity':'0.5'},200);$target.find('.delete').animate({'opacity':'1'},200);},unhoverCarousel:function(event){var $target=$(event.currentTarget);$target.find('img').animate({'opacity':'1'},200);$target.find('.delete').animate({'opacity':'0'},200);}});Views.SubmitPost=Backbone.Marionette.View.extend({events:{'click .select-plan':'selectPlan','submit form.auth':'submitAuth','submit form.post':'submitPost','click .select-payment':'selectPayment','click .other-payment':'extendPayment','click .step-heading':'selectStep','keyup input#et_full_location':'gecodeMap','keyup input#et_full_location2':'gecodeMap',},modelEvents:{'change:et_payment_package':'updatePayment'},updatePayment:function(){if(!this.model.isNew()){this.model.save();}},initialize:function(options){_.bindAll(this,'userLogin');this.step=4;this.steps=['plan','auth','post','payment'];this.options=_.extend(this,options);if($('#edit_postdata').length>0){var postdata=JSON.parse($('#edit_postdata').html());if(postdata.et_full_location.length>0){var direccion=postdata.et_full_location;if(direccion.match(/\d{5}/)){var cp=direccion.match(/\d{5}/)[0];if(cp.length>0){postdata.et_full_location=cp;var dash=direccion.indexOf(', ');if(dash>0){var calle=direccion.substring(0,dash);postdata.et_full_location2=calle;}}}}
if(postdata.location.length>0){var cadena=postdata.location[0];$('#location').val(cadena).trigger('chosen:updated');}
if(postdata.place_category.length>0){$('#place_category').val(postdata.place_category).trigger('chosen:updated');}
if(postdata.et_have_car.length>0){var cadena=postdata.et_have_car;$('#et_have_car_sel').val(cadena).trigger('chosen:updated');}
$("#terms_conditions").prop('checked',true);this.model=new Models.Post(postdata);this.model.set('renew',1);this.model.set('alguna_opcion_date_seleccionada',1);this.setupFields();}else{this.model=new Models.Post();}
this.user=AE.App.user;this.blockUi=new Views.BlockUi();this.formValidate();this.finishStep=[];this.triggerMethod("after:init",this);this.user.on('change:id',this.userLogin);if(parseInt(this.step)==2)this.currentStep='auth';if(parseInt(this.step)==4)this.currentStep='plan';this.initMap();this.setupFirstStep();},setupFirstStep:function(){var $target=$('.auto-select');if($target.length==0)return;if($('.auto-select.publish').length>0){$target=$($('.auto-select.publish').get(0)).find('.select-plan');}else{$target=$($('.auto-select.pending').get(0)).find('.select-plan');}
this.choosePlan($target);},setupFields:function(){var view=this,form_field=view.$('#step-post'),location=this.model.get('location');form_field.find('input.input-item,input[type="text"],input[type="hidden"], textarea').each(function(){var $input=$(this);$input.val(view.model.get($input.attr('name')));});form_field.find('input[type="radio"]').each(function(){var $input=$(this),name=$input.attr('name');if($input.val()==view.model.get(name)){$input.attr('checked',true);}});if(jQuery("input[name='tipo_reserva']:checked")){jQuery("input[name='tipo_reserva']:checked").click();}},formValidate:function(){$("form.auth").validate({ignore:".ignore",rules:{user_login:'required',user_pass:"required",repeat_password:{equalTo:"#user_pass"},user_email:{required:true,email:true},recaptcha_publica_tu_anuncio_1:'required',}});$("form.post").validate({ignore:"",rules:{post_title:{required:true,maxlength:65,minlength:5,remote:{url:ae_globals.ajaxURL,type:"post",data:{post_title:function(){return $("#post_title").val();},is_ajax:true,action:'checkIfExistTitle'}}},et_full_location:{required:true,number:true,maxlength:5,minlength:5},place_category:"required",post_content:"required",et_have_image:{required:function(){if(getIfApp==0){return true;}else{return false;}}},location:"required",tipo_reserva:"required",hourly_rate1:{required:{depends:function(element){return jQuery("input[type='radio']:checked").val()=="horas"||jQuery("input[type='radio']:checked").val()=="servicio"}},number:true},duracion_servicio:{required:{depends:function(element){return jQuery("input[type='radio']:checked").val()=="servicio"}}},et_phone:{number:true,minlength:9,maxlength:9},et_url:{url2:true},et_fb_url:{url2:true},et_google_url:{url2:true},et_twitter_url:{url2:true},alguna_opcion_date_seleccionada:"required",terms_conditions:"required"},messages:{post_title:{remote:"Este título ya está en uso."}},errorPlacement:function(label,element){if(element.is("textarea")){$(".message_error_textarea").closest('div').append(label);}else{$(element).closest('div').append(label);}},focusInvalid:false,invalidHandler:function(form,validator){scrollToErrorDatos($(validator.errorList[0].element));}});},selectPlan:function(event){event.preventDefault();this.choosePlan($(event.currentTarget));},choosePlan:function($target,model,res){var $li=$target.closest('li'),amount=$li.attr('data-price'),$step=$li.closest('div.step-wrapper'),view=this;this.currentStep='plan';this.triggerMethod("before:selectPlan",$step,$li);if(parseFloat(amount)===0){if(parseInt(this.limit_free_plan)>0){var used=view.free_plan_used;if(parseInt(used)>=parseInt(view.limit_free_plan)){view.triggerMethod("limit:free",view);return false;}}
view.model.set({is_free:1});$('#step-payment').hide();if(jQuery("input[name='tipo_reserva']").size()==3){jQuery(".tipo_servicio .radio-inline.tres").remove();jQuery(".tipo_servicio label").removeClass("col-md-4").removeClass("col-sm-4").removeClass("col-xs-4");jQuery(".tipo_servicio label").addClass("col-md-6").removeClass("col-sm-6").removeClass("col-xs-6");}
view.addFinishStep('step-post');view.showNextStep();view.triggerMethod('after:postSuccess',model,res);}else{view.model.set({is_free:0});$('#step-payment').show();if(jQuery("input[name='tipo_reserva']").size()==2){jQuery(".tipo_servicio").append("<label class='radio-inline tres col-md-4 col-sm-4 col-xs-4'><input type='radio' name='tipo_reserva' value='convenir'>A convenir</label>");jQuery(".tipo_servicio label").removeClass("col-md-6").removeClass("col-sm-6").removeClass("col-xs-6");jQuery(".tipo_servicio label").addClass("col-md-4").removeClass("col-sm-4").removeClass("col-xs-4");}}
this.model.set('et_payment_package',$li.attr('data-sku'));if(typeof $li.attr('data-package-type')!=='undefined'){this.model.set('et_package_type',$li.attr('data-package-type'));}
this.$('.list-price li').removeClass('selected');$target.parents('li').addClass('selected');$li.closest('div.step-wrapper').addClass('complete');this.addFinishStep('step-plan');this.showNextStep();this.triggerMethod("after:selectPlan",$step,$li);},submitAuth:function(event){event.preventDefault();var $target=$(event.currentTarget),view=this;$target.find('.input-item').each(function(){view.user.set($(this).attr('name'),$(this).val());});view.triggerMethod('before:submitAuth',view.user,view);view.user.set('flag','1');view.user.save('do','register',{beforeSend:function(){view.blockUi.block($target);},success:function(model,res,jqXHR){view.blockUi.unblock($target);if(res.success){view.currentStep='auth';view.addFinishStep('step-auth');view.user_login=true;view.showNextStep();AE.pubsub.trigger('ae:user:auth',model,res,jqXHR);view.triggerMethod('after:authSuccess',model,res);setTimeout(function(){view.map=new GMaps({div:'#map',lat:ae_globals.map_center.latitude,lng:ae_globals.map_center.longitude,zoom:5,panControl:false,zoomControl:true,mapTypeControl:false});view.map.setCenter(ae_globals.map_center.latitude,ae_globals.map_center.longitude);},500);}else{view.user_login=false;view.triggerMethod('after:authFail',model,res);}}});},userLogin:function(model){var view=this;if(this.finishStep.length>0||view.currentStep=='auth'){view.addFinishStep('step-auth');}
if(parseInt(this.step)==2||this.finishStep.length>1){view.showNextStep();}
view.user_login=true;this.$('.step-auth .content').remove();this.$('.step-auth .text-heading-step').html(model.get('label'));view.triggerMethod("after:showNextStep",'post',view.currentStep);setTimeout(function(){view.map=new GMaps({div:'#map',lat:ae_globals.map_center.latitude,lng:ae_globals.map_center.longitude,zoom:5,panControl:false,zoomControl:true,mapTypeControl:false});view.map.setCenter(ae_globals.map_center.latitude,ae_globals.map_center.longitude);},500);},submitPost:function(event){event.preventDefault();var $target=$(event.currentTarget),view=this,temp=[];if(view.model.get('uploadingCarousel'))return false;$target.find('.input-item, .wp-editor-area').each(function(){view.model.set($(this).attr('name'),$(this).val());});$target.find('.tax-item').each(function(){view.model.set($(this).attr('name'),$(this).val());});view.triggerMethod('before:submitPost',view.model,view);view.$el.find('input[type=checkbox]').each(function(){var name=$(this).attr('name');view.model.set(name,[]);});view.$el.find('input[type=checkbox]:checked').each(function(){var name=$(this).attr('name');if(name=="et_claimable_check")return false;if(typeof temp[name]!=='object'){temp[name]=new Array();}
temp[name].push($(this).val());view.model.set(name,temp[name]);});view.$el.find('input[type=radio]:checked').each(function(){view.model.set($(this).attr('name'),$(this).val());});if($("input[name='tipo_reserva']:checked").val()=="servicio"){view.model.set('duracion_servicio',$("select#duracion_servicio").val());}
view.model.set('post_author',view.user.get('id'));if(view.model.get('et_full_location2')!=""){view.model.set('et_full_location',view.model.get('et_full_location2')+", "+view.model.get("et_full_location"));}
else{view.model.set('et_full_location',view.model.get("et_full_location"));}
if(($(".open-time").val()!=""&&$(".close-time").val()!="")||($(".open-time-2").val()!=""&&$(".close-time-2").val()!="")){view.model.set('alguna_opcion_date_seleccionada',1);}
else{view.model.set('alguna_opcion_date_seleccionada',"");}
view.model.set('necesary_terms',1);if(getIfApp!=0){view.model.set('isAPP',1);}
if(!view.model.get('uploadingCarousel')){view.model.save('','',{beforeSend:function(){view.blockUi.block($target);},success:function(model,res){view.blockUi.unblock();if(res.success){if(typeof res.data.redirect_url!=='undefined'){window.location.href=res.data.redirect_url;}else{view.currentStep='post';view.addFinishStep('step-post');view.showNextStep();view.triggerMethod('after:postSuccess',model,res);}}else{view.triggerMethod('after:postFail',model,res);}}});}},extendPayment:function(event){event.preventDefault();var view=this,$target=$(event.currentTarget),tipopago=$target.attr('data-type'),data={action:'et-setup-payment',ID:this.model.id,author:this.model.get('post_author'),packageID:this.model.get('et_payment_package'),packageType:this.model.get('et_package_type'),'tipo-pago':tipopago,coupon_code:view.$('#coupon_code').val()};AE.pubsub.trigger('ae:submitPost:extendGateway',data,event);},selectPayment:function(event){event.preventDefault();var $target=$(event.currentTarget),tipopago=$target.attr('data-type'),$button=$target.find('button'),view=this;$.ajax({url:ae_globals.ajaxURL,type:'post',contentType:'application/x-www-form-urlencoded;charset=UTF-8',data:{action:'et-setup-payment',ID:this.model.id,author:this.model.get('post_author'),packageID:this.model.get('et_payment_package'),packageType:this.model.get('et_package_type'),'tipo-pago':tipopago,coupon_code:view.$('#coupon_code').val()},beforeSend:function(){view.blockUi.block($target);},success:function(response){view.blockUi.unblock();if(response.data.ACK){view.triggerMethod('submit:paymentSuccess',response);$('#checkout_form').attr('action',response.data.url);if($('#checkout_form .packageType').length>0){$('#checkout_form .packageType').val(view.model.get('et_package_type'));}
if(typeof response.data.extend!=="undefined"){$('#checkout_form .payment_info').html('').append(response.data.extend.extend_fields);}
$('#payment_submit').click();}else{view.triggerMethod('submit:paymentFail',response);}}});},initMap:function(){var view=this;if($('#map').length>0){view.map=new GMaps({div:'#map',lat:ae_globals.map_center.latitude,lng:ae_globals.map_center.longitude,zoom:5,panControl:false,zoomControl:true,mapTypeControl:false});if(ae_globals.map_typestyle!=1){view.map.set('styles',[{featureType:"poi",stylers:[{visibility:'off'}]},{featureType:"transit.station.bus",stylers:[{visibility:'off'}]}]);}
if($('#et_location_lat').val()!==''&&$('#et_location_lng').val()!==''){var lat=$('#et_location_lat').val(),lng=$('#et_location_lng').val();view.map.setCenter(lat,lng);view.map.addMarker({lat:lat,lng:lng,draggable:true,dragend:function(e){var location=e.latLng;$('#et_location_lat').val(location.lat());$('#et_location_lng').val(location.lng());view.model.set('et_location_lat',location.lat());view.model.set('et_location_lng',location.lng());}});}}},gecodeMap:function(event){var cp=$("#et_full_location").val();var dir=$("#et_full_location2").val();if(cp.length<5)return;var address=dir+", "+cp+", España",view=this;if(typeof(GMaps)!=='undefined')GMaps.geocode({address:address,callback:function(results,status){if(status=='OK'){var latlng=results[0].geometry.location;$('#et_location_lat').val(latlng.lat());$('#et_location_lng').val(latlng.lng());view.model.set('et_location_lng',latlng.lng());view.model.set('et_location_lat',latlng.lat());view.map.setZoom(14);view.map.setCenter(latlng.lat(),latlng.lng());view.map.removeMarkers();view.map.addMarker({lat:latlng.lat(),lng:latlng.lng(),draggable:true,dragend:function(e){var location=e.latLng;$('#et_location_lat').val(location.lat());$('#et_location_lng').val(location.lng());view.model.set('et_location_lat',location.lat());view.model.set('et_location_lng',location.lng());}});var country;for(i=0;i<results[0].address_components.length;i++){for(j=0;j<results[0].address_components[i].types.length;j++){if(results[0].address_components[i].types[j]=="country")
country=results[0].address_components[i].short_name}}
if(country=="ES"){var provincia;for(i=0;i<results[0].address_components.length;i++){for(j=0;j<results[0].address_components[i].types.length;j++){if(results[0].address_components[i].types[j]=="administrative_area_level_2")
provincia=results[0].address_components[i].short_name}}
if(jQuery("#location ."+provincia.toLowerCase()).val()!=='undefined'){var value_provincia=jQuery("#location ."+provincia.toLowerCase()).val();jQuery('#location').val(value_provincia);jQuery('#location').trigger("chosen:updated");jQuery('#location').parent().removeClass("error");jQuery('#location').parent().find("div.message").remove();}
else{jQuery('#location').val(-1);jQuery('#location').trigger("chosen:updated");}}
else{jQuery('#location').val(-1);jQuery('#location').trigger("chosen:updated");}}}});},showNextStep:function(){this.triggerMethod("before:showNextStep",this);var next='auth',view=this;view.$('.step-wrapper').removeClass('current');this.$('.content').slideUp(500,'easeOutExpo',function(){if(view.currentStep==='plan'){if(view.user_login){next='post';}}
if(view.currentStep=='auth'){view.user_login=true;next='post';}
if(view.currentStep=='post'){view.user_login=true;next='payment';}
view.$('.step-'+view.currentStep+'  .content').closest('div.step-wrapper').addClass('complete');view.$('.step-'+next+'  .content').slideDown(10,'easeOutExpo').end();view.$('.step-'+next).addClass('current');});if(typeof this.map!=='undefined'){this.map.refresh();}
view.triggerMethod("after:showNextStep",next,view.currentStep);},selectStep:function(event){event.preventDefault();var $target=$(event.currentTarget),$wrapper=$target.parents('.step-wrapper'),view=this,select=$wrapper.attr('id');if(select=='step-auth'){if(this.finishStep.length<1)return;}
if(select=='step-post'){if($('#step-auth').length>0&&this.finishStep.length<2)return;if($('#step-auth').length==0&&this.finishStep.length<1)return;}
if(select=='step-payment'){if($('#step-auth').length>0&&this.finishStep.length<3)return;if($('#step-auth').length==0&&this.finishStep.length<2)return;}
if(!$target.closest('div').hasClass('current')){this.triggerMethod('before:selectStep',$target);view.$('.step-wrapper').removeClass('current');this.$('.content').slideUp(500,'easeOutExpo');$target.closest('div').addClass('current').find('.content').slideDown(500,'easeOutExpo');this.triggerMethod('after:selectStep',$target,this);}},addFinishStep:function(step){if(typeof this.finishStep==='undefined'){this.finishStep=[];}
$('#'+step).find('.number-step').html('<span class="fa fa-check"></span>');this.$('.'+step).addClass('complete');this.finishStep.push(step);}});Views.ContactModal=AE.Views.Modal_Box.extend({events:{'submit form#submit_contact':'sendMessage',},initialize:function(options){AE.Views.Modal_Box.prototype.initialize.call();this.blockUi=new AE.Views.BlockUi();this.options=_.extend(this,options);this.user=this.model;},sendMessage:function(event){event.preventDefault();this.submit_validator=$("form#submit_contact").validate({rules:{message:"required"}});var form=$(event.currentTarget),$button=form.find(".btn-submit"),data=form.serializeObject(),view=this;form.find('input, textarea, select').each(function(){view.user.set($(this).attr('name'),$(this).val());});this.model.set('send_to',view.user_id);if(this.submit_validator.form()&&!form.hasClass("processing")){this.user.set('do','inbox');this.user.request('fetch',{beforeSend:function(){view.blockUi.block($button);form.addClass('processing');},success:function(result,status,jqXHR){form.removeClass('processing');if(status.success){AE.pubsub.trigger('ae:notification',{msg:status.msg,notice_type:'success',});view.closeModal();form.trigger('reset');}else{AE.pubsub.trigger('ae:notification',{msg:status.msg,notice_type:'error',});view.closeModal();}
view.blockUi.unblock();}});}}});})(window.AE,jQuery,Backbone,window.AE.Views,window.AE.Models,window.AE.Collections);(function(AE,$,Backbone){AE.Models.User=Backbone.Model.extend({action:'ae-sync-user',initialize:function(){},request:function(method,options){if(this.get('do')=="register"||method=="update"){this.save('','',options);}else{this.fetch(options);}},resetpass:function(options){this.save('do','resetpass',options);},confirmMail:function(options){this.set('do','confirm_mail');this.fetch(options);}});AE.Models.Post=Backbone.Model.extend({action:'ae-sync-post',initialize:function(){}});AE.Models.Comment=Backbone.Model.extend({action:'ae-sync-comment',initialize:function(){}});AE.Models.Favorite=Backbone.Model.extend({action:'ae-sync-favorite',initialize:function(){}});AE.Models.Skill=Backbone.Model.extend({action:'ae-skill-sync',initialize:function(){}});})(window.AE,jQuery,Backbone);(function(AE,$,Backbone){AE.Collections.Users=Backbone.Collection.extend({model:AE.Models.User,action:'ae-fetch-users',initialize:function(){this.paged=1;}});AE.Collections.Posts=Backbone.Collection.extend({model:AE.Models.Post,action:'ae-fetch-posts',initialize:function(){this.paged=1;}});AE.Collections.Comments=Backbone.Collection.extend({model:AE.Models.Comment,action:'ae-fetch-comments',initialize:function(){this.paged=1;}});AE.Collections.Blogs=Backbone.Collection.extend({model:AE.Models.Comment,action:'ae-fetch-blogs',initialize:function(){this.paged=1;}});AE.Collections.Skills=Backbone.Collection.extend({model:AE.Models.Skill,action:'ae-fetch-skills',initialize:function(){}});})(window.AE,jQuery,Backbone,window.AE.Views);
(function($,AE,Views,Models,Collections,Backbone){AE.pubsub=AE.pubsub||{};_.extend(AE.pubsub,Backbone.Events);var pubsub=pubsub||AE.pubsub;Models.Event=Backbone.Model.extend({action:'ae-sync-event',initialize:function(){}});Views.AuthModal=Views.Modal_Box.extend({events:{'submit form.signin_form':'doLogin','submit form.signup_form':'doRegister','submit form.forgotpass_form':'doSendPassword','click  button.close':'resetAuthForm','click a.link_sign_up':'openSingup','click a.link_forgot_pass':'openForgot','click a.link_sign_in':'openSingin'},initialize:function(){AE.Views.Modal_Box.prototype.initialize.call();this.blockUi=new Views.BlockUi();this.user=this.model;this.initValidator();},openSingup:function(event){event.preventDefault();$('#signin_form').fadeOut("slow",function(){$(this).css({'z-index':1});$('.modal-title-sign-in').empty().text(de_front.texts.sign_up);$('#signup_form').fadeIn(500).css({'z-index':2});});},openForgot:function(event){event.preventDefault();$('#signin_form').fadeOut("slow",function(){$(this).css({'z-index':1});$('.modal-title-sign-in').empty().text(de_front.texts.forgotpass);$('#forgotpass_form').fadeIn(500).css({'z-index':2});});},openSingin:function(event){event.preventDefault();$('#signup_form').fadeOut("slow",function(){$(this).css({'z-index':1});$('.modal-title-sign-in').empty().text(de_front.texts.sign_in);$('#signin_form').fadeIn(500).css({'z-index':2});});},initValidator:function(){this.login_validator=$("form.signin_form").validate({rules:{user_login:"required",user_pass:"required"}});this.register_validator=$("form.signup_form").validate({ignore:".ignore",rules:{user_login:"required",user_pass:"required",user_email:{required:true,email:true},re_password:{required:true,equalTo:"#reg_pass"},recaptcha_register_1:"required"}});this.forgot_validator=$("form.forgotpass_form").validate({rules:{email:{required:true,email:true},}});},doLogin:function(event){event.preventDefault();event.stopPropagation();this.initValidator();var form=$(event.currentTarget),button=form.find('input.btn-submit'),view=this;form.find('input, textarea, select').each(function(){view.user.set($(this).attr('name'),$(this).val());});if(this.login_validator.form()&&!form.hasClass("processing")){this.user.set('do','login');this.user.request('read',{beforeSend:function(){view.blockUi.block(button);form.addClass('processing');},success:function(user,status,jqXHR){view.blockUi.unblock();form.removeClass('processing');AE.pubsub.trigger('ae:user:auth',user,status,jqXHR);view.closeModal();}});}},doRegister:function(event){event.preventDefault();event.stopPropagation();this.initValidator();var form=$(event.currentTarget),button=form.find('input.btn-submit'),view=this;form.find('input, textarea, select').each(function(){view.user.set($(this).attr('name'),$(this).val());});if(this.register_validator.form()&&!form.hasClass("processing")){this.user.set('do','register');this.user.request('create',{beforeSend:function(){view.blockUi.block(button);form.addClass('processing');},success:function(user,status,jqXHR){view.blockUi.unblock();form.removeClass('processing');AE.pubsub.trigger('ae:user:auth',user,status,jqXHR);view.closeModal();}});}},doSendPassword:function(event){event.preventDefault();event.stopPropagation();this.initValidator();var form=$(event.currentTarget),email=form.find('input.email').val(),button=form.find('input.btn-submit'),view=this;if(this.forgot_validator.form()&&!form.hasClass("processing")){this.user.set('user_login',email);this.user.set('do','forgot');this.user.request('read',{beforeSend:function(){view.blockUi.block(button);form.addClass('processing');},success:function(user,status,jqXHR){form.removeClass('processing');view.blockUi.unblock();if(status.success){view.closeModal();AE.pubsub.trigger('ae:notification',{msg:status.msg,notice_type:'success'});}else{AE.pubsub.trigger('ae:notification',{msg:status.msg,notice_type:'error'});}}});}},resetAuthForm:function(event){event.preventDefault();var view=this;this.$("form.signin_form").fadeIn('slow',function(){$('.modal-title-sign-in').empty().text(de_front.texts.sign_in);view.$("form.signup_form").hide();view.$("form.forgotpass_form").hide();});}});Views.CreateEvent=Views.Modal_Box.extend({events:{'submit form#event_form':'submit'},initialize:function(options){AE.Views.Modal_Box.prototype.initialize.call();this.blockUi=new Views.BlockUi();this.model=new Models.Event();this.initValidator;DPGlobal.dates=ae_globals.dates;var nowTemp=new Date(),now=new Date(nowTemp.getFullYear(),nowTemp.getMonth(),nowTemp.getDate(),0,0,0,0),checkin=$('#event_start_date').datepicker({appendTo:'.event-start-date',weekStart:parseInt(ae_globals.start_of_week),}).on('changeDate',function(ev){if(ev.date.valueOf()>checkout.date.valueOf()){var newDate=new Date(ev.date);newDate.setDate(newDate.getDate()+1);checkout.setValue(newDate);}
checkin.hide();$('#event_close_date')[0].focus();}).data('datepicker');var checkout=$('#event_close_date').datepicker({appendTo:'.event-close-date',weekStart:parseInt(ae_globals.start_of_week)}).on('changeDate',function(ev){checkout.hide();}).data('datepicker');this.uploaderID='event_banner';var $container=$("#event_banner_container"),view=this;if(typeof this.banner_uploader==="undefined"){this.banner_uploader=new AE.Views.File_Uploader({el:$container,uploaderID:this.uploaderID,thumbsize:'medium',multipart_params:{_ajax_nonce:$container.find('.et_ajaxnonce').attr('id'),data:{method:'event_banner'},imgType:this.uploaderID,},cbUploaded:function(up,file,res){if(res.success){$('#'+this.container).parents('.desc').find('.error').remove();}else{$('#'+this.container).parents('.desc').append('<div class="error">'+res.msg+'</div>');}},beforeSend:function(){view.blockUi.block($container);},success:function(res){if(res.success===false){AE.pubsub.trigger('ae:notification',{msg:res.msg,notice_type:'error',});}else{view.model.set('featured_image',res.data.attach_id);}
view.blockUi.unblock();}});}},initValidator:function(){$("form#event_form").validate({ignore:"",rules:{post_title:"required",short_tag:"required",event_content:"required",},errorPlacement:function(label,element){if(element.is("textarea")){label.insertAfter(element.next());}else{$(element).closest('div').append(label);}
AE.pubsub.trigger('ae:notification',{msg:ae_globals.msg,notice_type:'error',});}});},onCreateEvent:function(place){this.model.set('post_parent',place.get('ID'));this.openModal();setTimeout(function(){if(typeof tinyMCE!=='undefined'){tinymce.EditorManager.execCommand('mceAddEditor',true,"event_content");}},500);},onEditEvent:function(model){this.model=model;this.setupFields();this.openModal();},setupFields:function(){var view=this,form_field=view.$('.form-field'),location=this.model.get('location'),cover_image=view.model.get('large_thumbnail');AE.pubsub.trigger('AE:beforeSetupFields',this.model);setTimeout(function(){if(typeof tinyMCE!=='undefined'){tinymce.EditorManager.execCommand('mceAddEditor',true,"event_content");tinymce.EditorManager.get('event_content').setContent(view.model.get('post_content'));}},500);form_field.find('input[type="text"],input[type="hidden"], textarea,select').each(function(){var $input=$(this);$input.val(view.model.get($input.attr('name')));if($input.get(0).nodeName==="SELECT"){$input.trigger('chosen:updated');}});form_field.find('input[type="radio"]').each(function(){var $input=$(this),name=$input.attr('name');if($input.val()===view.model.get(name)){$input.attr('checked',true);}});if(cover_image){view.$('#event_banner_thumbnail').html('').append('<img style="width: 300px;" src="'+cover_image+'" />');}},submit:function(event){event.preventDefault();var $form=$(event.currentTarget),temp=new Array(),view=this;if($('form#event_form').valid()){view.$el.find('input,textarea,select').each(function(){view.model.set($(this).attr('name'),$(this).val());});view.$el.find('input[type=checkbox]:checked').each(function(){var name=$(this).attr('name');temp.push($(this).val());view.model.set(name,temp);});view.$el.find('input[type=radio]:checked').each(function(){view.model.set($(this).attr('name'),$(this).val());});view.model.save('','',{beforeSend:function(){view.blockUi.block($form);},success:function(result,status,jqXHR){view.blockUi.unblock();if(status.success){pubsub.trigger('ae:notification',{msg:status.msg,notice_type:'success',});window.location.reload();}else{pubsub.trigger('ae:notification',{notice_type:'error',msg:status.msg});}}});}}});Views.CreateCalender=Views.Modal_Box.extend({events:{'submit form#event_form':'submit'},initialize:function(options){AE.Views.Modal_Box.prototype.initialize.call();this.blockUi=new Views.BlockUi();this.model=new Models.Event();this.initValidator;DPGlobal.dates=ae_globals.dates;var nowTemp=new Date(),now=new Date(nowTemp.getFullYear(),nowTemp.getMonth(),nowTemp.getDate(),0,0,0,0),checkin=$('#event_start_date').datepicker({appendTo:'.event-start-date'}).on('changeDate',function(ev){if(ev.date.valueOf()>checkout.date.valueOf()){var newDate=new Date(ev.date);newDate.setDate(newDate.getDate()+1);checkout.setValue(newDate);}
checkin.hide();$('#event_close_date')[0].focus();}).data('datepicker');var checkout=$('#event_close_date').datepicker({appendTo:'.event-close-date'}).on('changeDate',function(ev){checkout.hide();}).data('datepicker');this.uploaderID='event_banner';var $container=$("#event_banner_container"),view=this;if(typeof this.banner_uploader==="undefined"){this.banner_uploader=new AE.Views.File_Uploader({el:$container,uploaderID:this.uploaderID,thumbsize:'medium',multipart_params:{_ajax_nonce:$container.find('.et_ajaxnonce').attr('id'),data:{method:'event_banner'},imgType:this.uploaderID,},cbUploaded:function(up,file,res){if(res.success){$('#'+this.container).parents('.desc').find('.error').remove();}else{$('#'+this.container).parents('.desc').append('<div class="error">'+res.msg+'</div>');}},beforeSend:function(){view.blockUi.block($container);},success:function(res){if(res.success==false){AE.pubsub.trigger('ae:notification',{msg:res.msg,notice_type:'error',});}else{view.model.set('featured_image',res.data.attach_id);}
view.blockUi.unblock();}});}},initValidator:function(){$("form#event_form").validate({ignore:"",rules:{post_title:"required",short_tag:"required",event_content:"required",},errorPlacement:function(label,element){if(element.is("textarea")){label.insertAfter(element.next());}else{$(element).closest('div').append(label);}
AE.pubsub.trigger('ae:notification',{msg:ae_globals.msg,notice_type:'error',});}});},onCreateCalender:function(place){this.openModal();setTimeout(function(){if(typeof tinyMCE!=='undefined'){tinymce.EditorManager.execCommand('mceAddEditor',true,"event_content");}},500);},onEditCalender:function(model){this.model=model;this.setupFields();this.openModal();},setupFields:function(){var view=this,form_field=view.$('.form-field'),location=this.model.get('location'),cover_image=view.model.get('large_thumbnail');AE.pubsub.trigger('AE:beforeSetupFields',this.model);setTimeout(function(){if(typeof tinyMCE!=='undefined'){tinymce.EditorManager.execCommand('mceAddEditor',true,"event_content");tinymce.EditorManager.get('event_content').setContent(view.model.get('post_content'));}},500);form_field.find('input[type="text"],input[type="hidden"], textarea,select').each(function(){var $input=$(this);$input.val(view.model.get($input.attr('name')));if($input.get(0).nodeName==="SELECT")$input.trigger('chosen:updated');});form_field.find('input[type="radio"]').each(function(){var $input=$(this),name=$input.attr('name');if($input.val()==view.model.get(name)){$input.attr('checked',true);}});if(cover_image){view.$('#event_banner_thumbnail').html('').append('<img style="width: 300px;" src="'+cover_image+'" />');}},submit:function(event){event.preventDefault();var $form=$(event.currentTarget),temp=new Array(),view=this;if($('form#event_form').valid()){view.$el.find('input,textarea,select').each(function(){view.model.set($(this).attr('name'),$(this).val());});view.$el.find('input[type=checkbox]:checked').each(function(){var name=$(this).attr('name');temp.push($(this).val());view.model.set(name,temp);});view.$el.find('input[type=radio]:checked').each(function(){view.model.set($(this).attr('name'),$(this).val());});view.model.save('','',{beforeSend:function(){view.blockUi.block($form);},success:function(result,status,jqXHR){view.blockUi.unblock();if(status.success){pubsub.trigger('ae:notification',{msg:status.msg,notice_type:'success',});window.location.reload();}else{pubsub.trigger('ae:notification',{notice_type:'error',msg:status.msg});}}});}}});Views.SearchForm=Backbone.View.extend({el:'#header-wrapper',events:{'click .search-btn':'triggerSearchForm'},initialize:function(options){_.bindAll(this,'showMap','errorHandle');var view=this;this.$('.slider-ranger').on('slide',function(ev){var value=ev.value;$('#'+$(this).attr('data-name')).val(value);$('.'+$(this).attr('data-name')).html(value);});this.$('.nearby').on('slideStart',function(){navigator.geolocation.getCurrentPosition(view.showMap,view.errorHandle);});this.$('form').validate();},triggerSearchForm:function(event){$option_search=$('.option-search-form-wrapper');$marsk=$('.marsk-black');$btn_topsearch=$('ul.top-menu-right li.top-search');$marsk.fadeToggle(300);$btn_topsearch.toggleClass('active');$option_search.slideToggle(300,'easeInOutSine',function(event){$('.slider-ranger').slider({tooltip:'always'});});},showMap:function(position){var coords=position.coords;$('#center').val(coords.latitude+','+coords.longitude);AE.pubsub.trigger('de:getCurrentPosition',position.coords);},errorHandle:function(){alert('Ha rechazado la solicitud de Geolocalización. Para utilizar esta función, habilítela.');}});})(jQuery,window.AE,window.AE.Views,window.AE.Models,window.AE.Collections,Backbone);jQuery.fn.serializeObject=function(){var self=this,json={},push_counters={},patterns={"validate":/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,"key":/[a-zA-Z0-9_]+|(?=\[\])/g,"push":/^$/,"fixed":/^\d+$/,"named":/^[a-zA-Z0-9_]+$/};this.build=function(base,key,value){base[key]=value;return base;};this.push_counter=function(key){if(push_counters[key]===undefined){push_counters[key]=0;}
return push_counters[key]++;};jQuery.each(jQuery(this).serializeArray(),function(){if(!patterns.validate.test(this.name)){return;}
var k,keys=this.name.match(patterns.key),merge=this.value,reverse_key=this.name;while((k=keys.pop())!==undefined){reverse_key=reverse_key.replace(new RegExp("\\["+k+"\\]$"),'');if(k.match(patterns.push)){merge=self.build([],self.push_counter(reverse_key),merge);}else if(k.match(patterns.fixed)){merge=self.build([],k,merge);}else if(k.match(patterns.named)){merge=self.build({},k,merge);}}
json=jQuery.extend(true,json,merge);});return json;};
var raty={"hint":["mala","pobre","bueno","bien","maravilloso"]};var raty={"hint":["mala","pobre","bueno","bien","maravilloso"]};
(function(e){var t,n,i,o,r,a,s,l="Close",c="BeforeClose",d="AfterClose",u="BeforeAppend",p="MarkupParse",f="Open",m="Change",g="mfp",h="."+g,v="mfp-ready",C="mfp-removing",y="mfp-prevent-close",w=function(){},b=!!window.jQuery,I=e(window),x=function(e,n){t.ev.on(g+e+h,n)},k=function(t,n,i,o){var r=document.createElement("div");return r.className="mfp-"+t,i&&(r.innerHTML=i),o?n&&n.appendChild(r):(r=e(r),n&&r.appendTo(n)),r},T=function(n,i){t.ev.triggerHandler(g+n,i),t.st.callbacks&&(n=n.charAt(0).toLowerCase()+n.slice(1),t.st.callbacks[n]&&t.st.callbacks[n].apply(t,e.isArray(i)?i:[i]))},E=function(n){return n===s&&t.currTemplate.closeBtn||(t.currTemplate.closeBtn=e(t.st.closeMarkup.replace("%title%",t.st.tClose)),s=n),t.currTemplate.closeBtn},_=function(){e.magnificPopup.instance||(t=new w,t.init(),e.magnificPopup.instance=t)},S=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1};w.prototype={constructor:w,init:function(){var n=navigator.appVersion;t.isIE7=-1!==n.indexOf("MSIE 7."),t.isIE8=-1!==n.indexOf("MSIE 8."),t.isLowIE=t.isIE7||t.isIE8,t.isAndroid=/android/gi.test(n),t.isIOS=/iphone|ipad|ipod/gi.test(n),t.supportsTransition=S(),t.probablyMobile=t.isAndroid||t.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),o=e(document),t.popupsCache={}},open:function(n){i||(i=e(document.body));var r;if(n.isObj===!1){t.items=n.items.toArray(),t.index=0;var s,l=n.items;for(r=0;l.length>r;r++)if(s=l[r],s.parsed&&(s=s.el[0]),s===n.el[0]){t.index=r;break}}else t.items=e.isArray(n.items)?n.items:[n.items],t.index=n.index||0;if(t.isOpen)return t.updateItemHTML(),void 0;t.types=[],a="",t.ev=n.mainEl&&n.mainEl.length?n.mainEl.eq(0):o,n.key?(t.popupsCache[n.key]||(t.popupsCache[n.key]={}),t.currTemplate=t.popupsCache[n.key]):t.currTemplate={},t.st=e.extend(!0,{},e.magnificPopup.defaults,n),t.fixedContentPos="auto"===t.st.fixedContentPos?!t.probablyMobile:t.st.fixedContentPos,t.st.modal&&(t.st.closeOnContentClick=!1,t.st.closeOnBgClick=!1,t.st.showCloseBtn=!1,t.st.enableEscapeKey=!1),t.bgOverlay||(t.bgOverlay=k("bg").on("click"+h,function(){t.close()}),t.wrap=k("wrap").attr("tabindex",-1).on("click"+h,function(e){t._checkIfClose(e.target)&&t.close()}),t.container=k("container",t.wrap)),t.contentContainer=k("content"),t.st.preloader&&(t.preloader=k("preloader",t.container,t.st.tLoading));var c=e.magnificPopup.modules;for(r=0;c.length>r;r++){var d=c[r];d=d.charAt(0).toUpperCase()+d.slice(1),t["init"+d].call(t)}T("BeforeOpen"),t.st.showCloseBtn&&(t.st.closeBtnInside?(x(p,function(e,t,n,i){n.close_replaceWith=E(i.type)}),a+=" mfp-close-btn-in"):t.wrap.append(E())),t.st.alignTop&&(a+=" mfp-align-top"),t.fixedContentPos?t.wrap.css({overflow:t.st.overflowY,overflowX:"hidden",overflowY:t.st.overflowY}):t.wrap.css({top:I.scrollTop(),position:"absolute"}),(t.st.fixedBgPos===!1||"auto"===t.st.fixedBgPos&&!t.fixedContentPos)&&t.bgOverlay.css({height:o.height(),position:"absolute"}),t.st.enableEscapeKey&&o.on("keyup"+h,function(e){27===e.keyCode&&t.close()}),I.on("resize"+h,function(){t.updateSize()}),t.st.closeOnContentClick||(a+=" mfp-auto-cursor"),a&&t.wrap.addClass(a);var u=t.wH=I.height(),m={};if(t.fixedContentPos&&t._hasScrollBar(u)){var g=t._getScrollbarSize();g&&(m.marginRight=g)}t.fixedContentPos&&(t.isIE7?e("body, html").css("overflow","hidden"):m.overflow="hidden");var C=t.st.mainClass;return t.isIE7&&(C+=" mfp-ie7"),C&&t._addClassToMFP(C),t.updateItemHTML(),T("BuildControls"),e("html").css(m),t.bgOverlay.add(t.wrap).prependTo(t.st.prependTo||i),t._lastFocusedEl=document.activeElement,setTimeout(function(){t.content?(t._addClassToMFP(v),t._setFocus()):t.bgOverlay.addClass(v),o.on("focusin"+h,t._onFocusIn)},16),t.isOpen=!0,t.updateSize(u),T(f),n},close:function(){t.isOpen&&(T(c),t.isOpen=!1,t.st.removalDelay&&!t.isLowIE&&t.supportsTransition?(t._addClassToMFP(C),setTimeout(function(){t._close()},t.st.removalDelay)):t._close())},_close:function(){T(l);var n=C+" "+v+" ";if(t.bgOverlay.detach(),t.wrap.detach(),t.container.empty(),t.st.mainClass&&(n+=t.st.mainClass+" "),t._removeClassFromMFP(n),t.fixedContentPos){var i={marginRight:""};t.isIE7?e("body, html").css("overflow",""):i.overflow="",e("html").css(i)}o.off("keyup"+h+" focusin"+h),t.ev.off(h),t.wrap.attr("class","mfp-wrap").removeAttr("style"),t.bgOverlay.attr("class","mfp-bg"),t.container.attr("class","mfp-container"),!t.st.showCloseBtn||t.st.closeBtnInside&&t.currTemplate[t.currItem.type]!==!0||t.currTemplate.closeBtn&&t.currTemplate.closeBtn.detach(),t._lastFocusedEl&&e(t._lastFocusedEl).focus(),t.currItem=null,t.content=null,t.currTemplate=null,t.prevHeight=0,T(d)},updateSize:function(e){if(t.isIOS){var n=document.documentElement.clientWidth/window.innerWidth,i=window.innerHeight*n;t.wrap.css("height",i),t.wH=i}else t.wH=e||I.height();t.fixedContentPos||t.wrap.css("height",t.wH),T("Resize")},updateItemHTML:function(){var n=t.items[t.index];t.contentContainer.detach(),t.content&&t.content.detach(),n.parsed||(n=t.parseEl(t.index));var i=n.type;if(T("BeforeChange",[t.currItem?t.currItem.type:"",i]),t.currItem=n,!t.currTemplate[i]){var o=t.st[i]?t.st[i].markup:!1;T("FirstMarkupParse",o),t.currTemplate[i]=o?e(o):!0}r&&r!==n.type&&t.container.removeClass("mfp-"+r+"-holder");var a=t["get"+i.charAt(0).toUpperCase()+i.slice(1)](n,t.currTemplate[i]);t.appendContent(a,i),n.preloaded=!0,T(m,n),r=n.type,t.container.prepend(t.contentContainer),T("AfterChange")},appendContent:function(e,n){t.content=e,e?t.st.showCloseBtn&&t.st.closeBtnInside&&t.currTemplate[n]===!0?t.content.find(".mfp-close").length||t.content.append(E()):t.content=e:t.content="",T(u),t.container.addClass("mfp-"+n+"-holder"),t.contentContainer.append(t.content)},parseEl:function(n){var i,o=t.items[n];if(o.tagName?o={el:e(o)}:(i=o.type,o={data:o,src:o.src}),o.el){for(var r=t.types,a=0;r.length>a;a++)if(o.el.hasClass("mfp-"+r[a])){i=r[a];break}o.src=o.el.attr("data-mfp-src"),o.src||(o.src=o.el.attr("href"))}return o.type=i||t.st.type||"inline",o.index=n,o.parsed=!0,t.items[n]=o,T("ElementParse",o),t.items[n]},addGroup:function(e,n){var i=function(i){i.mfpEl=this,t._openClick(i,e,n)};n||(n={});var o="click.magnificPopup";n.mainEl=e,n.items?(n.isObj=!0,e.off(o).on(o,i)):(n.isObj=!1,n.delegate?e.off(o).on(o,n.delegate,i):(n.items=e,e.off(o).on(o,i)))},_openClick:function(n,i,o){var r=void 0!==o.midClick?o.midClick:e.magnificPopup.defaults.midClick;if(r||2!==n.which&&!n.ctrlKey&&!n.metaKey){var a=void 0!==o.disableOn?o.disableOn:e.magnificPopup.defaults.disableOn;if(a)if(e.isFunction(a)){if(!a.call(t))return!0}else if(a>I.width())return!0;n.type&&(n.preventDefault(),t.isOpen&&n.stopPropagation()),o.el=e(n.mfpEl),o.delegate&&(o.items=i.find(o.delegate)),t.open(o)}},updateStatus:function(e,i){if(t.preloader){n!==e&&t.container.removeClass("mfp-s-"+n),i||"loading"!==e||(i=t.st.tLoading);var o={status:e,text:i};T("UpdateStatus",o),e=o.status,i=o.text,t.preloader.html(i),t.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),t.container.addClass("mfp-s-"+e),n=e}},_checkIfClose:function(n){if(!e(n).hasClass(y)){var i=t.st.closeOnContentClick,o=t.st.closeOnBgClick;if(i&&o)return!0;if(!t.content||e(n).hasClass("mfp-close")||t.preloader&&n===t.preloader[0])return!0;if(n===t.content[0]||e.contains(t.content[0],n)){if(i)return!0}else if(o&&e.contains(document,n))return!0;return!1}},_addClassToMFP:function(e){t.bgOverlay.addClass(e),t.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),t.wrap.removeClass(e)},_hasScrollBar:function(e){return(t.isIE7?o.height():document.body.scrollHeight)>(e||I.height())},_setFocus:function(){(t.st.focus?t.content.find(t.st.focus).eq(0):t.wrap).focus()},_onFocusIn:function(n){return n.target===t.wrap[0]||e.contains(t.wrap[0],n.target)?void 0:(t._setFocus(),!1)},_parseMarkup:function(t,n,i){var o;i.data&&(n=e.extend(i.data,n)),T(p,[t,n,i]),e.each(n,function(e,n){if(void 0===n||n===!1)return!0;if(o=e.split("_"),o.length>1){var i=t.find(h+"-"+o[0]);if(i.length>0){var r=o[1];"replaceWith"===r?i[0]!==n[0]&&i.replaceWith(n):"img"===r?i.is("img")?i.attr("src",n):i.replaceWith('<img src="'+n+'" class="'+i.attr("class")+'" />'):i.attr(o[1],n)}}else t.find(h+"-"+e).html(n)})},_getScrollbarSize:function(){if(void 0===t.scrollbarSize){var e=document.createElement("div");e.id="mfp-sbm",e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),t.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return t.scrollbarSize}},e.magnificPopup={instance:null,proto:w.prototype,modules:[],open:function(t,n){return _(),t=t?e.extend(!0,{},t):{},t.isObj=!0,t.index=n||0,this.instance.open(t)},close:function(){return e.magnificPopup.instance&&e.magnificPopup.instance.close()},registerModule:function(t,n){n.options&&(e.magnificPopup.defaults[t]=n.options),e.extend(this.proto,n.proto),this.modules.push(t)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},e.fn.magnificPopup=function(n){_();var i=e(this);if("string"==typeof n)if("open"===n){var o,r=b?i.data("magnificPopup"):i[0].magnificPopup,a=parseInt(arguments[1],10)||0;r.items?o=r.items[a]:(o=i,r.delegate&&(o=o.find(r.delegate)),o=o.eq(a)),t._openClick({mfpEl:o},i,r)}else t.isOpen&&t[n].apply(t,Array.prototype.slice.call(arguments,1));else n=e.extend(!0,{},n),b?i.data("magnificPopup",n):i[0].magnificPopup=n,t.addGroup(i,n);return i};var P,O,z,M="inline",B=function(){z&&(O.after(z.addClass(P)).detach(),z=null)};e.magnificPopup.registerModule(M,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){t.types.push(M),x(l+"."+M,function(){B()})},getInline:function(n,i){if(B(),n.src){var o=t.st.inline,r=e(n.src);if(r.length){var a=r[0].parentNode;a&&a.tagName&&(O||(P=o.hiddenClass,O=k(P),P="mfp-"+P),z=r.after(O).detach().removeClass(P)),t.updateStatus("ready")}else t.updateStatus("error",o.tNotFound),r=e("<div>");return n.inlineElement=r,r}return t.updateStatus("ready"),t._parseMarkup(i,{},n),i}}});var F,H="ajax",L=function(){F&&i.removeClass(F)},A=function(){L(),t.req&&t.req.abort()};e.magnificPopup.registerModule(H,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){t.types.push(H),F=t.st.ajax.cursor,x(l+"."+H,A),x("BeforeChange."+H,A)},getAjax:function(n){F&&i.addClass(F),t.updateStatus("loading");var o=e.extend({url:n.src,success:function(i,o,r){var a={data:i,xhr:r};T("ParseAjax",a),t.appendContent(e(a.data),H),n.finished=!0,L(),t._setFocus(),setTimeout(function(){t.wrap.addClass(v)},16),t.updateStatus("ready"),T("AjaxContentAdded")},error:function(){L(),n.finished=n.loadError=!0,t.updateStatus("error",t.st.ajax.tError.replace("%url%",n.src))}},t.st.ajax.settings);return t.req=e.ajax(o),""}}});var j,N=function(n){if(n.data&&void 0!==n.data.title)return n.data.title;var i=t.st.image.titleSrc;if(i){if(e.isFunction(i))return i.call(t,n);if(n.el)return n.el.attr(i)||""}return""};e.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=t.st.image,n=".image";t.types.push("image"),x(f+n,function(){"image"===t.currItem.type&&e.cursor&&i.addClass(e.cursor)}),x(l+n,function(){e.cursor&&i.removeClass(e.cursor),I.off("resize"+h)}),x("Resize"+n,t.resizeImage),t.isLowIE&&x("AfterChange",t.resizeImage)},resizeImage:function(){var e=t.currItem;if(e&&e.img&&t.st.image.verticalFit){var n=0;t.isLowIE&&(n=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",t.wH-n)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,j&&clearInterval(j),e.isCheckingImgSize=!1,T("ImageHasSize",e),e.imgHidden&&(t.content&&t.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(e){var n=0,i=e.img[0],o=function(r){j&&clearInterval(j),j=setInterval(function(){return i.naturalWidth>0?(t._onImageHasSize(e),void 0):(n>200&&clearInterval(j),n++,3===n?o(10):40===n?o(50):100===n&&o(500),void 0)},r)};o(1)},getImage:function(n,i){var o=0,r=function(){n&&(n.img[0].complete?(n.img.off(".mfploader"),n===t.currItem&&(t._onImageHasSize(n),t.updateStatus("ready")),n.hasSize=!0,n.loaded=!0,T("ImageLoadComplete")):(o++,200>o?setTimeout(r,100):a()))},a=function(){n&&(n.img.off(".mfploader"),n===t.currItem&&(t._onImageHasSize(n),t.updateStatus("error",s.tError.replace("%url%",n.src))),n.hasSize=!0,n.loaded=!0,n.loadError=!0)},s=t.st.image,l=i.find(".mfp-img");if(l.length){var c=document.createElement("img");c.className="mfp-img",n.img=e(c).on("load.mfploader",r).on("error.mfploader",a),c.src=n.src,l.is("img")&&(n.img=n.img.clone()),c=n.img[0],c.naturalWidth>0?n.hasSize=!0:c.width||(n.hasSize=!1)}return t._parseMarkup(i,{title:N(n),img_replaceWith:n.img},n),t.resizeImage(),n.hasSize?(j&&clearInterval(j),n.loadError?(i.addClass("mfp-loading"),t.updateStatus("error",s.tError.replace("%url%",n.src))):(i.removeClass("mfp-loading"),t.updateStatus("ready")),i):(t.updateStatus("loading"),n.loading=!0,n.hasSize||(n.imgHidden=!0,i.addClass("mfp-loading"),t.findImageSize(n)),i)}}});var W,R=function(){return void 0===W&&(W=void 0!==document.createElement("p").style.MozTransform),W};e.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,n=t.st.zoom,i=".zoom";if(n.enabled&&t.supportsTransition){var o,r,a=n.duration,s=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),i="all "+n.duration/1e3+"s "+n.easing,o={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},r="transition";return o["-webkit-"+r]=o["-moz-"+r]=o["-o-"+r]=o[r]=i,t.css(o),t},d=function(){t.content.css("visibility","visible")};x("BuildControls"+i,function(){if(t._allowZoom()){if(clearTimeout(o),t.content.css("visibility","hidden"),e=t._getItemToZoom(),!e)return d(),void 0;r=s(e),r.css(t._getOffset()),t.wrap.append(r),o=setTimeout(function(){r.css(t._getOffset(!0)),o=setTimeout(function(){d(),setTimeout(function(){r.remove(),e=r=null,T("ZoomAnimationEnded")},16)},a)},16)}}),x(c+i,function(){if(t._allowZoom()){if(clearTimeout(o),t.st.removalDelay=a,!e){if(e=t._getItemToZoom(),!e)return;r=s(e)}r.css(t._getOffset(!0)),t.wrap.append(r),t.content.css("visibility","hidden"),setTimeout(function(){r.css(t._getOffset())},16)}}),x(l+i,function(){t._allowZoom()&&(d(),r&&r.remove(),e=null)})}},_allowZoom:function(){return"image"===t.currItem.type},_getItemToZoom:function(){return t.currItem.hasSize?t.currItem.img:!1},_getOffset:function(n){var i;i=n?t.currItem.img:t.st.zoom.opener(t.currItem.el||t.currItem);var o=i.offset(),r=parseInt(i.css("padding-top"),10),a=parseInt(i.css("padding-bottom"),10);o.top-=e(window).scrollTop()-r;var s={width:i.width(),height:(b?i.innerHeight():i[0].offsetHeight)-a-r};return R()?s["-moz-transform"]=s.transform="translate("+o.left+"px,"+o.top+"px)":(s.left=o.left,s.top=o.top),s}}});var Z="iframe",q="//about:blank",D=function(e){if(t.currTemplate[Z]){var n=t.currTemplate[Z].find("iframe");n.length&&(e||(n[0].src=q),t.isIE8&&n.css("display",e?"block":"none"))}};e.magnificPopup.registerModule(Z,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){t.types.push(Z),x("BeforeChange",function(e,t,n){t!==n&&(t===Z?D():n===Z&&D(!0))}),x(l+"."+Z,function(){D()})},getIframe:function(n,i){var o=n.src,r=t.st.iframe;e.each(r.patterns,function(){return o.indexOf(this.index)>-1?(this.id&&(o="string"==typeof this.id?o.substr(o.lastIndexOf(this.id)+this.id.length,o.length):this.id.call(this,o)),o=this.src.replace("%id%",o),!1):void 0});var a={};return r.srcAction&&(a[r.srcAction]=o),t._parseMarkup(i,a,n),t.updateStatus("ready"),i}}});var K=function(e){var n=t.items.length;return e>n-1?e-n:0>e?n+e:e},Y=function(e,t,n){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,n)};e.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var n=t.st.gallery,i=".mfp-gallery",r=Boolean(e.fn.mfpFastClick);return t.direction=!0,n&&n.enabled?(a+=" mfp-gallery",x(f+i,function(){n.navigateByImgClick&&t.wrap.on("click"+i,".mfp-img",function(){return t.items.length>1?(t.next(),!1):void 0}),o.on("keydown"+i,function(e){37===e.keyCode?t.prev():39===e.keyCode&&t.next()})}),x("UpdateStatus"+i,function(e,n){n.text&&(n.text=Y(n.text,t.currItem.index,t.items.length))}),x(p+i,function(e,i,o,r){var a=t.items.length;o.counter=a>1?Y(n.tCounter,r.index,a):""}),x("BuildControls"+i,function(){if(t.items.length>1&&n.arrows&&!t.arrowLeft){var i=n.arrowMarkup,o=t.arrowLeft=e(i.replace(/%title%/gi,n.tPrev).replace(/%dir%/gi,"left")).addClass(y),a=t.arrowRight=e(i.replace(/%title%/gi,n.tNext).replace(/%dir%/gi,"right")).addClass(y),s=r?"mfpFastClick":"click";o[s](function(){t.prev()}),a[s](function(){t.next()}),t.isIE7&&(k("b",o[0],!1,!0),k("a",o[0],!1,!0),k("b",a[0],!1,!0),k("a",a[0],!1,!0)),t.container.append(o.add(a))}}),x(m+i,function(){t._preloadTimeout&&clearTimeout(t._preloadTimeout),t._preloadTimeout=setTimeout(function(){t.preloadNearbyImages(),t._preloadTimeout=null},16)}),x(l+i,function(){o.off(i),t.wrap.off("click"+i),t.arrowLeft&&r&&t.arrowLeft.add(t.arrowRight).destroyMfpFastClick(),t.arrowRight=t.arrowLeft=null}),void 0):!1},next:function(){t.direction=!0,t.index=K(t.index+1),t.updateItemHTML()},prev:function(){t.direction=!1,t.index=K(t.index-1),t.updateItemHTML()},goTo:function(e){t.direction=e>=t.index,t.index=e,t.updateItemHTML()},preloadNearbyImages:function(){var e,n=t.st.gallery.preload,i=Math.min(n[0],t.items.length),o=Math.min(n[1],t.items.length);for(e=1;(t.direction?o:i)>=e;e++)t._preloadItem(t.index+e);for(e=1;(t.direction?i:o)>=e;e++)t._preloadItem(t.index-e)},_preloadItem:function(n){if(n=K(n),!t.items[n].preloaded){var i=t.items[n];i.parsed||(i=t.parseEl(n)),T("LazyLoad",i),"image"===i.type&&(i.img=e('<img class="mfp-img" />').on("load.mfploader",function(){i.hasSize=!0}).on("error.mfploader",function(){i.hasSize=!0,i.loadError=!0,T("LazyLoadError",i)}).attr("src",i.src)),i.preloaded=!0}}}});var U="retina";e.magnificPopup.registerModule(U,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,function(e){return"@2x"+e})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var e=t.st.retina,n=e.ratio;n=isNaN(n)?n():n,n>1&&(x("ImageHasSize."+U,function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/n,width:"100%"})}),x("ElementParse."+U,function(t,i){i.src=e.replaceSrc(i,n)}))}}}}),function(){var t=1e3,n="ontouchstart"in window,i=function(){I.off("touchmove"+r+" touchend"+r)},o="mfpFastClick",r="."+o;e.fn.mfpFastClick=function(o){return e(this).each(function(){var a,s=e(this);if(n){var l,c,d,u,p,f;s.on("touchstart"+r,function(e){u=!1,f=1,p=e.originalEvent?e.originalEvent.touches[0]:e.touches[0],c=p.clientX,d=p.clientY,I.on("touchmove"+r,function(e){p=e.originalEvent?e.originalEvent.touches:e.touches,f=p.length,p=p[0],(Math.abs(p.clientX-c)>10||Math.abs(p.clientY-d)>10)&&(u=!0,i())}).on("touchend"+r,function(e){i(),u||f>1||(a=!0,e.preventDefault(),clearTimeout(l),l=setTimeout(function(){a=!1},t),o())})})}s.on("click"+r,function(){a||o()})})},e.fn.destroyMfpFastClick=function(){e(this).off("touchstart"+r+" click"+r),n&&I.off("touchmove"+r+" touchend"+r)}}(),_()})(window.jQuery||window.Zepto);(function(e){var t={},n,r,i=document,s=window,o=i.documentElement,u=e.expando;e.event.special.inview={add:function(n){t[n.guid+"-"+this[u]]={data:n,$element:e(this)}},remove:function(e){try{delete t[e.guid+"-"+this[u]]}catch(n){}}};e(s).bind("scroll resize",function(){n=r=null});!o.addEventListener&&o.attachEvent&&o.attachEvent("onfocusin",function(){r=null});setInterval(function(){var u=e(),l,c=0;e.each(t,function(e,t){var n=t.data.selector,r=t.$element;u=u.add(n?r.find(n):r)});if(l=u.length){var v;if(!(v=n)){var m={height:s.innerHeight,width:s.innerWidth};if(!m.height&&((v=i.compatMode)||!e.support.boxModel))v="CSS1Compat"===v?o:i.body,m={height:v.clientHeight,width:v.clientWidth};v=m}n=v;for(r=r||{top:s.pageYOffset||o.scrollTop||i.body.scrollTop,left:s.pageXOffset||o.scrollLeft||i.body.scrollLeft};c<l;c++)if(e.contains(o,u[c])){v=e(u[c]);var g=v.height(),y=v.width(),b=v.offset(),m=v.data("inview");if(!r||!n)break;b.top+g>r.top&&b.top<r.top+n.height&&b.left+y>r.left&&b.left<r.left+n.width?(y=r.left>b.left?"right":r.left+n.width<b.left+y?"left":"both",g=r.top>b.top?"bottom":r.top+n.height<b.top+g?"top":"both",b=y+"-"+g,(!m||m!==b)&&v.data("inview",b).trigger("inview",[!0,y,g])):m&&v.data("inview",!1).trigger("inview",[!1])}}},250)})(jQuery);!function(){var e,t,n,r,i,s={}.hasOwnProperty,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};r=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName.toUpperCase()?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,n,r,i,s,o;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:this.escapeExpression(e.label),children:0,disabled:e.disabled}),s=e.childNodes,o=[],r=0,i=s.length;i>r;r++)n=s[r],o.push(this.add_option(n,t,e.disabled));return o},e.prototype.add_option=function(e,t,n){return"OPTION"===e.nodeName.toUpperCase()?(""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:n===!0?n:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},e.prototype.escapeExpression=function(e){var t,n;return null==e||e===!1?"":/[\&\<\>\"\'\`]/.test(e)?(t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/&(?!\w+;)|[\<\>\"\'\`]/g,e.replace(n,function(e){return t[e]||"&"})):e},e}(),r.select_to_array=function(e){var t,n,i,s,o;for(n=new r,o=e.childNodes,i=0,s=o.length;s>i;i++)t=o[i],n.add_node(t);return n.parsed},t=function(){function e(t,n){this.form_field=t,this.options=null!=n?n:{},e.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},e.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(){var e=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return e.blur_test()},100))},e.prototype.results_option_build=function(e){var t,n,r,i,s;for(t="",s=this.results_data,r=0,i=s.length;i>r;r++)n=s[r],t+=n.group?this.result_add_group(n):this.result_add_option(n),(null!=e?e.first:void 0)&&(n.selected&&this.is_multiple?this.choice_build(n):n.selected&&!this.is_multiple&&this.single_set_selected_text(n.text));return t},e.prototype.result_add_option=function(e){var t,n;return e.search_match?this.include_option_in_results(e)?(t=[],e.disabled||e.selected&&this.is_multiple||t.push("active-result"),!e.disabled||e.selected&&this.is_multiple||t.push("disabled-result"),e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.classes),n=document.createElement("li"),n.className=t.join(" "),n.style.cssText=e.style,n.setAttribute("data-option-array-index",e.array_index),n.innerHTML=e.search_text,this.outerHTML(n)):"":""},e.prototype.result_add_group=function(e){var t;return e.search_match||e.group_match?e.active_options>0?(t=document.createElement("li"),t.className="group-result",t.innerHTML=e.search_text,this.outerHTML(t)):"":""},e.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},e.prototype.reset_single_select_options=function(){var e,t,n,r,i;for(r=this.results_data,i=[],t=0,n=r.length;n>t;t++)e=r[t],e.selected?i.push(e.selected=!1):i.push(void 0);return i},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.winnow_results=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h;for(this.no_results_clear(),i=0,o=this.get_search_text(),e=o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),r=this.search_contains?"":"^",n=new RegExp(r+e,"i"),f=new RegExp(e,"i"),h=this.results_data,l=0,c=h.length;c>l;l++)t=h[l],t.search_match=!1,s=null,this.include_option_in_results(t)&&(t.group&&(t.group_match=!1,t.active_options=0),null!=t.group_array_index&&this.results_data[t.group_array_index]&&(s=this.results_data[t.group_array_index],0===s.active_options&&s.search_match&&(i+=1),s.active_options+=1),(!t.group||this.group_search)&&(t.search_text=t.group?t.label:t.html,t.search_match=this.search_string_match(t.search_text,n),t.search_match&&!t.group&&(i+=1),t.search_match?(o.length&&(u=t.search_text.search(f),a=t.search_text.substr(0,u+o.length)+"</em>"+t.search_text.substr(u+o.length),t.search_text=a.substr(0,u)+"<em>"+a.substr(u)),null!=s&&(s.group_match=!0)):null!=t.group_array_index&&this.results_data[t.group_array_index].search_match&&(t.search_match=!0)));return this.result_clear_highlight(),1>i&&o.length?(this.update_results_content(""),this.no_results(o)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},e.prototype.search_string_match=function(e,t){var n,r,i,s;if(t.test(e))return!0;if(this.enable_split_word_search&&(e.indexOf(" ")>=0||0===e.indexOf("["))&&(r=e.replace(/\[|\]/g,"").split(" "),r.length))for(i=0,s=r.length;s>i;i++)if(n=r[i],t.test(n))return!0},e.prototype.choices_count=function(){var e,t,n,r;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,r=this.form_field.options,t=0,n=r.length;n>t;t++)e=r[t],e.selected&&(this.selected_option_count+=1);return this.selected_option_count},e.prototype.choices_click=function(e){return e.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},e.prototype.keyup_checker=function(e){var t,n;switch(t=null!=(n=e.which)?n:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.clipboard_event_checker=function(){var e=this;return setTimeout(function(){return e.results_search()},50)},e.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},e.prototype.include_option_in_results=function(e){return this.is_multiple&&!this.display_selected_options&&e.selected?!1:!this.display_disabled_options&&e.disabled?!1:e.empty?!1:!0},e.prototype.search_results_touchstart=function(e){return this.touch_started=!0,this.search_results_mouseover(e)},e.prototype.search_results_touchmove=function(e){return this.touch_started=!1,this.search_results_mouseout(e)},e.prototype.search_results_touchend=function(e){return this.touch_started?this.search_results_mouseup(e):void 0},e.prototype.outerHTML=function(e){var t;return e.outerHTML?e.outerHTML:(t=document.createElement("div"),t.appendChild(e),t.innerHTML)},e.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},e.default_multiple_text="Select Some Options",e.default_single_text="Selecciona una opción",e.default_no_result_text="No se han encontrado resultados",e}(),e=jQuery,e.fn.extend({chosen:function(r){return t.browser_is_supported()?this.each(function(){var t,i;t=e(this),i=t.data("chosen"),"destroy"===r&&i?i.destroy():i||t.data("chosen",new n(this,r))}):this}}),n=function(t){function n(){return i=n.__super__.constructor.apply(this,arguments)}return o(n,t),n.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},n.prototype.set_up_html=function(){var t,n;return t=["chosen-container"],t.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),n={"class":t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(n.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",n),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},n.prototype.register_observers=function(){var e=this;return this.container.bind("mousedown.chosen",function(t){e.container_mousedown(t)}),this.container.bind("mouseup.chosen",function(t){e.container_mouseup(t)}),this.container.bind("mouseenter.chosen",function(t){e.mouse_enter(t)}),this.container.bind("mouseleave.chosen",function(t){e.mouse_leave(t)}),this.search_results.bind("mouseup.chosen",function(t){e.search_results_mouseup(t)}),this.search_results.bind("mouseover.chosen",function(t){e.search_results_mouseover(t)}),this.search_results.bind("mouseout.chosen",function(t){e.search_results_mouseout(t)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(t){e.search_results_mousewheel(t)}),this.search_results.bind("touchstart.chosen",function(t){e.search_results_touchstart(t)}),this.search_results.bind("touchmove.chosen",function(t){e.search_results_touchmove(t)}),this.search_results.bind("touchend.chosen",function(t){e.search_results_touchend(t)}),this.form_field_jq.bind("chosen:updated.chosen",function(t){e.results_update_field(t)}),this.form_field_jq.bind("chosen:activate.chosen",function(t){e.activate_field(t)}),this.form_field_jq.bind("chosen:open.chosen",function(t){e.container_mousedown(t)}),this.form_field_jq.bind("chosen:close.chosen",function(t){e.input_blur(t)}),this.search_field.bind("blur.chosen",function(t){e.input_blur(t)}),this.search_field.bind("keyup.chosen",function(t){e.keyup_checker(t)}),this.search_field.bind("keydown.chosen",function(t){e.keydown_checker(t)}),this.search_field.bind("focus.chosen",function(t){e.input_focus(t)}),this.search_field.bind("cut.chosen",function(t){e.clipboard_event_checker(t)}),this.search_field.bind("paste.chosen",function(t){e.clipboard_event_checker(t)}),this.is_multiple?this.search_choices.bind("click.chosen",function(t){e.choices_click(t)}):this.container.bind("click.chosen",function(e){e.preventDefault()})},n.prototype.destroy=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},n.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},n.prototype.container_mousedown=function(t){return this.is_disabled||(t&&"mousedown"===t.type&&!this.results_showing&&t.preventDefault(),null!=t&&e(t.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chosen-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},n.prototype.container_mouseup=function(e){return"ABBR"!==e.target.nodeName||this.is_disabled?void 0:this.results_reset(e)},n.prototype.search_results_mousewheel=function(e){var t;return e.originalEvent&&(t=-e.originalEvent.wheelDelta||e.originalEvent.detail),null!=t?(e.preventDefault(),"DOMMouseScroll"===e.type&&(t=40*t),this.search_results.scrollTop(t+this.search_results.scrollTop())):void 0},n.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},n.prototype.close_field=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},n.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},n.prototype.test_active_click=function(t){var n;return n=e(t.target).closest(".chosen-container"),n.length&&this.container[0]===n[0]?this.active_field=!0:this.close_field()},n.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=r.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},n.prototype.result_do_highlight=function(e){var t,n,r,i,s;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),r=parseInt(this.search_results.css("maxHeight"),10),s=this.search_results.scrollTop(),i=r+s,n=this.result_highlight.position().top+this.search_results.scrollTop(),t=n+this.result_highlight.outerHeight(),t>=i)return this.search_results.scrollTop(t-r>0?t-r:0);if(s>n)return this.search_results.scrollTop(n)}},n.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},n.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},n.prototype.update_results_content=function(e){return this.search_results.html(e)},n.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},n.prototype.set_tab_index=function(){var e;return this.form_field.tabIndex?(e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e):void 0},n.prototype.set_label_behavior=function(){var t=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()}):void 0},n.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},n.prototype.search_results_mouseup=function(t){var n;return n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),n.length?(this.result_highlight=n,this.result_select(t),this.search_field.focus()):void 0},n.prototype.search_results_mouseover=function(t){var n;return n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),n?this.result_do_highlight(n):void 0},n.prototype.search_results_mouseout=function(t){return e(t.target).hasClass("active-result")?this.result_clear_highlight():void 0},n.prototype.choice_build=function(t){var n,r,i=this;return n=e("<li />",{"class":"search-choice "+t.classes}).html("<span>"+t.html+"</span>"),t.disabled?n.addClass("search-choice-disabled"):(r=e("<a />",{"class":"search-choice-close","data-option-array-index":t.array_index}),r.bind("click.chosen",function(e){return i.choice_destroy_link_click(e)}),n.append(r)),this.search_container.before(n)},n.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),t.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(e(t.target))},n.prototype.choice_destroy=function(e){return this.result_deselect(e[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()):void 0},n.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},n.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},n.prototype.result_select=function(e){var t,n;return this.result_highlight?(t=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?t.removeClass("active-result"):this.reset_single_select_options(),n=this.results_data[t[0].getAttribute("data-option-array-index")],n.selected=!0,this.form_field.options[n.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(n):this.single_set_selected_text(n.text),(e.metaKey||e.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[n.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},n.prototype.single_set_selected_text=function(e){return null==e&&(e=this.default_text),e===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(e)},n.prototype.result_deselect=function(e){var t;return t=this.results_data[e],this.form_field.options[t.options_index].disabled?!1:(t.selected=!1,this.form_field.options[t.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[t.options_index].value}),this.search_field_scale(),!0)},n.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},n.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html()},n.prototype.winnow_results_set_highlight=function(){var e,t;return t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first(),null!=e?this.result_do_highlight(e):void 0},n.prototype.no_results=function(t){var n;return n=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),n.find("span").first().html(t),this.search_results.append(n),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},n.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},n.prototype.keydown_arrow=function(){var e;return this.results_showing&&this.result_highlight?(e=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(e):void 0:this.results_show()},n.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},n.prototype.keydown_backstroke=function(){var e;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(e=this.search_container.siblings("li.search-choice").last(),e.length&&!e.hasClass("search-choice-disabled")?(this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},n.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},n.prototype.keydown_checker=function(e){var t,n;switch(t=null!=(n=e.which)?n:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:e.preventDefault(),this.keydown_arrow()}},n.prototype.search_field_scale=function(){var t,n,r,i,s,o,u,f,l;if(this.is_multiple){for(r=0,u=0,s="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],f=0,l=o.length;l>f;f++)i=o[f],s+=i+":"+this.search_field.css(i)+";";return t=e("<div />",{style:s}),t.text(this.search_field.val()),e("body").append(t),u=t.width()+25,t.remove(),n=this.container.outerWidth(),u>n-10&&(u=n-10),this.search_field.css({width:u+"px"})}},n}(t)}.call(this);(function(e){"use strict";var t={init:function(n){return this.each(function(){this.self=e(this);t.destroy.call(this.self);this.opt=e.extend(true,{},e.fn.raty.defaults,n);t._adjustCallback.call(this);t._adjustNumber.call(this);if(this.opt.starType!=="img"){t._adjustStarType.call(this)}t._adjustPath.call(this);t._createStars.call(this);if(this.opt.cancel){t._createCancel.call(this)}if(this.opt.precision){t._adjustPrecision.call(this)}t._createScore.call(this);t._apply.call(this,this.opt.score);t._target.call(this,this.opt.score);if(this.opt.readOnly){t._lock.call(this)}else{this.style.cursor="pointer";t._binds.call(this)}this.self.data("options",this.opt)})},_adjustCallback:function(){var e=["number","readOnly","score","scoreName","target"];for(var t=0;t<e.length;t++){if(typeof this.opt[e[t]]==="function"){this.opt[e[t]]=this.opt[e[t]].call(this)}}},_adjustNumber:function(){this.opt.number=t._between(this.opt.number,1,this.opt.numberMax)},_adjustPath:function(){this.opt.path=this.opt.path||"";if(this.opt.path&&this.opt.path.charAt(this.opt.path.length-1)!=="/"){this.opt.path+="/"}},_adjustPrecision:function(){this.opt.half=true;this.opt.targetType="score"},_adjustStarType:function(){this.opt.path="";var e=["cancelOff","cancelOn","starHalf","starOff","starOn"];for(var t=0;t<e.length;t++){this.opt[e[t]]=this.opt[e[t]].replace(".","-")}},_apply:function(e){t._fill.call(this,e);if(e){if(e>0){this.score.val(t._between(e,0,this.opt.number))}t._roundStars.call(this,e)}},_between:function(e,t,n){return Math.min(Math.max(parseFloat(e),t),n)},_binds:function(){if(this.cancel){t._bindOverCancel.call(this);t._bindClickCancel.call(this);t._bindOutCancel.call(this)}t._bindOver.call(this);t._bindClick.call(this);t._bindOut.call(this)},_bindClick:function(){var t=this;t.stars.on("click.raty",function(n){var r=e(this);t.score.val(t.opt.half||t.opt.precision?t.self.data("score"):this.alt||r.data("alt"));if(t.opt.click){t.opt.click.call(t,+t.score.val(),n)}})},_bindClickCancel:function(){var e=this;e.cancel.on("click.raty",function(t){e.score.removeAttr("value");if(e.opt.click){e.opt.click.call(e,null,t)}})},_bindOut:function(){var e=this;e.self.on("mouseleave.raty",function(n){var r=+e.score.val()||undefined;t._apply.call(e,r);t._target.call(e,r,n);if(e.opt.mouseout){e.opt.mouseout.call(e,r,n)}})},_bindOutCancel:function(){var e=this;e.cancel.on("mouseleave.raty",function(n){var r=e.opt.cancelOff;if(e.opt.starType!=="img"){r=e.opt.cancelClass+" "+r}t._setIcon.call(e,this,r);if(e.opt.mouseout){var i=+e.score.val()||undefined;e.opt.mouseout.call(e,i,n)}})},_bindOver:function(){var e=this,n=e.opt.half?"mousemove.raty":"mouseover.raty";e.stars.on(n,function(n){var r=t._getScoreByPosition.call(e,n,this);t._fill.call(e,r);if(e.opt.half){t._roundStars.call(e,r);e.self.data("score",r)}t._target.call(e,r,n);if(e.opt.mouseover){e.opt.mouseover.call(e,r,n)}})},_bindOverCancel:function(){var e=this;e.cancel.on("mouseover.raty",function(n){var r=e.opt.path+e.opt.starOff,i=e.opt.cancelOn;if(e.opt.starType==="img"){e.stars.attr("src",r)}else{i=e.opt.cancelClass+" "+i;e.stars.attr("class",r)}t._setIcon.call(e,this,i);t._target.call(e,null,n);if(e.opt.mouseover){e.opt.mouseover.call(e,null)}})},_buildScoreField:function(){return e("<input />",{name:this.opt.scoreName,type:"hidden"}).appendTo(this)},_createCancel:function(){var t=this.opt.path+this.opt.cancelOff,n=e("<"+this.opt.starType+" />",{title:this.opt.cancelHint,"class":this.opt.cancelClass});if(this.opt.starType==="img"){n.attr({src:t,alt:"x"})}else{n.attr("data-alt","x").addClass(t)}if(this.opt.cancelPlace==="left"){this.self.prepend("&#160;").prepend(n)}else{this.self.append("&#160;").append(n)}this.cancel=n},_createScore:function(){var n=e(this.opt.targetScore);this.score=n.length?n:t._buildScoreField.call(this)},_createStars:function(){for(var n=1;n<=this.opt.number;n++){var r=t._nameForIndex.call(this,n),i={alt:n,src:this.opt.path+this.opt[r]};if(this.opt.starType!=="img"){i={"data-alt":n,"class":i.src}}i.title=t._getHint.call(this,n);e("<"+this.opt.starType+" />",i).appendTo(this);if(this.opt.space){this.self.append(n<this.opt.number?"&#160;":"")}}this.stars=this.self.children(this.opt.starType)},_error:function(t){e(this).text(t);e.error(t)},_fill:function(e){var n=0;for(var r=1;r<=this.stars.length;r++){var i,s=this.stars[r-1],o=t._turnOn.call(this,r,e);if(this.opt.iconRange&&this.opt.iconRange.length>n){var u=this.opt.iconRange[n];i=t._getRangeIcon.call(this,u,o);if(r<=u.range){t._setIcon.call(this,s,i)}if(r===u.range){n++}}else{i=this.opt[o?"starOn":"starOff"];t._setIcon.call(this,s,i)}}},_getRangeIcon:function(e,t){return t?e.on||this.opt.starOn:e.off||this.opt.starOff},_getScoreByPosition:function(n,r){var i=parseInt(r.alt||r.getAttribute("data-alt"),10);if(this.opt.half){var s=t._getSize.call(this),o=parseFloat((n.pageX-e(r).offset().left)/s);if(this.opt.precision){i=i-1+o}else{i=i-1+(o>.5?1:.5)}}return i},_getSize:function(){var e;if(this.opt.starType==="img"){e=this.stars[0].width}else{e=parseFloat(this.stars.eq(0).css("font-size"))}if(!e){t._error.call(this,"Could not be possible get the icon size!")}return e},_turnOn:function(e,t){return this.opt.single?e===t:e<=t},_getHint:function(e){var t=this.opt.hints[e-1];return t===""?"":t||e},_lock:function(){var e=parseInt(this.score.val(),10),n=e?t._getHint.call(this,e):this.opt.noRatedMsg;this.style.cursor="";this.title=n;this.score.prop("readonly",true);this.stars.prop("title",n);if(this.cancel){this.cancel.hide()}this.self.data("readonly",true)},_nameForIndex:function(e){return this.opt.score&&this.opt.score>=e?"starOn":"starOff"},_roundStars:function(e){var n=(e%1).toFixed(2);if(n>this.opt.round.down){var r="starOn";if(this.opt.halfShow&&n<this.opt.round.up){r="starHalf"}else if(n<this.opt.round.full){r="starOff"}var i=this.opt[r],s=this.stars[Math.ceil(e)-1];t._setIcon.call(this,s,i)}},_setIcon:function(e,t){e[this.opt.starType==="img"?"src":"className"]=this.opt.path+t},_setTarget:function(e,t){if(t){t=this.opt.targetFormat.toString().replace("{score}",t)}if(e.is(":input")){e.val(t)}else{e.html(t)}},_target:function(n,r){if(this.opt.target){var i=e(this.opt.target);if(!i.length){t._error.call(this,"Target selector invalid or missing!")}var s=r&&r.type==="mouseover";if(n===undefined){n=this.opt.targetText}else if(n===null){n=s?this.opt.cancelHint:this.opt.targetText}else{if(this.opt.targetType==="hint"){n=t._getHint.call(this,Math.ceil(n))}else if(this.opt.precision){n=parseFloat(n).toFixed(1)}var o=r&&r.type==="mousemove";if(!s&&!o&&!this.opt.targetKeep){n=this.opt.targetText}}t._setTarget.call(this,i,n)}},_unlock:function(){this.style.cursor="pointer";this.removeAttribute("title");this.score.removeAttr("readonly");this.self.data("readonly",false);for(var e=0;e<this.opt.number;e++){this.stars[e].title=t._getHint.call(this,e+1)}if(this.cancel){this.cancel.css("display","")}},cancel:function(n){return this.each(function(){var r=e(this);if(r.data("readonly")!==true){t[n?"click":"score"].call(r,null);this.score.removeAttr("value")}})},click:function(n){return this.each(function(){if(e(this).data("readonly")!==true){t._apply.call(this,n);if(this.opt.click){this.opt.click.call(this,n,e.Event("click"))}t._target.call(this,n)}})},destroy:function(){return this.each(function(){var t=e(this),n=t.data("raw");if(n){t.off(".raty").empty().css({cursor:n.style.cursor}).removeData("readonly")}else{t.data("raw",t.clone()[0])}})},getScore:function(){var e=[],t;this.each(function(){t=this.score.val();e.push(t?+t:undefined)});return e.length>1?e:e[0]},move:function(n){return this.each(function(){var r=parseInt(n,10),i=e(this).data("options"),s=(+n).toFixed(1).split(".")[1];if(r>=i.number){r=i.number-1;s=10}var o=t._getSize.call(this),u=o/10,a=e(this.stars[r]),f=a.offset().left+u*parseInt(s,10),l=e.Event("mousemove",{pageX:f});a.trigger(l)})},readOnly:function(n){return this.each(function(){var r=e(this);if(r.data("readonly")!==n){if(n){r.off(".raty").children("img").off(".raty");t._lock.call(this)}else{t._binds.call(this);t._unlock.call(this)}r.data("readonly",n)}})},reload:function(){return t.set.call(this,{})},score:function(){var n=e(this);return arguments.length?t.setScore.apply(n,arguments):t.getScore.call(n)},set:function(t){return this.each(function(){var n=e(this),r=n.data("options"),i=e.extend({},r,t);n.raty(i)})},setScore:function(n){return this.each(function(){if(e(this).data("readonly")!==true){t._apply.call(this,n);t._target.call(this,n)}})}};e.fn.raty=function(n){if(t[n]){return t[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"||!n){return t.init.apply(this,arguments)}else{e.error("Method "+n+" does not exist!")}};e.fn.raty.defaults={cancel:false,cancelClass:"raty-cancel",cancelHint:"Cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:undefined,half:false,halfShow:true,hints:["bad","poor","regular","good","gorgeous"],iconRange:undefined,mouseout:undefined,mouseover:undefined,noRatedMsg:"Aún no valorado!",number:5,numberMax:20,path:undefined,precision:false,readOnly:false,round:{down:.25,full:.6,up:.76},score:undefined,scoreName:"score",single:false,space:true,starHalf:"fa fa-star-half-o star-half.png",starOff:"fa fa-star-o off star-off.png",starOn:"fa fa-star star-on.png",starType:"i",target:undefined,targetFormat:"{score}",targetKeep:false,targetScore:undefined,targetText:"",targetType:"hint"}})(jQuery);jQuery.easing["jswing"]=jQuery.easing["swing"];jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,r,i){return jQuery.easing[jQuery.easing.def](e,t,n,r,i)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){if((t/=i/2)<1)return r/2*t*t+n;return-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){if((t/=i/2)<1)return r/2*t*t*t+n;return r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){if((t/=i/2)<1)return r/2*t*t*t*t+n;return-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){if((t/=i/2)<1)return r/2*t*t*t*t*t+n;return r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){if(t==0)return n;if(t==i)return n+r;if((t/=i/2)<1)return r/2*Math.pow(2,10*(t-1))+n;return r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){if((t/=i/2)<1)return-r/2*(Math.sqrt(1-t*t)-1)+n;return r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158;var o=0;var u=r;if(t==0)return n;if((t/=i)==1)return n+r;if(!o)o=i*.3;if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158;var o=0;var u=r;if(t==0)return n;if((t/=i)==1)return n+r;if(!o)o=i*.3;if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158;var o=0;var u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;if(!o)o=i*.3*1.5;if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);if(t<1)return-.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n;return u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,t,n,r,i,s){if(s==undefined)s=1.70158;return r*(t/=i)*t*((s+1)*t-s)+n},easeOutBack:function(e,t,n,r,i,s){if(s==undefined)s=1.70158;return r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInOutBack:function(e,t,n,r,i,s){if(s==undefined)s=1.70158;if((t/=i/2)<1)return r/2*t*t*(((s*=1.525)+1)*t-s)+n;return r/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+n},easeInBounce:function(e,t,n,r,i){return r-jQuery.easing.easeOutBounce(e,i-t,0,r,i)+n},easeOutBounce:function(e,t,n,r,i){if((t/=i)<1/2.75){return r*7.5625*t*t+n}else if(t<2/2.75){return r*(7.5625*(t-=1.5/2.75)*t+.75)+n}else if(t<2.5/2.75){return r*(7.5625*(t-=2.25/2.75)*t+.9375)+n}else{return r*(7.5625*(t-=2.625/2.75)*t+.984375)+n}},easeInOutBounce:function(e,t,n,r,i){if(t<i/2)return jQuery.easing.easeInBounce(e,t*2,0,r,i)*.5+n;return jQuery.easing.easeOutBounce(e,t*2-i,0,r,i)*.5+r*.5+n}});(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})(function(e){function o(e){if(e.minTime){e.minTime=x(e.minTime)}if(e.maxTime){e.maxTime=x(e.maxTime)}if(e.durationTime&&typeof e.durationTime!=="function"){e.durationTime=x(e.durationTime)}if(e.scrollDefault=="now"){e.scrollDefault=x(new Date)}else if(e.scrollDefault){e.scrollDefault=x(e.scrollDefault)}else if(e.minTime){e.scrollDefault=e.minTime}if(e.scrollDefault){e.scrollDefault=x(f(e.scrollDefault,e))}if(e.timeFormat.match(/[gh]/)){e._twelveHourTime=true}if(e.disableTimeRanges.length>0){for(var t in e.disableTimeRanges){e.disableTimeRanges[t]=[x(e.disableTimeRanges[t][0]),x(e.disableTimeRanges[t][1])]}e.disableTimeRanges=e.disableTimeRanges.sort(function(e,t){return e[0]-t[0]});for(var t=e.disableTimeRanges.length-1;t>0;t--){if(e.disableTimeRanges[t][0]<=e.disableTimeRanges[t-1][1]){e.disableTimeRanges[t-1]=[Math.min(e.disableTimeRanges[t][0],e.disableTimeRanges[t-1][0]),Math.max(e.disableTimeRanges[t][1],e.disableTimeRanges[t-1][1])];e.disableTimeRanges.splice(t,1)}}}return e}function u(t){var r=t.data("timepicker-settings");var i=t.data("timepicker-list");if(i&&i.length){i.remove();t.data("timepicker-list",false)}if(r.useSelect){i=e("<select />",{"class":"ui-timepicker-select"});var o=i}else{i=e("<ul />",{"class":"ui-timepicker-list"});var o=e("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1});o.css({display:"none",position:"absolute"}).append(i)}if(r.noneOption){if(r.noneOption===true){r.noneOption=r.useSelect?"Time...":"None"}if(e.isArray(r.noneOption)){for(var u in r.noneOption){if(parseInt(u,10)===u){var l=a(r.noneOption[u],r.useSelect);i.append(l)}}}else{var l=a(r.noneOption,r.useSelect);i.append(l)}}if(r.className){o.addClass(r.className)}if((r.minTime!==null||r.durationTime!==null)&&r.showDuration){o.addClass("ui-timepicker-with-duration");o.addClass("ui-timepicker-step-"+r.step)}var c=r.minTime;if(typeof r.durationTime==="function"){c=x(r.durationTime())}else if(r.durationTime!==null){c=r.durationTime}var p=r.minTime!==null?r.minTime:0;var v=r.maxTime!==null?r.maxTime:p+n-1;if(v<=p){v+=n}if(v===n-1&&r.timeFormat.indexOf("H")!==-1){v=n}var m=r.disableTimeRanges;var y=0;var b=m.length;for(var u=p;u<=v;u+=r.step*60){var T=u;var N=S(T,r.timeFormat);if(r.useSelect){var C=e("<option />",{value:N});C.text(N)}else{var C=e("<li />");C.data("time",T<=86400?T:T%86400);C.text(N)}if((r.minTime!==null||r.durationTime!==null)&&r.showDuration){var k=E(u-c,r.step);if(r.useSelect){C.text(C.text()+" ("+k+")")}else{var L=e("<span />",{"class":"ui-timepicker-duration"});L.text(" ("+k+")");C.append(L)}}if(y<b){if(T>=m[y][1]){y+=1}if(m[y]&&T>=m[y][0]&&T<m[y][1]){if(r.useSelect){C.prop("disabled",true)}else{C.addClass("ui-timepicker-disabled")}}}i.append(C)}o.data("timepicker-input",t);t.data("timepicker-list",o);if(r.useSelect){i.val(f(t.val(),r));i.on("focus",function(){e(this).data("timepicker-input").trigger("showTimepicker")});i.on("blur",function(){e(this).data("timepicker-input").trigger("hideTimepicker")});i.on("change",function(){g(t,e(this).val(),"select")});t.hide().after(i)}else{var A=r.appendTo;if(typeof A==="string"){A=e(A)}else if(typeof A==="function"){A=A(t)}A.append(o);d(t,i);i.on("mousedown","li",function(n){t.off("focus.timepicker");t.on("focus.timepicker-ie-hack",function(){t.off("focus.timepicker-ie-hack");t.on("focus.timepicker",s.show)});if(!h(t)){t[0].focus()}i.find("li").removeClass("ui-timepicker-selected");e(this).addClass("ui-timepicker-selected");if(w(t)){t.trigger("hideTimepicker");o.hide()}})}}function a(t,n){var r,i,s;if(typeof t=="object"){r=t.label;i=t.className;s=t.value}else if(typeof t=="string"){r=t}else{e.error("Invalid noneOption value")}if(n){return e("<option />",{value:s,"class":i,text:r})}else{return e("<li />",{"class":i,text:r}).data("time",s)}}function f(t,n){if(!e.isNumeric(t)){t=x(t)}if(t===null){return null}else{var r=n.step*60;return S(Math.round(t/r)*r,n.timeFormat)}}function l(){return new Date(1970,1,1,0,0,0)}function c(t){var n=e(t.target);var r=n.closest(".ui-timepicker-input");if(r.length===0&&n.closest(".ui-timepicker-wrapper").length===0){s.hide();e(document).unbind(".ui-timepicker")}}function h(e){var t=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&t.disableTouchKeyboard}function p(t,n,r){if(!r&&r!==0){return false}var i=t.data("timepicker-settings");var s=false;var o=i.step*30;n.find("li").each(function(t,n){var i=e(n);if(typeof i.data("time")!="number"){return}var u=i.data("time")-r;if(Math.abs(u)<o||u==o){s=i;return false}});return s}function d(e,t){t.find("li").removeClass("ui-timepicker-selected");var n=x(m(e),e.data("timepicker-settings"));if(n===null){return}var r=p(e,t,n);if(r){var i=r.offset().top-t.offset().top;if(i+r.outerHeight()>t.outerHeight()||i<0){t.scrollTop(t.scrollTop()+r.position().top-r.outerHeight())}r.addClass("ui-timepicker-selected");}}function v(t){if(this.value===""){return}var n=e(this);var r=n.data("timepicker-list");if(n.is(":focus")&&(!t||t.type!="change")){return}var i=x(this.value);if(i===null){n.trigger("timeFormatError");return}var s=n.data("timepicker-settings");var o=false;if(s.minTime!==null&&i<s.minTime){o=true}else if(s.maxTime!==null&&i>s.maxTime){o=true}e.each(s.disableTimeRanges,function(){if(i>=this[0]&&i<this[1]){o=true;return false}});if(s.forceRoundTime){var u=i%(s.step*60);if(u>=s.step*30){i+=s.step*60-u}else{i-=u}}var a=S(i,s.timeFormat);if(o){if(g(n,a,"error")){n.trigger("timeRangeError")}}else{g(n,a)}}function m(e){if(e.is("input")){return e.val()}else{return e.data("ui-timepicker-value")}}function g(e,t,n){if(e.is("input")){e.val(t);var r=e.data("timepicker-settings");if(r.useSelect){e.data("timepicker-list").val(f(t,r))}}if(e.data("ui-timepicker-value")!=t){e.data("ui-timepicker-value",t);if(n=="select"){e.trigger("selectTime").trigger("changeTime").trigger("change")}else if(n!="error"){e.trigger("changeTime")}return true}else{e.trigger("selectTime");return false}}function y(t){var n=e(this);var r=n.data("timepicker-list");if(!r||!r.is(":visible")){if(t.keyCode==40){s.show.call(n.get(0));r=n.data("timepicker-list");if(!h(n)){n.focus()}}else{return true}}switch(t.keyCode){case 13:if(w(n)){s.hide.apply(this)}t.preventDefault();return false;case 38:var i=r.find(".ui-timepicker-selected");if(!i.length){r.find("li").each(function(t,n){if(e(n).position().top>0){i=e(n);return false}});i.addClass("ui-timepicker-selected");}else if(!i.is(":first-child")){i.removeClass("ui-timepicker-selected");i.prev().addClass("ui-timepicker-selected");if(i.prev().position().top<i.outerHeight()){r.scrollTop(r.scrollTop()-i.outerHeight())}}return false;case 40:i=r.find(".ui-timepicker-selected");if(i.length===0){r.find("li").each(function(t,n){if(e(n).position().top>0){i=e(n);return false}});i.addClass("ui-timepicker-selected");}else if(!i.is(":last-child")){i.removeClass("ui-timepicker-selected");i.next().addClass("ui-timepicker-selected");if(i.next().position().top+2*i.outerHeight()>r.outerHeight()){r.scrollTop(r.scrollTop()+i.outerHeight())}}return false;case 27:r.find("li").removeClass("ui-timepicker-selected");s.hide();break;case 9:s.hide();break;default:return true}}function b(t){var n=e(this);var r=n.data("timepicker-list");if(!r||!r.is(":visible")){return true}if(!n.data("timepicker-settings").typeaheadHighlight){r.find("li").removeClass("ui-timepicker-selected");return true}switch(t.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:d(n,r);break;default:return}}function w(e){var t=e.data("timepicker-settings");var n=e.data("timepicker-list");var r=null;var i=n.find(".ui-timepicker-selected");if(i.hasClass("ui-timepicker-disabled")){return false}if(i.length){r=i.data("time")}if(r!==null){if(typeof r=="string"){e.val(r)}else{var s=S(r,t.timeFormat);g(e,s,"select")}}return true}function E(e,t){var n=Math.round(e/60),r=[],s,o;if(n<60){r=[n,i.mins]}else{s=Math.floor(n/60);o=n%60;if(t==30&&o==30){s+=i.decimal+5}r.push(s);r.push(s==1?i.hr:i.hrs);if(t!=30&&o){r.push(o);r.push(i.mins)}}return r.join(" ")}function S(e,r){if(e===null){return}var s=new Date(t.valueOf()+e*1e3);if(isNaN(s.getTime())){return}var o="";var u,a;for(var f=0;f<r.length;f++){a=r.charAt(f);switch(a){case"a":o+=s.getHours()>11?i.pm:i.am;break;case"A":o+=s.getHours()>11?i.PM:i.AM;break;case"g":u=s.getHours()%12;o+=u===0?"12":u;break;case"G":o+=s.getHours();break;case"h":u=s.getHours()%12;if(u!==0&&u<10){u="0"+u}o+=u===0?"12":u;break;case"H":u=s.getHours();if(e===n)u=24;o+=u>9?u:"0"+u;break;case"i":var l=s.getMinutes();o+=l>9?l:"0"+l;break;case"s":e=s.getSeconds();o+=e>9?e:"0"+e;break;default:o+=a}}return o}function x(e,t){if(e==="")return null;if(!e||e+0==e)return e;if(typeof e=="object"){e=e.getHours()+":"+T(e.getMinutes())+":"+T(e.getSeconds())}e=e.toLowerCase();var r=new Date(0);var i;if(e.indexOf(":")===-1){i=e.match(/^([0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/);if(!i){i=e.match(/^([0-2][0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/)}}else{i=e.match(/^(\d{1,2})(?::([0-5][0-9]))?(?::([0-5][0-9]))?\s*([pa]?)m?$/)}if(!i){return null}var s=parseInt(i[1]*1,10);var o=i[4];var u=s;if(o){if(s==12){u=i[4]=="p"?12:0}else{u=s+(i[4]=="p"?12:0)}}var a=i[2]*1||0;var f=i[3]*1||0;var l=u*3600+a*60+f;if(!o&&t&&t._twelveHourTime&&t.scrollDefault){var c=l-t.scrollDefault;if(c<0&&c>=n/-2){l=(l+n/2)%n}}return l}function T(e){return("0"+e).slice(-2)}var t=l();var n=86400;var r={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:false,showOnFocus:true,timeFormat:"g:ia",scrollDefault:null,selectOnBlur:false,disableTouchKeyboard:false,forceRoundTime:false,appendTo:"body",orientation:"ltr",disableTimeRanges:[],closeOnWindowScroll:false,typeaheadHighlight:true,noneOption:false};var i={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"};var s={init:function(t){return this.each(function(){var n=e(this);var a=[];for(var f in r){if(n.data(f)){a[f]=n.data(f)}}var l=e.extend({},r,a,t);if(l.lang){i=e.extend(i,l.lang)}l=o(l);n.data("timepicker-settings",l);n.addClass("ui-timepicker-input");if(l.useSelect){u(n)}else{n.prop("autocomplete","off");n.on("click.timepicker focus.timepicker",s.show);n.on("change.timepicker",v);n.on("keydown.timepicker",y);n.on("keyup.timepicker",b);v.call(n.get(0))}})},show:function(t){var n=e(this);var r=n.data("timepicker-settings");if(t){if(!r.showOnFocus){return true}t.preventDefault()}if(r.useSelect){n.data("timepicker-list").focus();return}if(h(n)){n.blur()}var i=n.data("timepicker-list");if(n.prop("readonly")){return}if(!i||i.length===0||typeof r.durationTime==="function"){u(n);i=n.data("timepicker-list")}if(i.is(":visible")){return}s.hide();i.show();var o={};if(r.orientation=="rtl"){o.left=n.offset().left+n.outerWidth()-i.outerWidth()+parseInt(i.css("marginLeft").replace("px",""),10)}else{o.left=n.offset().left+parseInt(i.css("marginLeft").replace("px",""),10)}if(n.offset().top+n.outerHeight(true)+i.outerHeight()>e(window).height()+e(window).scrollTop()){o.top=n.offset().top-i.outerHeight()+parseInt(i.css("marginTop").replace("px",""),10)}else{o.top=n.offset().top+n.outerHeight()+parseInt(i.css("marginTop").replace("px",""),10)}i.offset(o);var a=i.find(".ui-timepicker-selected");if(!a.length){if(m(n)){a=p(n,i,x(m(n)))}else if(r.scrollDefault){a=p(n,i,r.scrollDefault)}}if(a&&a.length){var f=i.scrollTop()+a.position().top-a.outerHeight();i.scrollTop(f)}else{i.scrollTop(0)}e(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",c);if(r.closeOnWindowScroll){e(document).on("scroll.ui-timepicker",c)}n.trigger("showTimepicker");return this},hide:function(t){var n=e(this);var r=n.data("timepicker-settings");if(r&&r.useSelect){n.blur()}e(".ui-timepicker-wrapper:visible").each(function(){var t=e(this);var n=t.data("timepicker-input");var r=n.data("timepicker-settings");if(r&&r.selectOnBlur){w(n)}t.hide();n.trigger("hideTimepicker")});return this},option:function(t,n){var r=this;var i=r.data("timepicker-settings");var s=r.data("timepicker-list");if(typeof t=="object"){i=e.extend(i,t)}else if(typeof t=="string"&&typeof n!="undefined"){i[t]=n}else if(typeof t=="string"){return i[t]}i=o(i);r.data("timepicker-settings",i);if(s){s.remove();r.data("timepicker-list",false)}if(i.useSelect){u(r)}return this},getSecondsFromMidnight:function(){return x(m(this))},getTime:function(e){var t=this;var n=m(t);if(!n){return null}if(!e){e=new Date}var r=x(n);var i=new Date(e);i.setHours(r/3600);i.setMinutes(r%3600/60);i.setSeconds(r%60);i.setMilliseconds(0);return i},setTime:function(e){var t=this;var n=S(x(e),t.data("timepicker-settings").timeFormat);g(t,n);if(t.data("timepicker-list")){d(t,t.data("timepicker-list"))}return this},remove:function(){var e=this;if(!e.hasClass("ui-timepicker-input")){return}var t=e.data("timepicker-settings");e.removeAttr("autocomplete","off");e.removeClass("ui-timepicker-input");e.removeData("timepicker-settings");e.off(".timepicker");if(e.data("timepicker-list")){e.data("timepicker-list").remove()}if(t.useSelect){e.show()}e.removeData("timepicker-list");return this}};e.fn.timepicker=function(t){if(!this.length)return this;if(s[t]){if(!this.hasClass("ui-timepicker-input")){return this}return s[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return s.init.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.timepicker")}}});(function(e){e.fn.pin=function(a){var g=0,h=[],n=!1,k=e(window),a=a||{},m=function(){for(var i=0,d=h.length;i<d;i++){var b=h[i];if(a.minWidth&&k.width()<=a.minWidth)b.parent().is(".pin-wrapper")&&b.unwrap(),b.css({width:"",left:"",top:"",position:""}),a.activeClass&&b.removeClass(a.activeClass),n=!0;else{n=!1;var c=a.containerSelector?b.closest(a.containerSelector):e(document.body),f=b.offset(),j=c.offset(),l=b.offsetParent().offset();b.parent().is(".pin-wrapper")||b.wrap("<div class='pin-wrapper'>");var g=e.extend({top:0,bottom:0},a.padding||{});b.data("pin",{pad:g,from:(a.containerSelector?j.top:f.top)-g.top,to:j.top+c.height()-b.outerHeight()-g.bottom,end:j.top+c.height(),parentTop:l.top});b.css({width:b.outerWidth()});b.parent().css("height",b.outerHeight())}}},o=function(){if(!n){g=k.scrollTop();for(var i=[],d=0,b=h.length;d<b;d++){var c=e(h[d]),f=c.data("pin");if(f){i.push(c);var j=f.from,l=f.to;j+c.outerHeight()>f.end?c.css("position",""):j<g&&l>g?("fixed"!=c.css("position")&&c.css({left:c.offset().left,top:f.pad.top}).css("position","fixed"),a.activeClass&&c.addClass(a.activeClass)):g>=l?(c.css({left:"",top:l-f.parentTop+f.pad.top}).css("position","absolute"),a.activeClass&&c.addClass(a.activeClass)):(c.css({position:"",top:"",left:""}),a.activeClass&&c.removeClass(a.activeClass))}}h=i}},p=function(){m();o()};this.each(function(){var a=e(this),d=e(this).data("pin")||{};if(!d||!d.update)h.push(a),e("img",this).one("load",m),d.update=p,e(this).data("pin",d)});k.scroll(o);k.resize(function(){m()});m();k.load(p);return this}})(jQuery);!function(e){var t=function(t,n){this.element=e(t);this.appendTo=n.appendTo||"body";this.format=DPGlobal.parseFormat(n.format||this.element.data("date-format")||"mm/dd/yyyy");this.picker=e(DPGlobal.template).appendTo(n.appendTo||"body").on({click:e.proxy(this.click,this)});this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on"):false;if(this.isInput){this.element.on({focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this)})}else{if(this.component){this.component.on("click",e.proxy(this.show,this))}else{this.element.on("click",e.proxy(this.show,this))}}this.minViewMode=n.minViewMode||this.element.data("date-minviewmode")||0;if(typeof this.minViewMode==="string"){switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0;break}}this.viewMode=n.viewMode||this.element.data("date-viewmode")||0;if(typeof this.viewMode==="string"){switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0;break}}this.startViewMode=this.viewMode;this.weekStart=n.weekStart||this.element.data("date-weekstart")||0;this.weekEnd=this.weekStart===0?6:this.weekStart-1;this.onRender=n.onRender;this.fillDow();this.fillMonths();this.update();this.showMode()};t.prototype={constructor:t,show:function(t){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();e(window).on("resize",e.proxy(this.place,this));if(t){t.stopPropagation();t.preventDefault()}if(!this.isInput){}var n=this;e(document).on("mousedown",function(t){if(e(t.target).closest(".datepicker").length==0){n.hide()}});this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide();e(window).off("resize",this.place);this.viewMode=this.startViewMode;this.showMode();if(!this.isInput){e(document).off("mousedown",this.hide)}this.element.trigger({type:"hide",date:this.date})},set:function(){var e=DPGlobal.formatDate(this.date,this.format);if(!this.isInput){if(this.component){this.element.find("input").prop("value",e)}this.element.data("date",e)}else{this.element.prop("value",e)}},setValue:function(e){if(typeof e==="string"){this.date=DPGlobal.parseDate(e,this.format)}else{this.date=new Date(e)}this.set();this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0);this.fill()},place:function(){var t=this.component?this.component.offset():this.element.offset(),n=this.component?this.component:this.element;e(this.appendTo).css({position:"relative"});this.picker.css({top:50})},update:function(e){this.date=DPGlobal.parseDate(typeof e==="string"?e:this.isInput?this.element.prop("value"):this.element.data("date"),this.format);this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0);this.fill()},fillDow:function(){var e=this.weekStart;var t="<tr>";while(e<this.weekStart+7){t+='<th class="dow">'+DPGlobal.dates.daysMin[e++%7]+"</th>"}t+="</tr>";this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){var e="";var t=0;while(t<12){e+='<span class="month">'+DPGlobal.dates.monthsShort[t++]+"</span>"}this.picker.find(".datepicker-months td").append(e)},fill:function(){var e=new Date(this.viewDate),t=e.getFullYear(),n=e.getMonth(),r=this.date.valueOf();this.picker.find(".datepicker-days th:eq(1)").text(DPGlobal.dates.months[n]+" "+t);var i=new Date(t,n-1,28,0,0,0,0),s=DPGlobal.getDaysInMonth(i.getFullYear(),i.getMonth());i.setDate(s);i.setDate(s-(i.getDay()-this.weekStart+7)%7);var o=new Date(i);o.setDate(o.getDate()+42);o=o.valueOf();var u=[];var a,f,l;while(i.valueOf()<o){if(i.getDay()===this.weekStart){u.push("<tr>")}a=this.onRender(i);f=i.getFullYear();l=i.getMonth();if(l<n&&f===t||f<t){a+=" old"}else if(l>n&&f===t||f>t){a+=" new"}if(i.valueOf()===r){a+=" active"}u.push('<td class="day '+a+'">'+i.getDate()+"</td>");if(i.getDay()===this.weekEnd){u.push("</tr>")}i.setDate(i.getDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(u.join(""));var c=this.date.getFullYear();var h=this.picker.find(".datepicker-months").find("th:eq(1)").text(t).end().find("span").removeClass("active");if(c===t){h.eq(this.date.getMonth()).addClass("active")}u="";t=parseInt(t/10,10)*10;var p=this.picker.find(".datepicker-years").find("th:eq(1)").text(t+"-"+(t+9)).end().find("td");t-=1;for(var d=-1;d<11;d++){u+='<span class="year'+(d===-1||d===10?" old":"")+(c===t?" active":"")+'">'+t+"</span>";t+=1}p.html(u)},click:function(t){t.stopPropagation();t.preventDefault();var n=e(t.target).closest("span, td, th");if(n.length===1){switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.viewDate["set"+DPGlobal.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+DPGlobal.modes[this.viewMode].navFnc].call(this.viewDate)+DPGlobal.modes[this.viewMode].navStep*(n[0].className==="prev"?-1:1));this.fill();this.set();break}break;case"span":if(n.is(".month")){var r=n.parent().find("span").index(n);this.viewDate.setMonth(r)}else{var i=parseInt(n.text(),10)||0;this.viewDate.setFullYear(i)}if(this.viewMode!==0){this.date=new Date(this.viewDate);this.element.trigger({type:"changeDate",date:this.date,viewMode:DPGlobal.modes[this.viewMode].clsName})}this.showMode(-1);this.fill();this.set();break;case"td":if(n.is(".day")&&!n.is(".disabled")){var s=parseInt(n.text(),10)||1;var r=this.viewDate.getMonth();if(n.is(".old")){r-=1}else if(n.is(".new")){r+=1}var i=this.viewDate.getFullYear();this.date=new Date(i,r,s,0,0,0,0);this.viewDate=new Date(i,r,Math.min(28,s),0,0,0,0);this.fill();this.set();this.element.trigger({type:"changeDate",date:this.date,viewMode:DPGlobal.modes[this.viewMode].clsName})}break}}},mousedown:function(e){e.stopPropagation();e.preventDefault()},showMode:function(e){if(e){this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+e))}this.picker.find(">div").hide().filter(".datepicker-"+DPGlobal.modes[this.viewMode].clsName).show()}};e.fn.datepicker=function(n,r){return this.each(function(){var i=e(this),s=i.data("datepicker"),o=typeof n==="object"&&n;if(!s){i.data("datepicker",s=new t(this,e.extend({},e.fn.datepicker.defaults,o)))}})};e.fn.datepicker.defaults={onRender:function(e){return""}};e.fn.datepicker.Constructor=t;window.DPGlobal={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,DPGlobal.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},parseFormat:function(e){var t=e.match(/[.\/\-\s].*?/),n=e.split(/\W+/);if(!t||!n||n.length===0){throw new Error("Invalid date format.")}return{separator:t,parts:n}},parseDate:function(e,t){var n=e.split(t.separator),e=new Date,r;e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);if(n.length===t.parts.length){var i=e.getFullYear(),s=e.getDate(),o=e.getMonth();for(var u=0,a=t.parts.length;u<a;u++){r=parseInt(n[u],10)||1;switch(t.parts[u]){case"dd":case"d":s=r;e.setDate(r);break;case"mm":case"m":o=r-1;e.setMonth(r-1);break;case"yy":i=2e3+r;e.setFullYear(2e3+r);break;case"yyyy":i=r;e.setFullYear(r);break}}e=new Date(i,o,s,0,0,0)}return e},formatDate:function(e,t){var n={d:e.getDate(),m:e.getMonth()+1,yy:e.getFullYear().toString().substring(2),yyyy:e.getFullYear()};n.dd=(n.d<10?"0":"")+n.d;n.mm=(n.m<10?"0":"")+n.m;var e=[];for(var r=0,i=t.parts.length;r<i;r++){e.push(n[t.parts[r]])}return e.join(t.separator)},headTemplate:"<thead>"+"<tr>"+'<th class="prev">&lsaquo;</th>'+'<th colspan="5" class="switch"></th>'+'<th class="next">&rsaquo;</th>'+"</tr>"+"</thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};DPGlobal.template='<div class="datepicker dropdown-menu">'+'<div class="datepicker-days">'+'<table class=" table-condensed">'+DPGlobal.headTemplate+"<tbody></tbody>"+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+"</table>"+"</div>"+"</div>"}(window.jQuery);;window.Modernizr=function(a,b,c){function w(a){j.cssText=a}function x(a,b){return w(m.join(a+";")+(b||""))}function y(a,b){return typeof a===b}function z(a,b){return!!~(""+a).indexOf(b)}function A(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:y(f,"function")?f.bind(d||b):f}return!1}var d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l={}.toString,m=" -webkit- -moz- -o- -ms- ".split(" "),n={},o={},p={},q=[],r=q.slice,s,t=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},u={}.hasOwnProperty,v;!y(u,"undefined")&&!y(u.call,"undefined")?v=function(a,b){return u.call(a,b)}:v=function(a,b){return b in a&&y(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=r.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(r.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(r.call(arguments)))};return e}),n.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:t(["@media (",m.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=a.offsetTop===9}),c};for(var B in n)v(n,B)&&(s=B.toLowerCase(),e[s]=n[B](),q.push((e[s]?"":"no-")+s));return e.addTest=function(a,b){if(typeof a=="object")for(var d in a)v(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},w(""),i=k=null,function(a,b){function k(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function l(){var a=r.elements;return typeof a=="string"?a.split(" "):a}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b}function n(a,c,f){c||(c=b);if(j)return c.createElement(a);f||(f=m(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():e.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),g.canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g}function o(a,c){a||(a=b);if(j)return a.createDocumentFragment();c=c||m(a);var d=c.frag.cloneNode(),e=0,f=l(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(r,b.frag)}function q(a){a||(a=b);var c=m(a);return r.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=!!k(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),j||p(a,c),a}var c=a.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f,g="_html5shiv",h=0,i={},j;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",f="hidden"in a,j=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined"}()}catch(c){f=!0,j=!0}})();var r={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:j,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b)}(this,b),e._version=d,e._prefixes=m,e.testStyles=t,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+q.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};
(function(e){"use strict";function t(){var t=false;(function(e){if(/(android|ipad|playbook|silk|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))t=true})(navigator.userAgent||navigator.vendor||e.opera);return t}function n(e,t){this.el=e;this._init()}n.prototype={_init:function(){this.trigger=this.el.querySelector("a.gn-icon-menu");this.menu=this.el.querySelector("nav.gn-menu-wrapper");this.isMenuOpen=false;this.eventtype=t()?"touchstart":"click";this._initEvents();var e=this;this.bodyClickFn=function(){e._closeMenu();this.removeEventListener(e.eventtype,e.bodyClickFn)}},_initEvents:function(){var e=this;if(!t()){this.trigger.addEventListener("mouseover",function(t){e._openIconMenu()});this.trigger.addEventListener("mouseout",function(t){e._closeIconMenu()});this.menu.addEventListener("mouseover",function(t){e._openMenu();document.addEventListener(e.eventtype,e.bodyClickFn)})}this.trigger.addEventListener(this.eventtype,function(t){t.stopPropagation();t.preventDefault();if(e.isMenuOpen){e._closeMenu();document.removeEventListener(e.eventtype,e.bodyClickFn)}else{e._openMenu();document.addEventListener(e.eventtype,e.bodyClickFn)}});this.menu.addEventListener(this.eventtype,function(e){e.stopPropagation()})},_openIconMenu:function(){classie.add(this.menu,"gn-open-part")},_closeIconMenu:function(){classie.remove(this.menu,"gn-open-part")},_openMenu:function(){if(this.isMenuOpen)return;classie.add(this.trigger,"gn-selected");this.isMenuOpen=true;classie.add(this.menu,"gn-open-all");this._closeIconMenu()},_closeMenu:function(){if(!this.isMenuOpen)return;classie.remove(this.trigger,"gn-selected");this.isMenuOpen=false;classie.remove(this.menu,"gn-open-all");this._closeIconMenu()}};e.gnMenu=n})(window);(function(e){"use strict";function t(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function s(e,t){var s=n(e,t)?i:r;s(e,t)}var n,r,i;if("classList"in document.documentElement){n=function(e,t){return e.classList.contains(t)};r=function(e,t){e.classList.add(t)};i=function(e,t){e.classList.remove(t)}}else{n=function(e,n){return t(n).test(e.className)};r=function(e,t){if(!n(e,t)){e.className=e.className+" "+t}};i=function(e,n){e.className=e.className.replace(t(n)," ")}}var o={hasClass:n,addClass:r,removeClass:i,toggleClass:s,has:n,add:r,remove:i,toggle:s};if(typeof define==="function"&&define.amd){define(o)}else{e.classie=o}})(window);
var de_front={"form_auth":{"error_msg":"Por favor rellena los campos requeridos","error_user":"Por favor introduce tu nombre de usuario.","error_email":"Por favor introduce un Correo electr\u00f3nico v\u00e1lido","error_username":"Por favor introduce un nombre de usuario valido","error_repass":"Por favor introduce la misma contrase\u00f1a que arriba","error_url":"Por favor introduce una URL v\u00e1lida","error_cb":"Debes aceptar los t\u00e9rminos y condiciones"},"texts":{"require_login":"You must be logged in to perform this action.","enought_points":"You don't have enought points to perform this action.","create_topic":"Create Topic","upload_images":"Upload Images","no_file_choose":"No file chosen.","require_tags":"Please insert at least one tag.","add_comment":"Add comment","cancel":"Cancelar","sign_up":"Registrarse","sign_in":"Iniciar sesi\u00f3n","accept_txt":"Aceptado","best_ans_txt":"Mejor respuesta","forgotpass":"Olvidaste la Contrase\u00f1a","close_tab":"Has realizado algunos cambios y deber\u00edas querer guardarlos.","request_geo":"Ha rechazado la solicitud de Geolocalizaci\u00f3n. Para utilizar esta funci\u00f3n, habil\u00edtela.","location_unavailable":"Location information is unavailable.","request_time_out":"The request to get user location timed out.","error_occurred":"An unknown error occurred.","none":"Ninguno"}};var de_front={"form_auth":{"error_msg":"Por favor rellena los campos requeridos","error_user":"Por favor introduce tu nombre de usuario.","error_email":"Por favor introduce un Correo electr\u00f3nico v\u00e1lido","error_username":"Por favor introduce un nombre de usuario valido","error_repass":"Por favor introduce la misma contrase\u00f1a que arriba","error_url":"Por favor introduce una URL v\u00e1lida","error_cb":"Debes aceptar los t\u00e9rminos y condiciones"},"texts":{"require_login":"You must be logged in to perform this action.","enought_points":"You don't have enought points to perform this action.","create_topic":"Create Topic","upload_images":"Upload Images","no_file_choose":"No file chosen.","require_tags":"Please insert at least one tag.","add_comment":"Add comment","cancel":"Cancelar","sign_up":"Registrarse","sign_in":"Iniciar sesi\u00f3n","accept_txt":"Aceptado","best_ans_txt":"Mejor respuesta","forgotpass":"Olvidaste la Contrase\u00f1a","close_tab":"Has realizado algunos cambios y deber\u00edas querer guardarlos.","request_geo":"Ha rechazado la solicitud de Geolocalizaci\u00f3n. Para utilizar esta funci\u00f3n, habil\u00edtela.","location_unavailable":"Location information is unavailable.","request_time_out":"The request to get user location timed out.","error_occurred":"An unknown error occurred.","none":"Ninguno"}};
(function(Views,Models,$,Backbone,Collections){Views.Map=Backbone.View.extend({events:{},initialize:function(options){_.bindAll(this,'setCenter','renderMap');var view=this;if($('#map-top-wrapper').length===0){return;}
view.options=_.extend(this,options);view.center=new google.maps.LatLng(this.options.latitude,this.options.longitude);view.map_options={'zoom':15,'center':view.center,'mapTypeId':google.maps.MapTypeId.ROADMAP,'scrollwheel':true,'zoomControl':true,'styles':[{"featureType":"poi.business","stylers":[{"is_submit_projectvisibility":"off"}]}]};this.template=_.template($('#ae_info_content_template').html());view.markers=[];view.currentMarker=null;this.initMapWindow();this.map=new google.maps.Map(document.getElementById("map-top-wrapper"),view.map_options);var map_style=ae_globals.global_map_style;if(map_style!=null){if(ae_globals.map_typestyle!=1){map_style.push({featureType:"poi",stylers:[{visibility:'off'}]},{featureType:"transit.station.bus",stylers:[{visibility:'off'}]});}else{map_style.push({featureType:"poi",stylers:[{visibility:'on'}]},{featureType:"transit.station.bus",stylers:[{visibility:'on'}]});}}else{if(ae_globals.map_typestyle!=1){this.map.set('styles',[{featureType:"poi",stylers:[{visibility:'off'}]},{featureType:"transit.station.bus",stylers:[{visibility:'off'}]}]);}}
if(ae_globals.global_map_style){this.map.setOptions({styles:map_style});}
this.categories=[];if($('#de-categories-data').length>0){this.categories=JSON.parse($('#de-categories-data').html());}
this.addControl();this.initMapIcon();this.lockView=true;this.nearby=false;if($('#nearby_location').length>0){this.nearby=true;}
AE.pubsub.on('de:getCurrentPosition',this.setCenter,this);AE.pubsub.on('de:map:drawGeoLocate',this.drawGeoLocate,this);AE.pubsub.on('de:map:GeoLocate',this.geoLocate,this);AE.pubsub.on('de:map:geoDirection',this.geoDirection,this);if(this.options.ajax=="1")
this.renderMap();else
google.maps.event.addListener(view.map,'idle',view.renderMap);view.blockUi=new Views.BlockUi();},geoLocate:function(successEventId){GMaps.geolocate({success:function(position){AE.pubsub.trigger(successEventId,position);},error:function(error){AE.pubsub.trigger('ae:notification',{msg:ae_globals.geolocation_failed,notice_type:'error',});},not_supported:function(){alert(ae_globals.browser_supported);AE.pubsub.trigger('ae:notification',{msg:ae_globals.browser_supported,notice_type:'error',});}});},drawGeoLocate:function(position){var view=this;if(typeof this.model==='undefined'||this.nearby||!this.lockView){AE.pubsub.trigger('de:getCurrentPosition',position.coords);}
var latLng=new google.maps.LatLng(position.coords.latitude,position.coords.longitude);if(view.currentMarker===null){var icon={url:ae_globals.current_possition_img,size:new google.maps.Size(40,40),};view.currentMarker=new google.maps.Marker({map:view.map,animation:google.maps.Animation.DROP,title:ae_globals.current_possition_title,position:latLng,icon:icon});}
else{view.currentMarker.setPosition(latLng);view.currentMarker.setAnimation(google.maps.Animation.DROP);}},geoDirection:function(position){var view=this;if($('#place_id').length>0){var place=JSON.parse($('#place_id').html()),height=new google.maps.LatLng(position.coords.latitude,position.coords.longitude),oceanBeach=new google.maps.LatLng(place.et_location_lat,place.et_location_lng),directionsDisplay=new google.maps.DirectionsRenderer({polylineOptions:{strokeColor:"red"}}),directionsService=new google.maps.DirectionsService(),selectedMode=document.getElementById('mode').value;directionsDisplay.setMap(view.map);var divIcon=$('#showDirectoryon .icon');$('#showDirectoryon .icon').remove();switch(selectedMode){case'DRIVING':$('#showDirectoryon').append('<div class="icon fa fa-car"></div>');break;case'WALKING':$('#showDirectoryon').append('<div class="icon fa fa-male"></div>');break;case'BICYCLING':$('#showDirectoryon').append('<div class="icon fa fa-bicycle"></div>');break;case'TRANSIT':$('#showDirectoryon').append('<div class="icon fa fa-bus"></div>');break;}
var request={origin:height,destination:oceanBeach,travelMode:google.maps.TravelMode[selectedMode]};directionsService.route(request,function(response,status){if(status===google.maps.DirectionsStatus.OK){directionsDisplay.setDirections(response);}});}},addControl:function(){var view=this;var controlDiv=document.createElement('div');controlDiv.className="app-vertical-widget-holder";controlDiv.title=ae_globals.map_gohome_title;var controlUI=document.createElement('div');controlUI.className='app-vertical-item';controlDiv.appendChild(controlUI);var goHomeButton=document.createElement('div');goHomeButton.id="gohome";goHomeButton.className="widget-button";goHomeButton.innerHTML='<div class="icon fa fa-location-arrow" ></div>';controlUI.appendChild(goHomeButton);if((typeof ae_globals.is_single!=='undefined'&&ae_globals.is_single==='1')){var showDirectoryButton=document.createElement('div');showDirectoryButton.id="showDirectoryon";showDirectoryButton.className="widget-button";showDirectoryButton.innerHTML='<div class="icon fa fa-car"></div>';controlUI.appendChild(showDirectoryButton);var selectDirectionMode=document.createElement('select');selectDirectionMode.id='mode';selectDirectionMode.innerHTML='';selectDirectionMode.innerHTML+='<option value="DRIVING">'+ae_globals.geo_direction.driving+'</option>';selectDirectionMode.innerHTML+='<option value="WALKING">'+ae_globals.geo_direction.walking+'</option>';selectDirectionMode.innerHTML+='<option value="BICYCLING">'+ae_globals.geo_direction.bicycling+'</option>';selectDirectionMode.innerHTML+='<option value="TRANSIT">'+ae_globals.geo_direction.transit+'</option>';controlUI.appendChild(selectDirectionMode);google.maps.event.addDomListener(showDirectoryButton,'click',function(){view.lockView=false;AE.pubsub.trigger('de:map:GeoLocate','de:map:geoDirection');});}
view.map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(controlDiv);google.maps.event.addDomListener(goHomeButton,'click',function(){view.lockView=false;AE.pubsub.trigger('de:map:GeoLocate','de:map:drawGeoLocate');});},addContextMenu:function(){this.map.setContextMenu({control:'map',options:[{title:'Add marker',name:'add_marker',action:function(e){this.addMarker({lat:e.latLng.lat(),lng:e.latLng.lng(),title:'New marker'});}},{title:'Center here',name:'center_here',action:function(e){this.setCenter(e.latLng.lat(),e.latLng.lng());}}]});},travelRoute:function(origin,destination){map.travelRoute({origin:origin,destination:destination,travelMode:'driving',step:function(e){$('#instructions').append('<li>'+e.instructions+'</li>');$('#instructions li:eq('+e.step_number+')').delay(600*e.step_number).fadeIn(200,function(){map.drawPolyline({path:e.path,strokeColor:'#131540',strokeOpacity:0.6,strokeWeight:6});});}});},initMapIcon:function(){var view=this;this.icons={};this.colors={};this.fontClass={};_.each(this.categories,function(element){var icon={path:'M 50 -119.876 -50 -119.876 -50 -19.876 -13.232 -19.876 0.199 0 13.63 -19.876 50 -19.876 Z',fillColor:element.color,fillOpacity:1,scale:0.3,strokeColor:element.color,strokeWeight:0};if(element.parent!==0&&typeof element.icon==='undefined'){view.icons[element.term_id]=view.icons[element.parent];view.fontClass[element.term_id]=view.fontClass[element.parent];}else{view.icons[element.term_id]=icon;view.fontClass[element.term_id]=element.icon;}
if(element.parent!==0&&typeof element.color==='undefined'){view.colors[element.term_id]=view.colors[element.parent];}
else{view.colors[element.term_id]=element.color;}});view.labelAnchor=new google.maps.Point(10,31);},initMapWindow:function(){var view=this,iw1=new InfoBubble({content:'',shadowStyle:0,padding:0,borderRadius:0,arrowSize:0,borderWidth:5,borderColor:'#ccc',disableAutoPan:false,backgroundColor:'#fff',arrowStyle:0,maxWidth:280,minWidth:260,minHeight:70,maxHeight:400,autoPan:true});view.infoWindow=iw1;},renderMap:function(data){var view=this,cat='',data={action:'de_get_map_data'};view.markers=[];if($('.main-pagination .ae_query').length>0){var query=JSON.parse($('.main-pagination .ae_query').html());data.query=query;}
var i=100,k=1;current_place=Array();if($('#total_place').length>0){i=JSON.parse($('#total_place').html());current_place=Array(i.current_place);i=i.number;}
if($('#place_cat_slug').length>0){cat=JSON.parse($('#place_cat_slug').html());cat=cat.slug;}
if(view.loaded===true&&ae_globals.single_map_marker==="1")return;data.paged=k;data.showposts=50;data.place_category=cat;if(ae_globals.is_single&&ae_globals.single_map_marker==="1"){data=current_place;view.map.setZoom(16);view.ajaxSuccess(data);}else if(ae_globals.is_search==1||ae_globals.is_tax==1||ae_globals.is_archive==1){var center=this.map.getCenter(),bounds=this.get_bound_distance();data=current_place[0];if(data){view.ajaxSuccess(data);}
else{view.map.setCenter(center);view.map.setZoom(6);}}
else{var center=this.map.getCenter(),bounds=this.get_bound_distance();data.query={center:String(center.lat())+','+String(center.lng()),radius:bounds};$.ajax({type:'get',url:ae_globals.ajaxURL,data:data,beforeSend:function(){},success:function(resp){if(IsJsonString(resp)){resp=JSON.parse(resp);}
if(typeof resp.data!=='undefined'&&resp.data.length>0){var data=resp.data;view.ajaxSuccess(data);}}});}},get_bound_distance:function(){var bounds=new google.maps.LatLngBounds();var center=bounds.getCenter();var ne=bounds.getNorthEast();var r=3963.0;var lat1=center.lat()
var lon1=center.lng()
var lat2=ne.lat()
var lon2=ne.lng()
var dis=r*Math.acos(Math.sin(lat1)*Math.sin(lat2)+
Math.cos(lat1)*Math.cos(lat2)*Math.cos(lon2-lon1));return dis;},ajaxSuccess:function(data){var view=this;var bounds=new google.maps.LatLngBounds();if(data){for(var i=0;i<data.length;i++){var content='',latLng=new google.maps.LatLng(data[i].latitude,data[i].longitude),term=data[i].term_taxonomy_id,color=view.colors[term],fontClass=view.fontClass[term],icon=view.icons[term];bounds.extend(latLng);if(typeof color==='undefined'){color='#F59236';}
if(typeof fontClass==='undefined'){fontClass='fa-map-marker';}
if(typeof icon==='undefined'){var icon={path:'M 50 -119.876 -50 -119.876 -50 -19.876 -13.232 -19.876 0.199 0 13.63 -19.876 50 -19.876 Z',fillColor:'#F59236',fillOpacity:1,scale:0.3,strokeColor:'#F59236',strokeWeight:0};}
var marker=new MarkerWithLabel({position:latLng,labelContent:"<span><i style='color:"+color+";' class='fa "+fontClass+"'></i><span>",labelAnchor:view.labelAnchor,labelClass:"map-labels",labelStyle:{opacity:1.0},icon:icon});marker.content='';marker.ID=data[i].ID;view.markers.push(marker);view.attachMarkerInfowindow(marker,content,data[i]);if(typeof view.model!=='undefined'&&ae_globals.is_single){var model_data=view.model.toJSON();if(model_data.permalink){content=view.template(model_data);marker.content=content;}
view.map.setCenter(latLng);view.infoWindow.setContent(content);view.infoWindow.setBorderColor(color);view.infoWindow.open(this.map,marker);}
google.maps.event.addListener(view.map,'idle',function(){$('.infowindow .rate-it').raty({readOnly:true,half:true,score:function(){return $(this).attr('data-score');},hints:raty.hint});});if(i==data.length-1){view.loaded=true;}}}
if(typeof view.markerCluster!=='undefined'){view.markerCluster.clearMarkers();}
view.markerCluster=new MarkerClusterer(view.map,view.markers,{imagePath:'https://raw.githubusercontent.com/googlemaps/v3-utility-library/master/markerclustererplus/images/m',zoomOnClick:true,gridSize:20});view.markerCluster.onClick=function(icon){return view.multiChoice(icon.cluster_);};if(typeof view.model==='undefined'&&parseInt(ae_globals.fitbounds)){view.map.fitBounds(bounds);if(view.map.getZoom()==0)view.map.setZoom(1);view.map.setCenter(bounds.getCenter());}
if(ae_globals.is_search&&parseInt(ae_globals.fitbounds)||ae_globals.is_tax&&parseInt(ae_globals.fitbounds)||ae_globals.is_archive&&parseInt(ae_globals.fitbounds)){view.map.fitBounds(bounds);if(view.map.getZoom()==0)view.map.setZoom(1);view.map.setCenter(bounds.getCenter());if(data.length==1){view.map.setZoom(15);}}},attachMarkerInfowindow:function(marker,content,data){var view=this,term=data.term_taxonomy_id;google.maps.event.addListener(marker,'click',function(){if(marker.content===''){$.ajax({type:'get',url:ae_globals.ajaxURL,data:{action:'de-get-map-info',ID:marker.ID},beforeSend:function(){view.blockUi.block($('#map-top-wrapper'));},success:function(resp){view.blockUi.unblock();$('div.map-element').html(resp.data.content);if(!ae_globals.is_single){$('.rate-it').raty({readOnly:true,half:true,score:function(){return $(this).attr('data-score');},hints:raty.hint});}
var content=$('div.map-element').html();view.infoWindow.setContent(content);var color=view.colors[term];if(typeof color==='undefined'){color='#F59236';}
view.infoWindow.setBorderColor(color);view.infoWindow.open(view.map,marker);marker.content=content;}});}else{view.infoWindow.setContent(marker.content);var color=view.colors[term];if(typeof color==='undefined'){color='#F59236';}
$('.rate-it').raty({readOnly:true,half:true,score:function(){return $(this).attr('data-score');},hints:raty.hint});view.infoWindow.setBorderColor(color);view.infoWindow.open(view.map,marker);}});},multiChoice:function(clickedCluster){var view=this;if(clickedCluster.getMarkers().length>1){var markers=clickedCluster.getMarkers();var market_id=[];for(var i=0;i<markers.length;i++){market_id.push(markers[i].ID);}
if(markers[0].content===''){$.ajax({type:'get',url:ae_globals.ajaxURL,data:{action:'de-get-map-info',IDs:market_id},beforeSend:function(){view.blockUi.block($('#map-top-wrapper'));},success:function(resp){view.blockUi.unblock();$('div.map-element').html(resp.data.content);$('.rate-it').raty({readOnly:true,half:true,score:function(){return $(this).attr('data-score');},hints:raty.hint});var content=$('div.map-element').html();view.infoWindow.setBorderColor('#F59236');view.infoWindow.setContent('<div class="jobs-wrapper">'+content+'</div>');view.infoWindow.open(view.map,markers[0]);markers[0].content='<div class="jobs-wrapper">'+content+'</div>';}});}
else{view.infoWindow.setBorderColor('#F59236');view.infoWindow.setContent(markers[0].content);view.infoWindow.open(view.map,markers[0]);}}
return true;},setCenter:function(coords){var latLng=new google.maps.LatLng(coords.latitude,coords.longitude);this.map.setCenter(latLng);},googleMapButton:function(text,className){"use strict";var controlDiv=document.createElement("div");controlDiv.className=className;controlDiv.index=1;controlDiv.style.padding="10px";var controlUi=document.createElement("div");controlUi.style.backgroundColor="rgb(255, 255, 255)";controlUi.style.color="#565656";controlUi.style.cursor="pointer";controlUi.style.textAlign="center";controlUi.style.boxShadow="rgba(0, 0, 0, 0.298039) 0px 1px 4px -1px";controlDiv.appendChild(controlUi);var controlText=document.createElement("div");controlText.style.fontFamily="Roboto,Arial,sans-serif";controlText.style.fontSize="11px";controlText.style.paddingTop="8px";controlText.style.paddingBottom="8px";controlText.style.paddingLeft="8px";controlText.style.paddingRight="8px";controlText.innerHTML=text;controlUi.appendChild(controlText);$(controlUi).on("mouseenter",function(){controlUi.style.backgroundColor="rgb(235, 235, 235)";controlUi.style.color="#000";});$(controlUi).on("mouseleave",function(){controlUi.style.backgroundColor="rgb(255, 255, 255)";controlUi.style.color="#565656";});return controlDiv;},FullScreenControl:function(map,enterFull,exitFull){var view=this;"use strict";if(enterFull===void 0){enterFull=null;}
if(exitFull===void 0){exitFull=null;}
if(enterFull==null){enterFull="Full screen";}
if(exitFull==null){exitFull="Exit full screen";}
var controlDiv=view.googleMapButton(enterFull,"fullScreen");var fullScreen=false;var interval;var mapDiv=view.map.getDiv();var divStyle=mapDiv.style;if(mapDiv.runtimeStyle){divStyle=mapDiv.runtimeStyle;}
var originalPos=divStyle.position;var originalWidth=divStyle.width;var originalHeight=divStyle.height;if(originalWidth===""){originalWidth=mapDiv.style.width;}
if(originalHeight===""){originalHeight=mapDiv.style.height;}
var originalTop=divStyle.top;var originalLeft=divStyle.left;var originalZIndex=divStyle.zIndex;var bodyStyle=document.body.style;if(document.body.runtimeStyle){bodyStyle=document.body.runtimeStyle;}
var originalOverflow=bodyStyle.overflow;controlDiv.goFullScreen=function(){var center=view.map.getCenter();mapDiv.style.position="fixed";mapDiv.style.width="100%";mapDiv.style.height="100%";mapDiv.style.top="30";mapDiv.style.left="0";mapDiv.style.zIndex="10000";document.body.style.overflow="hidden";$(controlDiv).find("div div").html(exitFull);fullScreen=true;google.maps.event.trigger(view.map,"resize");view.map.setCenter(center);interval=setInterval(function(){if(mapDiv.style.position!=="fixed"){mapDiv.style.position="fixed";google.maps.event.trigger(map,"resize");}},100);};controlDiv.exitFullScreen=function(){var center=view.map.getCenter();if(originalPos===""){mapDiv.style.position="relative";}else{mapDiv.style.position=originalPos;}
mapDiv.style.width=originalWidth;mapDiv.style.height=originalHeight;mapDiv.style.top=originalTop;mapDiv.style.left=originalLeft;mapDiv.style.zIndex=originalZIndex;document.body.style.overflow=originalOverflow;$(controlDiv).find("div div").html(enterFull);fullScreen=false;google.maps.event.trigger(view.map,"resize");view.map.setCenter(center);clearInterval(interval);};google.maps.event.addDomListener(controlDiv,"click",function(){if(!fullScreen){controlDiv.goFullScreen();}else{controlDiv.exitFullScreen();}});return controlDiv;}});Views.EditPost=Views.Modal_Box.extend({events:{'submit form#submit_form':'submitPost','keyup input#et_full_location':'gecodeMap','keyup input#et_full_location2':'gecodeMap','click a#delete-cover-image':'removeCover','click input.video-position':'updateVideoPosition','change #et_claimable':'setClaimable','click span.select-date-all':'selectDateAll','click li.bdate':'selectButtonDate','click span.reset-all':'resetAllDate',},initialize:function(){_.bindAll(this,'cbSuccess','cbBeforeSend');var view=this;AE.Views.Modal_Box.prototype.initialize.call();this.blockUi=new Views.BlockUi();this.initValidator();if($('#map').length>0){view.map=new GMaps({div:'#map',lat:ae_globals.map_center.latitude,lng:ae_globals.map_center.longitude,zoom:15,panControl:false,zoomControl:true,mapTypeControl:false});$('#map').slideDown();}
$('li.bdate[data-toggle="tooltip"]').tooltip({'html':true});},selectDateAll:function(e){var ev=e.target;$(ev).toggleClass('active');if($(ev).hasClass('active')){$(ev).text(ae_globals.translate_deselect);$('li.bdate').addClass('active');$('li.bdate').addClass('recent');$(".open-block-sep").show();$(".open-times").show();$('li.bdate').each(function(){if($(this).hasClass('active')){$(this).attr('open-time',$('input.open-time').val());$(this).attr('open-time-2',$('input.open-time-2').val());$(this).attr('close-time',$('input.close-time').val());$(this).attr('close-time-2',$('input.close-time-2').val());}});}else{$(ev).text(ae_globals.translate_select);$('li.bdate').removeClass('active');$('li.bdate').removeClass('recent');$('li.bdate').attr('open-time','');$('li.bdate').attr('close-time','');$('li.bdate').attr('open-time-2','');$('li.bdate').attr('close-time-2','');$(".open-block-sep").hide();$(".open-times").hide();$(".open-times input").val("");$("#alguna_opcion_date_seleccionada").val("");}},selectButtonDate:function(e){$(".open-block-sep").show();$(".open-times").show();var ev=e.target;var active=false;$(ev).toggleClass('active');$('li.bdate').removeClass('recent');if($(ev).hasClass('active')){$('.select-date-all').addClass('active');$('.select-date-all').text(ae_globals.translate_deselect);$(ev).attr('open-time',$('input.open-time').val());$(ev).attr('close-time',$('input.close-time').val());$(ev).attr('open-time-2',$('input.open-time-2').val());$(ev).attr('close-time-2',$('input.close-time-2').val());$(ev).addClass('recent');}else{$('input.open-time').val('');$('input.close-time').val('');$('input.open-time-2').val('');$('input.close-time-2').val('');$(ev).attr('open-time','');$(ev).attr('close-time','');$(ev).attr('open-time-2','');$(ev).attr('close-time-2','');$('li.bdate').each(function(){if($(this).hasClass('active')){active=true;}});if(!active){$('.select-date-all').removeClass('active');$('.select-date-all').text(ae_globals.translate_select);$(".open-block-sep").hide();$(".open-times").hide();}}},buttonDateActive:function(){var active=false;$('li.bdate').each(function(index){if($(this).hasClass('active')){active=true;return;}});if(!active){$('.select-date-all').removeClass('active');$('.select-date-all').text(ae_globals.translate_select);}
return active;},inputOpenTime:function(time,view){var _this=this;var active=this.buttonDateActive();if(time!="--"&&!/^([01]?[0-9]|2[0-4]):[0-5][0-9]$/.test(time)){return;}
if(active){$('li.bdate').each(function(index){if($(this).hasClass('active')){$(this).attr('open-time',time);var open=$(this).attr('open-time');var close=$(this).attr('close-time');if(open=='--'){$(this).attr('open-time','none');$(this).attr('close-time','none');}}});}else{$(view).val("")
$('.close-time').val('');}
this.InputFormDate();},inputOpenTime2:function(time,view){var _this=this;var active=this.buttonDateActive();if(time!="--"&&!/^([01]?[0-9]|2[0-4]):[0-5][0-9]$/.test(time)){return;}
if(active){$('li.bdate').each(function(index){if($(this).hasClass('active')){$(this).attr('open-time-2',time);var open2=$(this).attr('open-time-2');var close2=$(this).attr('close-time-2');if(open2=='--'){$(this).attr('open-time-2','none');$(this).attr('close-time-2','none');}}});}else{$(view).val('');$('.close-time-2').val('');}},inputCloseTime:function(time,view){var _this=this;var active=this.buttonDateActive();if(time!="--"&&!/^([01]?[0-9]|2[0-4]):[0-5][0-9]$/.test(time)){return;}
if(active){$('li.bdate').each(function(index){if($(this).hasClass('active')){$(this).attr('close-time',time);var open=$(this).attr('open-time');var close=$(this).attr('close-time');if(close=='--'){$(this).attr('open-time','none');$(this).attr('close-time','none');}else{if(open=='--'||open==''){$(this).attr('open-time','none');$(this).attr('close-time','none');}else{}}}});}else{$(view).val("");$('.open-time').val('');}
this.InputFormDate();},inputCloseTime2:function(time,view){var _this=this;var active=this.buttonDateActive();if(time!="--"&&!/^([01]?[0-9]|2[0-4]):[0-5][0-9]$/.test(time)){return;}
if(active){$('li.bdate').each(function(index){if($(this).hasClass('active')){$(this).attr('close-time-2',time);var open=$(this).attr('open-time');var close=$(this).attr('close-time');var open2=$(this).attr('open-time-2');var close2=$(this).attr('close-time-2');if(close2=='--'){$(this).attr('open-time-2','none');$(this).attr('close-time-2','none');}else{if(open2=='--'||open2==''){$(this).attr('open-time-2','none');$(this).attr('close-time-2','none');}else{}}}});$('.select-date-all').removeClass('active');$('.select-date-all').text(ae_globals.translate_select);}else{$(view).val('');$('.open-time-2').val('');}},InputFormDate:function(){$('li.bdate').each(function(index){var open=$(this).attr('open-time'),close=$(this).attr('close-time'),open2=$(this).attr('open-time-2'),close2=$(this).attr('close-time-2'),text=$(this).data('name');if(open!=''&&close!=''&&open2!=''&&close2!=''){$('input[name="serve_time['+text+']"]').val(open+' to '+close+' and '+open2+' to '+close2);}else if(open!=''&&close!=''){$('input[name="serve_time['+text+']"]').val(open+' to '+close);}else{$('input[name="serve_time['+text+']"]').val('');}});},resetAllDate:function(){$('li.bdate').each(function(){$(this).removeClass('vbdate').removeClass('nbdate');$(text-heading-stepis).attr('open-time','').attr('open-time-2','').attr('close-time','').attr('close-time-2','').attr('data-original-title','');var text=$(this).text();});$('.time-picker').val('');$('.open-input input').val('');},setClaimable:function(event){event.preventDefault();var value=$("#et_claimable_value");value.val(value.val()==0?1:0);},initMap:function(){var view=this;setTimeout(function(){view.map.refresh();if($('#et_location_lat').val()!==''&&$('#et_location_lng').val()!==''){var lat=$('#et_location_lat').val(),lng=$('#et_location_lng').val();view.map.setCenter(lat,lng);view.map.setZoom(15);view.map.addMarker({lat:lat,lng:lng,draggable:true,dragend:function(e){var location=e.latLng;$('#et_location_lat').val(location.lat());$('#et_location_lng').val(location.lng());view.model.set('et_location_lat',location.lat());view.model.set('et_location_lng',location.lng());}});}},500);},gecodeMap:function(event){$('#map').slideDown();var cp=$("#et_full_location").val();var dir=$("#et_full_location2").val();if(cp.length<5)return;var address=dir+", "+cp+", España",view=this;if(typeof(GMaps)!=='undefined'){GMaps.geocode({address:address,callback:function(results,status){if(status==='OK'){var latlng=results[0].geometry.location;$('#et_location_lat').val(latlng.lat());$('#et_location_lng').val(latlng.lng());view.model.set('et_location_lng',latlng.lng());view.model.set('et_location_lat',latlng.lat());view.map.setZoom(14);view.map.setCenter(latlng.lat(),latlng.lng());view.map.removeMarkers();view.map.addMarker({lat:latlng.lat(),lng:latlng.lng(),draggable:true,dragend:function(e){var location=e.latLng;$('#et_location_lat').val(location.lat());$('#et_location_lng').val(location.lng());view.model.set('et_location_lat',location.lat());view.model.set('et_location_lng',location.lng());}});var country;for(i=0;i<results[0].address_components.length;i++){for(j=0;j<results[0].address_components[i].types.length;j++){if(results[0].address_components[i].types[j]=="country")
country=results[0].address_components[i].short_name}}
if(country=="ES"){var provincia;for(i=0;i<results[0].address_components.length;i++){for(j=0;j<results[0].address_components[i].types.length;j++){if(results[0].address_components[i].types[j]=="administrative_area_level_2")
provincia=results[0].address_components[i].short_name}}
if($("#location.location_popup ."+provincia.toLowerCase()).val()!=='undefined'){var value_provincia=jQuery("#location.location_popup ."+provincia.toLowerCase()).val();$('#location.location_popup').val(value_provincia);$('#location.location_popup').trigger("chosen:updated");$('#location.location_popup').parent().removeClass("error");$('#location.location_popup').parent().find("div.message").remove();}
else{$('#location.location_popup').val(-1);$('#location.location_popup').trigger("chosen:updated");}}
else{$('#location.location_popup').val(-1);$('#location.location_popup').trigger("chosen:updated");}}}});}},initValidator:function(){$("form#submit_form").validate({ignore:"",rules:{post_title:{required:true,maxlength:65,minlength:5,remote:{url:ae_globals.ajaxURL,type:"post",data:{post_title:function(){return $("#post_title").val();},is_ajax:true,post_id:($('.postdata').length)?JSON.parse($('.postdata').html())[0].ID:JSON.parse($('#place_id').html()).ID,action:'checkIfExistTitle'}}},et_full_location:{required:true,number:true,maxlength:5,minlength:5},place_category:"required",post_content:"required",et_have_image:{required:function(){if(getIfApp==0){return true;}else{return false;}}},location:"required",tipo_reserva:"required",hourly_rate1:{required:{depends:function(element){return jQuery("input[type='radio']:checked").val()=="horas"||jQuery("input[type='radio']:checked").val()=="servicio"}},number:true},duracion_servicio:{required:{depends:function(element){return jQuery("input[type='radio']:checked").val()=="servicio"}}},et_phone:{number:true,minlength:9,maxlength:9},et_url:{url2:true},et_fb_url:{url2:true},et_google_url:{url2:true},et_twitter_url:{url2:true},alguna_opcion_date_seleccionada:"required"},errorPlacement:function(label,element){if(element.is("textarea")){$(".message_error_textarea").closest('div.row').append(label);}else{$(element).closest('div.row').append(label);}
AE.pubsub.trigger('ae:notification',{msg:ae_globals.error,notice_type:'error'});},focusInvalid:true,invalidHandler:function(form,validator){}});},submitPost:function(event){event.preventDefault();var view=this,temp=new Array();view.$el.find('ul.date-list li.bdate').each(function(){var name=$(this).data('name'),open_time=$(this).attr('open-time'),close_time=$(this).attr('close-time'),open_time_2=$(this).attr('open-time-2'),close_time_2=$(this).attr('close-time-2');view.model.set('serve_time['+name+'][open_time]',open_time);view.model.set('serve_time['+name+'][close_time]',close_time);view.model.set('serve_time['+name+'][open_time_2]',open_time_2);view.model.set('serve_time['+name+'][close_time_2]',close_time_2);});view.$el.find('input[type=text],input[type=hidden],textarea,select').each(function(){view.model.set($(this).attr('name'),$(this).val());});view.$el.find('input[type=checkbox]').each(function(){var name=$(this).attr('name');view.model.set(name,[]);});view.$el.find('input[type=checkbox]:checked').each(function(){var name=$(this).attr('name');if(name==="et_claimable_check"){return false;}
if(typeof temp[name]!=='object'){temp[name]=new Array();}
temp[name].push($(this).val());view.model.set(name,temp[name]);});view.$el.find('input[type=radio]:checked').each(function(){view.model.set($(this).attr('name'),$(this).val());});if(view.model.get('et_full_location2')!=""){view.model.set('et_full_location',view.model.get('et_full_location2')+", "+view.model.get("et_full_location"));}
else{view.model.set('et_full_location',view.model.get("et_full_location"));}
if(getIfApp!=0){view.model.set('isAPP',1);}
view.model.save('','',{beforeSend:function(){view.loading();},success:function(result,res){view.finish();if(res.success){if(ae_globals.is_single){window.location.reload();}
view.closeModal();view.success(res);view.model.fetch();}else{view.error(res);}}});},removeCover:function(event){event.preventDefault();var view=this,$target=$(event.currentTarget),id=view.model.get('cover_image');$.ajax({type:'post',url:ae_globals.ajaxURL,data:{action:'ae_remove_carousel',id:id},beforeSend:function(){view.blockUi.block($target);},success:function(){view.blockUi.unblock();view.model.set('cover_image','');view.model.set('cover_image_url','');view.model.save();view.$('#cover_background').css('background','');$('#cover_thumb').remove();}});},updateVideoPosition:function(event){var $target=$(event.currentTarget);if($target.val()==='left'){this.$('.img-preview img').removeClass('right-img-preview').addClass('left-img-preview');}
if($target.val()==='right'){this.$('.img-preview img').removeClass('left-img-preview').addClass('right-img-preview');}},onCreateCalender:function(model){this.model=model;this.openModal();this.setupFields();this.initMap();},onEdit:function(model){this.model=model;this.openModal();this.setupFields();this.initMap();var _this=this;this.$('.open-time').on('change',function(){var open=$(this).val();_this.inputOpenTime(open,this);});this.$('.open-time-2').on('change',function(){var open=$(this).val();_this.inputOpenTime2(open,this);});this.$('.close-time').on('change',function(){var close=$(this).val();_this.inputCloseTime(close,this);});this.$('.close-time-2').on('change',function(){var close=$(this).val();_this.inputCloseTime2(close,this);});},setupFields:function(){var view=this,form_field=view.$('.form-field'),location=this.model.get('location'),cover_image=view.model.get('cover_image_url');AE.pubsub.trigger('AE:beforeSetupFields',this.model);this.$('.open-time').timepicker({'appendTo':'.container-open-time','minTime':'0','maxTime':'14','lang':{'am':' AM','pm':' PM'},'timeFormat':"H:i",'step':60,'noneOption':[{'label':'--','value':''}]});this.$('.close-time').timepicker({'lang':{'am':' AM','pm':' PM'},'appendTo':'.container-close-time','timeFormat':"H:i",'minTime':'0','maxTime':'14','step':60,'noneOption':[{'label':'--','value':''}]});this.$('#datepair-time-one').datepair();$('.open-time-2').timepicker({'timeFormat':"H:i",'appendTo':'.container-open-time-2','minTime':'14','maxTime':'0','step':60,'lang':{'am':'AM','pm':'PM'},'noneOption':[{'label':'--','value':''}]});$('.close-time-2').timepicker({'timeFormat':"H:i",'appendTo':'.container-close-time-2','minTime':'14','maxTime':'0','step':60,'lang':{'am':' AM','pm':' PM'},'noneOption':[{'label':'--','value':''}]});this.$('#datepair-time-two').datepair();if(view.model.get('et_claimable')==1){form_field.find('input#et_claimable').prop('checked',true);}
form_field.find('input#et_claimable_value').val(view.model.get('et_claimable')?1:0);form_field.find('input[type="text"],input[type="hidden"], textarea,select').each(function(){var $input=$(this);var name=$input.attr('name');$input.val(view.model.get(name));if($input.get(0).nodeName==="SELECT"){$input.trigger('chosen:updated');}});form_field.find('input[type="radio"]').each(function(){var $input=$(this),name=$input.attr('name');if($input.val()==view.model.get(name)){$input.attr('checked',true);}});form_field.find('input[type="checkbox"]').each(function(){var $input=$(this),name=$input.attr('name');if($.inArray(parseInt($input.val()),view.model.get(name))>-1){$input.attr('checked',true);}});if($("input[name='tipo_reserva']:checked").val()=='horas'){$('.tipo_servicio_hora').show();$(".tipo_servicio_hora .tiempo_servicio").hide()}
if($("input[name='tipo_reserva']:checked").val()=='servicio'){$('.tipo_servicio_hora').show();$(".tipo_servicio_hora .tiempo_servicio").show()}
if(view.model.get('video_position')==='left'){this.$('.img-preview img').removeClass('right-img-preview').addClass('left-img-preview');}else{this.$('.img-preview img').removeClass('left-img-preview').addClass('right-img-preview');}
if(cover_image){view.$('#cover_background').css('background','url('+cover_image+') no-repeat center center / cover cadetblue');}else{view.$('#cover_background').css('background','#ccc');}
if(typeof tinyMCE!=='undefined'){tinymce.EditorManager.get('post_content').setContent(view.model.get('unfiltered_content'));}
if(typeof view.carousels==='undefined'){view.carousels=new Views.Carousel({el:$('#gallery_container'),name_item:'et_carousel',uploaderID:'carousel',model:view.model});}else{view.carousels.setModel(view.model);view.carousels.setupView();}
var $container=view.$('#cover_container');if(typeof view.uploader==='undefined'){view.uploader=new Views.File_Uploader({el:$container,uploaderID:'cover',thumbsize:'medium',multipart_params:{_ajax_nonce:$container.find('.et_ajaxnonce').attr('id'),data:'cover',imgType:'cover'},cbUploaded:function(up,file,res){if(res.success){$('#'+this.container).parents('.desc').find('.error').remove();}else{$('#'+this.container).parents('.desc').append('<div class="error">'+res.msg+'</div>');}},beforeSend:view.cbBeforeSend,success:view.cbSuccess});}
var serve_time=view.model.get('serve_time');if(!$.isEmptyObject(serve_time)){form_field.find('ul.date-list li.bdate').each(function(){var name=$(this).data('name');object=serve_time[name],open_time=object.open_time,close_time=object.close_time;open_time_2=object.open_time_2,close_time_2=object.close_time_2;if(open_time)
form_field.find('input.open-time').val(open_time);if(close_time)
form_field.find('input.close-time').val(close_time);if(open_time_2)
form_field.find('input.open-time-2').val(open_time_2);if(close_time_2)
form_field.find('input.close-time-2').val(close_time_2);if((open_time!=""&&close_time!="")||(open_time_2!=""&&close_time_2!="")){$(this).addClass('active');$(this).attr('open-time',open_time);$(this).attr('close-time',close_time);$(this).attr('open-time-2',open_time_2);$(this).attr('close-time-2',close_time_2);$("#alguna_opcion_date_seleccionada").val(1);}});}else{form_field.find('ul.date-list li.bdate').each(function(){$(this).removeClass('vbdate');$(this).next().removeClass('nbdate');$(this).attr('data-original-title',"");$(this).attr('open-time',"");$(this).attr('close-time',"");$(this).attr('open-time-2',"");$(this).attr('close-time-2',"");});}
var et_full_location=view.model.get('et_full_location');if(et_full_location.length>0){var direccion=et_full_location;if(direccion.match(/\d{5}/)){var cp=direccion.match(/\d{5}/)[0];if(cp.length>0){this.$('#et_full_location').val(cp);var dash=direccion.indexOf(', ');if(dash>0){var calle=direccion.substring(0,dash);this.$('#et_full_location2').val(calle);}}}}
if(view.model.get('et_have_car').length>0){var cadena=view.model.get('et_have_car');jQuery('#et_have_car_sel').val(cadena).trigger('chosen:updated');}
if($('#DOPBSP-calendar-ID').val()!=""){var calendario=$('#DOPBSP-calendar-ID').val();view.model.set('DOPBSP-calendar-ID',calendario);this.$('#DOPBSP-calendar-ID').val(calendario);}
AE.pubsub.trigger('AE:afterSetupFields',this.model);},resetUploader:function(){if(typeof this.uploader==='undefined'){return;}
this.uploader.controller.splice();this.uploader.controller.refresh();this.uploader.controller.destroy();},cbSuccess:function(res){var view=this;view.blockUi.unblock();view.model.set('cover_image',res.data.attach_id);view.model.set('cover_image_url',res.data.full[0]);view.$('#cover_background').css('background','url('+res.data.full[0]+') no-repeat center center / cover cadetblue');view.model.set('uploadingCarousel',false);},cbBeforeSend:function(ele){var view=this;button=$(ele).find('.image');view.blockUi.block(button);view.model.set('uploadingCarousel',true);}});Views.SearchForm=Backbone.View.extend({el:'#header-wrapper',events:{'click .top-menu-center li':'hideTopActive','click .top-user':'hideTopActive','click .top-active':'triggerTopActive'},initialize:function(){_.bindAll(this,'showMap','errorHandle');var view=this;this.$('.slider-ranger').on('slide',function(ev){var value=ev.value;$('#'+$(this).attr('data-name')).val(value);$('.'+$(this).attr('data-name')).html(value);});this.$('.nearby').on('slideStart',function(){navigator.geolocation.getCurrentPosition(view.showMap,view.errorHandle);});this.$('form').validate();},showMap:function(position){geolocalizacion(0,0);},errorHandle:function(){alert("Ha rechazado la solicitud de Geolocalización. Para utilizar esta función, habilítela.");},hideSearchForm:function(){$btn_topsearch=$('ul.top-menu-right li.top-search');$marsk=$('.marsk-black');$option_search=$('.option-search-form-wrapper');$btn_topsearch.removeClass('active');$option_search.hide();$marsk.fadeOut();},triggerSearchForm:function(){$option_search=$('.option-search-form-wrapper');$marsk=$('.marsk-black');$btn_topsearch=$('ul.top-menu-right li.top-search');$marsk.fadeToggle(300);$btn_topsearch.toggleClass('active');$option_search.slideToggle(300,'easeInOutSine',function(){$('.slider-ranger').slider({tooltip:'always'});});},triggerTopActive:function(e){var _this=this;var ev=e.currentTarget;_this.hideTopActive(e);var attr=$(ev).attr('data-name');$(ev).toggleClass('active');$marsk=$('.marsk-black');$marsk.fadeToggle(300);if(attr=='search'){$option_search=$('.option-search-form-wrapper');$option_search.slideToggle(300,'easeInOutSine',function(){$('.slider-ranger').slider({tooltip:'always'});});}else{$option_active=$('.option-contact-'+attr);$option_active.slideToggle(300,'easeInOutSine');}},hideTopActive:function(e){var ev=e.currentTarget;var attr=$(ev).attr('data-name');$('li.top-active').each(function(index){var _attr=$(this).attr('data-name');if(_attr!=attr&&$(this).hasClass('active')){$(this).removeClass('active');$option_active=$('.option-contact-'+_attr);$option_active.hide();$marsk=$('.marsk-black');$marsk.fadeOut();}});}});Views.Front=Backbone.View.extend({el:'body',model:[],events:{'click a.authenticate':'openAuthModal','click a.contact-owner':'openContactModal','click a.page_link_sign_up':'openSingup','click a.page_link_forgot_pass':'openForgot','click a.page_link_sign_in':'openSingin','submit form.signin_form':'doLogin','submit form.signup_form':'doRegister','submit form.forgotpass_form':'doSendPassword','click a.resend-activation-code':'resendActivationCode','click a.activation-notification-close':'closeActivationMessage','click #location_chosen':'changeIcon'},initialize:function(options){_.bindAll(this,'editPost','updateAuthButtons','createEvent','rejectPost','handleLogout','loadNearby');this.blockUi=new Views.BlockUi();var view=this;this.options=_.extend(this,options);if(typeof $.validator!=='undefined'){$.validator.setDefaults({onsubmit:true,onfocusout:function(element,event){if(!this.checkable(element)&&element.tagName.toLowerCase()==='textarea'){this.element(element);}else if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},validClass:"valid",errorClass:"message",errorElement:'div',errorPlacement:function(error,element){$(element).closest('div').append(error);},highlight:function(element,errorClass,validClass){var $container=$(element).closest('div');if(!$container.hasClass('error')){$container.addClass('error').removeClass(validClass);}},unhighlight:function(element,errorClass,validClass){var $container=$(element).closest('div');if($container.hasClass('error')){$container.removeClass('error').addClass(validClass);}
$container.find('div.message').remove().end().find('i.fa').remove();}});}
this.noti_templates=new _.template('<div class="notification autohide {{= type }}-bg">'+'<div class="main-center">'+'{{= msg }}'+'</div>'+'</div>');this.model=new Models.User();AE.pubsub.on('ae:model:onEdit',this.editPost,this);AE.pubsub.on('ae:model:onReject',this.rejectPost,this);AE.pubsub.on('ae:model:onCreateCalender',this.createCalender,this);AE.pubsub.on('ae:model:onCreateEvent',this.createEvent,this);AE.pubsub.on('ae:notification',this.showNotice,this);AE.pubsub.on('ae:user:logout',this.handleLogout,this);AE.pubsub.on('ae:user:auth',this.handleAuth,this);this.user.on('change:ID',this.updateAuthButtons);this.$('.chosen-single').chosen({width:'270px',max_selected_options:1});this.$('.chosen-single-category').dropsingle();this.$('.chosen-single_category').dropsingle();this.$('.chosen-single_category2').dropsingle();this.$('.chosen-single_category2').click();this.$('.multi-tax-item').drop();$(".search-category input").focus(function(){$(this).blur();});this.$('.chosen-multi').chosen({width:'95%',inherit_select_classes:true});$('select[name="serve_day"]').on('change',function(event,params){var $container=$(this).closest('div').find('.chosen-drop');if(typeof params.selected!=='undefined'&&parseInt(params.selected)===0){$container.hide();}
if(typeof params.deselected!=='undefined'&&parseInt(params.deselected)===0){$container.show();}});$('select.chosen, select.chosen-single').on('change',function(event,params){if(typeof params.selected!=='undefined'){var $container=$(this).closest('div');if($container.hasClass('error')){$container.removeClass('error');}
$container.find('div.message').remove().end().find('i.fa').remove();}});$('.rate-it').raty({readOnly:true,half:true,score:function(){return $(this).attr('data-score');},hints:raty.hint});$('.rating-it').raty({half:true,hints:raty.hint});$('.fancybox').magnificPopup({type:'image',gallery:{enabled:true},});this.search_form=new Views.SearchForm();},loadNearby:function(coords){$('.nearby-block').each(function(){var view=this,thisContent=this;$(this).find('.first_text').html('');PostItem=Views.PostItem.extend({template:_.template($('#ae-place-nearby-loop').html()),onItemBeforeRender:function(){},onItemRendered:function(){var view=this;st=$(thisContent).find('input[name="style"]').val();if(typeof st!=='undefined'&&st==='vertical'){view.$el.removeClass('col-md-3 col-xs-6');}
view.$el.find('.content-place').remove();view.$('.rate-it').raty({half:true,score:view.model.get('rating_score'),readOnly:true,hints:raty.hint});if(parseInt(ae_globals.geolocation)===1){var location_lat,location_lng;if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){location_lat=position.coords.latitude;location_lng=position.coords.longitude;lat_item=view.model.get('et_location_lat');lng_item=view.model.get('et_location_lng');var dist=distance(lat_item,lng_item,location_lat,location_lng);view.$el.find('.distance').text(dist+' -');});}}}});view.nearbyCollection=new Collections.Posts();nearbyList=Views.ListPost.extend({tagName:'ul',itemView:PostItem,itemClass:'place-item'});new nearbyList({itemView:PostItem,collection:view.nearbyCollection,el:$(this).find('ul')});new Views.BlockControl({collection:view.nearbyCollection,el:$(this),});var data={query:{post_type:'place',paginate:'page',showposts:$(this).find('input[name="showposts"]').val(),radius:$(this).find('input[name="radius"]').val(),near_lat:coords.coords.latitude,near_lng:coords.coords.longitude},paginate:'page'};view.nearbyCollection.fetch({data:data});});},errorloadNearby:function(){},showNotice:function(params){var view=this;$('div.notification').remove();var notification=$(view.noti_templates({msg:params.msg,type:params.notice_type}));if($('#wpadminbar').length!==0){notification.addClass('having-adminbar');}
notification.hide().prependTo('body').fadeIn('fast').delay(3000).fadeOut(3000,function(){$(this).remove();});},handleAuth:function(model,resp){if(resp.success){AE.pubsub.trigger('ae:notification',{msg:resp.msg,notice_type:'success'});var data=resp.data;if(data.role==="administrator"){$('.field-claimable').show();}
if(!ae_globals.is_submit_post){window.location.reload();}
if(!ae_globals.user_confirm){this.model.set(resp.data);}
if(typeof data.redirect_url!=='undefined'){window.location.href=data.redirect_url;}}else{AE.pubsub.trigger('ae:notification',{msg:resp.msg,notice_type:'error'});}},handleLogout:function(data){this.model.clear();AE.pubsub.trigger('ae:notification',{msg:data.msg,notice_type:'success'});if(!ae_globals.is_submit_post){window.location.href=ae_globals.homeURL;}},updateAuthButtons:function(model){if($('#header_login_template').length>0){if($('.top-user').length>0){return;}
this.$('.non-login').remove();var header_template=_.template($('#header_login_template').html());this.$('.top-menu-right').append(header_template(model.attributes));}},editPost:function(model){if(model.get('post_type')==='place'){if(typeof this.editModal==='undefined'){this.editModal=new Views.EditPost({el:$('#edit_'+model.get('post_type'))});}
this.editModal.onEdit(model);}
if(model.get('post_type')==='event'){if(typeof this.createEventModal==='undefined'){this.createEventModal=new Views.CreateEvent({el:$('#create_event')});}
this.createEventModal.onEditEvent(model);}},createEvent:function(model){if(typeof this.createEventModal==='undefined'){this.createEventModal=new Views.CreateEvent({el:$('#create_event')});}
this.createEventModal.onCreateEvent(model);},createCalender:function(model){if(typeof this.createCalenderModal==='undefined'){this.createCalenderModal=new Views.CreateCalender({el:$('#create_calender')});}
this.createCalenderModal.onCreateCalender(model);},rejectPost:function(model){if(typeof this.rejectModal==='undefined'){this.rejectModal=new Views.RejectPostModal({el:$('#reject_post')});}
this.rejectModal.onReject(model);},openAuthModal:function(event){event.preventDefault();this.authModal=new Views.AuthModal({el:$('#login_register'),model:this.user});this.authModal.openModal();},openContactModal:function(event){event.preventDefault();var $target=$(event.currentTarget);if(typeof this.editContactmodal==='undefined'){this.editContactmodal=new Views.ContactModal({el:$("#contact_message"),model:this.user,user_id:$target.attr('data-user')});}
this.editContactmodal.user_id=$target.attr('data-user');this.editContactmodal.openModal();},openSingup:function(event){event.preventDefault();$('#page_signin_form').fadeOut("slow",function(){$(this).css({'z-index':1});$('.modal-title-sign-in').empty().text(de_front.texts.sign_up);$('#page_signup_form').fadeIn(500).css({'z-index':2});});},openForgot:function(event){event.preventDefault();$('#page_signin_form').fadeOut("slow",function(){$(this).css({'z-index':1});$('.modal-title-sign-in').empty().text(de_front.texts.forgotpass);$('#page_forgotpass_form').fadeIn(500).css({'z-index':2});});},openSingin:function(event){event.preventDefault();$('#page_signup_form').fadeOut("slow",function(){$(this).css({'z-index':1});$('.modal-title-sign-in').empty().text(de_front.texts.sign_in);$('#page_forgotpass_form').fadeOut(500).css({'z-index':2});$('#page_signin_form').fadeIn(500).css({'z-index':2});});},initValidator:function(){this.login_validator=$("form.signin_form").validate({rules:{user_login:"required",user_pass:"required"}});this.register_validator=$("form.signup_form").validate({ignore:".ignore",rules:{user_login:"required",user_pass:"required",user_email:{required:true,email:true},re_password:{required:true,equalTo:"#reg_pass"},recaptcha_register_1:"required"}});this.forgot_validator=$("form.forgotpass_form").validate({rules:{email:{required:true,email:true},}});},doLogin:function(event){event.preventDefault();event.stopPropagation();this.initValidator();var form=$(event.currentTarget),button=form.find('input.btn-submit'),view=this;form.find('input, textarea, select').each(function(){view.user.set($(this).attr('name'),$(this).val());});if(this.login_validator.form()&&!form.hasClass("processing")){this.user.set('do','login');this.user.request('read',{beforeSend:function(){view.blockUi.block(button);form.addClass('processing');},success:function(user,status,jqXHR){view.blockUi.unblock();form.removeClass('processing');AE.pubsub.trigger('ae:user:auth',user,status,jqXHR);view.closeModal();}});}},doRegister:function(event){event.preventDefault();event.stopPropagation();this.initValidator();var form=$(event.currentTarget),button=form.find('input.btn-submit'),view=this;form.find('input, textarea, select').each(function(){view.user.set($(this).attr('name'),$(this).val());});if(this.register_validator.form()&&!form.hasClass("processing")){this.user.set('do','register');this.user.request('create',{beforeSend:function(){view.blockUi.block(button);form.addClass('processing');},success:function(user,status,jqXHR){view.blockUi.unblock();form.removeClass('processing');AE.pubsub.trigger('ae:user:auth',user,status,jqXHR);view.closeModal();}});}},doSendPassword:function(event){event.preventDefault();event.stopPropagation();this.initValidator();var form=$(event.currentTarget),email=form.find('input.email').val(),button=form.find('input.btn-submit'),view=this;if(this.forgot_validator.form()&&!form.hasClass("processing")){this.user.set('user_login',email);this.user.set('do','forgot');this.user.request('read',{beforeSend:function(){view.blockUi.block(button);form.addClass('processing');},success:function(user,status){form.removeClass('processing');view.blockUi.unblock();if(status.success){view.closeModal();AE.pubsub.trigger('ae:notification',{msg:status.msg,notice_type:'success'});}else{AE.pubsub.trigger('ae:notification',{msg:status.msg,notice_type:'error'});}}});}},resendActivationCode:function(){var view=this;if($('#user_id').length>0){view.user=new Models.User(JSON.parse($('#user_id').html()));}else{view.user=new Models.User();}
view.user.confirmMail({beforeSend:function(){view.blockUi.block($('.activation-notification'));},success:function(user,status){if(status.success){AE.pubsub.trigger('ae:notification',{msg:status.msg,notice_type:'success',});view.closeActivationMessage();view.blockUi.unblock();}else{AE.pubsub.trigger('ae:notification',{msg:status.msg,notice_type:'error',});}}});},closeActivationMessage:function(){$('.activation-notification').fadeOut(300);},changeIcon:function(event){var $target=$(event.currentTarget);if($target.hasClass('chosen-with-drop')){$target.find('.chosen-single div b').attr('class',"fa fa-caret-up");}
else{$target.find('.chosen-single div b').attr('class',"fa fa-caret-down");}}});function IsJsonString(str){try{JSON.parse(str);}catch(e){return false;}
return true;}
var previousScroll=0;$(window).scroll(function(){$el=$('#header-wrapper');var hscroll=$el.height();var currentScroll=$(this).scrollTop();if(currentScroll>previousScroll){$el.removeClass('sticky-scroll');$el.css({'top':-hscroll+'px'});}else{$el.addClass('sticky-scroll');$el.css({'top':'0'});}
previousScroll=currentScroll;});function header_menu(){$el=$('#header-wrapper');$holder=$('#sticky-holder');if($el.length){$el.offset().top;if($(window).scrollTop()>$el.height()&&$el.css('position')!=='fixed'){$el.css({'position':'fixed','top':'0px','opacity':'0'}).animate({opacity:1},500);$el.addClass("sticky");$holder.css({height:$el.height(),display:'block'});}
if($(window).scrollTop()<$el.height()&&$el.css('position')==='fixed'){$el.css({'position':'relative','top':'0px'});$el.removeClass("sticky");$holder.hide();}}}
$(window).scroll(function(){header_menu();});$(window).load(function(){header_menu();});$(document).bind("scrollstart",function(){header_menu();});if($('#gmenu-main').length>0){new gnMenu(document.getElementById('gn-menu'));$gmenu_hover=$('#gmenu-main .gn-menu li.menu-item-has-children');$gmenu_hover.hover(function(){if($(this).find("ul.gn-submenu").length>0){$('#gmenu-main').toggleClass('active');}});}
$(".next-testi").click(function(){owl.trigger('owl.next');});$(".prev-testi").click(function(){owl.trigger('owl.prev');});$(window).load(function(){$('.mask-color').fadeOut('slow');});$('.menu-btn').hover(function(){$btn_topsearch=$('ul.top-menu-right li.top-search');$marsk=$('.marsk-black');$option_search=$('.option-search-form-wrapper');$btn_topsearch.removeClass('active');$option_search.hide();$marsk.fadeOut();});function distance(lat1,lon1,lat2,lon2){var radlat1=Math.PI*lat1/180;var radlat2=Math.PI*lat2/180;var theta=lon1-lon2;var radtheta=Math.PI*theta/180;var dist=Math.sin(radlat1)*Math.sin(radlat2)+Math.cos(radlat1)*Math.cos(radlat2)*Math.cos(radtheta);dist=Math.acos(dist);dist=dist*180/Math.PI;dist=dist*60*1.1515;var unit=ae_globals.units_of_measurement;if(unit==='km'){if(dist<1){dist=Math.ceil(dist*1000)+' m';}else{dist=Math.ceil(dist*1.609)+' Km';}}else{dist=Math.ceil(dist)+' Mi';}
return dist;}
$(document).ready(function(){var h_header=$('#header-wrapper').height();$('#sticky-holder').css({'height':h_header+'px'})
var W_width=$(window).width();var E_width=$('.top-menu-center').width();var R_width=W_width-(E_width+650);if(R_width<0){$('.top-menu-center').addClass('top-menu-center-resp');}
window.addEventListener('resize',function(){var W_width=$(window).width();var R_width=W_width-(E_width+650);if(R_width<0){$('.top-menu-center').addClass('top-menu-center-resp');}else{$('.top-menu-center').removeClass('top-menu-center-resp');}});$('.bar-menu').on('click',function(){$('#menu-header-top').slideToggle('slow');});$('[data-toggle="tooltip"]').tooltip();$('#menu-header-top > li').each(function(index){$(this).find('.dropdown-menu').each(function(index){var mega_ul=$(this);var mega_length=$(this).children().length;var mega_menu=$(this).children();if(mega_length>0){$(mega_ul).wrapAll('<div class="mega-wrapper"></div>').wrapAll('<div class="mega-menu"></div>');var loop=Math.ceil(mega_length/5);for(var i=0;i<loop;i++){$(mega_menu).slice(i*5,(i+1)*5).wrapAll('<ul class="mega-list"></ul>').parent().insertBefore(mega_ul);};$(mega_ul)}
$(this).remove();});});$('.arrow-submenu').on('click',function(event){var _this=$(this).parent()
var hParent=$(_this).parent().hasClass('menu-header-top-desk');var sCurrent=$(_this).hasClass('select');$(this).toggleClass('active');var W_width=$(window).width();$(this).parent().toggleClass('select');var p_menu_width=$(this).parent().width();var p_menu_left=$(this).parent().offset().left;var p_menu_right=W_width-(p_menu_width+p_menu_left);var menu_wrap=$(this).next();var menu=$(this).next().children('.mega-menu');if(hParent){if(sCurrent){$(_this).removeClass('select');$(_this).find('.mega-menu').fadeOut(300);}else{$(_this).siblings().removeClass('select');$(_this).siblings().find('.mega-menu').fadeOut(300);$(menu).slideToggle(300);}}else{console.log("test");$(menu).slideToggle(300);}
var left=$(menu).offset().left;var w_mega=$(menu).width();var right=W_width-(left+w_mega);if(p_menu_left>p_menu_right){if(right<0){$(menu_wrap).css({'right':'-20px','left':'inherit'});$(menu).css({'right':'0px'});left=$(menu).offset().left;if(left<0){while(left<0){w_mega-=248;$(menu).css({'width':w_mega+'px','white-space':'normal'});left=$(menu).offset().left;}}}}else{if(right<0){$(menu_wrap).css({'left':'-20px','right':'inherit'});$(menu).css({'left':'0px'});left=$(menu).offset().left;while(right<0){w_mega-=24;$(menu).css({'width':w_mega+'px','white-space':'normal'});right=W_width-(left+w_mega);}}}
left=$(menu).offset().left;if(left<0){while(left<0){w_mega-=249;$(menu).css({'width':w_mega+'px','white-space':'normal'});left=$(menu).offset().left;}}
if(right<0&&p_menu_left>p_menu_right){$(menu_wrap).css({'right':'-20px','left':'inherit'});$(menu).css({'right':'0px'});left=$(menu).offset().left;if(left<0){while(left<0){w_mega-=249;$(menu).css({'width':w_mega+'px','white-space':'normal'});left=$(menu).offset().left;}}}
if(right<0&&p_menu_left<p_menu_right){$(menu_wrap).css({'left':'-20px','right':'inherit'});$(menu).css({'left':'0px'});while(right<0){w_mega-=249;$(menu).css({'width':w_mega+'px','white-space':'normal'});right=W_width-(left+w_mega);}}
left=$(menu).offset().left;if(left<0){while(left<0){w_mega-=249;$(menu).css({'width':w_mega+'px','white-space':'normal'});left=$(menu).offset().left;}}});$(document.body).on('click',function(event){if(!$(event.target).closest('.select').length){$('.menu-item').removeClass('select');$('.arrow-submenu').removeClass('active');$('.mega-menu').fadeOut(500);}});$('.btn-pending-places').on('click',function(){var check=$('.noti-pending-places-wrap').is(":hidden");if(check){$('body').css('overflow','hidden');}else{$('body').css('overflow','visible');}
$('.noti-pending-places-wrap').slideToggle(1000,function(){if(check==true){$('.noti-marsk-black').fadeIn();}else{$('.noti-marsk-black').fadeOut();}});});$('.noti-marsk-black').on('click',function(){$('body').css('overflow','visible');$('.noti-marsk-black').fadeOut();$('.noti-pending-places-wrap').slideUp(1000);});$('.notification-hide').on('click',function(){$('body').css('overflow','visible');$('.noti-marsk-black').fadeOut();$('.notification-places, .noti-pending-places-wrap').slideUp(1000);$.cookie('view-notification','0');});if(ae_globals.user_ID!=0&&$('#ae-place-notification').length>0){NotificationItem=Views.PostItem.extend({template:_.template($('#ae-place-notification').html()),className:'pending-item',onBeforeApprove:function(view,res){if(res.success){view.el.remove();var number=$('.btn-pending-places number').text()-1;$('.btn-pending-places number').text(number);}},onBeforeApprove:function(view,res){if(res.success){AE.pubsub.trigger('ae:notification',{msg:res.msg,notice_type:'success'});}}});ListNotification=Views.ListPost.extend({tagName:'ul',itemView:NotificationItem,itemClass:'pending-item'});$('.noti-pending-places-wrap').each(function(){if($(this).find('.postdata').length>0){var postdata=JSON.parse($(this).find('.postdata').html()),collection=new Collections.Posts(postdata);var loading_html='<li class="loading-active">'+'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="loading" class="load-place load-place-active" x="0px" y="0px" viewBox="0 0 150 150">'+'<circle id="loading-circle" class="loading-inner loading-inner-active" cx="75" cy="75" r="60"/>'+'<polyline id="loading-check" class="loading-check" fill="none" points="52,63 75,86 101,52" />'+'</svg>'+'</li>';new ListNotification({itemView:NotificationItem,collection:collection,el:$(this).find('ul')});var BlockControlNotification=new Views.BlockControl({collection:collection,el:$(this).find('ul'),onAfterInit:function(){var view=this;setInterval(function(){if($('.list-pending-places .pending-item').length<6&&$('.loading-active').length==0){$('.list-pending-places').append(loading_html);view.loadMore();}},3000);$('.noti-pending-places').mCustomScrollbar({callbacks:{onTotalScroll:function(){if($('.loading-active').length==0&&this.mcs.topPct){$('.list-pending-places').append(loading_html);view.loadMore();}}}});},loadMore:function(){var view=this;view.page++;view.query.paged++;view.collection.fetch({remove:false,data:{query:view.query,page:view.page,paged:view.page,action:'ae-fetch-posts',paginate:true,thumbnail:view.thumbnail,},thumbnail:view.thumbnail,beforeSend:function(){$('.loading-active').show();if($("#loading").length>0){$("#loading").attr('class','load-place');}
$('.noti-pending-places').mCustomScrollbar('scrollTo',['bottom','right']);var el=document.getElementById("loading");},success:function(result,res,xhr){view.blockUi.unblock();if(res.success){if($("#loading-circle").length>0&&$("#loading-check").length>0){$("#loading-circle").attr('class','loading-inner');$("#loading-check").attr('class','loading-check loading-check-active');}
setTimeout(function(){$('.loading-active').remove();$('.list-pending-places').find('.ae_query').remove();$('.list-pending-places').append(res.query_noti);},1000);}else{if($("#loading-circle").length>0&&$("#loading-check").length>0){$("#loading-circle").attr('class','loading-inner');$("#loading-check").attr('class','loading-check loading-check-active');}
setTimeout(function(){$('.loading-active').hide();},1000);}}});}});}});}});})(AE.Views,AE.Models,jQuery,Backbone,AE.Collections);
var $jDOPBSP=jQuery.noConflict();(function($,Views,Models,Collections){$(document).ready(function(){$('.not_is_tablet #main-single .list-option-left').pin({containerSelector:"#main-single",padding:{top:100,bottom:120}});Collections.Events=Backbone.Collection.extend({model:AE.Models.Event,action:'ae-fetch-events',initialize:function(){this.paged=1;}});EventItem=Views.PostItem.extend({template:_.template($('#de-event-item').html()),className:'event-wrapper event-item',onItemRendered:function(){}});ListEvent=Views.ListPost.extend({tagName:'div',itemView:EventItem,itemClass:'event-item'});if($('#block-events .postdata').length>0){var postdata=JSON.parse($('#block-events').find('.postdata').html()),collection=new Collections.Events(postdata);new ListEvent({el:$('#list-events'),collection:collection});}});Views.SinglePost=Backbone.Marionette.View.extend({el:'body.page-template-page-post-place-php',events:{'click a.place-action':'acting',},initialize:function(options){var view=this;_.bindAll(this,'updateUrl');this.options=_.extend(options,this.options);$('.tooltip-style').tooltip();if($('#next_id').length>0){var next=JSON.parse($('#next_id').html());this.next_post=next.id;this.load='next';}
if($('#prev_id').length>0){var prev=JSON.parse($('#prev_id').html());this.prev_post=prev.id;}
view.blockUi=new Views.BlockUi();view.collection=new Collections.Posts();view.collection.add(view.model);$('.popup-video').magnificPopup({type:'iframe'});},acting:function(e){var target=$(e.currentTarget),action=target.attr('data-action'),id=target.parents('.single-place-wrapper').attr('data-id'),model=this.collection.get(id),view=this;switch(action){case'edit_calender':AE.pubsub.trigger('ae:model:onCreateCalender',model);var id=$jDOPBSP('#DOPBSP-calendar-ID').val();DOPBSPBackEnd.toggleMessages('active',DOPBSPBackEnd.text('MESSAGES_LOADING'));DOPBSPBackEndSettings.toggle(id,'calendar');$.post(ajaxurl,{action:'dopbsp_calendar_get_options',id:id},function(data){$('#DOPBSP-column2 .dopbsp-column-content').html('<div id="DOPBSP-calendar"></div>');$('#DOPBSP-calendar').DOPBSPCalendarBackEnd($.parseJSON(data));$.post(ajaxurl,{action:'dopbsp_get_new_reservations',id:id},function(data){if(parseInt(data)!==0){$('#DOPBSP-new-reservations').addClass('dopbsp-new');$('#DOPBSP-new-reservations span').html(data);}});}).fail(function(data){DOPBSPBackEnd.toggleMessages('error',data.status+': '+data.statusText);});break;case'edit':AE.pubsub.trigger('ae:model:onEdit',model);break;case'reject':AE.pubsub.trigger('ae:model:onReject',model);break;case'archive':if(confirm(ae_globals.confirm_message)){model.save('post_status','archive',{beforeSend:function(){},success:function(result,status){if(status.success){AE.pubsub.trigger('ae:notification',{msg:status.msg,notice_type:'success',});window.location.reload();}else{AE.pubsub.trigger('ae:notification',{msg:status.msg,notice_type:'error',});}}});}
break;case'toggleFeature':if(parseInt(model.get('et_featured'))==1){model.set('et_featured',0);}else{model.set('et_featured',1);}
model.save('','',{beforeSend:function(){},success:function(result,status){if(status.success){AE.pubsub.trigger('ae:notification',{msg:status.msg,notice_type:'success',});window.location.reload();}else{AE.pubsub.trigger('ae:notification',{msg:status.msg,notice_type:'error',});}}});break;case'approve':model.save('publish','1',{beforeSend:function(){},success:function(result,status){if(status.success){window.location.href=model.get('permalink');}}});break;default:break;}},slideToReview:function(event){event.preventDefault();var target_offset=$("#review").offset();var target_top=target_offset.top;$('html, body').animate({scrollTop:target_top-200},500,'easeOutExpo');},jumbToReview:function(event){event.preventDefault();var target_offset=$("#review-list").offset();var target_top=target_offset.top;$('html, body').animate({scrollTop:target_top-200},500,'easeOutExpo');},favorite:function(event){event.preventDefault();var $target=$(event.currentTarget),view=this,favorite=new Models.Favorite({comment_post_ID:$target.attr('data-id'),sync:'add'});favorite.save('sync','add',{beforeSend:function(){view.blockUi.block($target);},success:function(result,res,xhr){$target.closest('li').attr('data-original-title',res.text);$target.addClass('loved').removeClass('favorite');$target.attr('data-favorite-id',res.data);view.blockUi.unblock();}});},removeFavorite:function(event){event.preventDefault();var $target=$(event.currentTarget),view=this,favorite=new Models.Favorite({id:$target.attr('data-favorite-id'),ID:$target.attr('data-favorite-id'),sync:'remove'});favorite.save('sync','remove',{beforeSend:function(){view.blockUi.block($target);},success:function(result,res,xhr){$target.closest('li').attr('data-original-title',res.text);$target.addClass('favorite').removeClass('loved');view.blockUi.unblock();}});},editPostSucess:function(model){console.log('a');if(res.success){window.location.reload();}},loadNextPost:function(event){event.preventDefault();var model=this.next_post,$target=$(event.currentTarget),view=this;if(!model){model=this.prev_post;this.load='prev';}
$.ajax({url:ae_globals.ajaxURL,type:'get',data:{action:'de-next-place',id:model,current:view.model.get('id'),load:view.load},beforeSend:function(){view.blockUi.block($target);},success:function(res){view.blockUi.unblock();if(res.success){$('#single-more-place').append(res.content);$('#single-place-'+res.post_id).find('.fancybox').magnificPopup({type:'image',gallery:{enabled:true},});$('.not_is_tablet #single-place-'+res.post_id).find(".list-option-left").pin({containerSelector:'#single-place-'+res.post_id,padding:{top:100,bottom:120}});if(view.load=='next'){view.next_post=res.next;}
if(view.load=='prev'){view.prev_post=res.prev;}
var model=new Models.Post({id:res.post_id,ID:res.post_id,pageTitle:res.pageTitle,link:res.link});document.title=res.pageTitle;window.history.pushState({"html":res.content,"pageTitle":res.pageTitle},"",res.link);view.collection.add(model);view.bindInview();model.fetch();$('.rate-it').raty({readOnly:true,half:true,score:function(){return $(this).attr('data-score');},hints:raty.hint});}else{$target.remove();}}});},bindInview:function(){var view=this;this.$('.single-place-wrapper').bind('inview',view.updateUrl);},updateUrl:function(event,isVisible){var view=this;if(!isVisible){this.inViewVisible=false;return;}
var $target=$(event.currentTarget),id=$target.attr('data-id'),model=this.collection.get(parseInt(id));document.title=model.get('pageTitle');window.history.pushState({"html":$target.html(),"pageTitle":model.get('pageTitle')},"",model.get('link'));}});Models.Favorite=Backbone.Model.extend({action:'ae-sync-favorite',initialize:function(){}});})(jQuery,AE.Views,AE.Models,AE.Collections);function dopbspGetUrlVars(){var vars={};var parts=window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(m,key,value){vars[key]=value;});return vars;};
(function($){$(document).ready(function(e){var sTime=0,cTime=0,sTime2=0,cTime2=0;$('#daysofweek').on('change',function(){var timeOpen=Array(),timeClose=Array(),timeOpen2=Array(),timeClose2=Array();var totDays=0;$("#daysofweek option:selected").each(function(key,val){timeOpen[totDays]=parseInt($(this).attr('data-openingtime'));timeClose[totDays]=parseInt($(this).attr('data-closingtime'));timeOpen2[totDays]=parseInt($(this).attr('data-openingtime2'));timeClose2[totDays]=parseInt($(this).attr('data-closingtime2'));totDays++;});$("#sinceto").html("");$("#untilltime").html("");var timeAr=Array();for(var i=0;i<totDays;i++){var Ar=Array();var k=0;for(var j=timeOpen[i];j<timeClose[i];j++){Ar[k]=j;k++}for(var j=timeOpen2[i];j<timeClose2[i];j++){Ar[k]=j;k++}timeAr[i]=Ar;}if(timeAr.length>1){var cAr=Array();for(var i=0;i<(timeAr.length-1);i++){if(i==0)cAr=timeAr[i];cAr=intersectIntegers(cAr,timeAr[i+1]);}}else{var cAr=timeAr[0];}cAr.sort(function(a,b){return a-b});$.each(cAr,function(inx,itm){$("#sinceto").append("<option value='"+convertHour(itm)+"'>"+convertHour(itm)+"</option>");})
$('#sinceto').css({border:'1px solid blue'});$('#sinceto').removeAttr("disabled");$('#sinceto').change();});$('#sinceto').on('change',function($this){$("#untilltime").html("");var cTime=parseInt($(this).val());var timeAr=Array();var i=0;$("#sinceto option").each(function(){timeAr[i]=parseInt($(this).val());i++;});var flg=1;var lastVal=0;$.each(timeAr,function(key,val){if(cTime==val&&flg===1){$("#untilltime").append("<option value='"+convertHour(val+1)+"'>"+convertHour(val+1)+"</option>");lastVal=val;}if(cTime<=val&&(val-lastVal)==1){$("#untilltime").append("<option value='"+convertHour(val+1)+"'>"+convertHour(val+1)+"</option>");lastVal=val;}})
$('#untilltime').css({border:'1px solid blue'});$('#untilltime').removeAttr("disabled");calPrice();});$('#untilltime').on('change',function($this){calPrice();})
function calPrice(){var fTime=parseInt($("#sinceto option:selected").val());var tTime=parseInt($("#untilltime option:selected").val());var tHour=tTime-fTime;var totDays=$("#daysofweek option:selected").length;tHour=tHour*totDays;if(tHour>=30){var price=$("#hourly_rate30").val();}else if(tHour>=15){var price=$("#hourly_rate15").val();}else if(tHour>=6){var price=$("#hourly_rate6").val();}else{var price=$("#hourly_rate30").val();}tHour=tHour*4;var tPrice=tHour*price;var points=tPrice*3;$("#per_hour_rate").html(points);$("#tot_price").html("Coste "+tPrice+"€ Mensuales");}function intersectIntegers(array1,array2){var seen=[],result=[];for(var i=0;i<array1.length;i++){seen[array1[i]]=true;}for(var i=0;i<array2.length;i++){if(seen[array2[i]])result.push(array2[i]);}return result;}function convertHour(h){var h2='';if(h<10)h2='0'+h+':00';else
h2=h+':00';return h2;}$(".daysofweek").chosen({width:"95%"});});})(jQuery);
var DOPPrototypes=new function(){var $=jQuery.noConflict();this.DOPPrototypes=function(){};this.doHiddenBuster=function(item){var parent=item.parent(),items=new Array();if(item.prop('tagName')!==undefined&&item.prop('tagName').toLowerCase()!=='body'){items=this.doHiddenBuster(parent);}if(item.css('display')==='none'){item.css('display','block');items.push(item);}return items;};this.undoHiddenBuster=function(items){var i;for(i=0;i<items.length;i++){items[i].css('display','none');}};this.openLink=function(url,target){switch(target.toLowerCase()){case'_blank':window.open(url);break;case'_parent':parent.location.href=url;break;case'_top':top.location.href=url;break;default:window.location=url;}};this.randomizeArray=function(theArray){theArray.sort(function(){return 0.5-Math.random();});return theArray;};this.scrollToY=function(position,speed){speed=speed!==undefined?speed:300;$('html').stop(true,true).animate({'scrollTop':position},speed);$('body').stop(true,true).animate({'scrollTop':position},speed);};this.touchNavigation=function(parent,child){var prevX,prevY,currX,currY,touch,childX,childY;parent.bind('touchstart',function(e){touch=e.originalEvent.touches[0];prevX=touch.clientX;prevY=touch.clientY;});parent.bind('touchmove',function(e){touch=e.originalEvent.touches[0];currX=touch.clientX;currY=touch.clientY;childX=currX>prevX?parseInt(child.css('margin-left'))+(currX-prevX):parseInt(child.css('margin-left'))-(prevX-currX);childY=currY>prevY?parseInt(child.css('margin-top'))+(currY-prevY):parseInt(child.css('margin-top'))-(prevY-currY);if(childX<(-1)*(child.width()-parent.width())){childX=(-1)*(child.width()-parent.width());}else if(childX>0){childX=0;}else{e.preventDefault();}if(childY<(-1)*(child.height()-parent.height())){childY=(-1)*(child.height()-parent.height());}else if(childY>0){childY=0;}else{e.preventDefault();}prevX=currX;prevY=currY;if(parent.width()<child.width()){child.css('margin-left',childX);}if(parent.height()<child.height()){child.css('margin-top',childY);}});parent.bind('touchend',function(e){if(!this.isChromeMobileBrowser()){e.preventDefault();}});};this.isAndroid=function(){var isAndroid=false,agent=navigator.userAgent.toLowerCase();if(agent.indexOf('android')!==-1){isAndroid=true;}return isAndroid;};this.isChromeMobileBrowser=function(){var isChromeMobile=false,agent=navigator.userAgent.toLowerCase();if((agent.indexOf('chrome')!==-1||agent.indexOf('crios')!==-1)&&this.isTouchDevice()){isChromeMobile=true;}return isChromeMobile;};this.isIE8Browser=function(){var isIE8=false,agent=navigator.userAgent.toLowerCase();if(agent.indexOf('msie 8')!==-1){isIE8=true;}return isIE8;};this.isIEBrowser=function(){var isIE=false,agent=navigator.userAgent.toLowerCase();if(agent.indexOf('msie')!==-1){isIE=true;}return isIE;};this.isTouchDevice=function(){var os=navigator.platform;if(os.toLowerCase().indexOf('win')!==-1){return window.navigator.msMaxTouchPoints;}else{return'ontouchstart'in document;}},this.deleteCookie=function(name,path,domain){if(this.getCookie(name)){document.cookie=name+'='+((path)?';path='+path:'')+((domain)?';domain='+domain:'')+';expires=Thu, 01-Jan-1970 00:00:01 GMT';}};this.getCookie=function(name){var namePiece=name+"=",cookie=document.cookie.split(";"),i;for(i=0;i<cookie.length;i++){var cookiePiece=cookie[i];while(cookiePiece.charAt(0)===' '){cookiePiece=cookiePiece.substring(1,cookiePiece.length);}if(cookiePiece.indexOf(namePiece)===0){return unescape(cookiePiece.substring(namePiece.length,cookiePiece.length));}}return null;};this.setCookie=function(name,value,expire){var expirationDate=new Date();expirationDate.setDate(expirationDate.getDate()+expire);document.cookie=name+'='+escape(value)+((expire===null)?'':';expires='+expirationDate.toUTCString())+';javahere=yes;path=/';};this.getAMPM=function(time){var hour=parseInt(time.split(':')[0],10),minutes=time.split(':')[1],result='';if(hour===0){result='12';}else if(hour>12){result=this.getLeadingZero(hour-12);}else{result=this.getLeadingZero(hour);}result+=':'+minutes+' '+(hour<12?'AM':'PM');return result;};this.getDatesDifference=function(date1,date2,type,valueType,noDecimals){var y1=date1.split('-')[0],m1=date1.split('-')[1],d1=date1.split('-')[2],y2=date2.split('-')[0],m2=date2.split('-')[1],d2=date2.split('-')[2],time1=(new Date(y1,m1-1,d1)).getTime(),time2=(new Date(y2,m2-1,d2)).getTime(),diff=Math.abs(time1-time2);if(type===undefined){type='seconds';}if(valueType===undefined){valueType='float';}if(noDecimals===undefined){noDecimals=-1;}switch(type){case'days':diff=diff/(1000*60*60*24);break;case'hours':diff=diff/(1000*60*60);break;case'minutes':diff=diff/(1000*60);break;default:diff=diff/(1000);}if(valueType==='float'){return noDecimals===-1?diff:DOPPrototypes.getWithDecimals(diff,noDecimals);}else{return Math.ceil(diff);}};this.getHoursDifference=function(hour1,hour2,type,valueType,noDecimals){var hours1=parseInt(hour1.split(':')[0],10),minutes1=parseInt(hour1.split(':')[1],10),seconds1=hour1.split(':')[2]!==undefined?parseInt(hour1.split(':')[2],10):0,hours2=parseInt(hour2.split(':')[0],10),minutes2=parseInt(hour2.split(':')[1],10),seconds2=hour2.split(':')[2]!==undefined?parseInt(hour2.split(':')[2],10):0,time1,time2,diff;if(type===undefined){type='seconds';}if(valueType===undefined){valueType='float';}if(noDecimals===undefined){noDecimals=-1;}switch(type){case'hours':time1=hours1+minutes1/60+seconds1/60/60;time2=hours2+minutes2/60+seconds2/60/60;break;case'minutes':time1=hours1*60+minutes1+seconds1/60;time2=hours2*60+minutes2+seconds2/60;break;default:time1=hours1*60*60+minutes1*60+seconds1;time2=hours2*60*60+minutes2*60+seconds2;}diff=Math.abs(time1-time2);if(valueType==='float'){return noDecimals===-1?diff:DOPPrototypes.getWithDecimals(diff,noDecimals);}else{return Math.ceil(diff);}};this.getNextDay=function(date){var nextDay=new Date(),parts=date.split('-');nextDay.setFullYear(parts[0],parts[1],parts[2]);nextDay.setTime(nextDay.getTime()+86400000);return nextDay.getFullYear()+'-'+DOPPrototypes.getLeadingZero(nextDay.getMonth())+'-'+DOPPrototypes.getLeadingZero(nextDay.getDate());};this.getNoDays=function(date1,date2){var y1=date1.split('-')[0],m1=date1.split('-')[1],d1=date1.split('-')[2],y2=date2.split('-')[0],m2=date2.split('-')[1],d2=date2.split('-')[2],time1=(new Date(y1,m1-1,d1)).getTime(),time2=(new Date(y2,m2-1,d2)).getTime(),diff=Math.abs(time1-time2);return Math.round(diff/(1000*60*60*24))+1;};this.getNoMonths=function(date1,date2){var firstMonth,lastMonth,m,month1,month2,noMonths=0,y,year1,year2;date1=date1<=date2?date1:date2;month1=parseInt(date1.split('-')[1],10);year1=parseInt(date1.split('-')[0],10);month2=parseInt(date2.split('-')[1],10);year2=parseInt(date2.split('-')[0],10);for(y=year1;y<=year2;y++){firstMonth=y===year1?month1:1;lastMonth=y===year2?month2:12;for(m=firstMonth;m<=lastMonth;m++){noMonths++;}}return noMonths;};this.getPrevDay=function(date){var previousDay=new Date(),parts=date.split('-');previousDay.setFullYear(parts[0],parseInt(parts[1])-1,parts[2]);previousDay.setTime(previousDay.getTime()-86400000);return previousDay.getFullYear()+'-'+DOPPrototypes.getLeadingZero(previousDay.getMonth()+1)+'-'+DOPPrototypes.getLeadingZero(previousDay.getDate());};this.getPrevTime=function(time,diff,diffBy){var timePieces=time.split(':'),hours=parseInt(timePieces[0],10),minutes=timePieces[1]===undefined?0:parseInt(timePieces[1],10),seconds=timePieces[2]===undefined?0:parseInt(timePieces[2],10);switch(diffBy){case'seconds':seconds=seconds-diff;if(seconds<0){seconds=60+seconds;minutes=minutes-1;if(minutes<0){minutes=60+minutes;hours=hours-1<0?0:hours-1;}}break;case'minutes':minutes=minutes-diff;if(minutes<0){minutes=60+minutes;hours=hours-1<0?0:hours-1;}break;default:hours=hours-diff<0?0:hours-diff;}return this.getLeadingZero(hours)+(timePieces[1]===undefined?'':':'+this.getLeadingZero(minutes)+(timePieces[2]===undefined?'':':'+this.getLeadingZero(seconds)));};this.getToday=function(){var today=new Date();return today.getFullYear()+'-'+DOPPrototypes.getLeadingZero(today.getMonth()+1)+'-'+DOPPrototypes.getLeadingZero(today.getDate());};this.getWeekDay=function(date){var months=['January','February','March','April','May','June','July','August','September','October','November','December'],year=date.split('-')[0],month=date.split('-')[1],day=date.split('-')[2],newDate=new Date(eval('"'+day+' '+months[parseInt(month,10)-1]+', '+year+'"'));return newDate.getDay();};this.$_GET=function(name){var url=window.location.href.split('?')[1],variables=url!==undefined?url.split('&'):[],i;for(i=0;i<variables.length;i++){if(variables[i].indexOf(name)!==-1){return variables[i].split('=')[1];break;}}return undefined;};this.acaoBuster=function(url){var browserURL=window.location.href,pathPiece1='',pathPiece2='';if(this.getDomain(browserURL)===this.getDomain(url)){if(url.indexOf('https')!==-1||url.indexOf('http')!==-1){if(browserURL.indexOf('http://www.')!==-1){pathPiece1='http://www.';}else if(browserURL.indexOf('http://')!==-1){pathPiece1='http://';}else if(browserURL.indexOf('https://www.')!==-1){pathPiece1='https://www.';}else if(browserURL.indexOf('https://')!==-1){pathPiece1='https://';}if(url.indexOf('http://www.')!==-1){pathPiece2=url.split('http://www.')[1];}else if(url.indexOf('http://')!==-1){pathPiece2=url.split('http://')[1];}else if(url.indexOf('https://www.')!==-1){pathPiece2=url.split('https://www.')[1];}else if(url.indexOf('https://')!==-1){pathPiece2=url.split('https://')[1];}return pathPiece1+pathPiece2;}else{return url;}}else{return url;}};this.getDomain=function(url){var domain=url;domain=domain.replace(new RegExp(/^\s+/),"");domain=domain.replace(new RegExp(/\s+$/),"");domain=domain.replace(new RegExp(/\\/g),"/");domain=domain.replace(new RegExp(/^http\:\/\/|^https\:\/\/|^ftp\:\/\//i),"");domain=domain.replace(new RegExp(/^www\./i),"");domain=domain.replace(new RegExp(/\/(.*)/),"");return domain;};this.hasSubdomain=function(url){var subdomain;url=url.replace(new RegExp(/^\s+/),"");url=url.replace(new RegExp(/\s+$/),"");url=url.replace(new RegExp(/\\/g),"/");url=url.replace(new RegExp(/^http\:\/\/|^https\:\/\/|^ftp\:\/\//i),"");url=url.replace(new RegExp(/^www\./i),"");url=url.replace(new RegExp(/\/(.*)/),"");if(url.match(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i))){url=url.replace(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i),"");}else if(url.match(new RegExp(/\.[a-z]{2,4}$/i))){url=url.replace(new RegExp(/\.[a-z]{2,4}$/i),"");}subdomain=(url.match(new RegExp(/\./g)))?true:false;return(subdomain);};this.rp=function(parent,child,pw,ph,cw,ch,pos,type){var newW=0,newH=0;if(cw<=pw&&ch<=ph){newW=cw;newH=ch;}else{switch(type){case'fill':newH=ph;newW=(cw*ph)/ch;if(newW<pw){newW=pw;newH=(ch*pw)/cw;}break;default:newH=ph;newW=(cw*ph)/ch;if(newW>pw){newW=pw;newH=(ch*pw)/cw;}break;}}child.width(newW);child.height(newH);switch(pos.toLowerCase()){case'bottom':this.rpBottom(parent,child,ph);break;case'bottom-center':this.rpBottomCenter(parent,child,pw,ph);break;case'bottom-left':this.rpBottomLeft(parent,child,pw,ph);break;case'bottom-right':this.rpBottomRight(parent,child,pw,ph);break;case'center':this.rpCenter(parent,child,pw,ph);break;case'left':this.rpLeft(parent,child,pw);break;case'horizontal-center':this.rpCenterHorizontally(parent,child,pw);break;case'middle-left':this.rpMiddleLeft(parent,child,pw,ph);break;case'middle-right':this.rpMiddleRight(parent,child,pw,ph);break;case'right':this.rpRight(parent,child,pw);break;case'top':this.rpTop(parent,child,ph);break;case'top-center':this.rpTopCenter(parent,child,pw,ph);break;case'top-left':this.rpTopLeft(parent,child,pw,ph);break;case'top-right':this.rpTopRight(parent,child,pw,ph);break;case'vertical-center':this.rpCenterVertically(parent,child,ph);break;}};this.rpBottom=function(parent,child,ph){if(ph!==undefined){parent.height(ph);}child.css('margin-top',parent.height()-child.height());};this.rpBottomCenter=function(parent,child,pw,ph){this.rpBottom(parent,child,ph);this.rpCenterHorizontally(parent,child,pw);};this.rpBottomLeft=function(parent,child,pw,ph){this.rpBottom(parent,child,ph);this.rpLeft(parent,child,pw);};this.rpBottomRight=function(parent,child,pw,ph){this.rpBottom(parent,child,ph);this.rpRight(parent,child,pw);};this.rpCenter=function(parent,child,pw,ph){this.rpCenterHorizontally(parent,child,pw);this.rpCenterVertically(parent,child,ph);};this.rpCenterHorizontally=function(parent,child,pw){if(pw!==undefined){parent.width(pw);}child.css('margin-left',(parent.width()-child.width())/2);};this.rpCenterVertically=function(parent,child,ph){if(ph!==undefined){parent.height(ph);}child.css('margin-top',(parent.height()-child.height())/2);};this.rpLeft=function(parent,child,pw){if(pw!==undefined){parent.width(pw);}child.css('margin-left',0);};this.rpMiddleLeft=function(parent,child,pw,ph){this.rpCenterVertically(parent,child,ph);this.rpLeft(parent,child,pw);};this.rpMiddleRight=function(parent,child,pw,ph){this.rpCenterVertically(parent,child,ph);this.rpRight(parent,child,pw);};this.rpRight=function(parent,child,pw){if(pw!==undefined){parent.width(pw);}child.css('margin-left',parent.width()-child.width());};this.rpTop=function(parent,child,ph){if(ph!==undefined){parent.height(ph);}child.css('margin-top',0);};this.rpTopCenter=function(parent,child,pw,ph){this.rpTop(parent,child,ph);this.rpCenterHorizontally(parent,child,pw);};this.rpTopLeft=function(parent,child,pw,ph){this.rpTop(parent,child,ph);this.rpLeft(parent,child,pw);};this.rpTopRight=function(parent,child,pw,ph){this.rpTop(parent,child,ph);this.rpRight(parent,child,pw);};this.cleanInput=function(input,allowedCharacters,firstNotAllowed,min){var characters=input.val().split(''),returnStr='',i,startIndex=0;if(characters.length>1&&characters[0]===firstNotAllowed){startIndex=1;}for(i=startIndex;i<characters.length;i++){if(allowedCharacters.indexOf(characters[i])!==-1){returnStr+=characters[i];}}if(min>returnStr){returnStr=min;}input.val(returnStr);};this.getLeadingZero=function(no){if(no<10){return'0'+no;}else{return no;}};this.getRandomString=function(stringLength,allowedCharacters){var randomString='',charactersPosition,i;allowedCharacters=allowedCharacters!==undefined?allowedCharacters:'0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';for(i=0;i<stringLength;i++){charactersPosition=Math.floor(Math.random()*allowedCharacters.length);randomString+=allowedCharacters.substring(charactersPosition,charactersPosition+1);}return randomString;};this.getShortString=function(str,size){var newStr=new Array(),pieces=str.split(''),i;if(pieces.length<=size){newStr.push(str);}else{for(i=0;i<size-3;i++){newStr.push(pieces[i]);}newStr.push('...');}return newStr.join('');};this.getWithDecimals=function(number,no){no=no===undefined?2:no;return parseInt(number)===number?String(number):parseFloat(number).toFixed(no);};this.validateCharacters=function(str,allowedCharacters){var characters=str.split(''),i;for(i=0;i<characters.length;i++){if(allowedCharacters.indexOf(characters[i])===-1){return false;}}return true;};this.validEmail=function(email){var filter=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;if(filter.test(email)){return true;}return false;};this.stripSlashes=function(str){return(str+'').replace(/\\(.?)/g,function(s,n1){switch(n1){case'\\':return'\\';case'0':return'\u0000';case'':return'';default:return n1;}});};this.getHEXfromRGB=function(rgb){var hexDigits=new Array('0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f');rgb=rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return(isNaN(rgb[1])?'00':hexDigits[(rgb[1]-rgb[1]%16)/16]+hexDigits[rgb[1]%16])+(isNaN(rgb[2])?'00':hexDigits[(rgb[2]-rgb[2]%16)/16]+hexDigits[rgb[2]%16])+(isNaN(rgb[3])?'00':hexDigits[(rgb[3]-rgb[3]%16)/16]+hexDigits[rgb[3]%16]);};this.getIdealTextColor=function(bgColor){var rgb=/rgb\((\d+).*?(\d+).*?(\d+)\)/.exec(bgColor);if(rgb!==null){return parseInt(rgb[1],10)+parseInt(rgb[2],10)+parseInt(rgb[3],10)<3*256/2?'white':'black';}else{return parseInt(bgColor.substring(0,2),16)+parseInt(bgColor.substring(2,4),16)+parseInt(bgColor.substring(4,6),16)<3*256/2?'white':'black';}};return this.DOPPrototypes();};
;(function($){$.fn.drop=function(callback){this.each(function(i,v){$(v).bind('init.drop',$.fn.drop.init).bind('render.drop',$.fn.drop.render).trigger('init.drop');});};$.extend($.fn.drop,{init:function(e){var el=$(this),id=$(el).attr('id'),html='';el.hide();html+='<div class="chosen-container chosen-container-multi chosen" id="'+id+'_drop"><ul class="chosen-choices"><li class="search-field"><input type="text" placeholder="Selecciona aqui las categorias donde quieres aparecer" class="" autocomplete="off" style="width: 25px;"></li></ul><div class="chosen-drop"><ul class="chosen-results main-menu"></ul></div></div>';el.after(html);setTimeout(function(){el.trigger('render.drop');},500);$('#'+id+'_drop input').on('click',function(){$('#'+id+'_drop').addClass('chosen-with-drop chosen-container-active');el.trigger('render.drop');});$('#'+id+'_drop input').on('keyup',function(){var search=$(this).val().toLowerCase();if(search.length!=0){$('#'+id+'_drop .chosen-results li').hide();$('#'+id+'_drop .chosen-results a span').each(function(){var word=$(this).html().toLowerCase();if(word.indexOf(search)>-1){$(this).parents('.chosen-results li').show();$(this).parents('.level-0').addClass('active');$(this).parents('.level-1').addClass('active');}});}else
el.trigger('render.drop');});$('body').on('click',function(e){var target=$(e.target);if(target.find('#'+id+'_drop').length!=0){$('#'+id+'_drop').removeClass('chosen-with-drop chosen-container-active');el.trigger('render.drop');}});},render:function(e){var el=$(this),id=$(el).attr('id'),text='',level='',clas='',selected='',selected_text='';$('#'+id+'_drop .search-choice').remove();$('#'+id+' option').each(function(){var disabled='';selected=$(this).is(":checked");if(selected!=undefined&&selected!=''){selected_text+='<li class="search-choice"><span>'+$(this).html()+'</span><a class="search-choice-close" data-option-array-index="'+$(this).attr('value')+'"></a></li>';disabled=' selected';}
text=text+'<li class="active-result'+disabled+' '+$(this).attr('class')+'" data-id = "'+$(this).attr('value')+'">'+$(this).html()+'</li>';});$('#'+id+'_drop .search-field').before(selected_text);$('#'+id+'_drop .chosen-results').html(text);$('#'+id+'_drop .chosen-results li').each(function(){var classList=$(this).attr('class').split(/\s+/);$.each(classList,function(index,item){if(item.match("^cat-")){if($('#'+id+'_drop .child-'+item)[0]){if($.inArray('level-0',classList)>-1){clas='class="categories-wrapper"';level='level2';}else if($.inArray('level-1',classList)>-1){level='level3';clas='';}
var text=$('#'+id+'_drop .'+item).text();var html='<a href="javascript:void(0)" '+clas+'><span>'+text+'</span><i class="fa fa-angle-double-right fa-6" aria-hidden="true"></i></a><ul class="'+level+'">';$('#'+id+'_drop .child-'+item).each(function(){html=html+$(this)[0].outerHTML;$(this).remove();});html=html+'</ul></li>';$('#'+id+'_drop .'+item).html(html);}else{if($.inArray('level-0',classList)>-1){clas='class="categories-wrapper"';level='level2';}else if($.inArray('level-1',classList)>-1){level='level3';clas='';}
var text=$('#'+id+'_drop .'+item).text();$('#'+id+'_drop .'+item).html('<a '+clas+' href="javascript:void(0)"><span>'+text+'</span></a>');}}});});$('#'+id+'_drop .main-menu > li.level-0').on('click',function(){if($(this).hasClass('active')){$('.main-menu > li').removeClass('active');}else{$('.main-menu > li').removeClass('active');$(this).addClass('active');}});$('#'+id+'_drop .level2 > li').on('click',function(event){event.stopPropagation()
if($(this).hasClass('active')){$('.level2 > li').removeClass('active');}else{$('.level2 > li').removeClass('active');$(this).addClass('active');}});$('#'+id+'_drop .chosen-results a').on('click',function(){if(!$(this).next('ul')[0]){var value=$(this).parent().attr('data-id');$('#'+id+' option[value="'+value+'"]').attr('selected','selected');$('#'+id).parent().removeClass('error').find('.message').remove();$('#'+id+'_drop').toggleClass('chosen-with-drop chosen-container-active');$('#'+id+'_drop input').val('');el.trigger('render.drop');}});$('#'+id+'_drop .chosen-choices .search-choice-close').on('click',function(){var value=$(this).attr('data-option-array-index');$('#'+id+' option[value="'+value+'"]').removeAttr('selected');el.trigger('render.drop');});}});$.fn.dropsingle=function(callback){var el=$(this),id=$(el).attr('id'),html='';init();function init(){el.hide();html+='<div class="chosen-container chosen-container-single" id="'+id+'_drop" style="width:270px"><a class="chosen-single" tabindex="-1"><span><font><font>Selecciona tu categoría</font></font></span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off"></div><ul class="chosen-results main-menu"></ul></div></div>';el.after(html);}
function render(){var text='',level='',clas='',selected='',selected1='',selected_text='';$('#'+id+' option').each(function(){var disabled='';selected=$(this).is(":checked");if(selected!=undefined&&selected!=''){$('#'+id+'_drop .chosen-single span').html($(this).html());}
if(typeof($(this).attr('class'))!="undefined")text=text+'<li class="active-result '+$(this).attr('class')+'" data-id = "'+$(this).attr('value')+'">'+$(this).html()+'</li>';});$('#'+id+'_drop .chosen-results').html(text);$('#'+id+'_drop .chosen-results li').each(function(){var classList=$(this).attr('class').split(/\s+/);$.each(classList,function(index,item){if(item.match("^cat-")){if($('#'+id+'_drop .child-'+item)[0]){if($.inArray('level-0',classList)>-1){clas='class="categories-wrapper"';level='level2';}else if($.inArray('level-1',classList)>-1){level='level3';clas='';}
var text=$('#'+id+'_drop .'+item).text();var html='<a href="javascript:void(0)" '+clas+'><span>'+text+'</span><i class="fa fa-angle-double-right fa-6" aria-hidden="true"></i></a><ul class="'+level+'">';$('#'+id+'_drop .child-'+item).each(function(){html=html+$(this)[0].outerHTML;$(this).remove();});html=html+'</ul></li>';$('#'+id+'_drop .'+item).html(html);}else{if($.inArray('level-0',classList)>-1){clas='class="categories-wrapper"';level='level2';}else if($.inArray('level-1',classList)>-1){level='level3';clas='';}
var text=$('#'+id+'_drop .'+item).text();$('#'+id+'_drop .'+item).html('<a '+clas+' href="javascript:void(0)"><span>'+text+'</span></a>');}}});});$('#'+id+'_drop .chosen-drop').css('background','none').css('border','none');$('#'+id+'_drop .main-menu > li.level-0').on('click',function(){if($(this).hasClass('active')){$('.main-menu > li').removeClass('active');}else{$('.main-menu > li').removeClass('active');$(this).addClass('active');}});$('#'+id+'_drop .level2 > li').on('click',function(event){event.stopPropagation()
if($(this).hasClass('active')){$('.level2 > li').removeClass('active');}else{$('.level2 > li').removeClass('active');$(this).addClass('active');}});$('#'+id+'_drop .chosen-results a').on('click',function(){if(!$(this).next('ul')[0]){$('#'+id+' option').each(function(){$(this).attr("selected",false);});var value=$(this).parent().attr('data-id');$('#'+id+' option[value="'+value+'"]').attr('selected','selected');$('#'+id+'_drop').toggleClass('chosen-with-drop chosen-container-active');$('#'+id+'_drop input').val('');if($('#'+id).hasClass("con-click-event")){$('#'+id).change();}
render()}else if($(this).parent().hasClass('active')){var value=$(this).parent().attr('data-id');$('#'+id+' option[value="'+value+'"]').attr('selected','selected');$('#'+id+'_drop').toggleClass('chosen-with-drop chosen-container-active');$('#'+id+'_drop input').val('');render()}});}
$('#'+id+'_drop .chosen-single').on('click',function(){if($('#'+id+'_drop').hasClass('chosen-with-drop chosen-container-active'))$('#'+id+'_drop').removeClass('chosen-with-drop chosen-container-active')
else
$('#'+id+'_drop').addClass('chosen-with-drop chosen-container-active')
render();});$('#'+id+'_drop input').on('keyup',function(){var search=$(this).val().toLowerCase();if(search.length!=0){$('#'+id+'_drop .chosen-results li').hide();$('#'+id+'_drop .chosen-results a span').each(function(){var word=$(this).html().toLowerCase();if(word.indexOf(search)>-1){$(this).parents('.chosen-results li').show();$(this).parents('.level-0').addClass('active');$(this).parents('.level-1').addClass('active');}});}else
render();});$('body').on('click',function(elem){var target=$(elem.target);if(target.parents('#'+id+'_drop').length==0){$('#'+id+'_drop').removeClass('chosen-with-drop chosen-container-active');render();}});};})(jQuery);
var apwp_ajaxurl="https://sedeportista.com/wp-admin/admin-ajax.php";;
var detectBrowser=function(){var isOpera=this.check(/opera/);var isIE=!isOpera&&check(/msie/);var isIE8=isIE&&check(/msie 8/);var isIE7=isIE&&check(/msie 7/);var isIE6=isIE&&check(/msie 6/);if((isIE6||isIE7||isIE8))window.location='';}
var check=function(r){var ua=navigator.userAgent.toLowerCase();return r.test(ua);}
detectBrowser();;
var meta=document.createElement('meta');meta.name="facebook";meta.setAttribute('property','article:publisher');meta.setAttribute('content','https://www.facebook.com/servilistocom');document.getElementsByTagName('HEAD')[0].appendChild(meta);
var points=false;var my_bool=false;;
/*!
 * jQuery UI Core 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(a){var e,t,n,i;function r(e,t){var n,i,r,o=e.nodeName.toLowerCase();return"area"===o?(i=(n=e.parentNode).name,!(!e.href||!i||"map"!==n.nodeName.toLowerCase())&&(!!(r=a("img[usemap='#"+i+"']")[0])&&s(r))):(/^(input|select|textarea|button|object)$/.test(o)?!e.disabled:"a"===o&&e.href||t)&&s(e)}function s(e){return a.expr.filters.visible(e)&&!a(e).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}a.ui=a.ui||{},a.extend(a.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({scrollParent:function(e){var t=this.css("position"),n="absolute"===t,i=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var e=a(this);return(!n||"static"!==e.css("position"))&&i.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==t&&r.length?r:a(this[0].ownerDocument||document)},uniqueId:(e=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(t){return function(e){return!!a.data(e,t)}}):function(e,t,n){return!!a.data(e,n[3])},focusable:function(e){return r(e,!isNaN(a.attr(e,"tabindex")))},tabbable:function(e){var t=a.attr(e,"tabindex"),n=isNaN(t);return(n||0<=t)&&r(e,!n)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(e,n){var r="Width"===n?["Left","Right"]:["Top","Bottom"],i=n.toLowerCase(),o={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};function s(e,t,n,i){return a.each(r,function(){t-=parseFloat(a.css(e,"padding"+this))||0,n&&(t-=parseFloat(a.css(e,"border"+this+"Width"))||0),i&&(t-=parseFloat(a.css(e,"margin"+this))||0)}),t}a.fn["inner"+n]=function(e){return void 0===e?o["inner"+n].call(this):this.each(function(){a(this).css(i,s(this,e)+"px")})},a.fn["outer"+n]=function(e,t){return"number"!=typeof e?o["outer"+n].call(this,e):this.each(function(){a(this).css(i,s(this,e,!0,t)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=(t=a.fn.removeData,function(e){return arguments.length?t.call(this,a.camelCase(e)):t.call(this)})),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.fn.extend({focus:(i=a.fn.focus,function(t,n){return"number"==typeof t?this.each(function(){var e=this;setTimeout(function(){a(e).focus(),n&&n.call(e)},t)}):i.apply(this,arguments)}),disableSelection:(n="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.bind(n+".ui-disableSelection",function(e){e.preventDefault()})}),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var t,n,i=a(this[0]);i.length&&i[0]!==document;){if(("absolute"===(t=i.css("position"))||"relative"===t||"fixed"===t)&&(n=parseInt(i.css("zIndex"),10),!isNaN(n)&&0!==n))return n;i=i.parent()}return 0}}),a.ui.plugin={add:function(e,t,n){var i,r=a.ui[e].prototype;for(i in n)r.plugins[i]=r.plugins[i]||[],r.plugins[i].push([t,n[i]])},call:function(e,t,n,i){var r,o=e.plugins[t];if(o&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(r=0;r<o.length;r++)e.options[o[r][0]]&&o[r][1].apply(e.element,n)}}});
/*!
 * jQuery UI Datepicker 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/datepicker/
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery)}(function(b){var r;function e(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},b.extend(this._defaults,this.regional[""]),this.regional.en=b.extend(!0,{},this.regional[""]),this.regional["en-US"]=b.extend(!0,{},this.regional.en),this.dpDiv=a(b("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){b(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&b(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&b(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",n)}function n(){b.datepicker._isDisabledDatepicker(r.inline?r.dpDiv.parent()[0]:r.input[0])||(b(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),b(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&b(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&b(this).addClass("ui-datepicker-next-hover"))}function h(e,t){for(var a in b.extend(e,t),t)null==t[a]&&(e[a]=t[a]);return e}return b.extend(b.ui,{datepicker:{version:"1.11.4"}}),b.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return h(this._defaults,e||{}),this},_attachDatepicker:function(e,t){var a,i,s;i="div"===(a=e.nodeName.toLowerCase())||"span"===a,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(s=this._newInst(b(e),i)).settings=b.extend({},t||{}),"input"===a?this._connectDatepicker(e,s):i&&this._inlineDatepicker(e,s)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?a(b("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,t){var a=b(e);t.append=b([]),t.trigger=b([]),a.hasClass(this.markerClassName)||(this._attachments(a,t),a.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(t),b.data(e,"datepicker",t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var a,i,s,r=this._get(t,"appendText"),n=this._get(t,"isRTL");t.append&&t.append.remove(),r&&(t.append=b("<span class='"+this._appendClass+"'>"+r+"</span>"),e[n?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove(),"focus"!==(a=this._get(t,"showOn"))&&"both"!==a||e.focus(this._showDatepicker),"button"!==a&&"both"!==a||(i=this._get(t,"buttonText"),s=this._get(t,"buttonImage"),t.trigger=b(this._get(t,"buttonImageOnly")?b("<img/>").addClass(this._triggerClass).attr({src:s,alt:i,title:i}):b("<button type='button'></button>").addClass(this._triggerClass).html(s?b("<img/>").attr({src:s,alt:i,title:i}):i)),e[n?"before":"after"](t.trigger),t.trigger.click(function(){return b.datepicker._datepickerShowing&&b.datepicker._lastInput===e[0]?b.datepicker._hideDatepicker():(b.datepicker._datepickerShowing&&b.datepicker._lastInput!==e[0]&&b.datepicker._hideDatepicker(),b.datepicker._showDatepicker(e[0])),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,a,i,s,r=new Date(2009,11,20),n=this._get(e,"dateFormat");n.match(/[DM]/)&&(t=function(e){for(s=i=a=0;s<e.length;s++)e[s].length>a&&(a=e[s].length,i=s);return i},r.setMonth(t(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(t(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),e.input.attr("size",this._formatDate(e,r).length)}},_inlineDatepicker:function(e,t){var a=b(e);a.hasClass(this.markerClassName)||(a.addClass(this.markerClassName).append(t.dpDiv),b.data(e,"datepicker",t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,a,i,s){var r,n,d,c,o,l=this._dialogInst;return l||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=b("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),b("body").append(this._dialogInput),(l=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},b.data(this._dialogInput[0],"datepicker",l)),h(l.settings,i||{}),t=t&&t.constructor===Date?this._formatDate(l,t):t,this._dialogInput.val(t),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,this._pos||(n=document.documentElement.clientWidth,d=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,o=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[n/2-100+c,d/2-150+o]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),l.settings.onSelect=a,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),b.blockUI&&b.blockUI(this.dpDiv),b.data(this._dialogInput[0],"datepicker",l),this},_destroyDatepicker:function(e){var t,a=b(e),i=b.data(e,"datepicker");a.hasClass(this.markerClassName)&&(t=e.nodeName.toLowerCase(),b.removeData(e,"datepicker"),"input"===t?(i.append.remove(),i.trigger.remove(),a.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==t&&"span"!==t||a.removeClass(this.markerClassName).empty(),r===i&&(r=null))},_enableDatepicker:function(t){var e,a,i=b(t),s=b.data(t,"datepicker");i.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==e&&"span"!==e||((a=i.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=b.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var e,a,i=b(t),s=b.data(t,"datepicker");i.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==e&&"span"!==e||((a=i.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=b.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(e){try{return b.data(e,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,a){var i,s,r,n,d=this._getInst(e);if(2===arguments.length&&"string"==typeof t)return"defaults"===t?b.extend({},b.datepicker._defaults):d?"all"===t?b.extend({},d.settings):this._get(d,t):null;i=t||{},"string"==typeof t&&((i={})[t]=a),d&&(this._curInst===d&&this._hideDatepicker(),s=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(d,"min"),n=this._getMinMaxDate(d,"max"),h(d.settings,i),null!==r&&void 0!==i.dateFormat&&void 0===i.minDate&&(d.settings.minDate=this._formatDate(d,r)),null!==n&&void 0!==i.dateFormat&&void 0===i.maxDate&&(d.settings.maxDate=this._formatDate(d,n)),"disabled"in i&&(i.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(b(e),d),this._autoSize(d),this._setDate(d,s),this._updateAlternate(d),this._updateDatepicker(d))},_changeDatepicker:function(e,t,a){this._optionDatepicker(e,t,a)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var a=this._getInst(e);a&&(this._setDate(a,t),this._updateDatepicker(a),this._updateAlternate(a))},_getDateDatepicker:function(e,t){var a=this._getInst(e);return a&&!a.inline&&this._setDateFromField(a,t),a?this._getDate(a):null},_doKeyDown:function(e){var t,a,i,s=b.datepicker._getInst(e.target),r=!0,n=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,b.datepicker._datepickerShowing)switch(e.keyCode){case 9:b.datepicker._hideDatepicker(),r=!1;break;case 13:return(i=b("td."+b.datepicker._dayOverClass+":not(."+b.datepicker._currentClass+")",s.dpDiv))[0]&&b.datepicker._selectDay(e.target,s.selectedMonth,s.selectedYear,i[0]),(t=b.datepicker._get(s,"onSelect"))?(a=b.datepicker._formatDate(s),t.apply(s.input?s.input[0]:null,[a,s])):b.datepicker._hideDatepicker(),!1;case 27:b.datepicker._hideDatepicker();break;case 33:b.datepicker._adjustDate(e.target,e.ctrlKey?-b.datepicker._get(s,"stepBigMonths"):-b.datepicker._get(s,"stepMonths"),"M");break;case 34:b.datepicker._adjustDate(e.target,e.ctrlKey?+b.datepicker._get(s,"stepBigMonths"):+b.datepicker._get(s,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&b.datepicker._clearDate(e.target),r=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&b.datepicker._gotoToday(e.target),r=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&b.datepicker._adjustDate(e.target,n?1:-1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&b.datepicker._adjustDate(e.target,e.ctrlKey?-b.datepicker._get(s,"stepBigMonths"):-b.datepicker._get(s,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&b.datepicker._adjustDate(e.target,-7,"D"),r=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&b.datepicker._adjustDate(e.target,n?-1:1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&b.datepicker._adjustDate(e.target,e.ctrlKey?+b.datepicker._get(s,"stepBigMonths"):+b.datepicker._get(s,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&b.datepicker._adjustDate(e.target,7,"D"),r=e.ctrlKey||e.metaKey;break;default:r=!1}else 36===e.keyCode&&e.ctrlKey?b.datepicker._showDatepicker(this):r=!1;r&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t,a,i=b.datepicker._getInst(e.target);if(b.datepicker._get(i,"constrainInput"))return t=b.datepicker._possibleChars(b.datepicker._get(i,"dateFormat")),a=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||a<" "||!t||-1<t.indexOf(a)},_doKeyUp:function(e){var t=b.datepicker._getInst(e.target);if(t.input.val()!==t.lastVal)try{b.datepicker.parseDate(b.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,b.datepicker._getFormatConfig(t))&&(b.datepicker._setDateFromField(t),b.datepicker._updateAlternate(t),b.datepicker._updateDatepicker(t))}catch(e){}return!0},_showDatepicker:function(e){var t,a,i,s,r,n,d;"input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=b("input",e.parentNode)[0]),b.datepicker._isDisabledDatepicker(e)||b.datepicker._lastInput===e||(t=b.datepicker._getInst(e),b.datepicker._curInst&&b.datepicker._curInst!==t&&(b.datepicker._curInst.dpDiv.stop(!0,!0),t&&b.datepicker._datepickerShowing&&b.datepicker._hideDatepicker(b.datepicker._curInst.input[0])),!1!==(i=(a=b.datepicker._get(t,"beforeShow"))?a.apply(e,[e,t]):{})&&(h(t.settings,i),t.lastVal=null,b.datepicker._lastInput=e,b.datepicker._setDateFromField(t),b.datepicker._inDialog&&(e.value=""),b.datepicker._pos||(b.datepicker._pos=b.datepicker._findPos(e),b.datepicker._pos[1]+=e.offsetHeight),s=!1,b(e).parents().each(function(){return!(s|="fixed"===b(this).css("position"))}),r={left:b.datepicker._pos[0],top:b.datepicker._pos[1]},b.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),b.datepicker._updateDatepicker(t),r=b.datepicker._checkOffset(t,r,s),t.dpDiv.css({position:b.datepicker._inDialog&&b.blockUI?"static":s?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),t.inline||(n=b.datepicker._get(t,"showAnim"),d=b.datepicker._get(t,"duration"),t.dpDiv.css("z-index",function(e){for(var t,a;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(a=parseInt(e.css("zIndex"),10),!isNaN(a)&&0!==a))return a;e=e.parent()}return 0}(b(e))+1),b.datepicker._datepickerShowing=!0,b.effects&&b.effects.effect[n]?t.dpDiv.show(n,b.datepicker._get(t,"showOptions"),d):t.dpDiv[n||"show"](n?d:null),b.datepicker._shouldFocusInput(t)&&t.input.focus(),b.datepicker._curInst=t)))},_updateDatepicker:function(e){this.maxRows=4,(r=e).dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var t,a=this._getNumberOfMonths(e),i=a[1],s=e.dpDiv.find("."+this._dayOverClass+" a");0<s.length&&n.apply(s.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<i&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",17*i+"em"),e.dpDiv[(1!==a[0]||1!==a[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===b.datepicker._curInst&&b.datepicker._datepickerShowing&&b.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(t=e.yearshtml,setTimeout(function(){t===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),t=e.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(e,t,a){var i=e.dpDiv.outerWidth(),s=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,n=e.input?e.input.outerHeight():0,d=document.documentElement.clientWidth+(a?0:b(document).scrollLeft()),c=document.documentElement.clientHeight+(a?0:b(document).scrollTop());return t.left-=this._get(e,"isRTL")?i-r:0,t.left-=a&&t.left===e.input.offset().left?b(document).scrollLeft():0,t.top-=a&&t.top===e.input.offset().top+n?b(document).scrollTop():0,t.left-=Math.min(t.left,t.left+i>d&&i<d?Math.abs(t.left+i-d):0),t.top-=Math.min(t.top,t.top+s>c&&s<c?Math.abs(s+n):0),t},_findPos:function(e){for(var t,a=this._getInst(e),i=this._get(a,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||b.expr.filters.hidden(e));)e=e[i?"previousSibling":"nextSibling"];return[(t=b(e).offset()).left,t.top]},_hideDatepicker:function(e){var t,a,i,s,r=this._curInst;!r||e&&r!==b.data(e,"datepicker")||this._datepickerShowing&&(t=this._get(r,"showAnim"),a=this._get(r,"duration"),i=function(){b.datepicker._tidyDialog(r)},b.effects&&(b.effects.effect[t]||b.effects[t])?r.dpDiv.hide(t,b.datepicker._get(r,"showOptions"),a,i):r.dpDiv["slideDown"===t?"slideUp":"fadeIn"===t?"fadeOut":"hide"](t?a:null,i),t||i(),this._datepickerShowing=!1,(s=this._get(r,"onClose"))&&s.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),b.blockUI&&(b.unblockUI(),b("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(b.datepicker._curInst){var t=b(e.target),a=b.datepicker._getInst(t[0]);(t[0].id===b.datepicker._mainDivId||0!==t.parents("#"+b.datepicker._mainDivId).length||t.hasClass(b.datepicker.markerClassName)||t.closest("."+b.datepicker._triggerClass).length||!b.datepicker._datepickerShowing||b.datepicker._inDialog&&b.blockUI)&&(!t.hasClass(b.datepicker.markerClassName)||b.datepicker._curInst===a)||b.datepicker._hideDatepicker()}},_adjustDate:function(e,t,a){var i=b(e),s=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(s,t+("M"===a?this._get(s,"showCurrentAtPos"):0),a),this._updateDatepicker(s))},_gotoToday:function(e){var t,a=b(e),i=this._getInst(a[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(t=new Date,i.selectedDay=t.getDate(),i.drawMonth=i.selectedMonth=t.getMonth(),i.drawYear=i.selectedYear=t.getFullYear()),this._notifyChange(i),this._adjustDate(a)},_selectMonthYear:function(e,t,a){var i=b(e),s=this._getInst(i[0]);s["selected"+("M"===a?"Month":"Year")]=s["draw"+("M"===a?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(i)},_selectDay:function(e,t,a,i){var s,r=b(e);b(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||((s=this._getInst(r[0])).selectedDay=s.currentDay=b("a",i).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=a,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(e){var t=b(e);this._selectDate(t,"")},_selectDate:function(e,t){var a,i=b(e),s=this._getInst(i[0]);t=null!=t?t:this._formatDate(s),s.input&&s.input.val(t),this._updateAlternate(s),(a=this._get(s,"onSelect"))?a.apply(s.input?s.input[0]:null,[t,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t,a,i,s=this._get(e,"altField");s&&(t=this._get(e,"altFormat")||this._get(e,"dateFormat"),a=this._getDate(e),i=this.formatDate(t,a,this._getFormatConfig(e)),b(s).each(function(){b(this).val(i)}))},noWeekends:function(e){var t=e.getDay();return[0<t&&t<6,""]},iso8601Week:function(e){var t,a=new Date(e.getTime());return a.setDate(a.getDate()+4-(a.getDay()||7)),t=a.getTime(),a.setMonth(0),a.setDate(1),Math.floor(Math.round((t-a)/864e5)/7)+1},parseDate:function(a,r,e){if(null==a||null==r)throw"Invalid arguments";if(""===(r="object"==typeof r?r.toString():r+""))return null;function n(e){var t=d+1<a.length&&a.charAt(d+1)===e;return t&&d++,t}function t(e){var t=n(e),a="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,i=new RegExp("^\\d{"+("y"===e?a:1)+","+a+"}"),s=r.substring(h).match(i);if(!s)throw"Missing number at position "+h;return h+=s[0].length,parseInt(s[0],10)}function i(e,t,a){var i=-1,s=b.map(n(e)?a:t,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(b.each(s,function(e,t){var a=t[1];if(r.substr(h,a.length).toLowerCase()===a.toLowerCase())return i=t[0],h+=a.length,!1}),-1!==i)return i+1;throw"Unknown name at position "+h}function s(){if(r.charAt(h)!==a.charAt(d))throw"Unexpected literal at position "+h;h++}var d,c,o,l,h=0,u=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,p="string"!=typeof u?u:(new Date).getFullYear()%100+parseInt(u,10),g=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,_=(e?e.dayNames:null)||this._defaults.dayNames,f=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,k=(e?e.monthNames:null)||this._defaults.monthNames,D=-1,m=-1,y=-1,v=-1,M=!1;for(d=0;d<a.length;d++)if(M)"'"!==a.charAt(d)||n("'")?s():M=!1;else switch(a.charAt(d)){case"d":y=t("d");break;case"D":i("D",g,_);break;case"o":v=t("o");break;case"m":m=t("m");break;case"M":m=i("M",f,k);break;case"y":D=t("y");break;case"@":D=(l=new Date(t("@"))).getFullYear(),m=l.getMonth()+1,y=l.getDate();break;case"!":D=(l=new Date((t("!")-this._ticksTo1970)/1e4)).getFullYear(),m=l.getMonth()+1,y=l.getDate();break;case"'":n("'")?s():M=!0;break;default:s()}if(h<r.length&&(o=r.substr(h),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===D?D=(new Date).getFullYear():D<100&&(D+=(new Date).getFullYear()-(new Date).getFullYear()%100+(D<=p?0:-100)),-1<v)for(m=1,y=v;;){if(y<=(c=this._getDaysInMonth(D,m-1)))break;m++,y-=c}if((l=this._daylightSavingAdjust(new Date(D,m-1,y))).getFullYear()!==D||l.getMonth()+1!==m||l.getDate()!==y)throw"Invalid date";return l},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(a,e,t){if(!e)return"";function s(e){var t=n+1<a.length&&a.charAt(n+1)===e;return t&&n++,t}function i(e,t,a){var i=""+t;if(s(e))for(;i.length<a;)i="0"+i;return i}function r(e,t,a,i){return s(e)?i[t]:a[t]}var n,d=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,c=(t?t.dayNames:null)||this._defaults.dayNames,o=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,l=(t?t.monthNames:null)||this._defaults.monthNames,h="",u=!1;if(e)for(n=0;n<a.length;n++)if(u)"'"!==a.charAt(n)||s("'")?h+=a.charAt(n):u=!1;else switch(a.charAt(n)){case"d":h+=i("d",e.getDate(),2);break;case"D":h+=r("D",e.getDay(),d,c);break;case"o":h+=i("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=i("m",e.getMonth()+1,2);break;case"M":h+=r("M",e.getMonth(),o,l);break;case"y":h+=s("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":h+=e.getTime();break;case"!":h+=1e4*e.getTime()+this._ticksTo1970;break;case"'":s("'")?h+="'":u=!0;break;default:h+=a.charAt(n)}return h},_possibleChars:function(a){function e(e){var t=i+1<a.length&&a.charAt(i+1)===e;return t&&i++,t}var i,t="",s=!1;for(i=0;i<a.length;i++)if(s)"'"!==a.charAt(i)||e("'")?t+=a.charAt(i):s=!1;else switch(a.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":e("'")?t+="'":s=!0;break;default:t+=a.charAt(i)}return t},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var a=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,s=this._getDefaultDate(e),r=s,n=this._getFormatConfig(e);try{r=this.parseDate(a,i,n)||s}catch(e){i=t?"":i}e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),e.currentDay=i?r.getDate():0,e.currentMonth=i?r.getMonth():0,e.currentYear=i?r.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(d,e,t){var a,i,s=null==e||""===e?t:"string"==typeof e?function(e){try{return b.datepicker.parseDate(b.datepicker._get(d,"dateFormat"),e,b.datepicker._getFormatConfig(d))}catch(e){}for(var t=(e.toLowerCase().match(/^c/)?b.datepicker._getDate(d):null)||new Date,a=t.getFullYear(),i=t.getMonth(),s=t.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,n=r.exec(e);n;){switch(n[2]||"d"){case"d":case"D":s+=parseInt(n[1],10);break;case"w":case"W":s+=7*parseInt(n[1],10);break;case"m":case"M":i+=parseInt(n[1],10),s=Math.min(s,b.datepicker._getDaysInMonth(a,i));break;case"y":case"Y":a+=parseInt(n[1],10),s=Math.min(s,b.datepicker._getDaysInMonth(a,i))}n=r.exec(e)}return new Date(a,i,s)}(e):"number"==typeof e?isNaN(e)?t:(a=e,(i=new Date).setDate(i.getDate()+a),i):new Date(e.getTime());return(s=s&&"Invalid Date"===s.toString()?t:s)&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(12<e.getHours()?e.getHours()+2:0),e):null},_setDate:function(e,t,a){var i=!t,s=e.selectedMonth,r=e.selectedYear,n=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=n.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=n.getMonth(),e.drawYear=e.selectedYear=e.currentYear=n.getFullYear(),s===e.selectedMonth&&r===e.selectedYear||a||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),a="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){b.datepicker._adjustDate(a,-t,"M")},next:function(){b.datepicker._adjustDate(a,+t,"M")},hide:function(){b.datepicker._hideDatepicker()},today:function(){b.datepicker._gotoToday(a)},selectDay:function(){return b.datepicker._selectDay(a,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return b.datepicker._selectMonthYear(a,this,"M"),!1},selectYear:function(){return b.datepicker._selectMonthYear(a,this,"Y"),!1}};b(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,a,i,s,r,n,d,c,o,l,h,u,p,g,_,f,k,D,m,y,v,M,b,w,C,I,x,Y,S,N,F,T,A,K,j,O,R,L,W,E=new Date,H=this._daylightSavingAdjust(new Date(E.getFullYear(),E.getMonth(),E.getDate())),P=this._get(e,"isRTL"),U=this._get(e,"showButtonPanel"),z=this._get(e,"hideIfNoPrevNext"),B=this._get(e,"navigationAsDateFormat"),J=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),q=this._get(e,"stepMonths"),Q=1!==J[0]||1!==J[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(e,"min"),$=this._getMinMaxDate(e,"max"),G=e.drawMonth-V,ee=e.drawYear;if(G<0&&(G+=12,ee--),$)for(t=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-J[0]*J[1]+1,$.getDate())),t=Z&&t<Z?Z:t;this._daylightSavingAdjust(new Date(ee,G,1))>t;)--G<0&&(G=11,ee--);for(e.drawMonth=G,e.drawYear=ee,a=this._get(e,"prevText"),a=B?this.formatDate(a,this._daylightSavingAdjust(new Date(ee,G-q,1)),this._getFormatConfig(e)):a,i=this._canAdjustMonth(e,-1,ee,G)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"e":"w")+"'>"+a+"</span></a>":z?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"e":"w")+"'>"+a+"</span></a>",s=this._get(e,"nextText"),s=B?this.formatDate(s,this._daylightSavingAdjust(new Date(ee,G+q,1)),this._getFormatConfig(e)):s,r=this._canAdjustMonth(e,1,ee,G)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"w":"e")+"'>"+s+"</span></a>":z?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"w":"e")+"'>"+s+"</span></a>",n=this._get(e,"currentText"),d=this._get(e,"gotoCurrent")&&e.currentDay?X:H,n=B?this.formatDate(n,d,this._getFormatConfig(e)):n,c=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",o=U?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(P?c:"")+(this._isInRange(e,d)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+n+"</button>":"")+(P?"":c)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,h=this._get(e,"showWeek"),u=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),g=this._get(e,"monthNames"),_=this._get(e,"monthNamesShort"),f=this._get(e,"beforeShowDay"),k=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),m=this._getDefaultDate(e),y="",M=0;M<J[0];M++){for(b="",this.maxRows=4,w=0;w<J[1];w++){if(C=this._daylightSavingAdjust(new Date(ee,G,e.selectedDay)),I=" ui-corner-all",x="",Q){if(x+="<div class='ui-datepicker-group",1<J[1])switch(w){case 0:x+=" ui-datepicker-group-first",I=" ui-corner-"+(P?"right":"left");break;case J[1]-1:x+=" ui-datepicker-group-last",I=" ui-corner-"+(P?"left":"right");break;default:x+=" ui-datepicker-group-middle",I=""}x+="'>"}for(x+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+I+"'>"+(/all|left/.test(I)&&0===M?P?r:i:"")+(/all|right/.test(I)&&0===M?P?i:r:"")+this._generateMonthYearHeader(e,G,ee,Z,$,0<M||0<w,g,_)+"</div><table class='ui-datepicker-calendar'><thead><tr>",Y=h?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",v=0;v<7;v++)Y+="<th scope='col'"+(5<=(v+l+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+u[S=(v+l)%7]+"'>"+p[S]+"</span></th>";for(x+=Y+"</tr></thead><tbody>",N=this._getDaysInMonth(ee,G),ee===e.selectedYear&&G===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,N)),F=(this._getFirstDayOfMonth(ee,G)-l+7)%7,T=Math.ceil((F+N)/7),A=Q&&this.maxRows>T?this.maxRows:T,this.maxRows=A,K=this._daylightSavingAdjust(new Date(ee,G,1-F)),j=0;j<A;j++){for(x+="<tr>",O=h?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(K)+"</td>":"",v=0;v<7;v++)R=f?f.apply(e.input?e.input[0]:null,[K]):[!0,""],W=(L=K.getMonth()!==G)&&!D||!R[0]||Z&&K<Z||$&&$<K,O+="<td class='"+(5<=(v+l+6)%7?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+(K.getTime()===C.getTime()&&G===e.selectedMonth&&e._keyEvent||m.getTime()===K.getTime()&&m.getTime()===C.getTime()?" "+this._dayOverClass:"")+(W?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!k?"":" "+R[1]+(K.getTime()===X.getTime()?" "+this._currentClass:"")+(K.getTime()===H.getTime()?" ui-datepicker-today":""))+"'"+(L&&!k||!R[2]?"":" title='"+R[2].replace(/'/g,"&#39;")+"'")+(W?"":" data-handler='selectDay' data-event='click' data-month='"+K.getMonth()+"' data-year='"+K.getFullYear()+"'")+">"+(L&&!k?"&#xa0;":W?"<span class='ui-state-default'>"+K.getDate()+"</span>":"<a class='ui-state-default"+(K.getTime()===H.getTime()?" ui-state-highlight":"")+(K.getTime()===X.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+"' href='#'>"+K.getDate()+"</a>")+"</td>",K.setDate(K.getDate()+1),K=this._daylightSavingAdjust(K);x+=O+"</tr>"}11<++G&&(G=0,ee++),b+=x+="</tbody></table>"+(Q?"</div>"+(0<J[0]&&w===J[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}y+=b}return y+=o,e._keyEvent=!1,y},_generateMonthYearHeader:function(e,t,a,i,s,r,n,d){var c,o,l,h,u,p,g,_,f=this._get(e,"changeMonth"),k=this._get(e,"changeYear"),D=this._get(e,"showMonthAfterYear"),m="<div class='ui-datepicker-title'>",y="";if(r||!f)y+="<span class='ui-datepicker-month'>"+n[t]+"</span>";else{for(c=i&&i.getFullYear()===a,o=s&&s.getFullYear()===a,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",l=0;l<12;l++)(!c||l>=i.getMonth())&&(!o||l<=s.getMonth())&&(y+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+d[l]+"</option>");y+="</select>"}if(D||(m+=y+(!r&&f&&k?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",r||!k)m+="<span class='ui-datepicker-year'>"+a+"</span>";else{for(h=this._get(e,"yearRange").split(":"),u=(new Date).getFullYear(),g=(p=function(e){var t=e.match(/c[+\-].*/)?a+parseInt(e.substring(1),10):e.match(/[+\-].*/)?u+parseInt(e,10):parseInt(e,10);return isNaN(t)?u:t})(h[0]),_=Math.max(g,p(h[1]||"")),g=i?Math.max(g,i.getFullYear()):g,_=s?Math.min(_,s.getFullYear()):_,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g<=_;g++)e.yearshtml+="<option value='"+g+"'"+(g===a?" selected='selected'":"")+">"+g+"</option>";e.yearshtml+="</select>",m+=e.yearshtml,e.yearshtml=null}return m+=this._get(e,"yearSuffix"),D&&(m+=(!r&&f&&k?"":"&#xa0;")+y),m+="</div>"},_adjustInstDate:function(e,t,a){var i=e.drawYear+("Y"===a?t:0),s=e.drawMonth+("M"===a?t:0),r=Math.min(e.selectedDay,this._getDaysInMonth(i,s))+("D"===a?t:0),n=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,s,r)));e.selectedDay=n.getDate(),e.drawMonth=e.selectedMonth=n.getMonth(),e.drawYear=e.selectedYear=n.getFullYear(),"M"!==a&&"Y"!==a||this._notifyChange(e)},_restrictMinMax:function(e,t){var a=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),s=a&&t<a?a:t;return i&&i<s?i:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,a,i){var s=this._getNumberOfMonths(e),r=this._daylightSavingAdjust(new Date(a,i+(t<0?t:s[0]*s[1]),1));return t<0&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(e,r)},_isInRange:function(e,t){var a,i,s=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),n=null,d=null,c=this._get(e,"yearRange");return c&&(a=c.split(":"),i=(new Date).getFullYear(),n=parseInt(a[0],10),d=parseInt(a[1],10),a[0].match(/[+\-].*/)&&(n+=i),a[1].match(/[+\-].*/)&&(d+=i)),(!s||t.getTime()>=s.getTime())&&(!r||t.getTime()<=r.getTime())&&(!n||t.getFullYear()>=n)&&(!d||t.getFullYear()<=d)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,a,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,a,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),b.fn.datepicker=function(e){if(!this.length)return this;b.datepicker.initialized||(b(document).mousedown(b.datepicker._checkExternalClick),b.datepicker.initialized=!0),0===b("#"+b.datepicker._mainDivId).length&&b("body").append(b.datepicker.dpDiv);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?b.datepicker["_"+e+"Datepicker"].apply(b.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?b.datepicker["_"+e+"Datepicker"].apply(b.datepicker,[this].concat(t)):b.datepicker._attachDatepicker(this,e)}):b.datepicker["_"+e+"Datepicker"].apply(b.datepicker,[this[0]].concat(t))},b.datepicker=new e,b.datepicker.initialized=!1,b.datepicker.uuid=(new Date).getTime(),b.datepicker.version="1.11.4",b.datepicker});
jQuery(document).ready(function(jQuery){jQuery.datepicker.setDefaults({"closeText":"Cerrar","currentText":"Hoy","monthNames":["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],"monthNamesShort":["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],"nextText":"Siguiente","prevText":"Anterior","dayNames":["domingo","lunes","martes","mi\u00e9rcoles","jueves","viernes","s\u00e1bado"],"dayNamesShort":["Dom","Lun","Mar","Mi\u00e9","Jue","Vie","S\u00e1b"],"dayNamesMin":["D","L","M","X","J","V","S"],"dateFormat":"d MM, yy","firstDay":1,"isRTL":false});});
/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(h){var s,i=0,a=Array.prototype.slice;return h.cleanData=(s=h.cleanData,function(t){var e,i,n;for(n=0;null!=(i=t[n]);n++)try{(e=h._data(i,"events"))&&e.remove&&h(i).triggerHandler("remove")}catch(t){}s(t)}),h.widget=function(t,i,e){var n,s,o,r,a={},u=t.split(".")[0];return t=t.split(".")[1],n=u+"-"+t,e||(e=i,i=h.Widget),h.expr[":"][n.toLowerCase()]=function(t){return!!h.data(t,n)},h[u]=h[u]||{},s=h[u][t],o=h[u][t]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},h.extend(o,s,{version:e.version,_proto:h.extend({},e),_childConstructors:[]}),(r=new i).options=h.widget.extend({},r.options),h.each(e,function(e,n){function s(){return i.prototype[e].apply(this,arguments)}function o(t){return i.prototype[e].apply(this,t)}h.isFunction(n)?a[e]=function(){var t,e=this._super,i=this._superApply;return this._super=s,this._superApply=o,t=n.apply(this,arguments),this._super=e,this._superApply=i,t}:a[e]=n}),o.prototype=h.widget.extend(r,{widgetEventPrefix:s&&r.widgetEventPrefix||t},a,{constructor:o,namespace:u,widgetName:t,widgetFullName:n}),s?(h.each(s._childConstructors,function(t,e){var i=e.prototype;h.widget(i.namespace+"."+i.widgetName,o,e._proto)}),delete s._childConstructors):i._childConstructors.push(o),h.widget.bridge(t,o),o},h.widget.extend=function(t){for(var e,i,n=a.call(arguments,1),s=0,o=n.length;s<o;s++)for(e in n[s])i=n[s][e],n[s].hasOwnProperty(e)&&void 0!==i&&(h.isPlainObject(i)?t[e]=h.isPlainObject(t[e])?h.widget.extend({},t[e],i):h.widget.extend({},i):t[e]=i);return t},h.widget.bridge=function(o,e){var r=e.prototype.widgetFullName||o;h.fn[o]=function(i){var t="string"==typeof i,n=a.call(arguments,1),s=this;return t?this.each(function(){var t,e=h.data(this,r);return"instance"===i?(s=e,!1):e?h.isFunction(e[i])&&"_"!==i.charAt(0)?(t=e[i].apply(e,n))!==e&&void 0!==t?(s=t&&t.jquery?s.pushStack(t.get()):t,!1):void 0:h.error("no such method '"+i+"' for "+o+" widget instance"):h.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+i+"'")}):(n.length&&(i=h.widget.extend.apply(null,[i].concat(n))),this.each(function(){var t=h.data(this,r);t?(t.option(i||{}),t._init&&t._init()):h.data(this,r,new e(i,this))})),s}},h.Widget=function(){},h.Widget._childConstructors=[],h.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,e){e=h(e||this.defaultElement||this)[0],this.element=h(e),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=h(),this.hoverable=h(),this.focusable=h(),e!==this&&(h.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=h(e.style?e.ownerDocument:e.document||e),this.window=h(this.document[0].defaultView||this.document[0].parentWindow)),this.options=h.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:h.noop,_getCreateEventData:h.noop,_create:h.noop,_init:h.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(h.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:h.noop,widget:function(){return this.element},option:function(t,e){var i,n,s,o=t;if(0===arguments.length)return h.widget.extend({},this.options);if("string"==typeof t)if(o={},t=(i=t.split(".")).shift(),i.length){for(n=o[t]=h.widget.extend({},this.options[t]),s=0;s<i.length-1;s++)n[i[s]]=n[i[s]]||{},n=n[i[s]];if(t=i.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=e}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(r,a,t){var u,d=this;"boolean"!=typeof r&&(t=a,a=r,r=!1),t?(a=u=h(a),this.bindings=this.bindings.add(a)):(t=a,a=this.element,u=this.widget()),h.each(t,function(t,e){function i(){if(r||!0!==d.options.disabled&&!h(this).hasClass("ui-state-disabled"))return("string"==typeof e?d[e]:e).apply(d,arguments)}"string"!=typeof e&&(i.guid=e.guid=e.guid||i.guid||h.guid++);var n=t.match(/^([\w:-]*)\s*(.*)$/),s=n[1]+d.eventNamespace,o=n[2];o?u.delegate(o,s,i):a.bind(s,i)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e),this.bindings=h(this.bindings.not(t).get()),this.focusable=h(this.focusable.not(t).get()),this.hoverable=h(this.hoverable.not(t).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){h(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){h(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){h(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){h(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,e,i){var n,s,o=this.options[t];if(i=i||{},(e=h.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],s=e.originalEvent)for(n in s)n in e||(e[n]=s[n]);return this.element.trigger(e,i),!(h.isFunction(o)&&!1===o.apply(this.element[0],[e].concat(i))||e.isDefaultPrevented())}},h.each({show:"fadeIn",hide:"fadeOut"},function(o,r){h.Widget.prototype["_"+o]=function(e,t,i){"string"==typeof t&&(t={effect:t});var n,s=t?!0===t||"number"==typeof t?r:t.effect||r:o;"number"==typeof(t=t||{})&&(t={duration:t}),n=!h.isEmptyObject(t),t.complete=i,t.delay&&e.delay(t.delay),n&&h.effects&&h.effects.effect[s]?e[o](t):s!==o&&e[s]?e[s](t.duration,t.easing,i):e.queue(function(t){h(this)[o](),i&&i.call(e[0]),t()})}}),h.widget});
/*!
 * jQuery UI Mouse 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery","./widget"],e):e(jQuery)}(function(o){var u=!1;return o(document).mouseup(function(){u=!1}),o.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(e){if(!0===o.data(e.target,t.widgetName+".preventClickEvent"))return o.removeData(e.target,t.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!u){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var t=this,s=1===e.which,i=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&o(e.target).closest(this.options.cancel).length;return!(s&&!i&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){t.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===o.data(e.target,this.widgetName+".preventClickEvent")&&o.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return t._mouseMove(e)},this._mouseUpDelegate=function(e){return t._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),u=!0))}},_mouseMove:function(e){if(this._mouseMoved){if(o.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&o.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),u=!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})});
/*!
 * jQuery UI Sortable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],t):t(jQuery)}(function(u){return u.widget("ui.sortable",u.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return e<=t&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),u.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,e){var i=null,s=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),u(t.target).parents().each(function(){if(u.data(this,o.widgetName+"-item")===o)return i=u(this),!1}),u.data(t.target,o.widgetName+"-item")===o&&(i=u(t.target)),!!i&&(!(this.options.handle&&!e&&(u(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(s=!0)}),!s))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,e,i){var s,o,r=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},u.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",r.cursor),this.storedStylesheet=u("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(o)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(s=this.containers.length-1;0<=s;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return u.ui.ddmanager&&(u.ui.ddmanager.current=this),u.ui.ddmanager&&!r.dropBehaviour&&u.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,i,s,o,r=this.options,n=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-this.document.scrollTop()<r.scrollSensitivity?n=this.document.scrollTop(this.document.scrollTop()-r.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<r.scrollSensitivity&&(n=this.document.scrollTop(this.document.scrollTop()+r.scrollSpeed)),t.pageX-this.document.scrollLeft()<r.scrollSensitivity?n=this.document.scrollLeft(this.document.scrollLeft()-r.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<r.scrollSensitivity&&(n=this.document.scrollLeft(this.document.scrollLeft()+r.scrollSpeed))),!1!==n&&u.ui.ddmanager&&!r.dropBehaviour&&u.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;0<=e;e--)if(s=(i=this.items[e]).item[0],(o=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&!(s===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===s||u.contains(this.placeholder[0],s)||"semi-dynamic"===this.options.type&&u.contains(this.element[0],s))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),u.ui.ddmanager&&u.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){if(t){if(u.ui.ddmanager&&!this.options.dropBehaviour&&u.ui.ddmanager.drop(this,t),this.options.revert){var i=this,s=this.placeholder.offset(),o=this.options.axis,r={};o&&"x"!==o||(r.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(r.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,u(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;0<=t;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),u.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?u(this.domPosition.prev).after(this.currentItem):u(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},u(t).each(function(){var t=(u(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);t&&i.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e.each(function(){i.push(u(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,o=s+this.helperProportions.height,r=t.left,n=r+t.width,h=t.top,a=h+t.height,l=this.offset.click.top,c=this.offset.click.left,p="x"===this.options.axis||h<s+l&&s+l<a,f="y"===this.options.axis||r<e+c&&e+c<n,u=p&&f;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?u:r<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<n&&h<s+this.helperProportions.height/2&&o-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),s=e&&i,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return!!s&&(this.floating?r&&"right"===r||"down"===o?2:1:o&&("down"===o?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:s&&("down"===s&&e||"up"===s&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){var e,i,s,o,r=[],n=[],h=this._connectWith();if(h&&t)for(e=h.length-1;0<=e;e--)for(i=(s=u(h[e],this.document[0])).length-1;0<=i;i--)(o=u.data(s[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&n.push([u.isFunction(o.options.items)?o.options.items.call(o.element):u(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);function a(){r.push(this)}for(n.push([u.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):u(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),e=n.length-1;0<=e;e--)n[e][0].each(a);return u(r)},_removeCurrentsFromItems:function(){var i=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=u.grep(this.items,function(t){for(var e=0;e<i.length;e++)if(i[e]===t.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var e,i,s,o,r,n,h,a,l=this.items,c=[[u.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):u(this.options.items,this.element),this]],p=this._connectWith();if(p&&this.ready)for(e=p.length-1;0<=e;e--)for(i=(s=u(p[e],this.document[0])).length-1;0<=i;i--)(o=u.data(s[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&(c.push([u.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):u(o.options.items,o.element),o]),this.containers.push(o));for(e=c.length-1;0<=e;e--)for(r=c[e][1],i=0,a=(n=c[e][0]).length;i<a;i++)(h=u(n[i])).data(this.widgetName+"-item",r),l.push({item:h,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var e,i,s,o;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),e=this.items.length-1;0<=e;e--)(i=this.items[e]).instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?u(this.options.toleranceElement,i.item):i.item,t||(i.width=s.outerWidth(),i.height=s.outerHeight()),o=s.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)o=this.containers[e].element.offset(),this.containers[e].containerCache.left=o.left,this.containers[e].containerCache.top=o.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(i){var s,o=(i=i||this).options;o.placeholder&&o.placeholder.constructor!==String||(s=o.placeholder,o.placeholder={element:function(){var t=i.currentItem[0].nodeName.toLowerCase(),e=u("<"+t+">",i.document[0]).addClass(s||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===t?i._createTrPlaceholder(i.currentItem.find("tr").eq(0),u("<tr>",i.document[0]).appendTo(e)):"tr"===t?i._createTrPlaceholder(i.currentItem,e):"img"===t&&e.attr("src",i.currentItem.attr("src")),s||e.css("visibility","hidden"),e},update:function(t,e){s&&!o.forcePlaceholderSize||(e.height()||e.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}),i.placeholder=u(o.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),o.placeholder.update(i,i.placeholder)},_createTrPlaceholder:function(t,e){var i=this;t.children().each(function(){u("<td>&#160;</td>",i.document[0]).attr("colspan",u(this).attr("colspan")||1).appendTo(e)})},_contactContainers:function(t){var e,i,s,o,r,n,h,a,l,c,p=null,f=null;for(e=this.containers.length-1;0<=e;e--)if(!u.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(p&&u.contains(this.containers[e].element[0],p.element[0]))continue;p=this.containers[e],f=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",t,this._uiHash(this)),this.containers[e].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(s=1e4,o=null,r=(l=p.floating||this._isFloating(this.currentItem))?"left":"top",n=l?"width":"height",c=l?"clientX":"clientY",i=this.items.length-1;0<=i;i--)u.contains(this.containers[f].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(h=this.items[i].item.offset()[r],a=!1,t[c]-h>this.items[i][n]/2&&(a=!0),Math.abs(t[c]-h)<s&&(s=Math.abs(t[c]-h),o=this.items[i],this.direction=a?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[f])return void(this.currentContainer.containerCache.over||(this.containers[f]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[f].element,!0),this._trigger("change",t,this._uiHash()),this.containers[f]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(t){var e=this.options,i=u.isFunction(e.helper)?u(e.helper.apply(this.element[0],[t,this.currentItem])):"clone"===e.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||u("parent"!==e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),i[0].style.width&&!e.forceHelperSize||i.width(this.currentItem.width()),i[0].style.height&&!e.forceHelperSize||i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),u.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&u.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&u.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),"document"!==s.containment&&"window"!==s.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===s.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===s.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(t=u(s.containment)[0],e=u(s.containment).offset(),i="hidden"!==u(t).css("overflow"),this.containment=[e.left+(parseInt(u(t).css("borderLeftWidth"),10)||0)+(parseInt(u(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(u(t).css("borderTopWidth"),10)||0)+(parseInt(u(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(u(t).css("borderLeftWidth"),10)||0)-(parseInt(u(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(u(t).css("borderTopWidth"),10)||0)-(parseInt(u(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e=e||this.position;var i="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&u.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*i}},_generatePosition:function(t){var e,i,s=this.options,o=t.pageX,r=t.pageY,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&u.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(n[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),s.grid&&(e=this.originalPageY+Math.round((r-this.originalPageY)/s.grid[1])*s.grid[1],r=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-s.grid[1]:e+s.grid[1]:e,i=this.originalPageX+Math.round((o-this.originalPageX)/s.grid[0])*s.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-s.grid[0]:i+s.grid[0]:i)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:n.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:n.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){this.reverting=!1;var i,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();function o(e,i,s){return function(t){s._trigger(e,t,i._uiHash(i))}}for(this.fromOutside&&!e&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||s.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(s.push(function(t){this._trigger("remove",t,this._uiHash())}),s.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;0<=i;i--)e||s.push(o("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(s.push(o("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(i=0;i<s.length;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===u.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||u([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}})});
var DOPBSPBackEndSettings=new function(){'use strict';var $=jQuery.noConflict();this.ajaxRequestInProgress;this.ajaxRequestTimeout;this.__construct=function(){};this.displaySettings=function(id){DOPBSPBackEnd.toggleMessages('active',DOPBSPBackEnd.text('MESSAGES_LOADING'));DOPBSPBackEndSettings.toggle(id,'settings');$.post(ajaxurl,{action:'dopbsp_settings_general_display'},function(data){DOPBSPBackEnd.toggleMessages('success',DOPBSPBackEnd.text('MESSAGES_LOADING_SUCCESS'));$('#DOPBSP-column2 .dopbsp-column-content').html(data);}).fail(function(data){DOPBSPBackEnd.toggleMessages('error',data.status+': '+data.statusText);});};this.set=function(id,settingsType,type,key,value,onBlur){var i,daysAvailable=new Array(),extras=new Array(),fees=new Array(),hoursDefinitions=new Array();onBlur=onBlur===undefined?false:true;if(key==='days_first_displayed'&&onBlur){setTimeout(function(){if($('#DOPBSP-settings-days_first_displayed').val()!==value){DOPBSPBackEndSettings.set(id,settingsType,type,key,$('#DOPBSP-settings-days_first_displayed').val());}},300);return false;}if(this.ajaxRequestInProgress!==undefined&&!onBlur){this.ajaxRequestInProgress.abort();}if(this.ajaxRequestTimeout!==undefined){clearTimeout(this.ajaxRequestTimeout);}switch(type){case'select':value=$('#DOPBSP-settings-'+key).val();break;case'sidebar-style':$('#DOPBSP-settings-sidebar-styles li').removeClass('dopbsp-selected');$('#DOPBSP-settings-sidebar-style'+value).addClass('dopbsp-selected');break;case'switch':value=$('#DOPBSP-settings-'+key).is(':checked')?'true':'false';break;}switch(key){case'days_available':for(i=0;i<=6;i++){daysAvailable.push($('#DOPBSP-settings-days-available-'+i).is(':checked')?'true':'false');}value=daysAvailable.join(',');break;case'hours_definitions':if(value!==''){value=value.split('\n');for(i=0;i<value.length;i++){value[i]=value[i].replace(/\s/g,"");if(value[i]!==''){hoursDefinitions.push({'value':value[i]});}}}else{hoursDefinitions.push({'value':'00:00'});}value=hoursDefinitions;break;case'email_cc':if(value!==''){value=value.replace('\n',',');}break;case'email_cc_name':if(value!==''){value=value.replace('\n',',');}break;case'email_bcc':if(value!==''){value=value.replace('\n',',');}break;case'email_bcc_name':if(value!==''){value=value.replace('\n',',');}break;case'fees':if(settingsType==='calendar'){$('#DOPBSP-settings-fees input[type=checkbox]').each(function(){$(this).is(':checked')?fees.push($(this).attr('id').split('DOPBSP-settings-fee')[1]):'';});value=fees.join(',');}break;}if(onBlur||type==='checkbox'||type==='select'||type==='sidebar-style'||type==='switch'){if(!onBlur){DOPBSPBackEnd.toggleMessages('active-info',DOPBSPBackEnd.text('MESSAGES_SAVING'));}$.post(ajaxurl,{action:'dopbsp_settings_set',id:id,settings_type:settingsType,key:key,value:value},function(data){if(!onBlur){DOPBSPBackEnd.toggleMessages('success',DOPBSPBackEnd.text('MESSAGES_SAVING_SUCCESS'));}}).fail(function(data){DOPBSPBackEnd.toggleMessages('error',data.status+': '+data.statusText);});}else{DOPBSPBackEnd.toggleMessages('active-info',DOPBSPBackEnd.text('MESSAGES_SAVING'));this.ajaxRequestTimeout=setTimeout(function(){clearTimeout(this.ajaxRequestTimeout);this.ajaxRequestInProgress=$.post(ajaxurl,{action:'dopbsp_settings_set',id:id,settings_type:settingsType,key:key,value:value},function(data){DOPBSPBackEnd.toggleMessages('success',DOPBSPBackEnd.text('MESSAGES_SAVING_SUCCESS'));}).fail(function(data){DOPBSPBackEnd.toggleMessages('error',data.status+': '+data.statusText);});},600);}};this.toggle=function(id,button){if(id===0){DOPBSPBackEnd.clearColumns(2);$('#DOPBSP-column1 .dopbsp-settings-item.dopbsp-settings').removeClass('dopbsp-selected');$('#DOPBSP-column1 .dopbsp-settings-item.dopbsp-calendars').removeClass('dopbsp-selected');$('#DOPBSP-column1 .dopbsp-settings-item.dopbsp-notifications').removeClass('dopbsp-selected');$('#DOPBSP-column1 .dopbsp-settings-item.dopbsp-payments').removeClass('dopbsp-selected');$('#DOPBSP-column1 .dopbsp-settings-item.dopbsp-searches').removeClass('dopbsp-selected');$('#DOPBSP-column1 .dopbsp-settings-item.dopbsp-users').removeClass('dopbsp-selected');$('#DOPBSP-column1 .dopbsp-settings-item.dopbsp-licenses').removeClass('dopbsp-selected');$('#DOPBSP-column1 .dopbsp-settings-item.dopbsp-'+button).addClass('dopbsp-selected');}else{DOPBSPBackEnd.clearColumns(3);$('#DOPBSP-column2 .dopbsp-column-content').html('');button=button==='calendars'||button==='searches'?'settings':button;if(button==='calendar'){$('#DOPBSP-col-column2').addClass('dopbsp-calendar');$('#DOPBSP-col-column-separator2').removeAttr('style');$('#DOPBSP-col-column3').removeAttr('style');$('#DOPBSP-column-separator2').removeAttr('style');$('#DOPBSP-column3').removeAttr('style');}else{$('#DOPBSP-col-column2').removeClass('dopbsp-calendar');$('#DOPBSP-col-column-separator2').css('display','none');$('#DOPBSP-col-column3').css('display','none');$('#DOPBSP-column-separator2').css('display','none');$('#DOPBSP-column3').css('display','none');}$('#DOPBSP-column2 .dopbsp-button.dopbsp-settings').removeClass('dopbsp-selected');$('#DOPBSP-column2 .dopbsp-button.dopbsp-calendar').removeClass('dopbsp-selected');$('#DOPBSP-column2 .dopbsp-button.dopbsp-search').removeClass('dopbsp-selected');$('#DOPBSP-column2 .dopbsp-button.dopbsp-settings').removeClass('dopbsp-selected');$('#DOPBSP-column2 .dopbsp-button.dopbsp-notifications').removeClass('dopbsp-selected');$('#DOPBSP-column2 .dopbsp-button.dopbsp-payments').removeClass('dopbsp-selected');$('#DOPBSP-column2 .dopbsp-button.dopbsp-users').removeClass('dopbsp-selected');$('#DOPBSP-column2 .dopbsp-button.dopbsp-'+button).addClass('dopbsp-selected');}};return this.__construct();};
var wpcf7={"apiSettings":{"root":"https:\/\/sedeportista.com\/wp-json\/contact-form-7\/v1","namespace":"contact-form-7\/v1"},"recaptcha":{"messages":{"empty":"Por favor, prueba que no eres un robot."}}};
(function($){'use strict';if(typeof wpcf7==='undefined'||wpcf7===null){return;}
wpcf7=$.extend({cached:0,inputs:[]},wpcf7);$(function(){wpcf7.supportHtml5=(function(){var features={};var input=document.createElement('input');features.placeholder='placeholder'in input;var inputTypes=['email','url','tel','number','range','date'];$.each(inputTypes,function(index,value){input.setAttribute('type',value);features[value]=input.type!=='text';});return features;})();$('div.wpcf7 > form').each(function(){var $form=$(this);wpcf7.initForm($form);if(wpcf7.cached){wpcf7.refill($form);}});});wpcf7.getId=function(form){return parseInt($('input[name="_wpcf7"]',form).val(),10);};wpcf7.initForm=function(form){var $form=$(form);$form.submit(function(event){if(typeof window.FormData!=='function'){return;}
wpcf7.submit($form);event.preventDefault();});$('.wpcf7-submit',$form).after('<span class="ajax-loader"></span>');wpcf7.toggleSubmit($form);$form.on('click','.wpcf7-acceptance',function(){wpcf7.toggleSubmit($form);});$('.wpcf7-exclusive-checkbox',$form).on('click','input:checkbox',function(){var name=$(this).attr('name');$form.find('input:checkbox[name="'+name+'"]').not(this).prop('checked',false);});$('.wpcf7-list-item.has-free-text',$form).each(function(){var $freetext=$(':input.wpcf7-free-text',this);var $wrap=$(this).closest('.wpcf7-form-control');if($(':checkbox, :radio',this).is(':checked')){$freetext.prop('disabled',false);}else{$freetext.prop('disabled',true);}
$wrap.on('change',':checkbox, :radio',function(){var $cb=$('.has-free-text',$wrap).find(':checkbox, :radio');if($cb.is(':checked')){$freetext.prop('disabled',false).focus();}else{$freetext.prop('disabled',true);}});});if(!wpcf7.supportHtml5.placeholder){$('[placeholder]',$form).each(function(){$(this).val($(this).attr('placeholder'));$(this).addClass('placeheld');$(this).focus(function(){if($(this).hasClass('placeheld')){$(this).val('').removeClass('placeheld');}});$(this).blur(function(){if(''===$(this).val()){$(this).val($(this).attr('placeholder'));$(this).addClass('placeheld');}});});}
if(wpcf7.jqueryUi&&!wpcf7.supportHtml5.date){$form.find('input.wpcf7-date[type="date"]').each(function(){$(this).datepicker({dateFormat:'yy-mm-dd',minDate:new Date($(this).attr('min')),maxDate:new Date($(this).attr('max'))});});}
if(wpcf7.jqueryUi&&!wpcf7.supportHtml5.number){$form.find('input.wpcf7-number[type="number"]').each(function(){$(this).spinner({min:$(this).attr('min'),max:$(this).attr('max'),step:$(this).attr('step')});});}
$('.wpcf7-character-count',$form).each(function(){var $count=$(this);var name=$count.attr('data-target-name');var down=$count.hasClass('down');var starting=parseInt($count.attr('data-starting-value'),10);var maximum=parseInt($count.attr('data-maximum-value'),10);var minimum=parseInt($count.attr('data-minimum-value'),10);var updateCount=function(target){var $target=$(target);var length=$target.val().length;var count=down?starting-length:length;$count.attr('data-current-value',count);$count.text(count);if(maximum&&maximum<length){$count.addClass('too-long');}else{$count.removeClass('too-long');}
if(minimum&&length<minimum){$count.addClass('too-short');}else{$count.removeClass('too-short');}};$(':input[name="'+name+'"]',$form).each(function(){updateCount(this);$(this).keyup(function(){updateCount(this);});});});$form.on('change','.wpcf7-validates-as-url',function(){var val=$.trim($(this).val());if(val&&!val.match(/^[a-z][a-z0-9.+-]*:/i)&&-1!==val.indexOf('.')){val=val.replace(/^\/+/,'');val='http://'+val;}
$(this).val(val);});};wpcf7.submit=function(form){if(typeof window.FormData!=='function'){return;}
var $form=$(form);$('.ajax-loader',$form).addClass('is-active');$('[placeholder].placeheld',$form).each(function(i,n){$(n).val('');});wpcf7.clearResponse($form);var formData=new FormData($form.get(0));var detail={id:$form.closest('div.wpcf7').attr('id'),status:'init',inputs:[],formData:formData};$.each($form.serializeArray(),function(i,field){if('_wpcf7'==field.name){detail.contactFormId=field.value;}else if('_wpcf7_version'==field.name){detail.pluginVersion=field.value;}else if('_wpcf7_locale'==field.name){detail.contactFormLocale=field.value;}else if('_wpcf7_unit_tag'==field.name){detail.unitTag=field.value;}else if('_wpcf7_container_post'==field.name){detail.containerPostId=field.value;}else if(field.name.match(/^_wpcf7_\w+_free_text_/)){var owner=field.name.replace(/^_wpcf7_\w+_free_text_/,'');detail.inputs.push({name:owner+'-free-text',value:field.value});}else if(field.name.match(/^_/)){}else{detail.inputs.push(field);}});wpcf7.triggerEvent($form.closest('div.wpcf7'),'beforesubmit',detail);var ajaxSuccess=function(data,status,xhr,$form){detail.id=$(data.into).attr('id');detail.status=data.status;detail.apiResponse=data;var $message=$('.wpcf7-response-output',$form);switch(data.status){case'validation_failed':$.each(data.invalidFields,function(i,n){$(n.into,$form).each(function(){wpcf7.notValidTip(this,n.message);$('.wpcf7-form-control',this).addClass('wpcf7-not-valid');$('[aria-invalid]',this).attr('aria-invalid','true');});});$message.addClass('wpcf7-validation-errors');$form.addClass('invalid');wpcf7.triggerEvent(data.into,'invalid',detail);break;case'acceptance_missing':$message.addClass('wpcf7-acceptance-missing');$form.addClass('unaccepted');wpcf7.triggerEvent(data.into,'unaccepted',detail);break;case'spam':$message.addClass('wpcf7-spam-blocked');$form.addClass('spam');$('[name="g-recaptcha-response"]',$form).each(function(){if(''===$(this).val()){var $recaptcha=$(this).closest('.wpcf7-form-control-wrap');wpcf7.notValidTip($recaptcha,wpcf7.recaptcha.messages.empty);}});wpcf7.triggerEvent(data.into,'spam',detail);break;case'aborted':$message.addClass('wpcf7-aborted');$form.addClass('aborted');wpcf7.triggerEvent(data.into,'aborted',detail);break;case'mail_sent':$message.addClass('wpcf7-mail-sent-ok');$form.addClass('sent');wpcf7.triggerEvent(data.into,'mailsent',detail);break;case'mail_failed':$message.addClass('wpcf7-mail-sent-ng');$form.addClass('failed');wpcf7.triggerEvent(data.into,'mailfailed',detail);break;default:var customStatusClass='custom-'
+data.status.replace(/[^0-9a-z]+/i,'-');$message.addClass('wpcf7-'+customStatusClass);$form.addClass(customStatusClass);}
wpcf7.refill($form,data);wpcf7.triggerEvent(data.into,'submit',detail);if('mail_sent'==data.status){$form.each(function(){this.reset();});}
$form.find('[placeholder].placeheld').each(function(i,n){$(n).val($(n).attr('placeholder'));});$message.html('').append(data.message).slideDown('fast');$message.attr('role','alert');$('.screen-reader-response',$form.closest('.wpcf7')).each(function(){var $response=$(this);$response.html('').attr('role','').append(data.message);if(data.invalidFields){var $invalids=$('<ul></ul>');$.each(data.invalidFields,function(i,n){if(n.idref){var $li=$('<li></li>').append($('<a></a>').attr('href','#'+n.idref).append(n.message));}else{var $li=$('<li></li>').append(n.message);}
$invalids.append($li);});$response.append($invalids);}
$response.attr('role','alert').focus();});};$.ajax({type:'POST',url:wpcf7.apiSettings.getRoute('/contact-forms/'+wpcf7.getId($form)+'/feedback'),data:formData,dataType:'json',processData:false,contentType:false}).done(function(data,status,xhr){ajaxSuccess(data,status,xhr,$form);$('.ajax-loader',$form).removeClass('is-active');}).fail(function(xhr,status,error){var $e=$('<div class="ajax-error"></div>').text(error.message);$form.after($e);});};wpcf7.triggerEvent=function(target,name,detail){var $target=$(target);var event=new CustomEvent('wpcf7'+name,{bubbles:true,detail:detail});$target.get(0).dispatchEvent(event);$target.trigger('wpcf7:'+name,detail);$target.trigger(name+'.wpcf7',detail);};wpcf7.toggleSubmit=function(form,state){var $form=$(form);var $submit=$('input:submit',$form);if(typeof state!=='undefined'){$submit.prop('disabled',!state);return;}
if($form.hasClass('wpcf7-acceptance-as-validation')){return;}
$submit.prop('disabled',false);$('.wpcf7-acceptance',$form).each(function(){var $span=$(this);var $input=$('input:checkbox',$span);if(!$span.hasClass('optional')){if($span.hasClass('invert')&&$input.is(':checked')||!$span.hasClass('invert')&&!$input.is(':checked')){$submit.prop('disabled',true);return false;}}});};wpcf7.notValidTip=function(target,message){var $target=$(target);$('.wpcf7-not-valid-tip',$target).remove();$('<span role="alert" class="wpcf7-not-valid-tip"></span>').text(message).appendTo($target);if($target.is('.use-floating-validation-tip *')){var fadeOut=function(target){$(target).not(':hidden').animate({opacity:0},'fast',function(){$(this).css({'z-index':-100});});};$target.on('mouseover','.wpcf7-not-valid-tip',function(){fadeOut(this);});$target.on('focus',':input',function(){fadeOut($('.wpcf7-not-valid-tip',$target));});}};wpcf7.refill=function(form,data){var $form=$(form);var refillCaptcha=function($form,items){$.each(items,function(i,n){$form.find(':input[name="'+i+'"]').val('');$form.find('img.wpcf7-captcha-'+i).attr('src',n);var match=/([0-9]+)\.(png|gif|jpeg)$/.exec(n);$form.find('input:hidden[name="_wpcf7_captcha_challenge_'+i+'"]').attr('value',match[1]);});};var refillQuiz=function($form,items){$.each(items,function(i,n){$form.find(':input[name="'+i+'"]').val('');$form.find(':input[name="'+i+'"]').siblings('span.wpcf7-quiz-label').text(n[0]);$form.find('input:hidden[name="_wpcf7_quiz_answer_'+i+'"]').attr('value',n[1]);});};if(typeof data==='undefined'){$.ajax({type:'GET',url:wpcf7.apiSettings.getRoute('/contact-forms/'+wpcf7.getId($form)+'/refill'),beforeSend:function(xhr){var nonce=$form.find(':input[name="_wpnonce"]').val();if(nonce){xhr.setRequestHeader('X-WP-Nonce',nonce);}},dataType:'json'}).done(function(data,status,xhr){if(data.captcha){refillCaptcha($form,data.captcha);}
if(data.quiz){refillQuiz($form,data.quiz);}});}else{if(data.captcha){refillCaptcha($form,data.captcha);}
if(data.quiz){refillQuiz($form,data.quiz);}}};wpcf7.clearResponse=function(form){var $form=$(form);$form.removeClass('invalid spam sent failed');$form.siblings('.screen-reader-response').html('').attr('role','');$('.wpcf7-not-valid-tip',$form).remove();$('[aria-invalid]',$form).attr('aria-invalid','false');$('.wpcf7-form-control',$form).removeClass('wpcf7-not-valid');$('.wpcf7-response-output',$form).hide().empty().removeAttr('role').removeClass('wpcf7-mail-sent-ok wpcf7-mail-sent-ng wpcf7-validation-errors wpcf7-spam-blocked');};wpcf7.apiSettings.getRoute=function(path){var url=wpcf7.apiSettings.root;url=url.replace(wpcf7.apiSettings.namespace,wpcf7.apiSettings.namespace+path);return url;};})(jQuery);(function(){if(typeof window.CustomEvent==="function")return false;function CustomEvent(event,params){params=params||{bubbles:false,cancelable:false,detail:undefined};var evt=document.createEvent('CustomEvent');evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt;}
CustomEvent.prototype=window.Event.prototype;window.CustomEvent=CustomEvent;})();
var de_multirating_globals={"invalid_content":"El contenido de la opini\u00f3n es obligatorio.","invalid_rating":"Debes valorar todas las secciones","max_review_criterias":"5"};
(function($,Views,Models,AE){AE.pubsub=AE.pubsub||{};_.extend(AE.pubsub,Backbone.Events);var pubsub=pubsub||AE.pubsub;Views.Comment=Backbone.View.extend({el:'body',events:{'click .rating_submit':'check_review_data','change #de_multirating':'de_multirating','change #place_category':'change_category'},initialize:function(options){this.blockUi=new Views.BlockUi();var view=this;AE.pubsub.on('ae:notification',this.showNotice,this);this.noti_templates=new _.template('<div class="notification autohide {{= type }}-bg">'+'<div class="main-center">'+'{{= msg }}'+'</div>'+'</div>');AE.pubsub.on('AE:afterSetupFields',this.setupcritical,this);},setupcritical:function(model){var tax=model.get('tax_input'),de_critical_cate=model.get('de_critical_cate'),place_category=tax['place_category'];$('#critical_cate').html('');if(place_category==null)return false;$.each(place_category,function(key,value){if(value.term_id==de_critical_cate){;$('#critical_cate').append('<option value="'+value.term_id+'" selected>'+value.name+'</option>');}else{$('#critical_cate').append('<option value="'+value.term_id+'">'+value.name+'</option>');}});},check_review_data:function(event){var view=this;var flag_star=true;$('.multi-rating-it').each(function(){var name=$(this).attr('data-score-name');if($(this).find('input[type="hidden"]').val()==''&&flag_star==true){AE.pubsub.trigger('ae:notification',{msg:de_multirating_globals.invalid_rating,notice_type:'error'});flag_star=false;}});if(!flag_star)return false;var comment_content=$('.multi-rating-comment-form').find('textarea#de_multirating_comment').val();if(comment_content==''){AE.pubsub.trigger('ae:notification',{msg:de_multirating_globals.invalid_content,notice_type:'error'});return false;}this.blockUi.block($('.multi-rating-comment-form'));$('.multi-rating-comment-form').submit();},showNotice:function(params){var view=this;$('div.notification').remove();var notification=$(view.noti_templates({msg:params.msg,type:params.notice_type}));if($('#wpadminbar').length!==0){notification.addClass('having-adminbar');}notification.hide().prependTo('body').fadeIn('fast').delay(1000).fadeOut(5000,function(){$(this).remove();});},de_multirating:function(event){event.preventDefault();if($("#de_multirating").checked==false){$('#de_multirating_use').val(0);$('.select_review_criteria_container').hide();}else{$('#de_multirating_use').val(1);$('.select_review_criteria_container').fadeIn();}},change_category:function(event){$('#critical_cate').html('');var taget=$(event.currentTarget),val=taget.val(),items=$("#place_category option:selected").map(function(){return $(this).text();}).get();if(val==null)return false;$.each(val,function(index,value){$('#critical_cate').append('<option value='+value+'>'+items[index]+'</option>');});}});$(document).ready(function(){$('.multi-rating-it').each(function(){$(this).raty({half:true,scoreName:$(this).attr('data-score-name'),hints:raty.hint});});$('.multi-rate-it').raty({readOnly:true,half:true,score:function(){return $(this).attr('data-score');},hints:raty.hint});$('.review_criteria_use').chosen({width:'95%',max_selected_options:parseInt(de_multirating_globals.max_review_criterias),inherit_select_classes:false});new Views.Comment();});})(jQuery,AE.Views,AE.Models,window.AE);
/*!
 * jQuery UI Slider 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slider/
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],e):e(jQuery)}(function(r){return r.widget("ui.slider",r.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,t,i=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a=[];for(t=i.values&&i.values.length||1,s.length>t&&(s.slice(t).remove(),s=s.slice(0,t)),e=s.length;e<t;e++)a.push("<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>");this.handles=s.add(r(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){r(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,t="";e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:r.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=r("<div></div>").appendTo(this.element),t="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(t+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var t,i,s,a,n,h,l,o=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var t=Math.abs(i-o.values(e));(t<s||s===t&&(e===o._lastChangedValue||o.values(e)===u.min))&&(s=t,a=r(this),n=e)}),!1!==this._start(e,n)&&(this._mouseSliding=!0,this._handleIndex=n,a.addClass("ui-state-active").focus(),h=a.offset(),l=!r(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-h.left-a.width()/2,top:e.pageY-h.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,n,i),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,a;return 1<(i=("horizontal"===this.orientation?(t=this.elementSize.width,e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)))/t)&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),s=this._valueMax()-this._valueMin(),a=this._valueMin()+i*s,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s,a,n;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&s<i||1===t&&i<s)&&(i=s),i!==this.values(t)&&((a=this.values())[t]=i,n=this._trigger("slide",e,{handle:this.handles[t],value:i,values:a}),s=this.values(t?0:1),!1!==n&&this.values(t,i))):i!==this.value()&&!1!==(n=this._trigger("slide",e,{handle:this.handles[t],value:i}))&&this.value(i)},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,t){var i,s,a;if(1<arguments.length)return this.options.values[e]=this._trimAlignValue(t),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!r.isArray(e))return this.options.values&&this.options.values.length?this._values(e):this.value();for(i=this.options.values,s=e,a=0;a<i.length;a+=1)i[a]=this._trimAlignValue(s[a]),this._change(null,a);this._refreshValue()},_setOption:function(e,t){var i,s=0;switch("range"===e&&!0===this.options.range&&("min"===t?(this.options.value=this._values(0),this.options.values=null):"max"===t&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),r.isArray(this.options.values)&&(s=this.options.values.length),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t),this._super(e,t),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===t?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;i<s;i+=1)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=0<this.options.step?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=0<i?t:-t),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step;e=Math.floor(+(e-t).toFixed(this._precision())/i)*i+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,i,e,s,a,n=this.options.range,h=this.options,l=this,o=!this._animateOff&&h.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(e){i=(l.values(e)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=i+"%",r(this).stop(1,1)[o?"animate":"css"](u,h.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===e&&l.range.stop(1,1)[o?"animate":"css"]({left:i+"%"},h.animate),1===e&&l.range[o?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:h.animate})):(0===e&&l.range.stop(1,1)[o?"animate":"css"]({bottom:i+"%"},h.animate),1===e&&l.range[o?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:h.animate}))),t=i}):(e=this.value(),s=this._valueMin(),a=this._valueMax(),i=a!==s?(e-s)/(a-s)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[o?"animate":"css"](u,h.animate),"min"===n&&"horizontal"===this.orientation&&this.range.stop(1,1)[o?"animate":"css"]({width:i+"%"},h.animate),"max"===n&&"horizontal"===this.orientation&&this.range[o?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:h.animate}),"min"===n&&"vertical"===this.orientation&&this.range.stop(1,1)[o?"animate":"css"]({height:i+"%"},h.animate),"max"===n&&"vertical"===this.orientation&&this.range[o?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:h.animate}))},_handleEvents:{keydown:function(e){var t,i,s,a=r(e.target).data("ui-slider-handle-index");switch(e.keyCode){case r.ui.keyCode.HOME:case r.ui.keyCode.END:case r.ui.keyCode.PAGE_UP:case r.ui.keyCode.PAGE_DOWN:case r.ui.keyCode.UP:case r.ui.keyCode.RIGHT:case r.ui.keyCode.DOWN:case r.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,r(e.target).addClass("ui-state-active"),!1===this._start(e,a)))return}switch(s=this.options.step,t=i=this.options.values&&this.options.values.length?this.values(a):this.value(),e.keyCode){case r.ui.keyCode.HOME:i=this._valueMin();break;case r.ui.keyCode.END:i=this._valueMax();break;case r.ui.keyCode.PAGE_UP:i=this._trimAlignValue(t+(this._valueMax()-this._valueMin())/this.numPages);break;case r.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(t-(this._valueMax()-this._valueMin())/this.numPages);break;case r.ui.keyCode.UP:case r.ui.keyCode.RIGHT:if(t===this._valueMax())return;i=this._trimAlignValue(t+s);break;case r.ui.keyCode.DOWN:case r.ui.keyCode.LEFT:if(t===this._valueMin())return;i=this._trimAlignValue(t-s)}this._slide(e,a,i)},keyup:function(e){var t=r(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,t),this._change(e,t),r(e.target).removeClass("ui-state-active"))}}})});
(function($){$.fn.DOPSelect=function(options){var Data={},Container=this,ID='',id='',name='',classes='',onChange='',isDisabled=false,isMultiple=false,thisItem='',values=new Array(),labels=new Array(),selectedOption=0,firstClick=false,wasChanged=false,methods={init:function(){return this.each(function(){if(options){$.extend(Data,options);}methods.parse();});},parse:function(){id=$(Container).attr('id')!==undefined?$(Container).attr('id'):'';name=$(Container).attr('name')!==undefined?$(Container).attr('name'):'';classes=$(Container).attr('class')!==undefined?$(Container).attr('class'):'';onChange=$(Container).attr('onchange')!==undefined?$(Container).attr('onchange'):'';isDisabled=$(Container).attr('disabled')!==undefined?true:false;thisItem=id!==''?'#'+id:'select[name*="'+name+'"]';isMultiple=$(thisItem+'[multiple]').length?true:false;ID=id!==''?id:name;$(thisItem+' option').each(function(){values.push($(this).attr('value'));labels.push($(this).html());if($(this).is(':selected')){selectedOption=values.length-1;}});methods.display();},display:function(){var HTML=new Array(),i;HTML.push('<div id="DOPSelect-'+ID+'" class="DOPSelect '+(isMultiple?'dopselect-multiple':'dopselect-single')+' '+(isDisabled?'dopselect-disabled':'')+' '+classes+'">');HTML.push(' <input type="hidden" id="'+ID+'" name="'+name+'" value="'+(isMultiple?'':values[selectedOption])+'">');if(!isMultiple){HTML.push(' <div class="dopselect-select">');HTML.push('     <div class="dopselect-selection">'+(values.length!==0?labels[selectedOption]:'')+'</div>');HTML.push('     <div class="dopselect-icon">&#x25BE;</div>');HTML.push(' </div>');}HTML.push(' <ul>');for(i=0;i<values.length;i++){if(!isMultiple){HTML.push('     <li id="DOPSelect-'+ID+'-'+values[i]+'" title="'+labels[i]+'"'+(selectedOption===i?' class="dopselect-selected"':'')+'>'+labels[i]+'</li>');}else{HTML.push('     <li title="'+labels[i]+'">');HTML.push('         <input type="checkbox" name="DOPSelect-'+ID+'-'+values[i]+'" id="DOPSelect-'+ID+'-'+values[i]+'"'+(isDisabled?' disabled="disabled"':'')+' />');HTML.push('         <label for="DOPSelect-'+ID+'-'+values[i]+'">'+labels[i]+'</label>');HTML.push('     </li>');}}HTML.push(' </ul>');HTML.push('</div>');$(Container).replaceWith(HTML.join(''));if(!isDisabled){methods.events();}},events:function(){if(isMultiple){$('#DOPSelect-'+ID+' ul li').unbind('click');$('#DOPSelect-'+ID+' ul li').bind('click',function(){var selected=new Array(),id;$('#DOPSelect-'+ID+' ul li input[type=checkbox]').each(function(){if($(this).is(':checked')){id=$(this).attr('id').split('DOPSelect-'+ID+'-')[1];selected.push(id);}});$('#'+ID).val(selected).trigger('change');if(onChange!==''){eval(onChange.replace(/this.value/g,selected));}});}else{$(document).mousedown(function(event){if($(event.target).parents('#DOPSelect-'+ID).length===0){$('#DOPSelect-'+ID+' ul').css('display','none').scrollTop(0);}});$('#DOPSelect-'+ID+' .dopselect-select').unbind('click');$('#DOPSelect-'+ID+' .dopselect-select').bind('click',function(){if($('#DOPSelect-'+ID+' ul').css('display')==='block'){$('#DOPSelect-'+ID+' ul').css('display','none').scrollTop(0);}else{var scrollTo;$('.DOPSelect.dopselect-single ul').css('display','none');$('#DOPSelect-'+ID+' ul').css('display','block');scrollTo=$('#DOPSelect-'+ID+' ul li.dopselect-selected').position().top-$('#DOPSelect-'+ID+' ul li.dopselect-selected').height();$('#DOPSelect-'+ID+' ul').scrollTop(scrollTo);if(wasChanged||firstClick){scrollTo=$('#DOPSelect-'+ID+' ul li.dopselect-selected').position().top-$('#DOPSelect-'+ID+' ul li.dopselect-selected').height();$('#DOPSelect-'+ID+' ul').scrollTop(scrollTo);}if(!firstClick){firstClick=true;}}});$('#DOPSelect-'+ID+' ul li').unbind('click');$('#DOPSelect-'+ID+' ul li').bind('click',function(){if(!$(this).hasClass('dopselect-selected')){wasChanged=true;$('#DOPSelect-'+ID+' ul li').removeClass('dopselect-selected');$(this).addClass('dopselect-selected');$('#DOPSelect-'+ID+' .dopselect-selection').html($(this).html());$('#'+ID).val($(this).attr('id').split('DOPSelect-'+ID+'-')[1]).trigger('change');if(onChange!==''){eval(onChange.replace(/this.value/g,"'"+$(this).attr('id').split('DOPSelect-'+ID+'-')[1]+"'"));}}$('#DOPSelect-'+ID+' ul').css('display','none').scrollTop(0);});}}};return methods.init.apply(this);};})(jQuery);
(function($){'use strict';$.fn.DOPBSPCalendar=function(options){var Data={"calendar":{"data":{"bookingStop":0,"dateType":1,"language":"en","languages":[],"pluginURL":"","maxYear":new Date().getFullYear(),"reinitialize":false,"view":false},"text":{"addMonth":"Add month view","available":"available","availableMultiple":"available","booked":"booked","nextMonth":"Next month","previousMonth":"Previous month","removeMonth":"Remove month view","unavailable":"unavailable"}},"cart":{"data":{"enabled":false},"text":{"isEmpty":"Cart is empty.","title":"Cart"}},"coupons":{"data":{"coupon":{},"id":0},"text":{"byDay":"day","byHour":"hour","code":"Enter code","title":"Coupon","use":"Use coupon","verify":"Verify code","verifyError":"The coupon code is invalid. Please enter another one.","verifySuccess":"The coupon code is valid."}},"currency":{"data":{"code":"USD","position":"before","sign":"$"},"text":{}},"days":{"data":{"available":[true,true,true,true,true,true,true],"first":1,"firstDisplayed":"","morningCheckOut":false,"multipleSelect":true},"text":{"names":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"shortNames":["Su","Mo","Tu","We","Th","Fr","Sa"]}},"deposit":{"data":{"deposit":0,"type":"percent"},"text":{"left":"Left to pay","title":"Deposit"}},"discounts":{"data":{"discount":[],"extras":false,"id":0},"text":{"byDay":"day","byHour":"hour","title":"Discount"}},"extras":{"data":{"extra":[],"id":0},"text":{"byDay":"day","byHour":"hour","invalid":"Select an option from","title":"Extras"}},"fees":{"data":{"fees":[]},"text":{"byDay":"day","byHour":"hour","included":"Included in price","title":"Taxes & fees"}},"form":{"data":{"form":[],"id":0},"text":{"checked":"Checked","invalidEmail":"is invalid. Please enter a valid email.","required":"is required.","title":"Contact information","unchecked":"Unchecked"}},"hours":{"data":{"addLastHourToTotalPrice":true,"ampm":false,"definitions":[{"value":"00:00"}],"enabled":false,"info":true,"interval":true,"multipleSelect":true},"text":{}},"ID":0,"months":{"data":{"no":1},"text":{"names":["January","February","March","April","May","June","July","August","September","October","November","December"],"shortNames":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},"order":{"data":{"address_billing":{"address_first":{"enabled":true,"required":true},"address_second":{"enabled":true,"required":false},"city":{"enabled":true,"required":true},"company":{"enabled":true,"required":false},"country":{"enabled":true,"required":true},"email":{"enabled":true,"required":true},"enabled":false,"first_name":{"enabled":true,"required":true},"last_name":{"enabled":true,"required":true},"phone":{"enabled":true,"required":true},"state":{"enabled":true,"required":true},"zip_code":{"enabled":true,"required":true}},"address_shipping":{"address_first":{"enabled":true,"required":true},"address_second":{"enabled":true,"required":false},"city":{"enabled":true,"required":true},"company":{"enabled":true,"required":false},"country":{"enabled":true,"required":true},"email":{"enabled":true,"required":true},"enabled":false,"first_name":{"enabled":true,"required":true},"last_name":{"enabled":true,"required":true},"phone":{"enabled":true,"required":true},"state":{"enabled":true,"required":true},"zip_code":{"enabled":true,"required":true}},"countries":[],"paymentArrival":true,"paymentArrivalWithApproval":false,"paymentGateways":[],"redirect":"","terms":false,"termsLink":""},"text":{"addressAddressFirst":"Address line 1","addressAddressSecond":"Address line 2","addressBilling":"Billing address","addressBillingDisabled":"Billing address is not enabled.","addressCity":"City","addressCompany":"Company","addressCountry":"Country","addressEmail":"Email","addressFirstName":"First name","addressLastName":"Last name","addressPhone":"Phone number","addressSelectPaymentMethod":"Select payment method.","addressShipping":"Shipping address","addressShippingDisabled":"Shipping address is not enabled.","addressShippingCopy":"Use billing address","addressState":"State/Province","addressZipCode":"Zip code","book":"Book now","paymentArrival":"Pay on arrival (instant booking)","paymentArrivalWithApproval":"Pay on arrival (need to be approved)","paymentArrivalSuccess":"Your request has been successfully received. We are waiting you!","paymentArrivalWithApprovalSuccess":"Your request has been successfully sent. Please wait for approval.","paymentMethod":"Payment method","paymentMethodNone":"None","paymentMethodArrival":"On arrival","paymentMethodTransactionID":"Transaction ID","paymentMethodWooCommerce":"WooCommerce","paymentMethodWooCommerceOrderID":"Order ID","success":"Reservation has been added!","terms":"I accept to agree to the Terms & Conditions.","termsInvalid":"You must agree with our Terms & Conditions to continue.","title":"Order","unavailable":"The period you selected is not available anymore. The calendar will refresh to update the schedule.","unavailableCoupon":"The coupon you entered is not available anymore."}},"reservation":{"data":{},"text":{"addressShippingCopy":"Same as billing address.","buttonApprove":"Approve","buttonCancel":"Cancel","buttonClose":"Close","buttonDelete":"Delete","buttonReject":"Reject","dateCreated":"Date created","id":"ID","instructions":"Click to edit the reservation.","language":"Selected language","noAddressBilling":"No billing address.","noAddressShipping":"No shipping address.","noExtras":"No extras.","noDiscount":"No discount.","noCoupon":"No coupon.","noFees":"No taxes or fees.","noForm":"Form was not completed.","noFormField":"Form field was not completed.","price":"Price","priceChange":"Price change","priceTotal":"Total","selectDays":"Please select the days from calendar.","selectHours":"Please select the days and hours from calendar.","title":"Reservation","titleDetails":"Details"}},"rules":{"data":{"rule":{},"id":0},"text":{"maxTimeLapseDaysWarning":"You can book only a maximum number of %d days.","maxTimeLapseHoursWarning":"You can book only a maximum number of %d hours.","minTimeLapseDaysWarning":"You need to book a minimum number of %d days.","minTimeLapseHoursWarning":"You need to book a minimum number of %d hours."}},"search":{"data":{},"text":{"checkIn":"Check in","checkOut":"Check out","hourEnd":"Finish at","hourStart":"Start at","noItems":"No. book items","noServices":"There are no services available for the period you selected.","noServicesSplitGroup":"You cannot add divided groups to a reservation.","title":"Search"}},"sidebar":{"data":{"noItems":true,"positions":{"search":{"column":1,"row":1},"extras":{"column":1,"row":2},"coupons":{"column":1,"row":3},"reservation":{"column":1,"row":4},"cart":{"column":1,"row":5},"form":{"column":1,"row":6},"order":{"column":1,"row":7}},"style":5},"text":{}},"woocommerce":{"data":{"add_to_cart":false,"enabled":false,"product_id":0},"text":{"addToCart":"Add to cart"}}},ajaxURL='',Container=this,ID=0,methods={init:function(){return this.each(function(){if(options){$.extend(Data,options);}
if(!$(Container).hasClass('dopbsp-initialized')||Data['calendar']['data']['reinitialize']){$(Container).addClass('dopbsp-initialized');methods.parse();$(window).bind('resize.DOPBSPCalendar',methods.rp);}});},parse:function(){ajaxURL=DOPPrototypes.acaoBuster($('a',Container).attr('href'));DOPBSPFrontEnd.calendar[Data['ID']]=Data;methods_calendar.data=Data['calendar']['data'];methods_calendar.text=Data['calendar']['text'];methods_cart.data=Data['cart']['data'];methods_cart.text=Data['cart']['text'];methods_coupons.data=Data['coupons']['data'];methods_coupons.text=Data['coupons']['text'];methods_currency.data=Data['currency']['data'];methods_currency.text=Data['currency']['text'];methods_days.data=Data['days']['data'];methods_days.text=Data['days']['text'];methods_extras.data=Data['extras']['data'];methods_extras.text=Data['extras']['text'];methods_form.data=Data['form']['data'];methods_form.text=Data['form']['text'];methods_hours.data=Data['hours']['data'];methods_hours.text=Data['hours']['text'];ID=Data['ID'];methods_months.data=Data['months']["data"];methods_months.text=Data['months']["text"];methods_order.data=Data['order']["data"];methods_order.text=Data['order']["text"];methods_reservation.data=Data['reservation']["data"];methods_reservation.text=Data['reservation']["text"];methods_search.data=Data['search']["data"];methods_search.text=Data['search']["text"];methods_sidebar.data=Data['sidebar']["data"];methods_sidebar.text=Data['sidebar']["text"];methods_woocommerce.data=Data['woocommerce']["data"];methods_woocommerce.text=Data['woocommerce']["text"];Container.html('<div class="dopbsp-loader"></div>');methods_order.payment.verify();methods_months.init();methods_schedule.parse(new Date().getFullYear());},rp:function(){methods_sidebar.rp();methods_calendar.container.rp();methods_calendar.navigation.rp();methods_day.rp();}},methods_schedule={vars:{schedule:{}},parse:function(year){var scheduleBuffer={};$.post(ajaxURL,{action:'dopbsp_calendar_schedule_get',dopbsp_frontend_ajax_request:true,id:ID,year:year},function(data){if($.trim(data)!==''){scheduleBuffer=JSON.parse($.trim(data));for(var day in scheduleBuffer){scheduleBuffer[day]=JSON.parse(scheduleBuffer[day]);}
$.extend(methods_schedule.vars.schedule,scheduleBuffer);}
if(methods_calendar.vars.display&&(methods_calendar.vars.startMonth<12-methods_months.vars.no+1||methods_calendar.vars.firstYearLoaded||year>=methods_calendar.data['maxYear'])){methods_calendar.vars.display=false;methods_calendar.display();methods_components.init();}
if(!methods_calendar.vars.firstYearLoaded){methods_calendar.vars.firstYearLoaded=true;}
if(year<methods_calendar.data['maxYear']){methods_schedule.parse(year+1);}});},reset:function(){Container.html('<div class="dopbsp-loader"></div>');methods_schedule.vars.schedule={};methods_calendar.vars.display=true;methods_calendar.vars.firstYearLoaded=false;methods_schedule.parse(new Date().getFullYear());}},methods_components={init:function(){var startDate;methods_calendar.vars.todayDate=new Date();methods_calendar.vars.todayDay=methods_calendar.vars.todayDate.getDate();methods_calendar.vars.todayMonth=methods_calendar.vars.todayDate.getMonth()+1;methods_calendar.vars.todayYear=methods_calendar.vars.todayDate.getFullYear();methods_calendar.vars.startDate=new Date(new Date().getTime()+methods_calendar.data['bookingStop']*60*1000);methods_calendar.vars.currMonth=methods_calendar.vars.startDate.getMonth()+1;methods_calendar.vars.currYear=methods_calendar.vars.startDate.getFullYear();methods_calendar.vars.startDay=methods_calendar.vars.startDate.getDate();methods_calendar.vars.startMonth=methods_calendar.vars.startDate.getMonth()+1;methods_calendar.vars.startYear=methods_calendar.vars.startDate.getFullYear();methods_tooltip.display();startDate=DOPPrototypes.getLeadingZero(methods_calendar.vars.startYear)+'-'+DOPPrototypes.getLeadingZero(methods_calendar.vars.startMonth)+'-'+DOPPrototypes.getLeadingZero(methods_calendar.vars.startDay);methods_calendar.container.init();methods_calendar.navigation.init();methods_calendar.init(methods_calendar.vars.startYear,methods_calendar.vars.startMonth+(startDate<methods_days.data['firstDisplayed']?DOPPrototypes.getNoMonths(startDate,methods_days.data['firstDisplayed'])-1:0));if(!methods_calendar.data['view']){methods_search.display();if(methods_extras.data['id']!=='0'){methods_extras.display();}
methods_reservation.display();if(!methods_woocommerce.data['enabled']){if(methods_coupons.data['id']!=='0'){methods_coupons.display();}
methods_cart.display();methods_form.display();methods_order.display();}else{methods_woocommerce.init();}
methods_sidebar.init();}
methods.rp();}},methods_currency={data:{},text:{}},methods_tooltip={display:function(){if($('#DOPBSPCalendar-tooltip'+ID).length!==undefined){$('#DOPBSPCalendar-tooltip'+ID).remove();}
$('body').append('<div class="DOPBSPCalendar-tooltip" id="DOPBSPCalendar-tooltip'+ID+'"></div>');methods_tooltip.init();},init:function(){var $tooltip=$('#DOPBSPCalendar-tooltip'+ID),h,xPos=0,yPos=0;if(!DOPPrototypes.isTouchDevice()){$(document).mousemove(function(e){xPos=e.pageX+15;yPos=e.pageY-10;h=$tooltip.height()+parseFloat($tooltip.css('padding-top'))+parseFloat($tooltip.css('padding-bottom'))+parseFloat($tooltip.css('border-top-width'))+parseFloat($tooltip.css('border-bottom-width'));if($(document).scrollTop()+$(window).height()<yPos+h+10){yPos=$(document).scrollTop()+$(window).height()-h-10;}
$tooltip.css({'left':xPos,'top':yPos});});}else{$tooltip.unbind('touchstart');$tooltip.bind('touchstart',function(e){e.preventDefault();methods_tooltip.clear();});}},set:function(day,hour,type,infoData){var data=(hour===''?methods_schedule.vars.schedule[day]:methods_schedule.vars.schedule[day]['hours'][hour]),info=infoData!==undefined?infoData:data[type]+(data['info_info']!==undefined?(data[type]!==''&&data['info_info'].length>0?'<br /><br />':'')+methods_form.getInfo(data['info_info']):'');if(type==='info-body'){info=methods_form.getInfo(data['info_body']);}
info=decodeURIComponent(unescape(unescape(info)));if(type==='hours'||type==='info-body'){$('#DOPBSPCalendar-tooltip'+ID).removeClass('dopbsp-text');}else{$('#DOPBSPCalendar-tooltip'+ID).addClass('dopbsp-text');}
$('#DOPBSPCalendar-tooltip'+ID).html(info).css('display','block');},clear:function(){$('#DOPBSPCalendar-tooltip'+ID).css('display','none');}},methods_info={vars:{time:0},toggleMessages:function(message,type){type=type===undefined?'dopbsp-error':type;$('#DOPBSPCalendar-info-message'+ID+' .dopbsp-text').html(message);$('#DOPBSPCalendar-info-message'+ID).removeClass('dopbsp-success').removeClass('dopbsp-error').addClass(type).css('display','block');DOPPrototypes.scrollToY($('#DOPBSPCalendar-info-message'+ID).offset().top-100);if(methods_info.vars.time!==0){methods_info.vars.time=15;}else{methods_info.vars.time=15;methods_info.timer();}},timer:function(){$('#DOPBSPCalendar-info-message'+ID+' .dopbsp-timer').html('['+DOPPrototypes.getLeadingZero(methods_info.vars.time)+']');if(methods_info.vars.time===0){$('#DOPBSPCalendar-info-message'+ID).stop(true,true).fadeOut(300);}else{setTimeout(function(){methods_info.vars.time--;methods_info.timer();},1000);}}},methods_calendar={data:{},text:{},vars:{currMonth:new Date(),currYear:new Date(),display:true,firstYearLoaded:false,startDate:new Date(),startDay:new Date(),startMonth:new Date(),startYear:new Date(),todayDate:new Date(),todayDay:new Date(),todayMonth:new Date(),todayYear:new Date()},display:function(){var HTML=new Array();HTML.push('<div class="DOPBSPCalendar-container">');HTML.push('    <div class="DOPBSPCalendar-navigation">');HTML.push('        <div class="dopbsp-month-year"></div>');HTML.push('        <a href="javascript:void(0)" class="dopbsp-add-btn"><span class="dopbsp-info">'+DOPBSPFrontEnd.text(ID,'calendar','addMonth')+'</span></a>');HTML.push('        <a href="javascript:void(0)" class="dopbsp-remove-btn"><span class="dopbsp-info">'+DOPBSPFrontEnd.text(ID,'calendar','removeMonth')+'</span></a>');HTML.push('        <a href="javascript:void(0)" class="dopbsp-next-btn"><span class="dopbsp-info">'+DOPBSPFrontEnd.text(ID,'calendar','nextMonth')+'</span></a>');HTML.push('        <a href="javascript:void(0)" class="dopbsp-previous-btn"><span class="dopbsp-info">'+DOPBSPFrontEnd.text(ID,'calendar','previousMonth')+'</span></a>');HTML.push('        <div class="dopbsp-week">');HTML.push('            <div class="dopbsp-day"></div>');HTML.push('            <div class="dopbsp-day"></div>');HTML.push('            <div class="dopbsp-day"></div>');HTML.push('            <div class="dopbsp-day"></div>');HTML.push('            <div class="dopbsp-day"></div>');HTML.push('            <div class="dopbsp-day"></div>');HTML.push('            <div class="dopbsp-day"></div>');HTML.push('        </div>');HTML.push('    </div>');HTML.push('    <div class="DOPBSPCalendar-calendar"></div>');HTML.push('</div>');var n=0;while(typeof current_place[0].tipo_reserva=='undefined'){n++;}
var tipo_reserva=current_place[0].tipo_reserva;if(!tipo_reserva)tipo_reserva="horas";var cadena="";if(tipo_reserva=="horas"){cadena="*€/H. El propietario de este anuncio cobrará en base a horas reservadas";}else if(tipo_reserva=="servicio"){cadena="*€/S. El propietario de este anuncio cobrará por servicio (un servicio puede requerir varias horas)";}else if(tipo_reserva=="convenir"){cadena="*Negociarás el precio con el propietario una vez hagas la reserva";}else{}
HTML.push('<div class="clear"></div><div class="leyenda_tipo_reserva"><p>'+cadena+'</p></div>');if(!methods_calendar.data['view']){if($('#DOPBSPCalendar-outer-sidebar'+ID).length===0){HTML.push('<div class="DOPBSPCalendar-sidebar dopbsp-style'+methods_sidebar.data['style']+'">'+methods_sidebar.display()+'</div>');}else{HTML.push('<div class="DOPBSPCalendar-sidebar dopbsp-hidden"></div>');$('#DOPBSPCalendar-outer-sidebar'+ID).html(methods_sidebar.display());}}
Container.html(HTML.join(''));},init:function(year,month){var i;methods_calendar.vars.currYear=new Date(year,month,0).getFullYear();methods_calendar.vars.currMonth=month;if(methods_months.vars.no>1){$('.DOPBSPCalendar-navigation .dopbsp-remove-btn',Container).css('display','block');}else{$('.DOPBSPCalendar-navigation .dopbsp-remove-btn',Container).css('display','none');}
if(methods_months.vars.no===methods_months.vars.maxAllowed){$('.DOPBSPCalendar-navigation .dopbsp-add-btn',Container).css('display','none');$('.DOPBSPCalendar-navigation .dopbsp-remove-btn',Container).addClass('dopbsp-no-add');}else{$('.DOPBSPCalendar-navigation .dopbsp-add-btn',Container).css('display','block');$('.DOPBSPCalendar-navigation .dopbsp-remove-btn',Container).removeClass('dopbsp-no-add');}
if(year!==methods_calendar.vars.startYear||month!==methods_calendar.vars.startMonth){$('.DOPBSPCalendar-navigation .dopbsp-previous-btn',Container).css('display','block');}
if(year===methods_calendar.vars.startYear&&month===methods_calendar.vars.startMonth){$('.DOPBSPCalendar-navigation .dopbsp-previous-btn',Container).css('display','none');}
methods_day.vars.previousStatus='';methods_day.vars.previousBind=0;if(Container.width()<=400){$('.DOPBSPCalendar-navigation .dopbsp-month-year',Container).html(DOPBSPFrontEnd.text(ID,'months','names')[(methods_calendar.vars.currMonth%12!==0?methods_calendar.vars.currMonth%12:12)-1]+' '+methods_calendar.vars.currYear);}else{$('.DOPBSPCalendar-navigation .dopbsp-month-year',Container).html(DOPBSPFrontEnd.text(ID,'months','names')[(methods_calendar.vars.currMonth%12!==0?methods_calendar.vars.currMonth%12:12)-1]+' '+methods_calendar.vars.currYear);}
$('.DOPBSPCalendar-calendar',Container).html('');for(i=1;i<=methods_months.vars.no;i++){methods_month.display(methods_calendar.vars.currYear,month=month%12!==0?month%12:12,i);month++;if(month%12===1){methods_calendar.vars.currYear++;month=1;}}
methods_days.displaySelection();methods_day.events.init();if(methods_calendar.vars.firstYearLoaded){methods_day.rp();}
if(methods_hours.data['enabled']&&methods_days.vars.selectionStart!==''){methods_hours.display(methods_days.vars.selectionStart);}},container:{init:function(){methods_calendar.container.rp();},rp:function(){var hiddenBustedItems=DOPPrototypes.doHiddenBuster($(Container));if(Container.width()<500||(methods_sidebar.data['style']===1&&Container.width()<900)||methods_sidebar.data['style']===2||methods_sidebar.data['style']===3||(methods_sidebar.data['style']===4&&Container.width()<660)||(methods_sidebar.data['style']===5&&Container.width()<800)){$('.DOPBSPCalendar-container',Container).width(Container.width());if(methods_sidebar.data['style']===5){$('.DOPBSPCalendar-sidebar',Container).removeAttr('style');}}else{if(methods_sidebar.data['style']===5){$('.DOPBSPCalendar-container',Container).width((Container.width()-21)/2);$('.DOPBSPCalendar-sidebar',Container).width((Container.width()-21)/2);}else{$('.DOPBSPCalendar-container',Container).width(Container.width()-$('.DOPBSPCalendar-sidebar',Container).width()-parseFloat($('.DOPBSPCalendar-sidebar',Container).css('margin-left'))-1);}}
DOPPrototypes.undoHiddenBuster(hiddenBustedItems);}},navigation:{init:function(){methods_calendar.navigation.events();methods_calendar.navigation.rp();},rp:function(){var no=0,hiddenBustedItems=DOPPrototypes.doHiddenBuster($(Container));if($('.DOPBSPCalendar-navigation',Container).width()<=400){$('.DOPBSPCalendar-navigation .dopbsp-month-year',Container).html(DOPBSPFrontEnd.text(ID,'months','names')[(methods_calendar.vars.currMonth%12!==0?methods_calendar.vars.currMonth%12:12)-1]+' '+(new Date(methods_calendar.vars.startYear,methods_calendar.vars.currMonth,0).getFullYear())).addClass('dopbsp-style-small');}else{$('.DOPBSPCalendar-navigation .dopbsp-month-year',Container).html(DOPBSPFrontEnd.text(ID,'months','names')[(methods_calendar.vars.currMonth%12!==0?methods_calendar.vars.currMonth%12:12)-1]+' '+(new Date(methods_calendar.vars.startYear,methods_calendar.vars.currMonth,0).getFullYear())).removeClass('dopbsp-style-small');}
$('.DOPBSPCalendar-navigation .dopbsp-week .dopbsp-day',Container).width(parseInt(($('.DOPBSPCalendar-navigation .dopbsp-week',Container).width()-parseInt($('.DOPBSPCalendar-navigation .dopbsp-week',Container).css('padding-left'))+parseInt($('.DOPBSPCalendar-navigation .dopbsp-week',Container).css('padding-right')))/7));no=methods_days.data['first']-1;$('.DOPBSPCalendar-navigation .dopbsp-week .dopbsp-day',Container).each(function(){no++;if(no===7){no=0;}
if($(this).width()<=70){$(this).html(DOPBSPFrontEnd.text(ID,'days','shortNames')[no]);}else{$(this).html(DOPBSPFrontEnd.text(ID,'days','names')[no]);}});DOPPrototypes.undoHiddenBuster(hiddenBustedItems);},events:function(){$('.DOPBSPCalendar-navigation .dopbsp-previous-btn',Container).unbind('click');$('.DOPBSPCalendar-navigation .dopbsp-previous-btn',Container).bind('click',function(){methods_calendar.init(methods_calendar.vars.startYear,methods_calendar.vars.currMonth-1);if(methods_calendar.vars.currMonth===methods_calendar.vars.startMonth){$('.DOPBSPCalendar-navigation .dopbsp-previous-btn',Container).css('display','none');}});$('.DOPBSPCalendar-navigation .dopbsp-next-btn',Container).unbind('click');$('.DOPBSPCalendar-navigation .dopbsp-next-btn',Container).bind('click',function(){methods_calendar.init(methods_calendar.vars.startYear,methods_calendar.vars.currMonth+1);$('.DOPBSPCalendar-navigation .dopbsp-previous-btn',Container).css('display','block');});$('.DOPBSPCalendar-navigation .dopbsp-add-btn',Container).unbind('click');$('.DOPBSPCalendar-navigation .dopbsp-add-btn',Container).bind('click',function(){methods_months.vars.no++;methods_calendar.init(methods_calendar.vars.startYear,methods_calendar.vars.currMonth);if(methods_months.vars.no>=methods_months.vars.maxAllowed){$('.DOPBSPCalendar-navigation .dopbsp-add-btn',Container).css('display','none');$('.DOPBSPCalendar-navigation .dopbsp-remove-btn',Container).addClass('dopbsp-no-add');}
$('.DOPBSPCalendar-navigation .dopbsp-remove-btn',Container).css('display','block');DOPPrototypes.scrollToY($('.DOPBSPCalendar-calendar',Container).offset().top+$('.DOPBSPCalendar-calendar',Container).height()-$(window).height()+10);});$('.DOPBSPCalendar-navigation .dopbsp-remove-btn',Container).unbind('click');$('.DOPBSPCalendar-navigation .dopbsp-remove-btn',Container).bind('click',function(){methods_months.vars.no--;methods_calendar.init(methods_calendar.vars.startYear,methods_calendar.vars.currMonth);if(methods_months.vars.no<methods_months.vars.maxAllowed){$('.DOPBSPCalendar-navigation .dopbsp-add-btn',Container).css('display','block');$('.DOPBSPCalendar-navigation .dopbsp-remove-btn',Container).removeClass('dopbsp-no-add');}
if(methods_months.vars.no===1){$('.DOPBSPCalendar-navigation .dopbsp-remove-btn',Container).css('display','none');}
DOPPrototypes.scrollToY($('.DOPBSPCalendar-calendar',Container).offset().top+$('.DOPBSPCalendar-calendar',Container).height()-$(window).height()+10);});}}},methods_months={data:{},text:{},vars:{maxAllowed:6,no:1},init:function(){methods_months.vars.no=methods_months.data['no'];}},methods_month={display:function(year,month,position){var cmonth,cday,cyear,d,day=methods_day.default(),HTML=new Array(),i,prevDay,noDays=new Date(year,month,0).getDate(),noDaysPrevMonth=new Date(year,month-1,0).getDate(),firstDay=new Date(year,month-1,2-methods_days.data['first']).getDay(),lastDay=new Date(year,month-1,noDays-methods_days.data['first']+1).getDay(),schedule=methods_schedule.vars.schedule,totalDays=0;if(position>1){HTML.push('<div class="DOPBSPCalendar-month-year">'+DOPBSPFrontEnd.text(ID,'months','names')[(month%12!==0?month%12:12)-1]+' '+year+'</div>');}
HTML.push('<div class="DOPBSPCalendar-month" id="DOPBSPCalendar-month-'+ID+'-'+position+'">');for(i=(firstDay===0?7:firstDay)-1;i>=1;i--){totalDays++;d=new Date(year,month-2,noDaysPrevMonth-i+1);cyear=d.getFullYear();cmonth=DOPPrototypes.getLeadingZero(d.getMonth()+1);cday=DOPPrototypes.getLeadingZero(d.getDate());day=schedule[cyear+'-'+cmonth+'-'+cday]!==undefined?schedule[cyear+'-'+cmonth+'-'+cday]:methods_day.default(DOPPrototypes.getWeekDay(cyear+'-'+cmonth+'-'+cday));prevDay=DOPPrototypes.getPrevDay(cyear+'-'+cmonth+'-'+cday);methods_day.vars.previousStatus=methods_day.vars.previousStatus===''?(schedule[prevDay]!==undefined?schedule[prevDay]['status']:'none'):methods_day.vars.previousStatus;methods_day.vars.previousBind=methods_day.vars.previousBind===0?(schedule[prevDay]!==undefined?schedule[prevDay]['group']:0):methods_day.vars.previousBind;if(methods_calendar.vars.startMonth===month&&methods_calendar.vars.startYear===year){HTML.push(methods_day.display('dopbsp-past-day',ID+'_'+cyear+'-'+cmonth+'-'+cday,d.getDate(),'','','','','','','','none'));}else{HTML.push(methods_day.display('dopbsp-last-month'+(position>1?' dopbsp-mask':''),position>1?ID+'_'+cyear+'-'+cmonth+'-'+cday+'_last':ID+'_'+cyear+'-'+cmonth+'-'+cday,d.getDate(),day['available'],day['bind'],day['info'],day['info_body'],day['info_info'],day['price'],day['promo'],day['status']));}}
for(i=1;i<=noDays;i++){totalDays++;d=new Date(year,month-1,i);cyear=d.getFullYear();cmonth=DOPPrototypes.getLeadingZero(d.getMonth()+1);cday=DOPPrototypes.getLeadingZero(d.getDate());day=schedule[cyear+'-'+cmonth+'-'+cday]!==undefined?schedule[cyear+'-'+cmonth+'-'+cday]:methods_day.default(DOPPrototypes.getWeekDay(cyear+'-'+cmonth+'-'+cday));if(methods_calendar.vars.startMonth===month&&methods_calendar.vars.startYear===year&&methods_calendar.vars.startDay>d.getDate()){HTML.push(methods_day.display('dopbsp-past-day',ID+'_'+cyear+'-'+cmonth+'-'+cday,d.getDate(),'','','','','','','','none'));}else{HTML.push(methods_day.display('dopbsp-curr-month',ID+'_'+cyear+'-'+cmonth+'-'+cday,d.getDate(),day['available'],day['bind'],day['info'],day['info_body'],day['info_info'],day['price'],day['promo'],day['status']));}}
for(i=1;i<=(totalDays+7<42?14:7)-lastDay;i++){d=new Date(year,month,i);cyear=d.getFullYear();cmonth=DOPPrototypes.getLeadingZero(d.getMonth()+1);cday=DOPPrototypes.getLeadingZero(d.getDate());day=schedule[cyear+'-'+cmonth+'-'+cday]!==undefined?schedule[cyear+'-'+cmonth+'-'+cday]:methods_day.default(DOPPrototypes.getWeekDay(cyear+'-'+cmonth+'-'+cday));HTML.push(methods_day.display('dopbsp-next-month'+(position<methods_months.vars.no?' dopbsp-hide':''),position<methods_months.vars.no?ID+'_'+cyear+'-'+cmonth+'-'+cday+'_next':ID+'_'+cyear+'-'+cmonth+'-'+cday,d.getDate(),day['available'],day['bind'],day['info'],day['info_body'],day['info_info'],day['price'],day['promo'],day['status']));}
HTML.push('</div>');HTML.push('<div class="DOPBSPCalendar-hours" id="'+ID+'_'+year+'-'+DOPPrototypes.getLeadingZero(month)+'_hours"></div>');$('.DOPBSPCalendar-calendar',Container).append(HTML.join(''));}},methods_days={data:{},text:{},vars:{selectionEnd:'',selectionInit:false,selectionStart:'',no:0},displaySelection:function(id){var $day,day,$nextDay=undefined,$prevDay=undefined;id=id===undefined?methods_days.vars.selectionEnd:id;methods_days.clearSelection();if(methods_days.vars.selectionStart!==''){if(id<methods_days.vars.selectionStart){$($('.DOPBSPCalendar-day',Container).get().reverse()).each(function(){if($(this).attr('id').split('_').length===2){$day=$(this);day=this;if($day.attr('id')<=methods_days.vars.selectionStart&&$day.attr('id')>=id&&!$day.hasClass('dopbsp-mask')&&!$day.hasClass('dopbsp-past-day')){$day.addClass('dopbsp-selected');if(methods_days.data['morningCheckOut']){if($day.attr('id')===methods_days.vars.selectionStart){$day.addClass('dopbsp-last');}
if($day.attr('id')!==methods_days.vars.selectionStart){$day.addClass('dopbsp-first');if($nextDay!==undefined){$nextDay.removeClass('dopbsp-first');}
$nextDay=$day;}}}}});}else{$('.DOPBSPCalendar-day',Container).each(function(){if($(this).attr('id').split('_').length===2){$day=$(this);day=this;if($day.attr('id')>=methods_days.vars.selectionStart&&$day.attr('id')<=id&&!$day.hasClass('dopbsp-mask')&&!$day.hasClass('dopbsp-past-day')){$day.addClass('dopbsp-selected');if(methods_days.data['morningCheckOut']){if($day.attr('id')===methods_days.vars.selectionStart){$day.addClass('dopbsp-first');}
if($day.attr('id')!==methods_days.vars.selectionStart){$day.addClass('dopbsp-last');if(methods_days.vars.selectionEnd!==''&&$day.attr('id')<methods_days.vars.selectionEnd){$day.removeClass('dopbsp-last');}
if($prevDay!==undefined){$prevDay.removeClass('dopbsp-last');}
$prevDay=$day;}}}}});}}},clearSelection:function(){$('.DOPBSPCalendar-day',Container).removeClass('dopbsp-selected').removeClass('dopbsp-first').removeClass('dopbsp-last');},getSelected:function(ciDay,coDay){var selectedDays=new Array(),y,d,m,ciy,cim,cid,coy,com,cod,firstMonth,lastMonth,firstDay,lastDay,currYear,currMonth,currDay;coDay=coDay===''?ciDay:coDay;ciy=parseInt(ciDay.split('-')[0],10);cim=parseInt(ciDay.split('-')[1],10);cid=parseInt(ciDay.split('-')[2],10);coy=parseInt(coDay.split('-')[0],10);com=parseInt(coDay.split('-')[1],10);cod=parseInt(coDay.split('-')[2],10);for(y=ciy;y<=coy;y++){firstMonth=y===ciy?cim:1;lastMonth=y===coy?com:12;for(m=firstMonth;m<=lastMonth;m++){firstDay=y===ciy&&m===cim?cid:1;lastDay=y===coy&&m===com?cod:new Date(y,m,0).getDate();for(d=firstDay;d<=lastDay;d++){currYear=String(y);currMonth=DOPPrototypes.getLeadingZero(m);currDay=DOPPrototypes.getLeadingZero(d);selectedDays.push(currYear+'-'+currMonth+'-'+currDay);}}}
return selectedDays;},getAvailability:function(ciDay,coDay){var currDay,dayFound,i,maxNoDays,minNoDays,noDays,schedule=methods_schedule.vars.schedule,selectedDays=new Array();coDay=coDay===''&&!methods_days.data['multipleSelect']?ciDay:coDay;if(methods_search.days.validate(ciDay)&&methods_search.days.validate(coDay)&&schedule!=={}){maxNoDays=DOPBSPFrontEndRules.getMaxTimeLapse(ID);minNoDays=DOPBSPFrontEndRules.getMinTimeLapse(ID);noDays=DOPPrototypes.getNoDays(ciDay,coDay)-(methods_days.data['morningCheckOut']?1:0);if(noDays<minNoDays){methods_info.toggleMessages(DOPBSPFrontEnd.text(ID,'rules','minTimeLapseDaysWarning').replace(/%d/gi,minNoDays));return false;}
if(maxNoDays!==0&&noDays>maxNoDays){methods_info.toggleMessages(DOPBSPFrontEnd.text(ID,'rules','maxTimeLapseDaysWarning').replace(/%d/gi,maxNoDays));return false;}
selectedDays=methods_days.getSelected(ciDay,coDay);if(schedule[selectedDays[0]]===undefined||schedule[selectedDays[noDays-1]]===undefined){methods_info.toggleMessages(DOPBSPFrontEnd.text(ID,'search','noServices'));return false;}
if(schedule[selectedDays[0]]['bind']===2||schedule[selectedDays[0]]['bind']===3||schedule[selectedDays[noDays-1]]['bind']===1||schedule[selectedDays[noDays-1]]['bind']===2){methods_info.toggleMessages(DOPBSPFrontEnd.text(ID,'search','noServicesSplitGroup'));return false;}
for(i=0;i<selectedDays.length-(methods_days.data['morningCheckOut']?1:0);i++){dayFound=false;currDay=selectedDays[i];if(schedule[currDay]!==undefined&&(schedule[currDay]['status']==='available'||schedule[currDay]['status']==='special')){dayFound=true;}
if(!dayFound){methods_info.toggleMessages(DOPBSPFrontEnd.text(ID,'search','noServices'));return false;}}
return true;}else{if(!methods_search.days.validate(ciDay)||!methods_search.days.validate(coDay)){return false;}else{methods_info.toggleMessages(DOPBSPFrontEnd.text(ID,'search','noServices'));return false;}}},getNoAvailable:function(){var ciDay,coDay,currDay,i,noAvailable=1000000,schedule=methods_schedule.vars.schedule,selectedDays=new Array();if(methods_days.data['multipleSelect']){ciDay=$('#DOPBSPCalendar-check-in'+ID).val();coDay=$('#DOPBSPCalendar-check-out'+ID).val();}else{ciDay=$('#DOPBSPCalendar-check-in'+ID).val();coDay=$('#DOPBSPCalendar-check-in'+ID).val();}
if(methods_search.days.validate(ciDay)&&methods_search.days.validate(coDay)&&schedule!=={}){selectedDays=methods_days.getSelected(ciDay,coDay);for(i=0;i<selectedDays.length-(methods_days.data['morningCheckOut']?1:0);i++){currDay=selectedDays[i];if(schedule[currDay]===undefined||schedule[currDay]['available']===''){noAvailable=1;}else if(noAvailable>schedule[currDay]['available']){noAvailable=schedule[currDay]['available'];}}}
return noAvailable===0||noAvailable===1000000?1:noAvailable;},getPrice:function(ciDay,coDay){var currDay,i,price,promo,schedule=methods_schedule.vars.schedule,selectedDays=new Array(),totalPrice=0;coDay=coDay===''?ciDay:coDay;selectedDays=methods_days.getSelected(ciDay,coDay);for(i=0;i<selectedDays.length-(methods_days.data['morningCheckOut']?1:0);i++){currDay=selectedDays[i];if(schedule[currDay]!==undefined&&(schedule[currDay]['status']==='available'||schedule[currDay]['status']==='special')&&(schedule[currDay]['bind']===0||schedule[currDay]['bind']===1)){price=parseFloat(schedule[currDay]['price']);promo=parseFloat(schedule[currDay]['promo']);if(price!==0){totalPrice+=promo===0||isNaN(promo)?price:promo;}}}
return totalPrice;},getHistory:function(ciDay,coDay){var currDay,history={},i,selectedDays=new Array(),schedule=methods_schedule.vars.schedule;coDay=coDay===''?ciDay:coDay;selectedDays=methods_days.getSelected(ciDay,coDay);for(i=0;i<selectedDays.length-(methods_days.data['morningCheckOut']?1:0);i++){currDay=selectedDays[i];history[currDay]={"available":"","bind":0,"price":0,"promo":0,"status":""};history[currDay]['available']=schedule[currDay]['available'];history[currDay]['bind']=schedule[currDay]['bind'];history[currDay]['price']=schedule[currDay]['price'];history[currDay]['promo']=schedule[currDay]['promo'];history[currDay]['status']=schedule[currDay]['status'];}
return history;}},methods_day={vars:{displayedHours:false,previousBind:0,previousStatus:''},display:function(type,id,day,available,bind,info,infoBody,infoInfo,price,promo,status){var dayHTML=Array(),contentLine1='&nbsp;',contentLine2='&nbsp;';price=parseFloat(price);promo=parseFloat(promo);methods_days.vars.no++;if(price>0){contentLine1=DOPBSPFrontEnd.setPrice(ID,price);}
if(type!=='dopbsp-past-day'){switch(status){case'available':type+=' dopbsp-available';if(bind===0||bind===1||methods_hours.data['enabled']){if(available>1){contentLine2=available+' '+'<span class="dopbsp-no-available-text">'+DOPBSPFrontEnd.text(ID,'calendar','availableMultiple')+'</span>';}else if(available===1){contentLine2=available+' '+'<span class="dopbsp-no-available-text">'+DOPBSPFrontEnd.text(ID,'calendar','available')+'</span>';}else{contentLine2='<span class="dopbsp-text">'+DOPBSPFrontEnd.text(ID,'calendar','available')+'</span>';}}
break;case'booked':type+=' dopbsp-booked';contentLine2='<span class="dopbsp-no-available-text">'+DOPBSPFrontEnd.text(ID,'calendar','booked')+'</span>';break;case'special':type+=' dopbsp-special';if(bind===0||bind===1||methods_hours.data['enabled']){if(available>1){contentLine2=available+' '+'<span class="dopbsp-no-available-text">'+DOPBSPFrontEnd.text(ID,'calendar','availableMultiple')+'</span>';}else if(available===1){contentLine2=available+' '+'<span class="dopbsp-no-available-text">'+DOPBSPFrontEnd.text(ID,'calendar','available')+'</span>';}else{contentLine2='<span class="dopbsp-text">'+DOPBSPFrontEnd.text(ID,'calendar','available')+'</span>';}}
break;case'unavailable':type+=' dopbsp-unavailable';contentLine2='<span class="dopbsp-no-available-text">'+DOPBSPFrontEnd.text(ID,'calendar','unavailable')+'</span>';break;}
if(type.indexOf('mask')!==-1){type+=' dopbsp-no-cursor-pointer';}else{if(methods_hours.data['enabled']||(!methods_days.data['morningCheckOut']&&(status==='available'||status==='special'))){type+=' dopbsp-cursor-pointer';}}}
if(methods_days.vars.no%7===1){type+=' dopbsp-first-column';}
if(methods_days.vars.no%7===0){type+=' dopbsp-last-column';}
dayHTML.push('<div class="DOPBSPCalendar-day '+type+'" id="'+id+'">');dayHTML.push('  <div class="dopbsp-bind-left'+((bind===2||bind===3)&&(status==='available'||status==='special')&&!methods_hours.data['enabled']?' dopbsp-enabled':'')+(methods_day.vars.previousBind===3&&methods_days.data['morningCheckOut']&&(methods_day.vars.previousStatus==='available'||methods_day.vars.previousStatus==='special')&&!methods_hours.data['enabled']?' dopbsp-extended dopbsp-'+methods_day.vars.previousStatus:'')+'">');dayHTML.push('      <div class="dopbsp-head">&nbsp;</div>');dayHTML.push('      <div class="dopbsp-body">&nbsp;</div>');dayHTML.push('  </div>');dayHTML.push('  <div class="dopbsp-bind-middle dopbsp-group'+((status==='available'||status==='special')&&!methods_hours.data['enabled']?bind:'0')+(bind===3&&methods_days.data['morningCheckOut']&&(status==='available'||status==='special')&&!methods_hours.data['enabled']?' dopbsp-extended':'')+(methods_day.vars.previousBind===3&&methods_days.data['morningCheckOut']&&(methods_day.vars.previousStatus==='available'||methods_day.vars.previousStatus==='special')&&!methods_hours.data['enabled']?' dopbsp-extended':'')+'">');dayHTML.push('      <div class="dopbsp-head">');dayHTML.push('          <div class="dopbsp-co dopbsp-'+(methods_days.data['morningCheckOut']?methods_day.vars.previousStatus:status)+'"></div>');dayHTML.push('          <div class="dopbsp-ci dopbsp-'+status+'"></div>');dayHTML.push('          <div class="dopbsp-day">'+day+'</div>');if((info!==''||(infoInfo!==undefined&&infoInfo.length>0))&&type.indexOf('past-day')===-1){switch(status){case'available':if(bind===0||bind===3||methods_hours.data['enabled']){dayHTML.push('          <div class="dopbsp-info" id="'+id+'_info"></div>');}
break;case'booked':dayHTML.push('          <div class="dopbsp-info" id="'+id+'_info"></div>');break;case'special':if(bind===0||bind===3||methods_hours.data['enabled']){dayHTML.push('          <div class="dopbsp-info" id="'+id+'_info"></div>');}
break;case'unavailable':dayHTML.push('          <div class="dopbsp-info" id="'+id+'_info"></div>');break;default:dayHTML.push('          <div class="dopbsp-info" id="'+id+'_info"></div>');}}
dayHTML.push('      </div>');dayHTML.push('      <div class="dopbsp-body">');dayHTML.push('          <div class="dopbsp-co dopbsp-'+(methods_days.data['morningCheckOut']?methods_day.vars.previousStatus:status)+'"></div>');dayHTML.push('          <div class="dopbsp-ci dopbsp-'+status+'"></div>');dayHTML.push('          <div class="dopbsp-price">'+contentLine1+'</div>');if(promo>0&&(bind===0||bind===1)){dayHTML.push('          <div class="dopbsp-old-price">'+DOPBSPFrontEnd.setPrice(ID,price)+'</div>');}
dayHTML.push('          <br class="DOPBSPCalendar-clear" />');dayHTML.push('          <div class="dopbsp-available">'+contentLine2+'</div>');if((infoBody!==undefined&&infoBody.length>0)&&type.indexOf('past-day')===-1){dayHTML.push('          <div class="dopbsp-info-body" id="'+id+'_info-body">');dayHTML.push('              <div class="dopbsp-info-body-mask">&#8594;</div>');dayHTML.push(methods_form.getInfo(infoBody));dayHTML.push('          </div>');}
dayHTML.push('      </div>');dayHTML.push('  </div>');dayHTML.push('  <div class="dopbsp-bind-right'+((bind===1||bind===2)&&(status==='available'||status==='special')&&!methods_hours.data['enabled']?' dopbsp-enabled':'')+(bind===3&&methods_days.data['morningCheckOut']&&(status==='available'||status==='special')&&!methods_hours.data['enabled']?' dopbsp-extended':'')+'">');dayHTML.push('      <div class="dopbsp-head">&nbsp;</div>');dayHTML.push('      <div class="dopbsp-body">&nbsp;</div>');dayHTML.push('  </div>');dayHTML.push('</div>');if(type!=='dopbsp-past-day'){methods_day.vars.previousStatus=status;methods_day.vars.previousBind=bind;}else{methods_day.vars.previousStatus='none';methods_day.vars.previousBind=0;}
return dayHTML.join('');},default:function(day){return{"available":"","bind":0,"hours_definitions":methods_hours.data['definitions'],"hours":{},"info":"","info_body":"","info_info":"","notes":"","price":0,"promo":0,"status":methods_days.data['available'][day]?"none":"unavailable"};},rp:function(){var $day=$('.DOPBSPCalendar-day',Container),$dayBody=$('.DOPBSPCalendar-day .dopbsp-body',Container),$month=$('#DOPBSPCalendar-month-'+ID+'-1'),dayWidth=0,maxHeight=0,hiddenBustedItems=DOPPrototypes.doHiddenBuster($(Container));dayWidth=parseInt(($month.width()-parseInt($month.css('padding-left'))+parseInt($month.css('padding-right')))/7);$dayBody.removeAttr('style');$day.width(dayWidth);$day.find($('.dopbsp-bind-middle')).width(dayWidth-2);if(dayWidth<=70){$day.find($('.dopbsp-no-available-text')).css('display','none');}else{$day.find($('.dopbsp-no-available-text')).css('display','inline');}
if(dayWidth<=40){$day.addClass('dopbsp-style-small');}else{$day.removeClass('dopbsp-style-small');$('.DOPBSPCalendar-day .dopbsp-bind-middle .dopbsp-body',Container).each(function(){if(maxHeight<$(this).height()){maxHeight=$(this).height();}});$dayBody.height(maxHeight);}
DOPPrototypes.undoHiddenBuster(hiddenBustedItems);},getInfo:function(info){var info=new Array(),i;for(i=0;i<info.length;i++){info.push(info[i]);}
return info.join('<br />');},events:{init:function(){if(!methods_calendar.data['view']){if(methods_hours.data['enabled']){methods_day.events.selectHours();}else{if(methods_days.data['multipleSelect']){methods_day.events.selectMultiple();}else{methods_day.events.selectSingle();}}}else{$('.DOPBSPCalendar-day .dopbsp-co',Container).css('cursor','default');$('.DOPBSPCalendar-day .dopbsp-ci',Container).css('cursor','default');}
if(!DOPPrototypes.isTouchDevice()){if(!methods_calendar.data['view']){$('.DOPBSPCalendar-day',Container).hover(function(){var day=$(this);if(methods_days.vars.selectionInit){methods_days.displaySelection(day.attr('id'));}
if(methods_hours.data['enabled']&&methods_hours.data['info']&&!day.hasClass('dopbsp-past-day')&&!day.hasClass('dopbsp-selected')&&!day.hasClass('dopbsp-mask')){methods_tooltip.set($(this).attr('id').split('_')[1],'','hours',methods_hours.displayInfo(day.attr('id')));}},function(){methods_tooltip.clear();});}
$('.DOPBSPCalendar-day .dopbsp-info',Container).hover(function(){methods_tooltip.set($(this).attr('id').split('_')[1],'','info');},function(){methods_tooltip.clear();});$('.DOPBSPCalendar-day .dopbsp-info-body',Container).hover(function(){methods_tooltip.set($(this).attr('id').split('_')[1],'','info-body');},function(){methods_tooltip.clear();});}else{var xPos=0,yPos=0,touch;$('.DOPBSPCalendar-day .dopbsp-info',Container).unbind('touchstart');$('.DOPBSPCalendar-day .dopbsp-info',Container).bind('touchstart',function(e){e.preventDefault();touch=e.originalEvent.touches[0];xPos=touch.clientX+$(document).scrollLeft();yPos=touch.clientY+$(document).scrollTop();$('#DOPBSPCalendar-tooltip'+ID).css({'left':xPos,'top':yPos});methods_tooltip.set($(this).attr('id').split('_')[1],'','info');});$('.DOPBSPCalendar-day .dopbsp-info-body',Container).unbind('touchstart');$('.DOPBSPCalendar-day .dopbsp-info-body',Container).bind('touchstart',function(e){e.preventDefault();touch=e.originalEvent.touches[0];xPos=touch.clientX+$(document).scrollLeft();yPos=touch.clientY+$(document).scrollTop();$('#DOPBSPCalendar-tooltip'+ID).css({'left':xPos,'top':yPos});methods_tooltip.set($(this).attr('id').split('_')[1],'','info-body');});}},selectHours:function(){$('.DOPBSPCalendar-day',Container).unbind('click');$('.DOPBSPCalendar-day',Container).bind('click',function(){var day=$(this);if(!day.hasClass('dopbsp-mask')&&!day.hasClass('dopbsp-past-day')&&ae_globals.user_ID!=0){$('table.dopbsp-sidebar-content').show();methods_hours.display(day.attr('id'));}else{AE.pubsub.trigger('ae:notification',{msg:'Por favor inicie sesión o registrese para poder realizar la reserva del servicio',notice_type:'error',});}});},selectMultiple:function(){$('.DOPBSPCalendar-day',Container).unbind('click');$('.DOPBSPCalendar-day',Container).bind('click',function(){var auxDate,$day=$(this),eDate,eDay,eMonth,eYear,minDateValue=0,sDate,sDay,sMonth,sYear;setTimeout(function(){if(!$day.hasClass('dopbsp-mask')&&!$day.hasClass('dopbsp-past-day')){if(!methods_days.vars.selectionInit){methods_days.vars.selectionInit=true;methods_days.vars.selectionStart=$day.attr('id');methods_days.vars.selectionEnd='';sDate=methods_days.vars.selectionStart.split('_')[1];sYear=sDate.split('-')[0];sMonth=parseInt(sDate.split('-')[1],10)-1;sDay=sDate.split('-')[2];minDateValue=DOPPrototypes.getNoDays(DOPPrototypes.getToday(),sDate)-(methods_days.data['morningCheckOut']?0:1);$('#DOPBSPCalendar-check-in'+ID).val(sDate);$('#DOPBSPCalendar-check-in-view'+ID).val(methods_calendar.data['dateType']===1?DOPBSPFrontEnd.text(ID,'months','names')[sMonth]+' '+sDay+', '+sYear:sDay+' '+DOPBSPFrontEnd.text(ID,'months','names')[sMonth]+' '+sYear);$('#DOPBSPCalendar-check-out'+ID).val('');$('#DOPBSPCalendar-check-out-view'+ID).val(DOPBSPFrontEnd.text(ID,'search','checkOut')).removeAttr('disabled');methods_search.days.initDatepicker('#DOPBSPCalendar-check-out-view'+ID,'#DOPBSPCalendar-check-out'+ID,minDateValue);methods_days.displaySelection(methods_days.vars.selectionStart);}else if(!methods_days.data['morningCheckOut']||(methods_days.data['morningCheckOut']&&methods_days.vars.selectionStart!==$day.attr('id'))){methods_days.vars.selectionInit=false;methods_days.vars.selectionEnd=$day.attr('id');$('#DOPBSPCalendar-check-out-view'+ID).removeAttr('disabled');if(methods_days.vars.selectionStart>methods_days.vars.selectionEnd){auxDate=methods_days.vars.selectionStart;methods_days.vars.selectionStart=methods_days.vars.selectionEnd;methods_days.vars.selectionEnd=auxDate;}
sDate=methods_days.vars.selectionStart.split('_')[1];sYear=sDate.split('-')[0];sMonth=parseInt(sDate.split('-')[1],10)-1;sDay=sDate.split('-')[2];eDate=methods_days.vars.selectionEnd.split('_')[1];eYear=eDate.split('-')[0];eMonth=parseInt(eDate.split('-')[1],10)-1;eDay=eDate.split('-')[2];minDateValue=DOPPrototypes.getNoDays(DOPPrototypes.getToday(),sDate)-(methods_days.data['morningCheckOut']?0:1);$('#DOPBSPCalendar-check-in'+ID).val(sDate);$('#DOPBSPCalendar-check-in-view'+ID).val(methods_calendar.data['dateType']===1?DOPBSPFrontEnd.text(ID,'months','names')[sMonth]+' '+sDay+', '+sYear:sDay+' '+DOPBSPFrontEnd.text(ID,'months','names')[sMonth]+' '+sYear);$('#DOPBSPCalendar-check-out'+ID).val(eDate);$('#DOPBSPCalendar-check-out-view'+ID).val(methods_calendar.data['dateType']===1?DOPBSPFrontEnd.text(ID,'months','names')[eMonth]+' '+eDay+', '+eYear:eDay+' '+DOPBSPFrontEnd.text(ID,'months','names')[eMonth]+' '+eYear);methods_search.days.initDatepicker('#DOPBSPCalendar-check-out-view'+ID,'#DOPBSPCalendar-check-out'+ID,minDateValue);methods_days.displaySelection(methods_days.vars.selectionEnd);methods_search.set();}}},10);});},selectSingle:function(){$('.DOPBSPCalendar-day',Container).unbind('click');$('.DOPBSPCalendar-day',Container).bind('click',function(){var day=$(this),dayThis=this,sDate,sDay,sMonth,sYear;setTimeout(function(){if((day.hasClass('dopbsp-available')||day.hasClass('dopbsp-special'))&&$('.dopbsp-bind-middle',dayThis).hasClass('dopbsp-group0')){methods_days.vars.selectionInit=false;methods_days.vars.selectionStart=day.attr('id');methods_days.vars.selectionEnd=day.attr('id');sDate=methods_days.vars.selectionStart.split('_')[1];sYear=sDate.split('-')[0];sMonth=parseInt(sDate.split('-')[1],10)-1;sDay=sDate.split('-')[2];$('#DOPBSPCalendar-check-in'+ID).val(sDate);$('#DOPBSPCalendar-check-in-view'+ID).val(methods_calendar.data['dateType']===1?DOPBSPFrontEnd.text(ID,'months','names')[sMonth]+' '+sDay+', '+sYear:sDay+' '+DOPBSPFrontEnd.text(ID,'months','names')[sMonth]+' '+sYear);methods_days.displaySelection(methods_days.vars.selectionEnd);methods_search.set();}},10);});}}},methods_hours={data:{},text:{},vars:{selectionEnd:'',selectionInit:false,selectionStart:''},display:function(id){var currHour=methods_calendar.vars.startDate.getHours(),currMin=methods_calendar.vars.startDate.getMinutes(),hour,hoursContainer,hoursDef=methods_hours.data['definitions'],HTML=new Array(),i,date=id.split('_')[1],year=date.split('-')[0],month=date.split('-')[1],day=date.split('-')[2];methods_days.vars.selectionInit=false;methods_days.vars.selectionStart=id;methods_days.vars.selectionEnd=id;methods_day.vars.displayedHours=true;methods_hours.vars.selectionInit=false;methods_hours.vars.selectionStart='';methods_hours.vars.selectionEnd='';$('#DOPBSPCalendar-check-in'+ID).val(date);$('#DOPBSPCalendar-check-in-view'+ID).val(methods_calendar.data['dateType']===1?DOPBSPFrontEnd.text(ID,'months','names')[parseInt(month,10)-1]+' '+day+', '+year:day+' '+DOPBSPFrontEnd.text(ID,'months','names')[parseInt(month,10)-1]+' '+year);methods_days.displaySelection(methods_days.vars.selectionEnd);$('#'+methods_days.vars.selectionStart).addClass('dopbsp-selected');methods_search.set();if(methods_schedule.vars.schedule[date]!==undefined){hoursDef=methods_schedule.vars.schedule[date]['hours_definitions'];}
for(i=0;i<hoursDef.length-(methods_hours.data['interval']?1:0);i++){if(methods_schedule.vars.schedule[date]!==undefined&&methods_schedule.vars.schedule[date]['hours'][hoursDef[i]['value']]!==undefined){hour=methods_schedule.vars.schedule[date]['hours'][hoursDef[i]['value']];}else{hour=methods_hour.default();}
HTML.push(methods_hour.display(ID+'_'+hoursDef[i]['value'],hoursDef[i]['value'],hour['available'],hour['bind'],hour['info'],hour['info_body'],hour['info_info'],hour['price'],hour['promo'],hoursDef[i]['value']<DOPPrototypes.getLeadingZero(currHour)+':'+DOPPrototypes.getLeadingZero(currMin)&&methods_calendar.vars.startYear+'-'+DOPPrototypes.getLeadingZero(methods_calendar.vars.startMonth)+'-'+DOPPrototypes.getLeadingZero(methods_calendar.vars.startDay)===year+'-'+month+'-'+day?'past-hour':hour['status'],hoursDef));}
$('.DOPBSPCalendar-hours',Container).css('display','none').html('');if($('#'+id).hasClass('dopbsp-next-month')){$('.DOPBSPCalendar-hours',Container).each(function(){hoursContainer=$(this);});hoursContainer.css('display','block').html(HTML.join(''));}else if($('#'+id).hasClass('dopbsp-last-month')){$($('.DOPBSPCalendar-hours',Container).get().reverse()).each(function(){hoursContainer=$(this);});hoursContainer.css('display','block').html(HTML.join(''));}else{$('#'+ID+'_'+year+'-'+month+'_hours').css('display','block').html(HTML.join(''));}
methods_hour.events.init();methods_search.hours.set();},displayInfo:function(id){var currHour=methods_calendar.vars.startDate.getHours(),currMin=methods_calendar.vars.startDate.getMinutes(),hour,hoursDef=methods_hours.data['definitions'],HTML=new Array(),i,date=id.split('_')[1],year=date.split('-')[0],month=date.split('-')[1],day=date.split('-')[2];if(methods_schedule.vars.schedule[date]!==undefined){hoursDef=methods_schedule.vars.schedule[date]['hours_definitions'];}
for(i=0;i<hoursDef.length-(methods_hours.data['interval']?1:0);i++){if(methods_schedule.vars.schedule[date]!==undefined&&methods_schedule.vars.schedule[date]['hours'][hoursDef[i]['value']]!==undefined){hour=methods_schedule.vars.schedule[date]['hours'][hoursDef[i]['value']];}else{hour=methods_hour.default();}
HTML.push(methods_hour.display(ID+'_'+hoursDef[i]['value'],hoursDef[i]['value'],hour['available'],hour['bind'],'',hour['info_body'],'',hour['price'],hour['promo'],hoursDef[i]['value']<DOPPrototypes.getLeadingZero(currHour)+':'+DOPPrototypes.getLeadingZero(currMin)&&methods_calendar.vars.startYear+'-'+DOPPrototypes.getLeadingZero(methods_calendar.vars.startMonth)+'-'+DOPPrototypes.getLeadingZero(methods_calendar.vars.startDay)===year+'-'+month+'-'+day?'past-hour':hour['status'],hoursDef));}
return HTML.join('');},displaySelection:function(id){var hour;id=id===undefined?methods_hours.vars.selectionEnd:id;$('.DOPBSPCalendar-hour',Container).removeClass('dopbsp-selected');if(id<methods_hours.vars.selectionStart){$($('.DOPBSPCalendar-hour',Container).get().reverse()).each(function(){hour=$(this);if(hour.attr('id')>=id&&hour.attr('id')<=methods_hours.vars.selectionStart&&!hour.hasClass('dopbsp-past-hour')){hour.addClass('dopbsp-selected');}});}else{$('.DOPBSPCalendar-hour',Container).each(function(){hour=$(this);if(hour.attr('id')>=methods_hours.vars.selectionStart&&hour.attr('id')<=id&&!hour.hasClass('dopbsp-past-hour')){hour.addClass('dopbsp-selected');}});}
$('.DOPBSPCalendar-hour.selected .dopbsp-bind-middle',Container).removeAttr('style');$('.DOPBSPCalendar-hour.selected .dopbsp-bind-middle .dopbsp-hour',Container).removeAttr('style');},clear:function(){methods_days.vars.selectionInit=false;methods_days.vars.selectionStart='';methods_days.vars.selectionEnd='';methods_day.vars.displayedHours='';methods_hours.vars.selectionInit=false;methods_hours.vars.selectionStart='';methods_hours.vars.selectionEnd='';methods_days.clearSelection();$('.DOPBSPCalendar-hours',Container).css('display','none').html('');methods_search.set();},getSelected:function(day,startHour,endHour){var schedule=methods_schedule.vars.schedule,selectedHours=new Array();endHour=endHour===''?startHour:endHour;$.each(schedule[day]['hours_definitions'],function(index){if(startHour<=schedule[day]['hours_definitions'][index]['value']&&schedule[day]['hours_definitions'][index]['value']<=endHour){selectedHours.push(schedule[day]['hours_definitions'][index]['value']);}});return selectedHours;},getAvailability:function(day,startHour,endHour){var currHour,hourFound,hoursDiff=((!methods_hours.data['addLastHourToTotalPrice']||methods_hours.data['interval'])&&methods_hours.data['multipleSelect']?1:0),i,maxNoMinutes,minNoMinutes,noMinutes,schedule=methods_schedule.vars.schedule,selectedHours=new Array();endHour=endHour===''&&!methods_hours.data['multipleSelect']?startHour:endHour;if(methods_search.days.validate(day)&&startHour!==''&&endHour!==''&&schedule!=={}&&schedule[day]!==undefined){maxNoMinutes=DOPBSPFrontEndRules.getMaxTimeLapse(ID)*60;minNoMinutes=DOPBSPFrontEndRules.getMinTimeLapse(ID)*60;noMinutes=DOPPrototypes.getHoursDifference(startHour,endHour,'minutes');if(noMinutes<minNoMinutes){methods_info.toggleMessages(DOPBSPFrontEnd.text(ID,'rules','minTimeLapseHoursWarning').replace(/%d/gi,minNoMinutes/60));return false;}
if(maxNoMinutes!==0&&noMinutes>maxNoMinutes){methods_info.toggleMessages(DOPBSPFrontEnd.text(ID,'rules','maxTimeLapseHoursWarning').replace(/%d/gi,maxNoMinutes/60));return false;}
selectedHours=methods_hours.getSelected(day,startHour,endHour);if(schedule[day]['hours'][selectedHours[0]]===undefined||schedule[day]['hours'][selectedHours[selectedHours.length-hoursDiff-1]]===undefined){methods_info.toggleMessages(DOPBSPFrontEnd.text(ID,'search','noServices'));return false;}
if(schedule[day]['hours'][selectedHours[0]]['bind']===2||schedule[day]['hours'][selectedHours[0]]['bind']===3||schedule[day]['hours'][selectedHours[selectedHours.length-hoursDiff-1]]['bind']===1||schedule[day]['hours'][selectedHours[selectedHours.length-hoursDiff-1]]['bind']===2){methods_info.toggleMessages(DOPBSPFrontEnd.text(ID,'search','noServicesSplitGroup'));return false;}
for(i=0;i<selectedHours.length-hoursDiff;i++){hourFound=false;currHour=selectedHours[i];if(schedule[day]['hours'][currHour]!==undefined&&(schedule[day]['hours'][currHour]['status']==='available'||schedule[day]['hours'][currHour]['status']==='special')){hourFound=true;}
if(!hourFound){methods_info.toggleMessages(DOPBSPFrontEnd.text(ID,'search','noServices'));return false;}}
return true;}else{if(!methods_search.days.validate(day)||startHour===''||endHour===''){return false;}else{methods_info.toggleMessages(DOPBSPFrontEnd.text(ID,'search','noServices'));return false;}}},getNoAvailable:function(){var currHour,day,endHour,i,noAvailable=1000000,schedule=methods_schedule.vars.schedule,selectedHours=new Array(),startHour;day=$('#DOPBSPCalendar-check-in'+ID).val();if(methods_hours.data['multipleSelect']){startHour=$('#DOPBSPCalendar-start-hour'+ID).val();endHour=$('#DOPBSPCalendar-end-hour'+ID).val();}else{startHour=$('#DOPBSPCalendar-start-hour'+ID).val();endHour=$('#DOPBSPCalendar-start-hour'+ID).val();}
if(methods_search.days.validate(day)&&startHour!==''&&endHour!==''&&schedule!=={}&&schedule[day]!==undefined){selectedHours=methods_hours.getSelected(day,startHour,endHour);for(i=0;i<selectedHours.length-((!methods_hours.data['addLastHourToTotalPrice']||methods_hours.data['interval'])&&methods_hours.data['multipleSelect']?1:0);i++){currHour=selectedHours[i];if(schedule[day]['hours'][currHour]!==undefined&&(schedule[day]['hours'][currHour]['status']==='available'||schedule[day]['hours'][currHour]['status']==='special')){if(schedule[day]['hours'][currHour]['available']===''){noAvailable=1;}else if(parseInt(schedule[day]['hours'][currHour]['available'],10)<noAvailable){noAvailable=parseInt(schedule[day]['hours'][currHour]['available'],10);}}}}
return noAvailable===0||noAvailable===1000000?1:noAvailable;},getPrice:function(day,startHour,endHour){var currHour,i,price,promo,schedule=methods_schedule.vars.schedule,selectedHours=new Array(),totalPrice=0;endHour=endHour===''?startHour:endHour;selectedHours=methods_hours.getSelected(day,startHour,endHour);for(i=0;i<selectedHours.length-((!methods_hours.data['addLastHourToTotalPrice']||methods_hours.data['interval'])&&methods_hours.data['multipleSelect']?1:0);i++){currHour=selectedHours[i];if(schedule[day]['hours'][currHour]!==undefined&&(schedule[day]['hours'][currHour]['status']==='available'||schedule[day]['hours'][currHour]['status']==='special')&&(schedule[day]['hours'][currHour]['bind']===0||schedule[day]['hours'][currHour]['bind']===1)){price=parseFloat(schedule[day]['hours'][currHour]['price']);promo=parseFloat(schedule[day]['hours'][currHour]['promo']);if(price!==0){totalPrice+=promo===0?price:promo;}}}
return totalPrice;},getHistory:function(day,startHour,endHour){var currHour,history={},i,schedule=methods_schedule.vars.schedule,selectedHours=new Array();endHour=endHour===''?startHour:endHour;selectedHours=methods_hours.getSelected(day,startHour,endHour);for(i=0;i<selectedHours.length-((!methods_hours.data['addLastHourToTotalPrice']||methods_hours.data['interval'])&&methods_hours.data['multipleSelect']?1:0);i++){currHour=selectedHours[i];history[currHour]={"available":"","bind":0,"price":0,"promo":0,"status":""};history[currHour]['available']=schedule[day]['hours'][currHour]['available'];history[currHour]['bind']=schedule[day]['hours'][currHour]['bind'];history[currHour]['price']=schedule[day]['hours'][currHour]['price'];history[currHour]['promo']=schedule[day]['hours'][currHour]['promo'];history[currHour]['status']=schedule[day]['hours'][currHour]['status'];}
return history;}},methods_hour={display:function(id,hour,available,bind,info,infoBody,infoInfo,price,promo,status,hoursDef){var hourHTML=new Array(),priceContent='&nbsp;',availableContent='&nbsp;',type='';if(status!=='past-hour'){if(price>0&&(bind===0||bind===1)){priceContent=DOPBSPFrontEnd.setPrice(ID,price);}
if(promo>0&&(bind===0||bind===1)){priceContent=DOPBSPFrontEnd.setPrice(ID,promo);}
switch(status){case'available':type+=' dopbsp-available';if(bind===0||bind===1){if(available>1){availableContent=available+' '+DOPBSPFrontEnd.text(ID,'calendar','availableMultiple');}else if(available===1){availableContent=available+' '+DOPBSPFrontEnd.text(ID,'calendar','available');}else{availableContent=DOPBSPFrontEnd.text(ID,'calendar','available');}}
break;case'booked':type+=' dopbsp-booked';if(bind===0||bind===1){availableContent=DOPBSPFrontEnd.text(ID,'calendar','booked');}
break;case'special':type+=' dopbsp-special';if(bind===0||bind===1){if(available>1){availableContent=available+' '+DOPBSPFrontEnd.text(ID,'calendar','availableMultiple');}else if(available===1){availableContent=available+' '+DOPBSPFrontEnd.text(ID,'calendar','available');}else{availableContent=DOPBSPFrontEnd.text(ID,'calendar','available');}}
break;case'unavailable':type+=' dopbsp-unavailable';if(bind===0||bind===1){availableContent=DOPBSPFrontEnd.text(ID,'calendar','unavailable');}
break;}}else{type=' dopbsp-'+status;}
hourHTML.push('<div class="DOPBSPCalendar-hour'+type+'" id="'+id+'">');hourHTML.push('    <div class="dopbsp-bind-top'+((bind===2||bind===3)&&(status==='available'||status==='special')?' dopbsp-enabled':'')+'"><div class="dopbsp-hour">&nbsp;</div></div>');hourHTML.push('    <div class="dopbsp-bind-middle dopbsp-group'+(status==='available'||status==='special'?bind:'0')+'">');hourHTML.push('        <div class="dopbsp-hour" id="madafaka">'+(methods_hours.data['ampm']?DOPPrototypes.getAMPM(hour):hour)+(methods_hours.data['interval']?' - '+(methods_hours.data['ampm']?DOPPrototypes.getAMPM(methods_hour.getNext(hour,hoursDef)):methods_hour.getNext(hour,hoursDef)):'')+'</div>');if(price>0&&type!==' dopbsp-past-hour'&&(bind===0||bind===1)){hourHTML.push('        <div class="'+(promo>0?'dopbsp-price-promo':'dopbsp-price')+'">'+priceContent+'</div>');}
if(promo>0&&type!==' dopbsp-past-hour'&&(bind===0||bind===1)){hourHTML.push('        <div class="dopbsp-old-price">'+DOPBSPFrontEnd.setPrice(ID,price)+'</div>');}
hourHTML.push('        <div class="dopbsp-available">'+availableContent+'</div>');if((infoBody!==undefined&&infoBody.length>0)&&type!==' dopbsp-past-hour'){hourHTML.push('          <div class="dopbsp-info-body" id="'+id+'_info-body">');hourHTML.push('              <div class="dopbsp-info-body-mask">&#8594;</div>');hourHTML.push(methods_form.getInfo(infoBody));hourHTML.push('          </div>');}
if((info!==''||(infoInfo!==undefined&&infoInfo.length>0))&&type!==' dopbsp-past-hour'&&(bind===0||bind===1)){hourHTML.push('        <div class="dopbsp-info" id="'+id+'_info"></div>');}
hourHTML.push('    </div>');hourHTML.push('    <div class="dopbsp-bind-bottom'+((bind===1||bind===2)&&(status==='available'||status==='special')?' dopbsp-enabled':'')+'"><div class="dopbsp-hour">&nbsp;</div></div>');hourHTML.push('</div>');return hourHTML.join('');},default:function(){return{"available":"","bind":0,"info":"","info_body":"","info_info":"","notes":"","price":0,"promo":0,"status":"none"};},getNext:function(hour,hours){var nextHour='24:00',i;for(i=hours.length-1;i>=0;i--){if(hours[i]['value']>hour){nextHour=hours[i]['value'];}}
return nextHour;},getPrev:function(hour,hours){var previousHour='00:00',i;for(i=0;i<hours.length;i++){if(hours[i]['value']<hour){previousHour=hours[i]['value'];}}
return previousHour;},events:{init:function(){if(methods_hours.data['multipleSelect']){methods_hour.events.selectMultiple();}else{methods_hour.events.selectSingle();}
if(!DOPPrototypes.isTouchDevice()){$('.DOPBSPCalendar-hour',Container).hover(function(){var hour=$(this);if(methods_hours.vars.selectionInit){methods_hours.displaySelection(hour.attr('id'));}});$('.DOPBSPCalendar-hour .dopbsp-info',Container).hover(function(){methods_tooltip.set(methods_days.vars.selectionStart.split('_')[1],$(this).attr('id').split('_')[1],'info');},function(){methods_tooltip.clear();});$('.DOPBSPCalendar-hour .dopbsp-info-body',Container).hover(function(){methods_tooltip.set(methods_days.vars.selectionStart.split('_')[1],$(this).attr('id').split('_')[1],'info-body');},function(){methods_tooltip.clear();});}else{var xPos=0,yPos=0,touch;$('.DOPBSPCalendar-hour .dopbsp-info',Container).unbind('touchstart');$('.DOPBSPCalendar-hour .dopbsp-info',Container).bind('touchstart',function(e){e.preventDefault();touch=e.originalEvent.touches[0];xPos=touch.clientX+$(document).scrollLeft();yPos=touch.clientY+$(document).scrollTop();$('#DOPBSPCalendar-tooltip'+ID).css({'left':xPos,'top':yPos});methods_tooltip.set(methods_days.vars.selectionStart.split('_')[1],$(this).attr('id').split('_')[1],'info');});$('.DOPBSPCalendar-hour .dopbsp-info-body',Container).unbind('touchstart');$('.DOPBSPCalendar-hour .dopbsp-info-body',Container).bind('touchstart',function(e){e.preventDefault();touch=e.originalEvent.touches[0];xPos=touch.clientX+$(document).scrollLeft();yPos=touch.clientY+$(document).scrollTop();$('#DOPBSPCalendar-tooltip'+ID).css({'left':xPos,'top':yPos});methods_tooltip.set(methods_days.vars.selectionStart.split('_')[1],$(this).attr('id').split('_')[1],'info-body');});}},selectMultiple:function(){$('.DOPBSPCalendar-hour',Container).unbind('click');$('.DOPBSPCalendar-hour',Container).bind('click',function(){var hour=$(this),selectionAux,selectionDay=methods_days.vars.selectionStart,schedule=methods_schedule.vars.schedule,hoursDef=schedule[selectionDay.split('_')[1]]!==undefined?schedule[selectionDay.split('_')[1]]['hours_definitions']:methods_hours.data['definitions'];setTimeout(function(){if(!methods_hours.vars.selectionInit){methods_hours.vars.selectionInit=true;methods_hours.vars.selectionStart=hour.attr('id');methods_hours.vars.selectionEnd='';methods_search.set();methods_hours.displaySelection(methods_hours.vars.selectionStart);}else if((((!methods_hours.data['addLastHourToTotalPrice']&&(methods_hours.vars.selectionStart!==hour.attr('id')||methods_hours.data['interval']))||methods_hours.data['addLastHourToTotalPrice']))||(!methods_hours.data['interval']&&!methods_hours.data['addLastHourToTotalPrice']&&methods_hours.vars.selectionStart!==hour.attr('id'))){methods_hours.vars.selectionInit=false;methods_hours.vars.selectionEnd=hour.attr('id');if(methods_hours.vars.selectionStart>methods_hours.vars.selectionEnd){selectionAux=methods_hours.vars.selectionStart;methods_hours.vars.selectionStart=methods_hours.vars.selectionEnd;methods_hours.vars.selectionEnd=selectionAux;}
methods_hours.displaySelection(methods_hours.vars.selectionEnd);if(methods_hours.data['interval']){methods_hours.vars.selectionEnd=ID+'_'+methods_hour.getNext(methods_hours.vars.selectionEnd.split('_')[1],hoursDef);}
methods_search.set();}},10);});},selectSingle:function(){$('.DOPBSPCalendar-hour',Container).unbind('click');$('.DOPBSPCalendar-hour',Container).bind('click',function(){var $hour=$(this),hour=this;setTimeout(function(){if(($hour.hasClass('dopbsp-available')||$hour.hasClass('dopbsp-special'))&&$('.dopbsp-bind-middle',hour).hasClass('dopbsp-group0')){methods_hours.vars.selectionInit=false;methods_hours.vars.selectionStart=$hour.attr('id');methods_hours.vars.selectionEnd=$hour.attr('id');methods_hours.displaySelection(methods_hours.vars.selectionEnd);methods_search.set();}},10);});}}},methods_sidebar={data:{},text:{},display:function(){var HTML=new Array();HTML.push('<form name="DOPBSPCalendar-form'+ID+'" id="DOPBSPCalendar-form'+ID+'" action="" method="POST" onsubmit="return false;">');HTML.push(' <table class="dopbsp-sidebar-content" style="display:none;">');HTML.push('     <colgroup>');HTML.push('         <col class="dopbsp-column1" />');HTML.push('         <col class="dopbsp-column-separator-style dopbsp-column2" />');HTML.push('         <col class="dopbsp-column3" />');HTML.push('     </colgroup>');HTML.push('     <tbody>');HTML.push('         <tr>');HTML.push('             <td class="dopbsp-column1">');HTML.push('                 <table class="dopbsp-sidebar-content">');HTML.push('                     <colgroup>');HTML.push('                         <col class="dopbsp-column4" />');HTML.push('                         <col class="dopbsp-column-separator-style dopbsp-column5" />');HTML.push('                         <col class="dopbsp-column6" />');HTML.push('                     </colgroup>');HTML.push('                     <tbody>');HTML.push('                         <tr>');HTML.push('                             <td id="DOPBSPCalendar-sidebar-column-wrapper-1-'+ID+'" class="dopbsp-column4">');HTML.push('                                 <div class="dopbsp-row1"></div>');HTML.push('                                 <div class="dopbsp-row2"></div>');HTML.push('                                 <div class="dopbsp-row3"></div>');HTML.push('                                 <div class="dopbsp-row4"></div>');HTML.push('                                 <div class="dopbsp-row5"></div>');HTML.push('                                 <div class="dopbsp-row6"></div>');HTML.push('                                 <div class="dopbsp-row7"></div>');HTML.push('                             </td>');HTML.push('                             <td class="dopbsp-column-separator dopbsp-column5"></td>');HTML.push('                             <td id="DOPBSPCalendar-sidebar-column-wrapper-2-'+ID+'" class="dopbsp-column6">');HTML.push('                                 <div class="dopbsp-row1"></div>');HTML.push('                                 <div class="dopbsp-row2"></div>');HTML.push('                                 <div class="dopbsp-row3"></div>');HTML.push('                                 <div class="dopbsp-row4"></div>');HTML.push('                                 <div class="dopbsp-row5"></div>');HTML.push('                                 <div class="dopbsp-row6"></div>');HTML.push('                                 <div class="dopbsp-row7"></div>');HTML.push('                             </td>');HTML.push('                         </tr>');HTML.push('                     </tbody>');HTML.push('                 </table>');HTML.push('             </td>');HTML.push('             <td class="dopbsp-column-separator dopbsp-column2"></td>');HTML.push('             <td class="dopbsp-column3">');HTML.push('                 <table class="dopbsp-sidebar-content level2">');HTML.push('                     <colgroup>');HTML.push('                         <col class="dopbsp-column7" />');HTML.push('                         <col class="dopbsp-column-separator-style dopbsp-column8" />');HTML.push('                         <col class="dopbsp-column9" />');HTML.push('                     </colgroup>');HTML.push('                     <tbody>');HTML.push('                         <tr>');HTML.push('                             <td id="DOPBSPCalendar-sidebar-column-wrapper-3-'+ID+'" class="dopbsp-column7">');HTML.push('                                 <div class="dopbsp-row1"></div>');HTML.push('                                 <div class="dopbsp-row2"></div>');HTML.push('                                 <div class="dopbsp-row3"></div>');HTML.push('                                 <div class="dopbsp-row4"></div>');HTML.push('                                 <div class="dopbsp-row5"></div>');HTML.push('                                 <div class="dopbsp-row6"></div>');HTML.push('                                 <div class="dopbsp-row7"></div>');HTML.push('                             </td>');HTML.push('                             <td class="dopbsp-column-separator dopbsp-column8"></td>');HTML.push('                             <td id="DOPBSPCalendar-sidebar-column-wrapper-4-'+ID+'" class="dopbsp-column9">');HTML.push('                                 <div class="dopbsp-row1"></div>');HTML.push('                                 <div class="dopbsp-row2"></div>');HTML.push('                                 <div class="dopbsp-row3"></div>');HTML.push('                                 <div class="dopbsp-row4"></div>');HTML.push('                                 <div class="dopbsp-row5"></div>');HTML.push('                                 <div class="dopbsp-row6"></div>');HTML.push('                                 <div class="dopbsp-row7"></div>');HTML.push('                             </td>');HTML.push('                         </tr>');HTML.push('                     </tbody>');HTML.push('                 </table>');HTML.push('             </td>');HTML.push('         </tr>');HTML.push('     <tbody>');HTML.push(' </table>');HTML.push('</form>');return HTML.join('');},init:function(){methods_search.init();methods_reservation.init();if(methods_extras.data['id']!=='0'){methods_extras.init();}
if(methods_coupons.data['id']!=='0'){methods_coupons.init();}},getDateFormat:function(date){var year=date.split('-')[0],month=date.split('-')[1],day=date.split('-')[2];return methods_calendar.data['dateType']===1?DOPBSPFrontEnd.text(ID,'months','names')[parseInt(month,10)-1]+' '+day+', '+year:day+' '+DOPBSPFrontEnd.text(ID,'months','names')[parseInt(month,10)-1]+' '+year;},rp:function(){var hiddenBustedItems=DOPPrototypes.doHiddenBuster($(Container));$('.DOPBSPCalendar-sidebar',Container).removeClass('dopbsp-style1').removeClass('dopbsp-style2').removeClass('dopbsp-style3').removeClass('dopbsp-style4').removeClass('dopbsp-style5').removeClass('dopbsp-style1-medium').removeClass('dopbsp-style2-medium').removeClass('dopbsp-style3-medium').removeClass('dopbsp-style4-medium').removeClass('dopbsp-style5-medium').removeClass('dopbsp-style-small');if(Container.width()<500){$('.DOPBSPCalendar-sidebar',Container).addClass('dopbsp-style-small');}else{switch(methods_sidebar.data['style']){case 2:if(Container.width()<760){$('.DOPBSPCalendar-sidebar',Container).addClass('dopbsp-style2-medium');}else{$('.DOPBSPCalendar-sidebar',Container).addClass('dopbsp-style2');}
break;case 3:if(Container.width()<1020){$('.DOPBSPCalendar-sidebar',Container).addClass('dopbsp-style3-medium');}else{$('.DOPBSPCalendar-sidebar',Container).addClass('dopbsp-style3');}
break;case 4:if(Container.width()<660){$('.DOPBSPCalendar-sidebar',Container).addClass('dopbsp-style4-medium');}else{$('.DOPBSPCalendar-sidebar',Container).addClass('dopbsp-style4');}
break;case 5:if(Container.width()<800){$('.DOPBSPCalendar-sidebar',Container).addClass('dopbsp-style5-medium');}else{$('.DOPBSPCalendar-sidebar',Container).addClass('dopbsp-style5');}
break;default:if(Container.width()<900){$('.DOPBSPCalendar-sidebar',Container).addClass('dopbsp-style1-medium');}else{$('.DOPBSPCalendar-sidebar',Container).addClass('dopbsp-style1');}}}
DOPPrototypes.undoHiddenBuster(hiddenBustedItems);}},methods_search={data:{},text:{},display:function(){var HTML=new Array(),position=methods_sidebar.data['positions']['search'];HTML.push('     <div id="DOPBSPCalendar-search'+ID+'" class="dopbsp-module">');HTML.push(methods_search.days.display());if(methods_hours.data['enabled']){HTML.push(methods_search.hours.display());}
HTML.push(methods_search.no_items.display());HTML.push('     </div>');$('#DOPBSPCalendar-sidebar-column-wrapper-'+position['column']+'-'+ID+' .dopbsp-row'+position['row']).html(HTML.join(''));},init:function(){methods_search.days.init();if(methods_hours.data['enabled']){methods_search.hours.init();}
if(methods_sidebar.data['noItems']){methods_search.no_items.set();}},set:function(toSet){toSet=toSet===undefined?'hours':toSet;if(toSet==='hours'&&methods_hours.data['enabled']){methods_search.hours.set();}
if(methods_sidebar.data['noItems']){methods_search.no_items.set();}
methods_reservation.set();},days:{display:function(){var HTML=new Array();HTML.push('         <div class="dopbsp-input-wrapper DOPBSPCalendar-left">');HTML.push('             <input type="text" name="DOPBSPCalendar-check-in-view'+ID+'" id="DOPBSPCalendar-check-in-view'+ID+'" class="DOPBSPCalendar-check-in-view" value="'+DOPBSPFrontEnd.text(ID,'search','checkIn')+'" />');HTML.push('             <input type="hidden" name="DOPBSPCalendar-check-in'+ID+'" id="DOPBSPCalendar-check-in'+ID+'" value="" />');HTML.push('         </div>');if(!methods_hours.data['enabled']&&methods_days.data['multipleSelect']){HTML.push('     <div class="dopbsp-input-wrapper DOPBSPCalendar-left">');HTML.push('         <input type="text" name="DOPBSPCalendar-check-out-view'+ID+'" id="DOPBSPCalendar-check-out-view'+ID+'" class="DOPBSPCalendar-check-out-view" value="'+DOPBSPFrontEnd.text(ID,'search','checkOut')+'" />');HTML.push('         <input type="hidden" name="DOPBSPCalendar-check-out'+ID+'" id="DOPBSPCalendar-check-out'+ID+'" value="" />');HTML.push('     </div>');}
HTML.push('         <br class="DOPBSPCalendar-clear" />');return HTML.join('');},init:function(){methods_search.days.events.init();},initDatepicker:function(id,altId,minDate){minDate=minDate===undefined?DOPPrototypes.getNoDays(methods_calendar.vars.startYear+'-'+DOPPrototypes.getLeadingZero(methods_calendar.vars.startMonth)+'-'+DOPPrototypes.getLeadingZero(methods_calendar.vars.startDay),methods_calendar.vars.todayYear+'-'+DOPPrototypes.getLeadingZero(methods_calendar.vars.todayMonth)+'-'+DOPPrototypes.getLeadingZero(methods_calendar.vars.todayDay))-1:minDate;$(id).datepicker({altField:altId,altFormat:'yy-mm-dd',beforeShow:function(input,inst){$('#ui-datepicker-div').removeClass('DOPBSPCalendar-datepicker').addClass('DOPBSPCalendar-datepicker');},dateFormat:methods_calendar.data['dateType']===1?'MM dd, yy':'dd MM yy',dayNames:DOPBSPFrontEnd.text(ID,'days','names'),dayNamesMin:DOPBSPFrontEnd.text(ID,'days','shortNames'),firstDay:methods_days.data['first'],minDate:minDate,monthNames:DOPBSPFrontEnd.text(ID,'months','names'),monthNamesMin:DOPBSPFrontEnd.text(ID,'months','shortNames'),nextText:DOPBSPFrontEnd.text(ID,'calendar','nextMonth'),prevText:DOPBSPFrontEnd.text(ID,'calendar','previousMonth')});$('.ui-datepicker').removeClass('notranslate').addClass('notranslate');},validate:function(day){var dayPieces=day.split('-');if(day===''||dayPieces.length!==3||dayPieces[0].length!==4||dayPieces[1].length!==2||dayPieces[2].length!==2){return false;}else{return true;}},events:{init:function(){if(!methods_calendar.data['view']){methods_search.days.initDatepicker('#DOPBSPCalendar-check-in-view'+ID,'#DOPBSPCalendar-check-in'+ID);if(methods_hours.data['enabled']){methods_search.days.events.selectHours();}else{if(methods_days.data['multipleSelect']){methods_search.days.initDatepicker('#DOPBSPCalendar-check-out-view'+ID,'#DOPBSPCalendar-check-out'+ID);$('#DOPBSPCalendar-check-out-view'+ID).attr('disabled','disabled');methods_search.days.events.selectMultiple();}else{methods_search.days.events.selectSingle();}}}},selectHours:function(){$('#DOPBSPCalendar-check-in-view'+ID).unbind('click');$('#DOPBSPCalendar-check-in-view'+ID).bind('click',function(){$(this).val('');methods_hours.clear();methods_search.set();});$('#DOPBSPCalendar-check-in-view'+ID).unbind('blur');$('#DOPBSPCalendar-check-in-view'+ID).bind('blur',function(){var $this=$(this);if($this.val()===''){$this.val(DOPBSPFrontEnd.text(ID,'search','checkIn'));}});$('#DOPBSPCalendar-check-in-view'+ID).unbind('change');$('#DOPBSPCalendar-check-in-view'+ID).bind('change',function(){var ciDay=$('#DOPBSPCalendar-check-in'+ID).val();if(methods_search.days.validate(ciDay)){methods_calendar.init(parseInt(ciDay.split('-')[0],10),parseInt(ciDay.split('-')[1],10));methods_hours.display(ID+'_'+ciDay);}else{$('#DOPBSPCalendar-check-in-view'+ID).val(DOPBSPFrontEnd.text(ID,'search','checkIn'));}});},selectMultiple:function(){$('#DOPBSPCalendar-check-in-view'+ID).unbind('click');$('#DOPBSPCalendar-check-in-view'+ID).bind('click',function(){$('#DOPBSPCalendar-check-out-view'+ID).val(DOPBSPFrontEnd.text(ID,'search','checkOut')).attr('disabled','disabled');$('#DOPBSPCalendar-check-in'+ID).val('');$('#DOPBSPCalendar-check-out'+ID).val('');$(this).val('');methods_days.vars.selectionInit=false;methods_days.clearSelection();methods_search.set();});$('#DOPBSPCalendar-check-in-view'+ID).unbind('blur');$('#DOPBSPCalendar-check-in-view'+ID).bind('blur',function(){var $this=$(this);if($this.val()===''){$this.val(DOPBSPFrontEnd.text(ID,'search','checkIn'));}
methods_search.set();});$('#DOPBSPCalendar-check-in-view'+ID).unbind('change');$('#DOPBSPCalendar-check-in-view'+ID).bind('change',function(){var ciDay=$('#DOPBSPCalendar-check-in'+ID).val(),minDateValue;if(methods_search.days.validate(ciDay)){minDateValue=DOPPrototypes.getNoDays(DOPPrototypes.getToday(),ciDay)-(methods_days.data['morningCheckOut']?0:1);methods_days.vars.selectionInit=true;methods_days.vars.selectionStart=ID+'_'+ciDay;methods_days.vars.selectionEnd=ID+'_'+ciDay;$('#DOPBSPCalendar-check-out-view'+ID).removeAttr('disabled').val('');$('#DOPBSPCalendar-check-out'+ID).val('');methods_search.days.initDatepicker('#DOPBSPCalendar-check-out-view'+ID,'#DOPBSPCalendar-check-out'+ID,minDateValue);methods_calendar.init(methods_calendar.vars.startYear,methods_calendar.vars.startMonth+DOPPrototypes.getNoMonths(methods_calendar.vars.startYear+'-'+methods_calendar.vars.startMonth+'-'+methods_calendar.vars.startDay,ciDay)-1);methods_days.displaySelection(methods_days.vars.selectionEnd);setTimeout(function(){$('#DOPBSPCalendar-check-out-view'+ID).val('').select();$('#DOPBSPCalendar-check-out'+ID).val('');},100);}else{$('#DOPBSPCalendar-check-in-view'+ID).val(DOPBSPFrontEnd.text(ID,'search','checkIn'));}});$('#DOPBSPCalendar-check-out-view'+ID).unbind('click');$('#DOPBSPCalendar-check-out-view'+ID).bind('click',function(){var ciDay=$('#DOPBSPCalendar-check-in'+ID).val();$('#DOPBSPCalendar-check-out-view'+ID).val('');$('#DOPBSPCalendar-check-out'+ID).val('');methods_search.set();if(ciDay!==''){methods_days.vars.selectionStart=ID+'_'+ciDay;methods_days.displaySelection(methods_days.vars.selectionStart);}});$('#DOPBSPCalendar-check-out-view'+ID).unbind('blur');$('#DOPBSPCalendar-check-out-view'+ID).bind('blur',function(){var $this=$(this),ciDay=$('#DOPBSPCalendar-check-in'+ID).val();setTimeout(function(){if($this.val()===''){$this.val(DOPBSPFrontEnd.text(ID,'search','checkOut'));}
methods_search.set();if(ciDay!==''){methods_days.vars.selectionStart=ID+'_'+ciDay;methods_days.displaySelection(methods_days.vars.selectionStart);}},100);});$('#DOPBSPCalendar-check-out-view'+ID).unbind('change');$('#DOPBSPCalendar-check-out-view'+ID).bind('change',function(){var ciDay=$('#DOPBSPCalendar-check-in'+ID).val(),coDay=$('#DOPBSPCalendar-check-out'+ID).val();setTimeout(function(){if(methods_search.days.validate(coDay)){methods_days.vars.selectionInit=false;methods_days.vars.selectionStart=ID+'_'+ciDay;methods_days.vars.selectionEnd=ID+'_'+coDay;methods_calendar.init(methods_calendar.vars.startYear,methods_calendar.vars.startMonth+DOPPrototypes.getNoMonths(methods_calendar.vars.startYear+'-'+methods_calendar.vars.startMonth+'-'+methods_calendar.vars.startDay,ciDay)-1);methods_days.displaySelection(methods_days.vars.selectionEnd);methods_search.set();}else{$('#DOPBSPCalendar-check-out-view'+ID).val(DOPBSPFrontEnd.text(ID,'search','checkOut'));}},100);});},selectSingle:function(){$('#DOPBSPCalendar-check-in-view'+ID).unbind('click');$('#DOPBSPCalendar-check-in-view'+ID).bind('click',function(){$(this).val('');methods_days.vars.selectionInit=false;methods_days.clearSelection();methods_search.set();});$('#DOPBSPCalendar-check-in-view'+ID).unbind('blur');$('#DOPBSPCalendar-check-in-view'+ID).bind('blur',function(){var $this=$(this);if($this.val()===''){$this.val(DOPBSPFrontEnd.text(ID,'search','checkIn'));}
methods_search.set();});$('#DOPBSPCalendar-check-in-view'+ID).unbind('change');$('#DOPBSPCalendar-check-in-view'+ID).bind('change',function(){var ciDay=$('#DOPBSPCalendar-check-in'+ID).val();if(methods_search.days.validate(ciDay)){methods_days.vars.selectionStart=ID+'_'+ciDay;methods_days.vars.selectionEnd=ID+'_'+ciDay;methods_calendar.init(methods_calendar.vars.startYear,methods_calendar.vars.startMonth+DOPPrototypes.getNoMonths(methods_calendar.vars.startYear+'-'+methods_calendar.vars.startMonth+'-'+methods_calendar.vars.startDay,ciDay)-1);methods_days.displaySelection(methods_days.vars.selectionEnd);methods_search.set();}else{$('#DOPBSPCalendar-check-in-view'+ID).val(DOPBSPFrontEnd.text(ID,'search','checkIn'));}});}}},hours:{display:function(){var HTML=new Array();HTML.push('     <div id="DOPBSPCalendar-hours-select'+ID+'">');HTML.push('         <div class="dopbsp-input-wrapper DOPBSPCalendar-left">');HTML.push('             <label for="DOPBSPCalendar-start-hour'+ID+'">'+DOPBSPFrontEnd.text(ID,'search','hourStart')+'</label>');HTML.push('             <div id="DOPSelect-DOPBSPCalendar-start-hour'+ID+'" class="dopbsp-small"></div>');HTML.push('         </div>');if(methods_hours.data['multipleSelect']){HTML.push('         <div class="dopbsp-input-wrapper DOPBSPCalendar-left">');HTML.push('             <label for="DOPBSPCalendar-end-hour'+ID+'">'+DOPBSPFrontEnd.text(ID,'search','hourEnd')+'</label>');HTML.push('             <div id="DOPSelect-DOPBSPCalendar-end-hour'+ID+'" class="dopbsp-small"></div>');HTML.push('         </div>');}else{HTML.push('         <input type="hidden" name="DOPBSPCalendar-end-hour'+ID+'" id="DOPBSPCalendar-end-hour'+ID+'" value="" />');}
HTML.push('         <br class="DOPBSPCalendar-clear">');HTML.push('     </div>');return HTML.join('');},init:function(){methods_search.hours.set();},set:function(toSet){var currHour=methods_calendar.vars.startDate.getHours(),currMin=methods_calendar.vars.startDate.getMinutes(),endHTML=new Array(),i,schedule=methods_schedule.vars.schedule,selectedDay=methods_days.vars.selectionStart.split('_')[1],hoursDef=schedule[selectedDay]!==undefined?schedule[selectedDay]['hours_definitions']:methods_hours.data['definitions'],selectedHourStart=methods_hours.vars.selectionStart.split('_')[1],selectedHourEnd=methods_hours.vars.selectionEnd.split('_')[1],startHTML=new Array();toSet=toSet===undefined?'all':toSet;if(toSet==='all'){startHTML.push('<select name="DOPBSPCalendar-start-hour'+ID+'" id="DOPBSPCalendar-start-hour'+ID+'" class="dopbsp-small">');startHTML.push('    <option value=""></option>');for(i=0;i<hoursDef.length;i++){if(hoursDef[i]['value']>=DOPPrototypes.getLeadingZero(currHour)+':'+DOPPrototypes.getLeadingZero(currMin)||methods_calendar.vars.startYear+'-'+DOPPrototypes.getLeadingZero(methods_calendar.vars.startMonth)+'-'+DOPPrototypes.getLeadingZero(methods_calendar.vars.startDay)!==selectedDay){startHTML.push('    <option value="'+hoursDef[i]['value']+'"'+(selectedHourStart===hoursDef[i]['value']?' selected="selected"':'')+'>'+(methods_hours.data['ampm']?DOPPrototypes.getAMPM(hoursDef[i]['value']):hoursDef[i]['value'])+'</option>');}}
startHTML.push('</select>');$('#DOPSelect-DOPBSPCalendar-start-hour'+ID).replaceWith(startHTML.join(''));$('#DOPBSPCalendar-start-hour'+ID).DOPSelect();}
if(methods_hours.data['multipleSelect']){endHTML.push('<select name="DOPBSPCalendar-end-hour'+ID+'" id="DOPBSPCalendar-end-hour'+ID+'" class="dopbsp-small">');endHTML.push('  <option value=""></option>');for(i=0;i<hoursDef.length;i++){if(hoursDef[i]['value']>=DOPPrototypes.getLeadingZero(currHour)+':'+DOPPrototypes.getLeadingZero(currMin)||methods_calendar.vars.startYear+'-'+DOPPrototypes.getLeadingZero(methods_calendar.vars.startMonth)+'-'+DOPPrototypes.getLeadingZero(methods_calendar.vars.startDay)!==selectedDay){if(methods_hours.data['interval']||!methods_hours.data['addLastHourToTotalPrice']){if(selectedHourStart===undefined||hoursDef[i]['value']>selectedHourStart){endHTML.push('  <option value="'+hoursDef[i]['value']+'"'+(selectedHourEnd===hoursDef[i]['value']?' selected="selected"':'')+'>'+(methods_hours.data['ampm']?DOPPrototypes.getAMPM(hoursDef[i]['value']):hoursDef[i]['value'])+'</option>');}}else{if(selectedHourStart===undefined||hoursDef[i]['value']>=selectedHourStart){endHTML.push('  <option value="'+hoursDef[i]['value']+'"'+(selectedHourEnd===hoursDef[i]['value']?' selected="selected"':'')+'>'+(methods_hours.data['ampm']?DOPPrototypes.getAMPM(hoursDef[i]['value']):hoursDef[i]['value'])+'</option>');}}}}
endHTML.push('</select>');$('#DOPSelect-DOPBSPCalendar-end-hour'+ID).replaceWith(endHTML.join(''));$('#DOPBSPCalendar-end-hour'+ID).DOPSelect();}
methods_search.hours.events.init();},events:{init:function(){if(methods_hours.data['multipleSelect']){methods_search.hours.events.selectMultiple();}else{methods_search.hours.events.selectSingle();}},selectMultiple:function(){$('#DOPBSPCalendar-start-hour'+ID).unbind('change');$('#DOPBSPCalendar-start-hour'+ID).bind('change',function(){var startHour=$(this).val();methods_hours.vars.selectionInit=true;methods_hours.vars.selectionStart=ID+'_'+startHour;methods_hours.vars.selectionEnd='';methods_hours.displaySelection(methods_hours.vars.selectionStart);methods_search.hours.set('endHour');methods_search.set('noItems');});$('#DOPBSPCalendar-end-hour'+ID).unbind('change');$('#DOPBSPCalendar-end-hour'+ID).bind('change',function(){var endHour=$(this).val(),selectionDay=methods_days.vars.selectionStart,schedule=methods_schedule.vars.schedule,hoursDef=schedule[selectionDay.split('_')[1]]!==undefined?schedule[selectionDay.split('_')[1]]['hours_definitions']:methods_hours.data['definitions'];methods_hours.vars.selectionInit=false;methods_hours.vars.selectionEnd=ID+'_'+endHour;if(methods_hours.data['interval']){methods_hours.vars.selectionEnd=ID+'_'+methods_hour.getPrev(methods_hours.vars.selectionEnd.split('_')[1],hoursDef);}
methods_hours.displaySelection(methods_hours.vars.selectionEnd);methods_search.set('noItems');});},selectSingle:function(){$('#DOPBSPCalendar-start-hour'+ID).unbind('change');$('#DOPBSPCalendar-start-hour'+ID).bind('change',function(){var startHour=$(this).val();methods_hours.vars.selectionStart=ID+'_'+startHour;methods_hours.vars.selectionEnd=ID+'_'+startHour;methods_hours.displaySelection(methods_hours.vars.selectionEnd);methods_search.set('noItems');});}}},no_items:{display:function(){var HTML=new Array();if(methods_sidebar.data['noItems']){HTML.push('         <div id="DOPBSPCalendar-no-items-wrapper'+ID+'" class="dopbsp-input-wrapper">');HTML.push('             <label for="DOPBSPCalendar-no-items'+ID+'">'+DOPBSPFrontEnd.text(ID,'search','noItems')+'</label>');HTML.push('             <div id="DOPSelect-DOPBSPCalendar-no-items'+ID+'" class="dopbsp-small"></div>');HTML.push('         </div>');}else{HTML.push('         <input type="hidden" name="DOPBSPCalendar-no-items'+ID+'" id="DOPBSPCalendar-no-items'+ID+'" value="1" />');}
return HTML.join('');},set:function(){var HTML=new Array(),i,noAvailable=methods_hours.data['enabled']?methods_hours.getNoAvailable():methods_days.getNoAvailable();HTML.push('<select name="DOPBSPCalendar-no-items'+ID+'" id="DOPBSPCalendar-no-items'+ID+'" class="dopbsp-small">');for(i=1;i<=noAvailable;i++){HTML.push(' <option value="'+i+'">'+i+'</option>');}
HTML.push('</select>');$('#DOPSelect-DOPBSPCalendar-no-items'+ID).replaceWith(HTML.join(''));$('#DOPBSPCalendar-no-items'+ID).DOPSelect();methods_search.no_items.events();},events:function(){$('#DOPBSPCalendar-no-items'+ID).unbind('change');$('#DOPBSPCalendar-no-items'+ID).bind('change',function(){methods_reservation.set();});}}},methods_extras={data:{},text:{},display:function(){var extra=methods_extras.data['extra'],groupItem,HTML=new Array(),i,j;HTML.push('<div id="DOPBSPCalendar-extras'+ID+'" class="dopbsp-module">');HTML.push(' <h4>'+DOPBSPFrontEnd.text(ID,'extras','title')+'</h4>');for(i=0;i<extra.length;i++){HTML.push('<div class="dopbsp-input-wrapper">');HTML.push(' <label for="DOPBSPCalendar-extras-group'+ID+'-'+extra[i]['id']+'">'+extra[i]['translation']+(extra[i]['required']==='true'?'  <span class="dopbsp-required">*</span>':'')+'</label>');HTML.push(' <select name="DOPBSPCalendar-extras-group'+ID+'-'+extra[i]['id']+'" id="DOPBSPCalendar-extras-group'+ID+'-'+extra[i]['id']+'"'+(extra[i]['multiple_select']==='true'?' value="[]" multiple class="dopbsp-big"':'')+'>');if(extra[i]['required']==='false'&&extra[i]['multiple_select']==='false'){HTML.push('<option value=""></option>');}
for(j=0;j<extra[i]['group_items'].length;j++){groupItem=extra[i]['group_items'][j];if(groupItem['translation']!==''){HTML.push('<option value="'+groupItem['id']+'">');HTML.push(groupItem['translation']);if(parseFloat(groupItem['price'])!==0){HTML.push(' <span class="dopbsp-info">(');if(groupItem['price_type']==='fixed'){HTML.push(groupItem['operation']+DOPBSPFrontEnd.setPrice(ID,groupItem['price']));}else{HTML.push(groupItem['operation']+groupItem['price']+'%');}
if(groupItem['price_by']!=='once'){HTML.push('/'+(methods_hours.data['enabled']?DOPBSPFrontEnd.text(ID,'extras','byHour'):DOPBSPFrontEnd.text(ID,'extras','byDay')));}
HTML.push(')</span>');}
HTML.push('</option>');}}
HTML.push(' </select>');HTML.push('</div>');}
HTML.push(' <div class="dopbsp-message DOPBSPCalendar-hidden"></div>');HTML.push('</div>');$('#DOPBSPCalendar-sidebar-column-wrapper-'+methods_sidebar.data['positions']['extras']['column']+'-'+ID+' .dopbsp-row'+methods_sidebar.data['positions']['extras']['row']).html(HTML.join(''));},init:function(){var extra=methods_extras.data['extra'],i;for(i=0;i<extra.length;i++){$('#DOPBSPCalendar-extras-group'+ID+'-'+extra[i]['id']).DOPSelect();}
methods_extras.events();},events:function(){var extra=methods_extras.data['extra'],i;for(i=0;i<extra.length;i++){$('#DOPBSPCalendar-extras-group'+ID+'-'+extra[i]['id']).unbind('change');$('#DOPBSPCalendar-extras-group'+ID+'-'+extra[i]['id']).bind('change',function(){methods_reservation.set();});}},get:function(reservationPrice,ciDay,coDay,startHour,endHour,noItems){var extra=methods_extras.data['extra'],extras=new Array(),groupItem,i,j;for(i=0;i<extra.length;i++){extra[i]['verified']=false;}
for(i=0;i<extra.length;i++){if(extra[i]['verified']===undefined){extra[i]['verified']=false;}
for(j=0;j<extra[i]['group_items'].length;j++){groupItem=extra[i]['group_items'][j];if((extra[i]['multiple_select']==='false'&&$('#DOPBSPCalendar-extras-group'+ID+'-'+extra[i]['id']).val()===groupItem['id']&&extra[i]['verified']===false)||(extra[i]['multiple_select']!=='false'&&$('#DOPSelect-DOPBSPCalendar-extras-group'+ID+'-'+extra[i]['id']+'-'+groupItem['id']).is(':checked'))){extra[i]['verified']=true;extras.push({'group_id':extra[i]['id'],'group_translation':extra[i]['translation'],'id':groupItem['id'],'operation':groupItem['operation'],'price':parseFloat(groupItem['price']),'price_by':groupItem['price_by'],'price_type':groupItem['price_type'],'translation':groupItem['translation']});}}}
for(i=0;i<extras.length;i++){delete extras[i]['verified'];extras[i]['price_total']=methods_extras.getPrice([extras[i]],reservationPrice,ciDay,coDay,startHour,endHour,noItems);}
return extras;},getPrice:function(extras,reservationPrice,ciDay,coDay,startHour,endHour,noItems){var groupItem,i,price=0,timeLapse;coDay=coDay===''?ciDay:coDay;endHour=endHour===''?startHour:endHour;timeLapse=methods_hours.data['enabled']?DOPPrototypes.getHoursDifference(startHour,endHour,'hours')+(methods_hours.data['addLastHourToTotalPrice']?1:0):DOPPrototypes.getNoDays(ciDay,coDay)-(methods_days.data['morningCheckOut']?1:0);for(i=0;i<extras.length;i++){groupItem=extras[i];price+=(groupItem['operation']==='-'?-1:1)*(groupItem['price_by']==='once'?1:timeLapse)*groupItem['price']*(groupItem['price_type']==='fixed'?noItems:reservationPrice)/(groupItem['price_type']==='fixed'?1:100);}
return price;},set:function(extras,ciDay,coDay,startHour,endHour){var extra,extraHTML=new Array(),extrasHTML=new Array(),HTML=new Array(),i,j;coDay=coDay===''?ciDay:coDay;endHour=endHour===''?startHour:endHour;if(extras.length>0){HTML.push('<tr class="dopbsp-separator">');HTML.push(' <td class="dopbsp-label"><div class="dopbsp-line"></div></td>');HTML.push(' <td class="dopbsp-value"><div class="dopbsp-line"></div></td>');HTML.push('</tr>');}
for(i=0;i<extras.length;i++){extrasHTML.length=0;if(extras[i]['displayed']===undefined){for(j=0;j<extras.length;j++){extra=extras[j];extraHTML.length=0;if(extras[j]['displayed']===undefined&&extras[i]['group_id']===extras[j]['group_id']){extraHTML.push(extra['translation']);if(parseFloat(extra['price'])!==0){extraHTML.push(' <br />');if(extra['price_type']!=='fixed'||extra['price_by']!=='once'){extraHTML.push(' <span class="dopbsp-info-rule">&#9632;&nbsp;');if(extra['price_type']==='fixed'){extraHTML.push(extra['operation']+DOPBSPFrontEnd.setPrice(ID,extra['price']));}else{extraHTML.push(extra['operation']+extra['price']+'%');}
if(extra['price_by']!=='once'){extraHTML.push('/'+(methods_hours.data['enabled']?DOPBSPFrontEnd.text(ID,'extras','byHour'):DOPBSPFrontEnd.text(ID,'extras','byDay')));}
extraHTML.push('</span><br />');}
extraHTML.push('<span class="dopbsp-info-price">'+extra['operation']+'&nbsp;'+DOPBSPFrontEnd.setPrice(ID,extra['price_total'])+'</span>');}
if(extraHTML.length!==0){extras[j]['displayed']=true;extrasHTML.push(extraHTML.join(''));}}}
if(extrasHTML.length!==0){HTML.push('<tr>');HTML.push(' <td class="dopbsp-label">'+extras[i]['group_translation']+'</td>');HTML.push(' <td class="dopbsp-value dopbsp-info">'+extrasHTML.join('<br /><br />')+'</td>');HTML.push('</tr>');}}}
for(i=0;i<extras.length;i++){delete extras[i]['displayed'];}
return HTML.join('');},validate:function(extras){var extra=methods_extras.data['extra'],i,j,message='',validateExtras=true,validateGroup;for(i=0;i<extra.length;i++){if(extra[i]['required']==='true'&&extra[i]['multiple_select']==='true'){validateGroup=false;for(j=0;j<extras.length;j++){if(extra[i]['id']===extras[j]['group_id']){validateGroup=true;}}
if(!validateGroup){validateExtras=false;message+=(message===''?'':'<br />')+DOPBSPFrontEnd.text(ID,'extras','invalid')+' '+extra[i]['translation']+'.';}}}
if(!validateExtras){methods_extras.toggleMessages(message);return false;}else{methods_extras.toggleMessages('','dopbsp-success','none');return true;}},toggleMessages:function(message,display,type){display=display===undefined?'block':display;type=type===undefined?'dopbsp-error':type;$('#DOPBSPCalendar-extras'+ID+' .dopbsp-message').html(message).removeClass('dopbsp-success').removeClass('dopbsp-error').addClass(type).css('display',display);}},methods_coupons={data:{},text:{},vars:{use:false},display:function(){var HTML=new Array();HTML.push('<div id="DOPBSPCalendar-coupons'+ID+'" class="dopbsp-module">');HTML.push(' <h4>'+DOPBSPFrontEnd.text(ID,'coupons','title')+'</h4>');HTML.push(' <div class="dopbsp-input-wrapper">');HTML.push('     <label for="DOPBSPCalendar-coupons-code'+ID+'">'+DOPBSPFrontEnd.text(ID,'coupons','code')+'</label>');HTML.push('     <input type="text" name="DOPBSPCalendar-coupons-code'+ID+'" id="DOPBSPCalendar-coupons-code'+ID+'" value="" />');HTML.push(' </div>');HTML.push(' <div class="dopbsp-input-wrapper">');HTML.push('     <input type="button" name="DOPBSPCalendar-coupons-verify'+ID+'" id="DOPBSPCalendar-coupons-verify'+ID+'" class="DOPBSPCalendar-hidden" value="'+DOPBSPFrontEnd.text(ID,'coupons','verify')+'" />');HTML.push('     <input type="button" name="DOPBSPCalendar-coupons-use'+ID+'" id="DOPBSPCalendar-coupons-use'+ID+'" class="DOPBSPCalendar-hidden" value="'+DOPBSPFrontEnd.text(ID,'coupons','use')+'" />');HTML.push('     <div id="DOPBSPCalendar-coupons-loader'+ID+'" class="dopbsp-submit-loader DOPBSPCalendar-hidden"></div>');HTML.push(' </div>');HTML.push(' <div class="dopbsp-message DOPBSPCalendar-hidden"></div>');HTML.push('</div>');$('#DOPBSPCalendar-sidebar-column-wrapper-'+methods_sidebar.data['positions']['coupons']['column']+'-'+ID+' .dopbsp-row'+methods_sidebar.data['positions']['coupons']['row']).html(HTML.join(''));},init:function(){methods_coupons.events();},events:function(){$('#DOPBSPCalendar-coupons-code'+ID).unbind('input propertychange blur');$('#DOPBSPCalendar-coupons-code'+ID).bind('input propertychange blur',function(){if($(this).val()===''){$('#DOPBSPCalendar-coupons-verify'+ID).css('display','none');}else{$('#DOPBSPCalendar-coupons-verify'+ID).css('display','block');}
$('#DOPBSPCalendar-coupons-use'+ID).css('display','none');$('#DOPBSPCalendar-coupons-loader'+ID).css('display','none');methods_coupons.toggleMessages('','none');});$('#DOPBSPCalendar-coupons-verify'+ID).unbind('click');$('#DOPBSPCalendar-coupons-verify'+ID).bind('click',function(){methods_coupons.verify();});$('#DOPBSPCalendar-coupons-use'+ID).unbind('click');$('#DOPBSPCalendar-coupons-use'+ID).bind('click',function(){methods_coupons.vars.use=true;methods_reservation.set();$('#DOPBSPCalendar-coupons-code'+ID).val('');$('#DOPBSPCalendar-coupons-use'+ID).css('display','none');methods_coupons.toggleMessages('','none');});},verify:function(){var currDate=new Date,today=currDate.getFullYear()+'-'+DOPPrototypes.getLeadingZero(currDate.getMonth()+1)+'-'+DOPPrototypes.getLeadingZero(currDate.getDate()),currTime=DOPPrototypes.getLeadingZero(currDate.getHours())+':'+DOPPrototypes.getLeadingZero(currDate.getMinutes());$('#DOPBSPCalendar-coupons-code'+ID).attr('disabled','disabled');$('#DOPBSPCalendar-coupons-verify'+ID).css('display','none');$('#DOPBSPCalendar-coupons-use'+ID).css('display','none');methods_coupons.toggleMessages('','none');$('#DOPBSPCalendar-coupons-loader'+ID).css('display','block');$.post(ajaxURL,{action:'dopbsp_coupons_verify',dopbsp_frontend_ajax_request:true,id:methods_coupons.data['id'],code:$('#DOPBSPCalendar-coupons-code'+ID).val(),today:today,curr_time:currTime},function(data){data=$.trim(data);$('#DOPBSPCalendar-coupons-code'+ID).removeAttr('disabled');$('#DOPBSPCalendar-coupons-loader'+ID).css('display','none');if(data==='success'){methods_coupons.data['coupon']['code']=$('#DOPBSPCalendar-coupons-code'+ID).val();$('#DOPBSPCalendar-coupons-use'+ID).css('display','block');methods_coupons.toggleMessages(DOPBSPFrontEnd.text(ID,'coupons','verifySuccess'),'block','dopbsp-success');}else{$('#DOPBSPCalendar-coupons-verify'+ID).css('display','block');methods_coupons.toggleMessages(DOPBSPFrontEnd.text(ID,'coupons','verifyError'),'block','dopbsp-error');}});},get:function(){var coupon={'id':0,'code':'','operation':'-','price':0,'price_type':'percent','price_by':'once','translation':''},coupon_data=methods_coupons.data['coupon'];if(methods_woocommerce.data['enabled']){return coupon;}
if(methods_coupons.vars.use===true){coupon['id']=coupon_data['id'];coupon['code']=coupon_data['code'];coupon['operation']=coupon_data['operation'];coupon['price']=coupon_data['price'];coupon['price_type']=coupon_data['price_type'];coupon['price_by']=coupon_data['price_by'];coupon['translation']=coupon_data['translation'];}
return coupon;},getPrice:function(coupon,reservationPrice,discountPrice,extrasPrice,feesPrice,ciDay,coDay,startHour,endHour,noItems){var price=0,timeLapse;if(methods_woocommerce.data['enabled']){return price;}
coDay=coDay===''?ciDay:coDay;endHour=endHour===''?startHour:endHour;timeLapse=methods_hours.data['enabled']?DOPPrototypes.getHoursDifference(startHour,endHour,'hours')+(methods_hours.data['addLastHourToTotalPrice']?1:0):DOPPrototypes.getNoDays(ciDay,coDay)-(methods_days.data['morningCheckOut']?1:0);price+=(coupon['operation']==='-'?-1:1)*(coupon['price_by']==='once'?1:timeLapse)*parseFloat(coupon['price'])*(coupon['price_type']==='fixed'?noItems:(reservationPrice+discountPrice+extrasPrice+feesPrice))/(coupon['price_type']==='fixed'?1:100);return price;},set:function(coupon,reservationPrice,discountPrice,extrasPrice,feesPrice,ciDay,coDay,startHour,endHour,noItems){var HTML=new Array(),i,price=0;coDay=coDay===''?ciDay:coDay;endHour=endHour===''?startHour:endHour;if(coupon['price']>0){price=methods_coupons.getPrice(coupon,reservationPrice,discountPrice,extrasPrice,feesPrice,ciDay,coDay,startHour,endHour,noItems);HTML.push(' <tr class="dopbsp-separator">');HTML.push('     <td class="dopbsp-label"><div class="dopbsp-line"></div></td>');HTML.push('     <td class="dopbsp-value"><div class="dopbsp-line"></div></td>');HTML.push(' </tr>');HTML.push(' <tr>');HTML.push('     <td class="dopbsp-label">'+coupon['translation']+'</td>');HTML.push('     <td class="dopbsp-value dopbsp-info">');HTML.push('         '+coupon['code']+'<br />');if(coupon['price_type']!=='fixed'||coupon['price_by']!=='once'){HTML.push('         <span class="dopbsp-info-rule">&#9632;&nbsp;');if(coupon['price_type']==='fixed'){HTML.push(coupon['operation']+DOPBSPFrontEnd.setPrice(ID,coupon['price']));}else{HTML.push(coupon['operation']+coupon['price']+'%');}
if(coupon['price_by']!=='once'){HTML.push('/'+(methods_hours.data['enabled']?DOPBSPFrontEnd.text(ID,'coupons','byHour'):DOPBSPFrontEnd.text(ID,'coupons','byDay')));}
HTML.push('         </span><br />');}
HTML.push('         <span class="dopbsp-info-price">'+coupon['operation']+'&nbsp;'+DOPBSPFrontEnd.setPrice(ID,price)+'</span>');HTML.push('     </td>');HTML.push(' </tr>');}
return HTML.join('');},toggleMessages:function(message,display,type){display=display===undefined?'block':display;type=type===undefined?'dopbsp-error':type;$('#DOPBSPCalendar-coupons'+ID+' .dopbsp-message').html(message).removeClass('dopbsp-success').removeClass('dopbsp-error').addClass(type).css('display',display);}},methods_reservation={data:{},text:{},reservation:{'check_in':'','check_out':'','start_hour':'','end_hour':'','no_items':1,'price':0,'price_total':0,'extras':new Array(),'extras_price':0,'discount':{},'discount_price':0,'coupon':{},'coupon_price':0,'fees':new Array(),'fees_price':0,'deposit':{},'deposit_price':0,'days_hours_history':{}},display:function(){var HTML=new Array();HTML.push(' <div id="DOPBSPCalendar-reservation'+ID+'" class="dopbsp-module" style="border:none !important;background:transparent none repeat scroll 0 0 !important; padding-top:0 !important;">');HTML.push('     <div id="DOPBSPCalendar-reservation-cart'+ID+'">');HTML.push('     </div>');if(methods_cart.data['enabled']||(methods_woocommerce.data['enabled']&&methods_woocommerce.data['add_to_cart'])){HTML.push('     <div class="dopbsp-input-wrapper dopbsp-add-to-cart-wrapper">');HTML.push('         <input type="submit" name="DOPBSPCalendar-add-to-cart'+ID+'" id="DOPBSPCalendar-add-to-cart'+ID+'" value="'+DOPBSPFrontEnd.text(ID,'woocommerce','addToCart')+'" />');HTML.push('     </div>');}
HTML.push(' </div>');$('#DOPBSPCalendar-sidebar-column-wrapper-'+methods_sidebar.data['positions']['reservation']['column']+'-'+ID+' .dopbsp-row'+methods_sidebar.data['positions']['reservation']['row']).html(HTML.join(''));},init:function(){methods_reservation.events();},set:function(){var ciDay=$('#DOPBSPCalendar-check-in'+ID).val(),coDay=$('#DOPBSPCalendar-check-out'+ID).val()!==undefined?$('#DOPBSPCalendar-check-out'+ID).val():'',endHour=$('#DOPBSPCalendar-end-hour'+ID).val()!==undefined?$('#DOPBSPCalendar-end-hour'+ID).val():'',HTML=new Array(),noItems=parseInt($('#DOPBSPCalendar-no-items'+ID).val()),startHour=$('#DOPBSPCalendar-start-hour'+ID).val()!==undefined?$('#DOPBSPCalendar-start-hour'+ID).val():'';if(!methods_hours.data['enabled']&&!methods_days.getAvailability(ciDay,coDay)){methods_reservation.toggleMessages(DOPBSPFrontEnd.text(ID,'reservation','selectDays'),'');methods_reservation.clear();methods_order.payment.set();return false;}
if(methods_hours.data['enabled']&&!methods_hours.getAvailability(ciDay,startHour,endHour)){methods_reservation.toggleMessages(DOPBSPFrontEnd.text(ID,'reservation','selectHours'),'');endHour!==''?methods_reservation.clear():'';methods_order.payment.set();return false;}
methods_reservation.reservation['check_in']=ciDay;methods_reservation.reservation['check_out']=coDay;methods_reservation.reservation['start_hour']=startHour;methods_reservation.reservation['end_hour']=endHour;methods_reservation.reservation['no_items']=noItems;methods_reservation.reservation['price']=noItems*(methods_hours.data['enabled']?methods_hours.getPrice(methods_reservation.reservation['check_in'],methods_reservation.reservation['start_hour'],methods_reservation.reservation['end_hour']):methods_days.getPrice(methods_reservation.reservation['check_in'],methods_reservation.reservation['check_out']));methods_reservation.reservation['extras']=methods_extras.get(methods_reservation.reservation['price'],methods_reservation.reservation['check_in'],methods_reservation.reservation['check_out'],methods_reservation.reservation['start_hour'],methods_reservation.reservation['end_hour'],methods_reservation.reservation['no_items']);methods_reservation.reservation['extras_price']=methods_extras.getPrice(methods_reservation.reservation['extras'],methods_reservation.reservation['price'],methods_reservation.reservation['check_in'],methods_reservation.reservation['check_out'],methods_reservation.reservation['start_hour'],methods_reservation.reservation['end_hour'],methods_reservation.reservation['no_items']);methods_reservation.reservation['discount']=DOPBSPFrontEndDiscounts.get(ID,methods_reservation.reservation['check_in'],methods_reservation.reservation['check_out'],methods_reservation.reservation['start_hour'],methods_reservation.reservation['end_hour']);methods_reservation.reservation['discount_price']=DOPBSPFrontEndDiscounts.getPrice(ID,methods_reservation.reservation['discount'],methods_reservation.reservation['price'],methods_reservation.reservation['extras_price'],methods_reservation.reservation['check_in'],methods_reservation.reservation['check_out'],methods_reservation.reservation['start_hour'],methods_reservation.reservation['end_hour'],methods_reservation.reservation['no_items']);methods_reservation.reservation['fees']=DOPBSPFrontEndFees.get(ID,methods_reservation.reservation['price'],methods_reservation.reservation['discount_price'],methods_reservation.reservation['extras_price'],methods_reservation.reservation['check_in'],methods_reservation.reservation['check_out'],methods_reservation.reservation['start_hour'],methods_reservation.reservation['end_hour'],methods_reservation.reservation['no_items']);methods_reservation.reservation['fees_price']=DOPBSPFrontEndFees.getPrice(ID,methods_reservation.reservation['fees'],methods_reservation.reservation['price'],methods_reservation.reservation['discount_price'],methods_reservation.reservation['extras_price'],methods_reservation.reservation['check_in'],methods_reservation.reservation['check_out'],methods_reservation.reservation['start_hour'],methods_reservation.reservation['end_hour'],methods_reservation.reservation['no_items']);methods_reservation.reservation['coupon']=methods_coupons.get();methods_reservation.reservation['coupon_price']=methods_coupons.getPrice(methods_reservation.reservation['coupon'],methods_reservation.reservation['price'],methods_reservation.reservation['discount_price'],methods_reservation.reservation['extras_price'],methods_reservation.reservation['fees_price'],methods_reservation.reservation['check_in'],methods_reservation.reservation['check_out'],methods_reservation.reservation['start_hour'],methods_reservation.reservation['end_hour'],methods_reservation.reservation['no_items']);methods_reservation.reservation['price_total']=methods_reservation.reservation['price']+methods_reservation.reservation['extras_price']+methods_reservation.reservation['discount_price']+methods_reservation.reservation['fees_price']+methods_reservation.reservation['coupon_price'];methods_reservation.reservation['deposit']=DOPBSPFrontEndDeposit.get(ID);methods_reservation.reservation['deposit_price']=DOPBSPFrontEndDeposit.getPrice(ID,methods_reservation.reservation['deposit'],methods_reservation.reservation['price_total']);methods_reservation.reservation['days_hours_history']=methods_hours.data['enabled']?methods_hours.getHistory(methods_reservation.reservation['check_in'],methods_reservation.reservation['start_hour'],methods_reservation.reservation['end_hour']):methods_days.getHistory(methods_reservation.reservation['check_in'],methods_reservation.reservation['check_out']);HTML.push('<div class="dopbsp-cart-wrapper">');HTML.push(' <table class="dopbsp-cart">');HTML.push('     <tbody>');HTML.push(methods_extras.set(methods_reservation.reservation['extras'],methods_reservation.reservation['check_in'],methods_reservation.reservation['check_out'],methods_reservation.reservation['start_hour'],methods_reservation.reservation['end_hour']));if(methods_reservation.reservation['price']!==0){HTML.push(DOPBSPFrontEndDiscounts.set(ID,methods_reservation.reservation['discount'],methods_reservation.reservation['price'],methods_reservation.reservation['extras_price'],methods_reservation.reservation['check_in'],methods_reservation.reservation['check_out'],methods_reservation.reservation['start_hour'],methods_reservation.reservation['end_hour'],methods_reservation.reservation['no_items']));}
HTML.push(DOPBSPFrontEndFees.set(ID,'reservation',methods_reservation.reservation['fees'],methods_reservation.reservation['check_in'],methods_reservation.reservation['check_out'],methods_reservation.reservation['start_hour'],methods_reservation.reservation['end_hour']));if(methods_reservation.reservation['price']!==0){HTML.push(methods_coupons.set(methods_reservation.reservation['coupon'],methods_reservation.reservation['price'],methods_reservation.reservation['discount_price'],methods_reservation.reservation['extras_price'],methods_reservation.reservation['fees_price'],methods_reservation.reservation['check_in'],methods_reservation.reservation['check_out'],methods_reservation.reservation['start_hour'],methods_reservation.reservation['end_hour'],methods_reservation.reservation['no_items']));}
if(methods_reservation.reservation['price_total']>0){if(methods_reservation.reservation['deposit_price']>0){HTML.push(DOPBSPFrontEndDeposit.set(ID,methods_reservation.reservation['deposit'],methods_reservation.reservation['price_total']));}
HTML.push('         <tr class="dopbsp-total">');HTML.push('             <td class="dopbsp-label">'+DOPBSPFrontEnd.text(ID,'reservation','priceTotal')+'</td>');HTML.push('             <td class="dopbsp-value">'+DOPBSPFrontEnd.setPrice(ID,methods_reservation.reservation['price_total'])+'</td>');HTML.push('         </tr>');}
HTML.push('     </tbody>');HTML.push(' </table>');HTML.push('</div>');$('#DOPBSPCalendar-reservation-cart'+ID).html(HTML.join(''));if(methods_woocommerce.data['enabled']&&!methods_woocommerce.data['add_to_cart']){if($('.cart').offset().top+$('.cart').height()<$(document).scrollTop()){prototypes.scrollToY($('.cart').offset().top+$('.cart').height()-200);}}else{if($('#DOPBSPCalendar-reservation'+ID).offset().top+$('#DOPBSPCalendar-reservation'+ID).height()>$(document).scrollTop()+$(window).height()){DOPPrototypes.scrollToY($('#DOPBSPCalendar-reservation'+ID).offset().top+$('#DOPBSPCalendar-reservation'+ID).height()-$(window).height()+50);}}
if(methods_extras.validate(methods_reservation.reservation['extras'])){if(methods_woocommerce.data['enabled']){methods_cart.cart[0]=methods_reservation.reservation;methods_woocommerce.set();}else if(methods_cart.data['enabled']){}else{methods_cart.cart[0]=methods_reservation.reservation;methods_order.payment.set();$('#DOPBSPCalendar-submit'+ID).css('display','block');}}else{if(!methods_cart.data['enabled']){$('#DOPBSPCalendar-submit'+ID).css('display','none');}}},events:function(){$('#DOPBSPCalendar-add-to-cart'+ID).unbind('click');$('#DOPBSPCalendar-add-to-cart'+ID).bind('click',function(){if(methods_woocommerce.data['enabled']&&methods_woocommerce.data['add_to_cart']){methods_woocommerce.add();}});},clear:function(){methods_days.vars.selectionEnd='';methods_days.vars.selectionInit=false;methods_days.vars.selectionStart='';methods_days.clearSelection();methods_hours.vars.selectionEnd='';methods_hours.vars.selectionInit=false;methods_hours.vars.selectionStart='';$('.DOPBSPCalendar-hour',Container).removeClass('dopbsp-selected');methods_coupons.vars.use=false;methods_reservation.reservation={'check_in':'','check_out':'','start_hour':'','end_hour':'','no_items':1,'price':0,'price_total':0,'extras':new Array(),'extras_price':0,'discount':{},'discount_price':0,'coupon':{},'coupon_price':0,'fees':new Array(),'fees_price':0,'deposit':{},'deposit_price':0,'days_hours_history':{}};if(!methods_cart.data['enabled']){methods_cart.cart=new Array();$('#DOPBSPCalendar-submit'+ID).css('display','none');}},toggleMessages:function(message,type){type=type===undefined?'dopbsp-error':type;$('#DOPBSPCalendar-reservation-cart'+ID).html('<div class="dopbsp-message '+type+'">'+message+'</div>');}},methods_cart={data:{},text:{},cart:new Array(),display:function(){var HTML=new Array();HTML.push(' <div id="DOPBSPCalendar-cart'+ID+'" class="module'+(methods_cart.data['enabled']?'':' DOPBSPCalendar-hidden')+'">');HTML.push('     <h4>'+DOPBSPFrontEnd.text(ID,'cart','title')+'</h4>');HTML.push('     <table id="DOPBSPCalendar-list-cart'+ID+'" class="cart">');HTML.push('         <tbody>');HTML.push('             <tr>');HTML.push('                 <td class="label">Price</td>');HTML.push('                 <td class="value"></td>');HTML.push('             </tr>');HTML.push('             <tr id="DOPBSPCalendar-cart-totals-discount'+ID+'">');HTML.push('                 <td class="label">Discount</td>');HTML.push('                 <td class="value"></td>');HTML.push('             </tr>');HTML.push('             <tr id="DOPBSPCalendar-cart-totals-deposit'+ID+'">');HTML.push('                 <td class="label">'+DOPBSPFrontEnd.text(ID,'deposit','title')+'</td>');HTML.push('                 <td class="value"></td>');HTML.push('             </tr>');HTML.push('             <tr id="DOPBSPCalendar-cart-totals-total-price'+ID+'" class="total">');HTML.push('                 <td class="label">'+DOPBSPFrontEnd.text(ID,'reservation','priceTotal')+'</td>');HTML.push('                 <td class="value"></td>');HTML.push('             </tr>');HTML.push('         </tbody>');HTML.push('     </table>');HTML.push(' </div>');$('#DOPBSPCalendar-sidebar-column-wrapper-'+methods_sidebar.data['positions']['cart']['column']+'-'+ID+' .row'+methods_sidebar.data['positions']['cart']['row']).html(HTML.join(''));},add:function(){methods_cart.cart.push(methods_reservation.reservation);methods_cart.set();},delete:function(i){methods_cart.cart.splice(i,1);methods_cart.set();},set:function(){var HTML=new Array(),i;HTML.push('<tbody>');if(methods_cart.cart.length>0){for(i=0;i<methods_cart.cart.length;i++){}
methods_order.set();}else{HTML.push('  <tr>');HTML.push('     <td>'+DOPBSPFrontEnd.text(ID,'cart','isEmpty')+'</td>');HTML.push('  </tr>');methods_order.clear();}
HTML.push('</tbody>');}},methods_form={data:{},text:{},display:function(){if(ae_globals.user_ID!=0){$.ajax({url:ae_globals.ajaxURL,type:'post',data:{action:'my_get_data_form_reserva'},success:function(res){if(res.success){$("#DOPBSPCalendar-form-field"+ID+"_1").val(res.nombre);$("#DOPBSPCalendar-form-field"+ID+"_2").val(res.direccion);$("#DOPBSPCalendar-form-field"+ID+"_3").val(res.email);$("#DOPBSPCalendar-form-field"+ID+"_4").val(res.telefono);}}});}
var form=methods_form.data['form'],formField,formFieldOption,HTML=new Array(),i,j;HTML.push('<div id="DOPBSPCalendar-form'+ID+'" class="dopbsp-module">');if(!methods_woocommerce.data['enabled']){HTML.push(' <h4>'+DOPBSPFrontEnd.text(ID,'form','title')+'</h4>');for(i=0;i<form.length;i++){formField=form[i];HTML.push(' <div class="dopbsp-input-wrapper">');switch(formField['type']){case'checkbox':HTML.push('     <div id="DOPBSPCalendar-form-field-warning'+ID+'_'+formField['id']+'" class="dopbsp-warning-info DOPBSPCalendar-hidden">');HTML.push('         <a href="javascript:void(0)" class="dopbsp-icon"></a>');HTML.push('         <div class="dopbsp-message">'+formField['translation']+' '+DOPBSPFrontEnd.text(ID,'form','required')+'</div>');HTML.push('     </div>');HTML.push('     <input type="checkbox" name="DOPBSPCalendar-form-field'+ID+'_'+formField['id']+'" id="DOPBSPCalendar-form-field'+ID+'_'+formField['id']+'" />');HTML.push('     <label class="dopbsp-for-checkbox" for="DOPBSPCalendar-form-field'+ID+'_'+formField['id']+'">'+formField['translation']+(formField['required']==='true'?'  <span class="dopbsp-required">*</span>':'')+'</label>');break;case'select':HTML.push('     <div id="DOPBSPCalendar-form-field-warning'+ID+'_'+formField['id']+'" class="dopbsp-warning-info DOPBSPCalendar-hidden">');HTML.push('         <a href="javascript:void(0)" class="dopbsp-icon"></a>');HTML.push('         <div class="dopbsp-message">'+formField['translation']+' '+DOPBSPFrontEnd.text(ID,'form','required')+'</div>');HTML.push('     </div>');HTML.push('     <label for="DOPBSPCalendar-form-field'+ID+'_'+formField['id']+'">'+formField['translation']+(formField['required']==='true'?'  <span class="dopbsp-required">*</span>':'')+'</label>');HTML.push('     <select name="DOPBSPCalendar-form-field'+ID+'_'+formField['id']+(formField['multiple_select']==='true'?'[]':'')+'" id="DOPBSPCalendar-form-field'+ID+'_'+formField['id']+'" value=""'+(formField['multiple_select']==='true'?' multiple':'')+'>');for(j=0;j<formField['options'].length;j++){formFieldOption=formField['options'][j];HTML.push('<option value="'+formFieldOption['id']+'">'+formFieldOption['translation']+'</option>');}
HTML.push('     </select>');break;case'text':HTML.push('     <div id="DOPBSPCalendar-form-field-warning'+ID+'_'+formField['id']+'" class="dopbsp-warning-info DOPBSPCalendar-hidden">');HTML.push('         <a href="javascript:void(0)" class="dopbsp-icon"></a>');HTML.push('         <div class="dopbsp-message">'+formField['translation']+' '+(formField['is_email']==='true'?DOPBSPFrontEnd.text(ID,'form','invalidEmail'):DOPBSPFrontEnd.text(ID,'form','required'))+'</div>');HTML.push('     </div>');HTML.push('     <label for="DOPBSPCalendar-form-field'+ID+'_'+formField['id']+'">'+formField['translation']+(formField['required']==='true'?' <span class="dopbsp-required">*</span>':'')+'</label>');HTML.push('     <input type="text" name="DOPBSPCalendar-form-field'+ID+'_'+formField['id']+'" id="DOPBSPCalendar-form-field'+ID+'_'+formField['id']+'" value="" />');break;case'textarea':HTML.push('     <div id="DOPBSPCalendar-form-field-warning'+ID+'_'+formField['id']+'" class="dopbsp-warning-info DOPBSPCalendar-hidden">');HTML.push('         <a href="javascript:void(0)" class="dopbsp-icon"></a>');HTML.push('         <div class="dopbsp-message">'+formField['translation']+' '+DOPBSPFrontEnd.text(ID,'form','required')+'</div>');HTML.push('     </div>');HTML.push('     <label for="DOPBSPCalendar-form-field'+ID+'_'+formField['id']+'">'+formField['translation']+(formField['required']==='true'?'  <span class="dopbsp-required">*</span>':'')+'</label>');HTML.push('     <textarea name="DOPBSPCalendar-form-field'+ID+'_'+formField['id']+'" id="DOPBSPCalendar-form-field'+ID+'_'+formField['id']+'" col="" rows="3"></textarea>');break;}
HTML.push(' </div>');}}
HTML.push('</div>');$('#DOPBSPCalendar-sidebar-column-wrapper-'+methods_sidebar.data['positions']['form']['column']+'-'+ID+' .dopbsp-row'+methods_sidebar.data['positions']['form']['row']).html(HTML.join(''));methods_form.init();},init:function(){var form=methods_form.data['form'],formField,i;for(i=0;i<form.length;i++){formField=form[i];if(formField['type']==='select'){$('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).DOPSelect();}}
methods_form.events();},events:function(){var form=methods_form.data['form'],formData={},formField,i;for(i=0;i<form.length;i++){formField=form[i];formData[formField['id']]=formField;formData[formField['id']]['size']=parseInt(formData[formField['id']]['size'],10);switch(formField['type']){case'checkbox':$('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).unbind('click');$('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).bind('click',function(){var id=$(this).attr('id').split('DOPBSPCalendar-form-field'+ID+'_')[1];if(formData[id]['required']==='true'&&!$(this).is(':checked')){$('#DOPBSPCalendar-form-field-warning'+ID+'_'+id).css('display','block');}else{$('#DOPBSPCalendar-form-field-warning'+ID+'_'+id).css('display','none');}});break;case'text':$('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).unbind('input propertychange blur');$('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).bind('input propertychange blur',function(){var id=$(this).attr('id').split('DOPBSPCalendar-form-field'+ID+'_')[1],value;if(formData[id]['allowed_characters']!==''){DOPPrototypes.cleanInput($(this),formData[id]['allowed_characters']);}
value=$(this).val();if(formData[id]['size']!==0){$(this).val(value.substring(0,formData[id]['size']));}
if(formData[id]['is_email']==='true'&&(formData[id]['required']==='true'&&!DOPPrototypes.validEmail(value)||formData[id]['required']==='false'&&!DOPPrototypes.validEmail(value)&&value!=='')){$('#DOPBSPCalendar-form-field-warning'+ID+'_'+id).css('display','block');}else if(formData[id]['required']==='true'&&value===''){$('#DOPBSPCalendar-form-field-warning'+ID+'_'+id).css('display','block');}else{$('#DOPBSPCalendar-form-field-warning'+ID+'_'+id).css('display','none');}});break;case'select':$('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).unbind('change');$('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).bind('change',function(){var id=$(this).attr('id').split('DOPBSPCalendar-form-field'+ID+'_')[1];if(formData[id]['required']==='true'&&($(this).val()===''||$(this).val()===null)){$('#DOPBSPCalendar-form-field-warning'+ID+'_'+id).css('display','block');}else{$('#DOPBSPCalendar-form-field-warning'+ID+'_'+id).css('display','none');}});break;case'textarea':$('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).unbind('input propertychange blur');$('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).bind('input propertychange blur',function(){var id=$(this).attr('id').split('DOPBSPCalendar-form-field'+ID+'_')[1],value;if(formData[id]['allowed_characters']!==''){DOPPrototypes.cleanInput($(this),formData[id]['allowed_characters']);}
value=$(this).val();if(formData[id]['size']!==0){$(this).val(value.substring(0,formData[id]['size']));}
if(formData[id]['required']==='true'&&value===''){$('#DOPBSPCalendar-form-field-warning'+ID+'_'+id).css('display','block');}else{$('#DOPBSPCalendar-form-field-warning'+ID+'_'+id).css('display','none');}});break;}}},get:function(){var form=methods_form.data['form'],formData=new Array(),formField,i,j,k,option,selectedOptions;for(i=0;i<form.length;i++){formField=form[i];formData[i]={"id":"","is_email":false,"add_to_day_hour_info":false,"add_to_day_hour_body":false,"translation":"","value":""};formData[i]['id']=formField['id'];formData[i]['is_email']=formField['is_email']==='true'?true:false;formData[i]['add_to_day_hour_info']=formField['add_to_day_hour_info']==='true'?true:false;formData[i]['add_to_day_hour_body']=formField['add_to_day_hour_body']==='true'?true:false;formData[i]['translation']=formField['translation'];switch(formField['type']){case'checkbox':formData[i]['value']=$('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).is(':checked');break;case'select':option=$('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).val();if(formField['multiple_select']==='true'){selectedOptions=option.split(',');formData[i]['value']=new Array();for(j=0;j<selectedOptions.length;j++){for(k=0;k<formField['options'].length;k++){if(formField['options'][k]['id']===selectedOptions[j]){formData[i]['value'][j]=formField['options'][k];}}}
if(formData[i]['value'].length===0){formData[i]['value']='';}}else{formData[i]['value']='';for(k=0;k<formField['options'].length;k++){if(formField['options'][k]['id']===option){formData[i]['value']=formField['options'][k]['translation'];break;}}}
break;default:formData[i]['value']=$('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).val();}}
return formData;},validate:function(){var form=methods_form.data['form'],formField,i,isValid=true;for(i=0;i<form.length;i++){formField=form[i];switch(formField['type']){case'checkbox':if(formField['required']==='true'&&!$('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).is(':checked')){isValid=false;$('#DOPBSPCalendar-form-field-warning'+ID+'_'+formField['id']).css('display','block');}else{$('#DOPBSPCalendar-form-field-warning'+ID+'_'+formField['id']).css('display','none');}
break;case'text':if(formField['is_email']==='true'&&(formField['required']==='true'&&!DOPPrototypes.validEmail($('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).val())||formField['required']==='false'&&!DOPPrototypes.validEmail($('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).val())&&$('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).val()!=='')){isValid=false;$('#DOPBSPCalendar-form-field-warning'+ID+'_'+formField['id']).css('display','block');}else if(formField['required']==='true'&&$('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).val()===''){isValid=false;$('#DOPBSPCalendar-form-field-warning'+ID+'_'+formField['id']).css('display','block');}else{$('#DOPBSPCalendar-form-field-warning'+ID+'_'+formField['id']).css('display','none');}
break;case'select':if(formField['required']==='true'&&($('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).val()===''||$('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).val()===null)){isValid=false;$('#DOPBSPCalendar-form-field-warning'+ID+'_'+formField['id']).css('display','block');}else{$('#DOPBSPCalendar-form-field-warning'+ID+'_'+formField['id']).css('display','none');}
break;case'textarea':if(formField['required']==='true'&&$('#DOPBSPCalendar-form-field'+ID+'_'+formField['id']).val()===''){isValid=false;$('#DOPBSPCalendar-form-field-warning'+ID+'_'+formField['id']).css('display','block');}else{$('#DOPBSPCalendar-form-field-warning'+ID+'_'+formField['id']).css('display','none');}
break;}}
return isValid;},getInfo:function(info){var i,text=new Array();for(i=0;i<info.length;i++){text.push(info[i]['data']);}
return text.join('<br /><br />');}},methods_order={data:{},text:{},vars:{addressFields:[{"id":"first-name","key":"first_name","text":"addressFirstName"},{"id":"last-name","key":"last_name","text":"addressLastName"},{"id":"company","key":"company","text":"addressCompany"},{"id":"email","key":"email","text":"addressEmail"},{"id":"phone","key":"phone","text":"addressPhone"},{"id":"country","key":"country","text":"addressCountry"},{"id":"address-first","key":"address_first","text":"addressAddressFirst"},{"id":"address-second","key":"address_second","text":"addressAddressSecond"},{"id":"city","key":"city","text":"addressCity"},{"id":"state","key":"state","text":"addressState"},{"id":"zip-code","key":"zip_code","text":"addressZipCode"}],tokenInit:false},display:function(){var HTML=new Array(),key,paymentGateways=methods_order.data['paymentGateways'];HTML.push('<div id="DOPBSPCalendar-order'+ID+'" class="dopbsp-module">');HTML.push(' <h4>'+DOPBSPFrontEnd.text(ID,'order','title')+'</h4>');if(methods_order.data['paymentArrival']){HTML.push(' <div class="dopbsp-input-wrapper dopbsp-payment-first">');HTML.push('     <input type="radio" name="DOPBSPCalendar-payment'+ID+'" value="default" />');HTML.push('     <label class="dopbsp-for-radio">'+(methods_order.data['paymentArrivalWithApproval']?DOPBSPFrontEnd.text(ID,'order','paymentArrivalWithApproval'):DOPBSPFrontEnd.text(ID,'order','paymentArrival'))+'</label>');HTML.push(' </div>');}
if(paymentGateways.length!==0){for(key in paymentGateways){HTML.push(' <div class="dopbsp-input-wrapper">');HTML.push('     <input type="radio" name="DOPBSPCalendar-payment'+ID+'" value="'+paymentGateways[key]['id']+'" />');HTML.push('     <label class="dopbsp-for-radio">'+paymentGateways[key]['text']['label']+'</label>');HTML.push(' </div>');}}
HTML.push(' <input type="hidden" name="DOPBSPCalendar-payment-token'+ID+'" id="DOPBSPCalendar-payment-token'+ID+'" value="" />');HTML.push(' <input type="hidden" name="DOPBSPCalendar-payment-token-message'+ID+'" id="DOPBSPCalendar-payment-token-message'+ID+'" value="" />');HTML.push(' <div id="DOPBSPCalendar-payment-form-addon'+ID+'"></div>');HTML.push(methods_order.payment.card.display());HTML.push(methods_order.payment.address_billing.display());HTML.push(methods_order.payment.address_shipping.display());if(methods_order.data['termsAndConditions']){HTML.push(' <div class="dopbsp-input-wrapper">');HTML.push('     <input type="checkbox" name="DOPBSPCalendar-terms-and-conditions'+ID+'" id="DOPBSPCalendar-terms-and-conditions'+ID+'" />');HTML.push('     <label class="dopbsp-for-checkbox" for="DOPBSPCalendar-terms-and-conditions'+ID+'"><a href="'+methods_order.data['termsAndConditionsLink']+'" target="_blank">'+DOPBSPFrontEnd.text(ID,'order','termsAndConditions')+'</a></label>');HTML.push(' </div>');}
HTML.push(' <div class="dopbsp-input-wrapper">');HTML.push('     <input type="submit" name="DOPBSPCalendar-submit'+ID+'" id="DOPBSPCalendar-submit'+ID+'" class="DOPBSPCalendar-hidden" value="'+DOPBSPFrontEnd.text(ID,'order','book')+'" />');HTML.push('     <div id="DOPBSPCalendar-submit-loader'+ID+'" class="dopbsp-submit-loader DOPBSPCalendar-hidden"></div>');HTML.push(' </div>');HTML.push(' <div class="dopbsp-message DOPBSPCalendar-hidden"></div>');HTML.push('</div>');$('#DOPBSPCalendar-sidebar-column-wrapper-'+methods_sidebar.data['positions']['order']['column']+'-'+ID+' .dopbsp-row'+methods_sidebar.data['positions']['order']['row']).html(HTML.join(''));methods_order.init();},init:function(){$('#DOPBSPCalendar-payment-card-expiration-date-month'+ID).DOPSelect();$('#DOPBSPCalendar-payment-card-expiration-date-year'+ID).DOPSelect();methods_order.events();methods_order.payment.set();methods_order.payment.address_billing.init();methods_order.payment.address_shipping.init();methods_order.payment.card.init();},events:function(){$('input[name=DOPBSPCalendar-payment'+ID+']').unbind('click');$('input[name=DOPBSPCalendar-payment'+ID+']').bind('click',function(){methods_order.payment.form_addon.display();methods_order.payment.card.set();methods_order.payment.address_billing.set();methods_order.payment.address_shipping.set();});$('#DOPBSPCalendar-submit'+ID).unbind('click');$('#DOPBSPCalendar-submit'+ID).bind('click',function(){methods_order.book();});},validate:function(){var isValid=true;if(methods_order.data['termsAndConditions']&&!$('#DOPBSPCalendar-terms-and-conditions'+ID).is(':checked')){methods_order.toggleMessages(DOPBSPFrontEnd.text(ID,'order','termsAndConditionsInvalid'),'block');isValid=false;}
return isValid;},payment:{set:function(){var cart=methods_cart.cart,i,price=0;for(i=0;i<cart.length;i++){price+=cart[i]['price_total'];}
if(price>0){$('input[name=DOPBSPCalendar-payment'+ID+']').removeAttr('disabled').removeAttr('checked');$('input[name=DOPBSPCalendar-payment'+ID+']:first').attr('checked','checked');}else{$('input[name=DOPBSPCalendar-payment'+ID+']').attr('disabled','disabled').removeAttr('checked');}
methods_order.payment.form_addon.display();methods_order.payment.card.set();methods_order.payment.address_billing.set();methods_order.payment.address_shipping.set();},token:function(paymentMethod){var paymentGateways=methods_order.data['paymentGateways'];if(!methods_order.vars.tokenInit){methods_order.vars.tokenInit=true;eval(paymentGateways[paymentMethod]['data']['token']['function']);}
setTimeout(function(){methods_order.book();},100);},verify:function(){var href=window.location.href,key,paymentGateways=methods_order.data['paymentGateways'],paymentCancel=DOPPrototypes.$_GET('dopbsp_payment_cancel'),paymentError=DOPPrototypes.$_GET('dopbsp_payment_error'),paymentSuccess=DOPPrototypes.$_GET('dopbsp_payment_success'),variables;for(key in paymentGateways){if(paymentCancel!==undefined&&key===paymentCancel){methods_info.toggleMessages(paymentGateways[key]['text']['cancel'],'dopbsp-error');variables=(href.indexOf('?dopbsp_payment_cancel')!==-1?'?':'&')+'dopbsp_payment_cancel';}else if(paymentError!==undefined&&key===paymentError){methods_info.toggleMessages(paymentGateways[key]['text']['error'],'dopbsp-error');variables=(href.indexOf('?dopbsp_payment_error')!==-1?'?':'&')+'dopbsp_payment_error';}else if(paymentSuccess!==undefined&&key===paymentSuccess){methods_info.toggleMessages(paymentGateways[key]['text']['success'],'dopbsp-success');variables=(href.indexOf('?dopbsp_payment_success')!==-1?'?':'&')+'dopbsp_payment_success';}}
if(paymentCancel!==undefined||paymentError!==undefined||paymentSuccess!==undefined){try{window.history.pushState({'html':'','pageTitle':document.title},'',href.split(variables)[0]);}catch(e){}}},address_billing:{display:function(){var countries=methods_order.data.countries,fields=methods_order.vars.addressFields,HTML=new Array(),i,j;HTML.push('<div id="DOPBSPCalendar-payment-address-billing'+ID+'" class="DOPBSPCalendar-hidden">');HTML.push(' <h4 id="DOPBSPCalendar-payment-address-billing-title'+ID+'">'+DOPBSPFrontEnd.text(ID,'order','addressBilling')+'</h4>');for(i=0;i<fields.length;i++){switch(fields[i]['key']){case'country':HTML.push(' <div id="DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+'-wrapper'+ID+'" class="dopbsp-input-wrapper">');HTML.push('     <div id="DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+'-warning'+ID+'" class="dopbsp-warning-info DOPBSPCalendar-hidden">');HTML.push('         <a href="javascript:void(0)" class="dopbsp-icon"></a>');HTML.push('         <div class="dopbsp-message">'+DOPBSPFrontEnd.text(ID,'order',fields[i]['text'])+' '+DOPBSPFrontEnd.text(ID,'form','required')+'</div>');HTML.push('     </div>');HTML.push('     <label for="DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+ID+'">'+DOPBSPFrontEnd.text(ID,'order',fields[i]['text'])+' <span class="dopbsp-required">*</span></label>');HTML.push('     <select name="DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+ID+'" id="DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+ID+'">');for(j=0;j<countries.length;j++){HTML.push('     <option value="'+countries[j]['code3']+'">'+countries[j]['name']+'</option>');}
HTML.push('     </select>');HTML.push(' </div>');break;case'zip_code':HTML.push(' <div id="DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+'-wrapper'+ID+'" class="dopbsp-input-wrapper">');HTML.push('     <div id="DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+'-warning'+ID+'" class="dopbsp-warning-info DOPBSPCalendar-hidden">');HTML.push('         <a href="javascript:void(0)" class="dopbsp-icon"></a>');HTML.push('         <div class="dopbsp-message">'+DOPBSPFrontEnd.text(ID,'order',fields[i]['text'])+' '+DOPBSPFrontEnd.text(ID,'form','required')+'</div>');HTML.push('     </div>');HTML.push('     <label for="DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+ID+'">'+DOPBSPFrontEnd.text(ID,'order',fields[i]['text'])+' <span class="dopbsp-required">*</span></label>');HTML.push('     <input type="text" name="DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+ID+'" id="DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+ID+'" class="dopbsp-small" value="" />');HTML.push(' </div>');break;default:HTML.push(' <div id="DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+'-wrapper'+ID+'" class="dopbsp-input-wrapper">');HTML.push('     <div id="DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+'-warning'+ID+'" class="dopbsp-warning-info DOPBSPCalendar-hidden">');HTML.push('         <a href="javascript:void(0)" class="dopbsp-icon"></a>');HTML.push('         <div class="dopbsp-message">'+DOPBSPFrontEnd.text(ID,'order',fields[i]['text'])+' '+(fields[i]['key']==='email'?DOPBSPFrontEnd.text(ID,'form','invalidEmail'):DOPBSPFrontEnd.text(ID,'form','required'))+'</div>');HTML.push('     </div>');HTML.push('     <label for="DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+ID+'">'+DOPBSPFrontEnd.text(ID,'order',fields[i]['text'])+' <span class="dopbsp-required">*</span></label>');HTML.push('     <input type="text" name="DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+ID+'" id="DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+ID+'" value="" />');HTML.push(' </div>');}}
HTML.push('</div>');return HTML.join('');},init:function(){$('#DOPBSPCalendar-payment-address-billing-country'+ID).DOPSelect();methods_order.payment.address_billing.events();},set:function(){var fields=methods_order.vars.addressFields,i,paymentGateways=methods_order.data['paymentGateways'],paymentMethod=$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val()===undefined?'none':$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val(),data=paymentMethod==='none'||paymentMethod==='default'?methods_order.data['address_billing']:paymentGateways[paymentMethod]['data']['address_billing'];$('#DOPBSPCalendar-payment-address-billing'+ID).css('display',paymentMethod!=='none'&&data['enabled']?'block':'none');if(paymentMethod==='none'||!data['enabled']){return false;}
for(i=0;i<fields.length;i++){$('#DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+'-wrapper'+ID).css('display',data[fields[i]['key']]['enabled']?'block':'none');$('#DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+'-wrapper'+ID+' .dopbsp-required').css('display',data[fields[i]['key']]['required']?'inline-block':'none');}},get:function(){var paymentGateways=methods_order.data['paymentGateways'],paymentMethod=$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val()===undefined?'none':$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val(),data=paymentMethod==='none'||paymentMethod==='default'?methods_order.data['address_billing']:paymentGateways[paymentMethod]['data']['address_billing'];if(!data['enabled']){return'';}else{return{"address_first":$('#DOPBSPCalendar-payment-address-billing-address-first'+ID).val(),"address_second":$('#DOPBSPCalendar-payment-address-billing-address-second'+ID).val(),"city":$('#DOPBSPCalendar-payment-address-billing-city'+ID).val(),"company":$('#DOPBSPCalendar-payment-address-billing-company'+ID).val(),"country":data['country']['enabled']?$('#DOPBSPCalendar-payment-address-billing-country'+ID).val():'',"email":$('#DOPBSPCalendar-payment-address-billing-email'+ID).val(),"first_name":$('#DOPBSPCalendar-payment-address-billing-first-name'+ID).val(),"last_name":$('#DOPBSPCalendar-payment-address-billing-last-name'+ID).val(),"phone":$('#DOPBSPCalendar-payment-address-billing-phone'+ID).val(),"state":$('#DOPBSPCalendar-payment-address-billing-state'+ID).val(),"zip_code":$('#DOPBSPCalendar-payment-address-billing-zip-code'+ID).val()};}},validate:function(){var fields=methods_order.vars.addressFields,i,isValid=true,paymentGateways=methods_order.data['paymentGateways'],paymentMethod=$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val()===undefined?'none':$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val(),data=paymentMethod==='none'||paymentMethod==='default'?methods_order.data['address_billing']:paymentGateways[paymentMethod]['data']['address_billing'];if(!data['enabled']){return true;}
for(i=0;i<fields.length;i++){if($('#DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+ID).val()===''&&data[fields[i]['key']]['enabled']&&data[fields[i]['key']]['required']&&(fields[i]['key']==='email'&&!DOPPrototypes.validEmail($('#DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+ID).val())||fields[i]['key']!=='email')){$('#DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+'-warning'+ID).css('display','block');isValid=false;}else{$('#DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+'-warning'+ID).css('display','none');}}
return isValid;},events:function(){var fields=methods_order.vars.addressFields,i,paymentGateways=methods_order.data['paymentGateways'],paymentMethod=$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val()===undefined?'none':$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val(),data=paymentMethod==='none'||paymentMethod==='default'?methods_order.data['address_billing']:paymentGateways[paymentMethod]['data']['address_billing'];for(i=0;i<fields.length;i++){switch(fields[i]['key']){case'country':break;case'email':if(data[fields[i]['key']]['enabled']){$('#DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+ID).unbind('input propertychange blur');$('#DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+ID).bind('input propertychange blur',function(){var paymentGateways=methods_order.data['paymentGateways'],paymentMethod=$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val()===undefined?'none':$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val(),data=paymentMethod==='none'||paymentMethod==='default'?methods_order.data['address_billing']:paymentGateways[paymentMethod]['data']['address_billing'];$(this).parent().find('.dopbsp-warning-info').css('display',!DOPPrototypes.validEmail($(this).val())&&$(this).val()!==''||data['email']['required']&&$(this).val()===''?'block':'none');});}
break;case'phone':if(data[fields[i]['key']]['enabled']){$('#DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+ID).unbind('input propertychange blur');$('#DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+ID).bind('input propertychange blur',function(){DOPPrototypes.cleanInput($(this),'0123456789+-().');});}
break;default:if(data[fields[i]['key']]['enabled']&&data[fields[i]['key']]['required']){$('#DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+ID).unbind('input propertychange blur');$('#DOPBSPCalendar-payment-address-billing-'+fields[i]['id']+ID).bind('input propertychange blur',function(){$(this).parent().find('.dopbsp-warning-info').css('display',$(this).val()===''?'block':'none');});}}}}},address_shipping:{display:function(){var countries=methods_order.data.countries,fields=methods_order.vars.addressFields,HTML=new Array(),i,j;HTML.push('<div id="DOPBSPCalendar-payment-address-shipping'+ID+'" class="DOPBSPCalendar-hidden">');HTML.push(' <h4 id="DOPBSPCalendar-payment-address-shipping-title'+ID+'">'+DOPBSPFrontEnd.text(ID,'order','addressShipping')+'</h4>');HTML.push(' <div class="dopbsp-input-wrapper">');HTML.push('     <input type="checkbox" name="DOPBSPCalendar-payment-address-shipping-copy'+ID+'" id="DOPBSPCalendar-payment-address-shipping-copy'+ID+'" checked="checked">');HTML.push('     <label class="dopbsp-for-checkbox" for="DOPBSPCalendar-payment-address-shipping-copy'+ID+'">'+DOPBSPFrontEnd.text(ID,'order','addressShippingCopy')+'</label>');HTML.push(' </div>');for(i=0;i<fields.length;i++){switch(fields[i]['key']){case'country':HTML.push(' <div id="DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+'-wrapper'+ID+'" class="dopbsp-input-wrapper">');HTML.push('     <div id="DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+'-warning'+ID+'" class="dopbsp-warning-info DOPBSPCalendar-hidden">');HTML.push('         <a href="javascript:void(0)" class="dopbsp-icon"></a>');HTML.push('         <div class="dopbsp-message">'+DOPBSPFrontEnd.text(ID,'order',fields[i]['text'])+' '+DOPBSPFrontEnd.text(ID,'form','required')+'</div>');HTML.push('     </div>');HTML.push('     <label for="DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+ID+'">'+DOPBSPFrontEnd.text(ID,'order',fields[i]['text'])+' <span class="dopbsp-required">*</span></label>');HTML.push('     <select name="DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+ID+'" id="DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+ID+'">');for(j=0;j<countries.length;j++){HTML.push('     <option value="'+countries[j]['code3']+'">'+countries[j]['name']+'</option>');}
HTML.push('     </select>');HTML.push(' </div>');break;case'zip_code':HTML.push(' <div id="DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+'-wrapper'+ID+'" class="dopbsp-input-wrapper">');HTML.push('     <div id="DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+'-warning'+ID+'" class="dopbsp-warning-info DOPBSPCalendar-hidden">');HTML.push('         <a href="javascript:void(0)" class="dopbsp-icon"></a>');HTML.push('         <div class="dopbsp-message">'+DOPBSPFrontEnd.text(ID,'order',fields[i]['text'])+' '+DOPBSPFrontEnd.text(ID,'form','required')+'</div>');HTML.push('     </div>');HTML.push('     <label for="DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+ID+'">'+DOPBSPFrontEnd.text(ID,'order',fields[i]['text'])+' <span class="dopbsp-required">*</span></label>');HTML.push('     <input type="text" name="DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+ID+'" id="DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+ID+'" class="dopbsp-small" value="" />');HTML.push(' </div>');break;default:HTML.push(' <div id="DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+'-wrapper'+ID+'" class="dopbsp-input-wrapper">');HTML.push('     <div id="DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+'-warning'+ID+'" class="dopbsp-warning-info DOPBSPCalendar-hidden">');HTML.push('         <a href="javascript:void(0)" class="dopbsp-icon"></a>');HTML.push('         <div class="dopbsp-message">'+DOPBSPFrontEnd.text(ID,'order',fields[i]['text'])+' '+(fields[i]['key']==='email'?DOPBSPFrontEnd.text(ID,'form','invalidEmail'):DOPBSPFrontEnd.text(ID,'form','required'))+'</div>');HTML.push('     </div>');HTML.push('     <label for="DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+ID+'">'+DOPBSPFrontEnd.text(ID,'order',fields[i]['text'])+' <span class="dopbsp-required">*</span></label>');HTML.push('     <input type="text" name="DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+ID+'" id="DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+ID+'" value="" />');HTML.push(' </div>');}}
HTML.push('</div>');return HTML.join('');},init:function(){$('#DOPBSPCalendar-payment-address-shipping-country'+ID).DOPSelect();methods_order.payment.address_shipping.events();},set:function(){var fields=methods_order.vars.addressFields,i,paymentGateways=methods_order.data['paymentGateways'],paymentMethod=$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val()===undefined?'none':$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val(),data=paymentMethod==='none'||paymentMethod==='default'?methods_order.data['address_shipping']:paymentGateways[paymentMethod]['data']['address_shipping'],useBilling=$('#DOPBSPCalendar-payment-address-shipping-copy'+ID).is(':checked');$('#DOPBSPCalendar-payment-address-shipping'+ID).css('display',paymentMethod!=='none'&&data['enabled']?'block':'none');if(paymentMethod==='none'||!data['enabled']){return false;}
for(i=0;i<fields.length;i++){$('#DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+'-wrapper'+ID).css('display',data[fields[i]['key']]['enabled']&&!useBilling?'block':'none');$('#DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+'-wrapper'+ID+' .dopbsp-required').css('display',data[fields[i]['key']]['required']?'inline-block':'none');}},get:function(){var paymentGateways=methods_order.data['paymentGateways'],paymentMethod=$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val()===undefined?'none':$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val(),data=paymentMethod==='none'||paymentMethod==='default'?methods_order.data['address_shipping']:paymentGateways[paymentMethod]['data']['address_shipping'],useBilling=$('#DOPBSPCalendar-payment-address-shipping-copy'+ID).is(':checked');if(!data['enabled']){return'';}else if(useBilling){return'billing_address';}else{return{"address_first":$('#DOPBSPCalendar-payment-address-shipping-address-first'+ID).val(),"address_second":$('#DOPBSPCalendar-payment-address-shipping-address-second'+ID).val(),"city":$('#DOPBSPCalendar-payment-address-shipping-city'+ID).val(),"company":$('#DOPBSPCalendar-payment-address-shipping-company'+ID).val(),"country":data['country']['enabled']?$('#DOPBSPCalendar-payment-address-shipping-country'+ID).val():'',"email":$('#DOPBSPCalendar-payment-address-shipping-email'+ID).val(),"first_name":$('#DOPBSPCalendar-payment-address-shipping-first-name'+ID).val(),"last_name":$('#DOPBSPCalendar-payment-address-shipping-last-name'+ID).val(),"phone":$('#DOPBSPCalendar-payment-address-shipping-phone'+ID).val(),"state":$('#DOPBSPCalendar-payment-address-shipping-state'+ID).val(),"zip_code":$('#DOPBSPCalendar-payment-address-shipping-zip-code'+ID).val()};}},validate:function(){var fields=methods_order.vars.addressFields,i,isValid=true,paymentGateways=methods_order.data['paymentGateways'],paymentMethod=$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val()===undefined?'none':$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val(),data=paymentMethod==='none'||paymentMethod==='default'?methods_order.data['address_shipping']:paymentGateways[paymentMethod]['data']['address_shipping'];if(!data['enabled']||$('#DOPBSPCalendar-payment-address-shipping-copy'+ID).is(':checked')){return true;}
for(i=0;i<fields.length;i++){if($('#DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+ID).val()===''&&data[fields[i]['key']]['enabled']&&data[fields[i]['key']]['required']&&(fields[i]['key']==='email'&&!DOPPrototypes.validEmail($('#DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+ID).val())||fields[i]['key']!=='email')){$('#DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+'-warning'+ID).css('display','block');isValid=false;}else{$('#DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+'-warning'+ID).css('display','none');}}
return isValid;},events:function(){var fields=methods_order.vars.addressFields,i,paymentGateways=methods_order.data['paymentGateways'],paymentMethod=$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val()===undefined?'none':$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val(),data=paymentMethod==='none'||paymentMethod==='default'?methods_order.data['address_shipping']:paymentGateways[paymentMethod]['data']['address_shipping'];$('#DOPBSPCalendar-payment-address-shipping-copy'+ID).unbind('click');$('#DOPBSPCalendar-payment-address-shipping-copy'+ID).bind('click',function(){methods_order.payment.address_shipping.set();});for(i=0;i<fields.length;i++){switch(fields[i]['key']){case'country':break;case'email':if(data[fields[i]['key']]['enabled']){$('#DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+ID).unbind('input propertychange blur');$('#DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+ID).bind('input propertychange blur',function(){var paymentGateways=methods_order.data['paymentGateways'],paymentMethod=$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val()===undefined?'none':$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val(),data=paymentMethod==='none'||paymentMethod==='default'?methods_order.data['address_shipping']:paymentGateways[paymentMethod]['data']['address_shipping'];$(this).parent().find('.dopbsp-warning-info').css('display',!DOPPrototypes.validEmail($(this).val())&&$(this).val()!==''||data['email']['required']&&$(this).val()===''?'block':'none');});}
break;case'phone':if(data[fields[i]['key']]['enabled']){$('#DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+ID).unbind('input propertychange blur');$('#DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+ID).bind('input propertychange blur',function(){DOPPrototypes.cleanInput($(this),'0123456789+-().');});}
break;default:if(data[fields[i]['key']]['enabled']&&data[fields[i]['key']]['required']){$('#DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+ID).unbind('input propertychange blur');$('#DOPBSPCalendar-payment-address-shipping-'+fields[i]['id']+ID).bind('input propertychange blur',function(){$(this).parent().find('.dopbsp-warning-info').css('display',$(this).val()===''?'block':'none');});}}}}},card:{display:function(){var HTML=new Array(),i;HTML.push('<div id="DOPBSPCalendar-payment-card'+ID+'" class="DOPBSPCalendar-hidden">');HTML.push(' <h4 id="DOPBSPCalendar-payment-card-title'+ID+'"></h4>');HTML.push(' <div id="DOPBSPCalendar-payment-card-number-wrapper'+ID+'" class="dopbsp-input-wrapper">');HTML.push('     <label id="DOPBSPCalendar-payment-card-number-label'+ID+'" for="DOPBSPCalendar-payment-card-number'+ID+'"></label>');HTML.push('     <input type="text" name="DOPBSPCalendar-payment-card-number'+ID+'" id="DOPBSPCalendar-payment-card-number'+ID+'" value="" />');HTML.push(' </div>');HTML.push(' <div id="DOPBSPCalendar-payment-card-security-code-wrapper'+ID+'" class="dopbsp-input-wrapper">');HTML.push('     <label id="DOPBSPCalendar-payment-card-security-code-label'+ID+'" for="DOPBSPCalendar-payment-card-security-code'+ID+'"></label>');HTML.push('     <input type="text" name="DOPBSPCalendar-payment-card-security-code'+ID+'" id="DOPBSPCalendar-payment-card-security-code'+ID+'" class="dopbsp-small" value="" />');HTML.push(' </div>');HTML.push(' <div id="DOPBSPCalendar-payment-card-expiration-date-wrapper'+ID+'" class="dopbsp-input-wrapper">');HTML.push('     <label id="DOPBSPCalendar-payment-card-expiration-date-label'+ID+'"></label>');HTML.push('     <select name="DOPBSPCalendar-payment-card-expiration-date-month'+ID+'" id="DOPBSPCalendar-payment-card-expiration-date-month'+ID+'" class="dopbsp-small DOPBSPCalendar-left">');for(i=1;i<=12;i++){HTML.push('     <option value="'+DOPPrototypes.getLeadingZero(i)+'">'+DOPPrototypes.getLeadingZero(i)+' '+DOPBSPFrontEnd.text(ID,'months','shortNames')[i-1]+'</option>');}
HTML.push('     </select>');HTML.push('     <select name="DOPBSPCalendar-payment-card-expiration-date-year'+ID+'" id="DOPBSPCalendar-payment-card-expiration-date-year'+ID+'" class="dopbsp-small DOPBSPCalendar-left">');for(i=methods_calendar.vars.todayYear;i<=methods_calendar.vars.todayYear+10;i++){HTML.push('     <option value="'+i+'">'+i+'</option>');}
HTML.push('     </select>');HTML.push('     <br class="DOPBSPCalendar-clear" />');HTML.push(' </div>');HTML.push(' <div id="DOPBSPCalendar-payment-card-name-wrapper'+ID+'" class="dopbsp-input-wrapper">');HTML.push('     <label id="DOPBSPCalendar-payment-card-name-label'+ID+'" for="DOPBSPCalendar-payment-card-name'+ID+'"></label>');HTML.push('     <input type="text" name="DOPBSPCalendar-payment-card-name'+ID+'" id="DOPBSPCalendar-payment-card-name'+ID+'" value="" />');HTML.push(' </div>');HTML.push('</div>');return HTML.join('');},init:function(){methods_order.payment.card.events();},set:function(){var paymentGateways=methods_order.data['paymentGateways'],paymentMethod=$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val()===undefined?'none':$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val();if(paymentMethod!=='none'&&paymentMethod!=='default'&&paymentGateways[paymentMethod]['data']['card']['enabled']){$('#DOPBSPCalendar-payment-card'+ID).removeClass('DOPBSPCalendar-hidden');$('#DOPBSPCalendar-payment-card-title'+ID).html(paymentGateways[paymentMethod]['text']['card_title']);$('#DOPBSPCalendar-payment-card-number-label'+ID).html(paymentGateways[paymentMethod]['text']['card_number']);paymentGateways[paymentMethod]['data']['card']['number']['attribute']!==''?$('#DOPBSPCalendar-payment-card-number'+ID).attr(paymentGateways[paymentMethod]['data']['card']['number']['attribute'],paymentGateways[paymentMethod]['data']['card']['number']['value']):'';$('#DOPBSPCalendar-payment-card-security-code-label'+ID).html(paymentGateways[paymentMethod]['text']['card_security_code']);paymentGateways[paymentMethod]['data']['card']['security_code']['attribute']!==''?$('#DOPBSPCalendar-payment-card-security-code'+ID).attr(paymentGateways[paymentMethod]['data']['card']['security_code']['attribute'],paymentGateways[paymentMethod]['data']['card']['security_code']['value']):'';$('#DOPBSPCalendar-payment-card-expiration-date-label'+ID).html(paymentGateways[paymentMethod]['text']['card_expiration_date']);paymentGateways[paymentMethod]['data']['card']['expiration_date_month']['attribute']!==''?$('#DOPBSPCalendar-payment-card-expiration-date-month'+ID).attr(paymentGateways[paymentMethod]['data']['card']['expiration_date_month']['attribute'],paymentGateways[paymentMethod]['data']['card']['expiration_date_month']['value']):'';paymentGateways[paymentMethod]['data']['card']['expiration_date_year']['attribute']!==''?$('#DOPBSPCalendar-payment-card-expiration-date-year'+ID).attr(paymentGateways[paymentMethod]['data']['card']['expiration_date_year']['attribute'],paymentGateways[paymentMethod]['data']['card']['expiration_date_year']['value']):'';paymentGateways[paymentMethod]['data']['card']['name']['enabled']?$('#DOPBSPCalendar-payment-card-name-wrapper'+ID).removeClass('DOPBSPCalendar-hidden'):$('#DOPBSPCalendar-payment-card-name-wrapper'+ID).addClass('DOPBSPCalendar-hidden');$('#DOPBSPCalendar-payment-card-name-label'+ID).html(paymentGateways[paymentMethod]['text']['card_name']);paymentGateways[paymentMethod]['data']['card']['name']['attribute']!==''?$('#DOPBSPCalendar-payment-card-name'+ID).attr(paymentGateways[paymentMethod]['data']['card']['name']['attribute'],paymentGateways[paymentMethod]['data']['card']['name']['value']):'';}else{$('#DOPBSPCalendar-payment-card'+ID).addClass('DOPBSPCalendar-hidden');$('#DOPBSPCalendar-payment-card-title'+ID).html('');$('#DOPBSPCalendar-payment-card-number-label'+ID).html('');$('#DOPBSPCalendar-payment-card-security-code-label'+ID).html('');$('#DOPBSPCalendar-payment-card-expiration-date-label'+ID).html('');$('#DOPBSPCalendar-payment-card-name-label'+ID).html('');}},get:function(){return{"expiration_date_month":$('#DOPBSPCalendar-payment-card-expiration-date-month'+ID).val(),"expiration_date_year":$('#DOPBSPCalendar-payment-card-expiration-date-year'+ID).val(),"name":$('#DOPBSPCalendar-payment-card-name'+ID).val(),"number":$('#DOPBSPCalendar-payment-card-number'+ID).val(),"security_code":$('#DOPBSPCalendar-payment-card-security-code'+ID).val()};},events:function(){$('#DOPBSPCalendar-payment-card-number'+ID).unbind('input propertychange blur');$('#DOPBSPCalendar-payment-card-number'+ID).bind('input propertychange blur',function(){DOPPrototypes.cleanInput($(this),'0123456789');});$('#DOPBSPCalendar-payment-card-security-code'+ID).unbind('input propertychange blur');$('#DOPBSPCalendar-payment-card-security-code'+ID).bind('input propertychange blur',function(){DOPPrototypes.cleanInput($(this),'0123456789');});}},form_addon:{display:function(){var HTML=new Array(),i,options=new Array(),paymentGateways=methods_order.data['paymentGateways'],paymentMethod=$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val()===undefined?'none':$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val(),data=paymentMethod==='none'||paymentMethod==='default'?new Array():paymentGateways[paymentMethod]['data']['form_addon'];$('#DOPBSPCalendar-payment-form-addon'+ID).html('');if(data.length===0){return false;}
for(var id in data){switch(data[id]['type']){case'select':HTML.push(' <div id="DOPBSPCalendar-payment-form-addon-wrapper'+ID+'-'+id+'" class="dopbsp-input-wrapper '+data[id]['classes']+'">');HTML.push('     <label for="DOPBSPCalendar-payment-form-addon'+ID+'-'+id+'">'+data[id]['label']+'</label>');HTML.push('     <select type="text" name="DOPBSPCalendar-payment-form-addon'+ID+'-'+id+'" id="DOPBSPCalendar-payment-form-addon'+ID+'-'+id+'" onchange="'+data[id]['function']+'">');options=data[id]['options'];for(i=0;i<options.length;i++){HTML.push('     <option value="'+options[i]['value']+'">'+options[i]['label']+'</label>');}
HTML.push('     </select>');HTML.push(' </div>');break;case'text':HTML.push(' <div id="DOPBSPCalendar-payment-form-addon-wrapper'+ID+'-'+id+'" class="dopbsp-input-wrapper '+data[id]['classes']+'">');HTML.push('     <label for="DOPBSPCalendar-payment-form-addon'+ID+'-'+id+'">'+data[id]['label']+'</label>');HTML.push('     <input type="text" name="DOPBSPCalendar-payment-form-addon'+ID+'-'+id+'" id="DOPBSPCalendar-payment-form-addon'+ID+'-'+id+'" value="" />');HTML.push(' </div>');break;case'title':HTML.push(' <h4>'+data[id]['label']+'</h4>');break;}}
$('#DOPBSPCalendar-payment-form-addon'+ID).html(HTML.join(''));methods_order.payment.form_addon.init();},init:function(){var paymentGateways=methods_order.data['paymentGateways'],paymentMethod=$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val()===undefined?'none':$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val(),data=paymentMethod==='none'||paymentMethod==='default'?new Array():paymentGateways[paymentMethod]['data']['form_addon'];if(data.length===0){return false;}
for(var id in data){$('#DOPBSPCalendar-payment-form-addon'+ID+'-'+id).val();switch(data[id]['type']){case'select':$('#DOPBSPCalendar-payment-form-addon'+ID+'-'+id).DOPSelect();break;}}},get:function(){var paymentGateways=methods_order.data['paymentGateways'],paymentMethod=$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val()===undefined?'none':$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val(),data=paymentMethod==='none'||paymentMethod==='default'?new Array():paymentGateways[paymentMethod]['data']['form_addon'],returnData={};if(data.length===0){return false;}
for(var id in data){returnData[id]=$('#DOPBSPCalendar-payment-form-addon'+ID+'-'+id).val();}
return returnData;}}},book:function(){var isValid=true,paymentGateways=methods_order.data['paymentGateways'],paymentMethod=$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val()===undefined?'none':$('input[name=DOPBSPCalendar-payment'+ID+']:checked').val();!methods_form.validate()?(isValid=false):'';!methods_order.payment.address_billing.validate()?(isValid=false):'';!methods_order.payment.address_shipping.validate()?(isValid=false):'';!methods_order.validate()?(isValid=false):'';if(!isValid){return false;}
methods_order.toggleMessages('','none');$('#DOPBSPCalendar-submit'+ID).css('display','none');$('#DOPBSPCalendar-submit-loader'+ID).css('display','block');if(paymentMethod!=='none'&&paymentMethod!=='default'&&paymentGateways[paymentMethod]['data']['token']['enabled']){if($('#DOPBSPCalendar-payment-token'+ID).val()===''){methods_order.payment.token(paymentMethod);return false;}else{methods_order.vars.tokenInit=false;}
if($('#DOPBSPCalendar-payment-token-message'+ID).val()!==''){methods_order.toggleMessages($('#DOPBSPCalendar-payment-token-message'+ID).val(),'block');$('#DOPBSPCalendar-payment-token'+ID).val('');$('#DOPBSPCalendar-payment-token-message'+ID).val('');$('#DOPBSPCalendar-submit'+ID).css('display','block');$('#DOPBSPCalendar-submit-loader'+ID).css('display','none');return false;}}
$.post(ajaxURL,{action:'dopbsp_reservations_book',dopbsp_frontend_ajax_request:true,calendar_id:ID,language:methods_calendar.data['language'],currency:methods_currency.data['sign'],currency_code:methods_currency.data['code'],cart_data:methods_cart.cart,form:methods_form.get(),address_billing_data:methods_order.payment.address_billing.get(),address_shipping_data:methods_order.payment.address_shipping.get(),payment_method:paymentMethod,form_addon_data:methods_order.payment.form_addon.get(),card_data:methods_order.payment.card.get(),token:$('#DOPBSPCalendar-payment-token'+ID).val(),page_url:window.location.href},function(data){data=$.trim(data);$('#DOPBSPCalendar-payment-token'+ID).val('');$('#DOPBSPCalendar-payment-token-message'+ID).val('');if(data==='unavailable'){methods_info.toggleMessages(DOPBSPFrontEnd.text(ID,'order','unavailable'),'dopbsp-error');methods_reservation.clear();methods_schedule.reset();return false;}
if(data==='unavailable-coupon'){methods_info.toggleMessages(DOPBSPFrontEnd.text(ID,'order','unavailableCoupon'),'dopbsp-error');methods_coupons.vars.use=false;methods_reservation.set();return false;}
if(paymentMethod!=='none'&&paymentMethod!=='default'){var response=data.split(';;;;;');if(response[0]==='success'){$('#DOPBSPCalendar-submit'+ID).css('display','block');$('#DOPBSPCalendar-submit-loader'+ID).css('display','none');methods_info.toggleMessages(paymentGateways[paymentMethod]['text']['success'],'dopbsp-success');methods_reservation.clear();methods_schedule.reset();}else if(response[0]==='success_redirect'){window.location.href=response[1];}else{$('#DOPBSPCalendar-submit'+ID).css('display','block');$('#DOPBSPCalendar-submit-loader'+ID).css('display','none');methods_info.toggleMessages(data);return false;}}else{if(methods_order.data['redirect']!==null&&methods_order.data['redirect']!==''){window.location.href=methods_order.data['redirect'];}
$('#DOPBSPCalendar-submit'+ID).css('display','block');$('#DOPBSPCalendar-submit-loader'+ID).css('display','none');methods_info.toggleMessages((methods_order.data['paymentArrivalWithApproval']?DOPBSPFrontEnd.text(ID,'order','paymentArrivalWithApprovalSuccess'):DOPBSPFrontEnd.text(ID,'order','paymentArrivalSuccess')),'dopbsp-success');methods_reservation.clear();if(methods_order.data['paymentArrivalWithApproval']){methods_schedule.reset();}else{methods_calendar.display();methods_components.init();}}});},toggleMessages:function(message,display,type){display=display===undefined?'block':display;type=type===undefined?'dopbsp-error':type;$('#DOPBSPCalendar-order'+ID+' .dopbsp-message').html(message).removeClass('dopbsp-success').removeClass('dopbsp-error').addClass(type).css('display',display);}},methods_woocommerce={data:{},text:{},init:function(){$('.cart button[type=submit]').css('display','none');methods_woocommerce.events();},events:function(){if(!methods_woocommerce.data['add_to_cart']){$('.cart').unbind('submit');$('.cart').bind('submit',function(e){e.preventDefault();methods_woocommerce.add();});}},set:function(){if(!methods_woocommerce.data['add_to_cart']){$('.cart button[type=submit]').css('display','block');}else{$('#DOPBSPCalendar-add-to-cart'+ID).css('display','block');}},add:function(){$.post(ajaxURL,{action:'dopbsp_woocommerce_add_to_cart',dopbsp_frontend_ajax_request:true,calendar_id:ID,language:methods_calendar.data['language'],currency:methods_currency.data['sign'],currency_code:methods_currency.data['code'],cart_data:methods_cart.cart,product_id:methods_woocommerce.data['product_id']},function(data){data=$.trim(data);var result=data.split(';;;;;')[0],message=data.split(';;;;;')[1];if(result==='success'){if(wc_add_to_cart_params['cart_redirect_after_add']==='yes'){window.location.href=wc_add_to_cart_params['cart_url'];}else{methods_info.toggleMessages(message,'dopbsp-success');}}else if(result==='unavailable'){methods_info.toggleMessages(message,'dopbsp-error');methods_reservation.clear();methods_schedule.reset();}else{methods_info.toggleMessages(message,'dopbsp-error');}});}};return methods.init.apply(this);};})(jQuery);
(function($){'use strict';$.fn.DOPBSPSearch=function(options){var Data={"availability":{"data":{"enabled":false,"max":10,"min":1},"text":{"title":"No. book items"}},"currency":{"data":{"code":"USD","position":"before","sign":"$"},"text":{},"days":{"data":{"first":1,"multipleSelect":true},"text":{"names":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"shortNames":["Su","Mo","Tu","We","Th","Fr","Sa"]}},"hours":{"data":{"ampm":false,"definitions":[{"value":"00:00"},{"value":"01:00"},{"value":"02:00"},{"value":"03:00"},{"value":"04:00"},{"value":"05:00"},{"value":"06:00"},{"value":"07:00"},{"value":"08:00"},{"value":"09:00"},{"value":"10:00"},{"value":"11:00"},{"value":"12:00"},{"value":"13:00"},{"value":"14:00"},{"value":"15:00"},{"value":"16:00"},{"value":"17:00"},{"value":"18:00"},{"value":"19:00"},{"value":"20:00"},{"value":"21:00"},{"value":"22:00"},{"value":"23:00"}],"enabled":false,"multipleSelect":true},"text":{}},"ID":0,"months":{"data":{},"text":{"names":["January","February","March","April","May","June","July","August","September","October","November","December"],"nextMonth":"Next month","previousMonth":"Previous month","shortNames":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},"price":{"data":{"enabled":true,"max":1000,"min":0},"text":{}},"search":{"data":{"dateType":1,"enabled":false,"language":'en',"template":'default'},"text":{"checkIn":"Check in","checkOut":"Check out","hourEnd":"Finish at","hourStart":"Start at","title":"Search"}},"sort":{"data":{},"text":{"name":"Name","price":"Price","title":"Sort by"}},"URL":"","view":{"data":{"default":"list","gridEnabled":false,"listEnabled":true,"mapEnabled":false,"results":10},"text":{"grid":"Grid view","list":"List view","map":"Map view"}}}},ajaxRequestInProgress,ajaxURL='',Container=this,ID=0,methods={init:function(){return this.each(function(){if(options){$.extend(Data,options);}methods.parse();$(window).bind('resize.DOPBSPSearch',methods.rp);});},parse:function(){ajaxURL=prototypes.acaoBuster(Data['URL']);methods_availability.data=Data['availability']['data'];methods_availability.text=Data['availability']['text'];methods_currency.data=Data['currency']['data'];methods_currency.text=Data['currency']['text'];methods_days.data=Data['days']['data'];methods_days.text=Data['days']['text'];methods_hours.data=Data['hours']['data'];methods_hours.text=Data['hours']['text'];ID=Data['ID'];methods_months.data=Data['months']['data'];methods_months.text=Data['months']['text'];methods_price.data=Data['price']['data'];methods_price.text=Data['price']['text'];methods_search.data=Data['search']['data'];methods_search.text=Data['search']['text'];methods_sort.data=Data['sort']['data'];methods_sort.text=Data['sort']['text'];methods_view.data=Data['view']['data'];methods_view.text=Data['view']['text'];methods_components.init();},rp:function(){}},methods_components={init:function(){methods_search.vars.todayDate=new Date();methods_search.vars.todayDay=methods_search.vars.todayDate.getDate();methods_search.vars.todayMonth=methods_search.vars.todayDate.getMonth()+1;methods_search.vars.todayYear=methods_search.vars.todayDate.getFullYear();if(methods_view.data['mapEnabled']){methods_map.load();}methods_sidebar.init();methods.rp();$('#DOPBSPSearch-loader'+ID).remove();$(Container).removeClass('DOPBSPSearch-hidden');methods_search.get();}},methods_currency={data:{},text:{},vars:{currencies:{}},init:function(){},parse:function(){var currencies={};if(typeof methods_currency.data['currencies']!=='undefined'){var currenciesJSON=methods_currency.data['currencies'].replace(new RegExp('"','g'),""),currenciesJSON=currenciesJSON.replace(new RegExp(';;;','g'),'"');currencies=JSON.parse(currenciesJSON);}methods_currency.vars.currencies=currencies;},exchange:function(amount,currency_code,type){var currencies=methods_currency.vars.currencies;if(methods_currency.data['code']!==currency_code){for(var index in currencies){if(currencies[index]['code']===currency_code){if(type==='exchange'){amount=parseInt(amount*currencies[index]['rate']);}else{amount=parseInt(amount*currencies[index]['inverse']);}}}}return amount;}},methods_search={data:{},text:{},vars:{todayDate:new Date(),todayDay:new Date(),todayMonth:new Date(),todayYear:new Date()},init:function(){methods_days.init();if(methods_hours.data['enabled']){methods_hours.init();}if(methods_availability.data['enabled']){methods_availability.init();}if(methods_price.data['enabled']){methods_price.init();}methods_sort.init();methods_view.init();},get:function(page){var $checkIn=$('#DOPBSPSearch-check-in'+ID).val(),$checkOut=$('#DOPBSPSearch-check-out'+ID).val(),$startHour=$('#DOPBSPSearch-start-hour'+ID).val(),$endHour=$('#DOPBSPSearch-end-hour'+ID).val(),checkIn=$checkIn===undefined?'':$checkIn,checkOut=$checkOut===undefined||$checkOut===''?checkIn:$checkOut,startHour=$startHour===undefined?'':$startHour,endHour=$endHour===undefined||$endHour===''?startHour:$endHour;page=page===undefined?1:page;if(ajaxRequestInProgress!==undefined){ajaxRequestInProgress.abort();}$('#DOPBSPSearch-results-loader'+ID).removeClass('DOPBSPSearch-hidden');$('#DOPBSPSearch-results'+ID).html('');ajaxRequestInProgress=$.post(ajaxURL,{action:'dopbsp_search_results_get',dopbsp_frontend_ajax_request:true,id:ID,language:methods_search.data['language'],check_in:checkIn,check_out:checkOut,start_hour:startHour,end_hour:endHour,no_items:$('#DOPBSPSearch-no-items'+ID).val()===undefined?'':$('#DOPBSPSearch-no-items'+ID).val(),price_min:$('#DOPBSPSearch-price-min-value'+ID).val()===undefined?'':$('#DOPBSPSearch-price-min-value'+ID).val(),price_max:$('#DOPBSPSearch-price-max-value'+ID).val()===undefined?'':$('#DOPBSPSearch-price-max-value'+ID).val(),sort_by:$('#DOPBSPSearch-sort-by'+ID).val()===undefined?'price':$('#DOPBSPSearch-sort-by'+ID).val(),sort_direction:$('#DOPBSPSearch-sort-direction-value'+ID).val()===undefined?'ASC':$('#DOPBSPSearch-sort-direction-value'+ID).val(),view:$('#DOPBSPSearch-view'+ID).val()===undefined?'list':$('#DOPBSPSearch-view'+ID).val(),results:methods_view.data['results'],page:page},function(data){data=$.trim(data);switch($('#DOPBSPSearch-view'+ID).val()){case'map':methods_map.display(data);break;default:$('#DOPBSPSearch-results-loader'+ID).addClass('DOPBSPSearch-hidden');$('#DOPBSPSearch-results'+ID).html(data);methods_search.events();}});},events:function(){$('#DOPBSPSearch-results'+ID+' .dopbsp-pagination li').unbind('click');$('#DOPBSPSearch-results'+ID+' .dopbsp-pagination li').bind('click',function(){if(!$(this).hasClass('selected')){methods_search.get($(this).attr('class').split('dopbsp-page')[1]);}});}},methods_sidebar={data:{},text:{},init:function(){methods_search.init();}},methods_months={data:{},text:{}},methods_days={data:{},text:{},init:function(){methods_days.events.init();},initDatepicker:function(id,altId,minDate){minDate=minDate===undefined?0:minDate;$(id).datepicker('destroy');$(id).datepicker({altField:altId,altFormat:'yy-mm-dd',beforeShow:function(input,inst){$('#ui-datepicker-div').removeClass('DOPBSPSearch-datepicker').addClass('DOPBSPSearch-datepicker');},dateFormat:methods_search.data['dateType']===1?'MM dd, yy':'dd MM yy',dayNames:methods_days.text['names'],dayNamesMin:methods_days.text['shortNames'],firstDay:methods_days.data['first'],minDate:minDate,monthNames:methods_months.text['names'],monthNamesMin:methods_months.text['shortNames'],nextText:methods_months.text['nextMonth'],prevText:methods_months.text['previousMonth']});$('.ui-datepicker').removeClass('notranslate').addClass('notranslate');},validate:function(day){var dayPieces=day.split('-');if(day===''||dayPieces.length!==3||dayPieces[0].length!==4||dayPieces[1].length!==2||dayPieces[2].length!==2){return false;}else{return true;}},events:{init:function(){methods_days.initDatepicker('#DOPBSPSearch-check-in-view'+ID,'#DOPBSPSearch-check-in'+ID);methods_days.events.checkIn();if(methods_days.data['multipleSelect']){methods_days.initDatepicker('#DOPBSPSearch-check-out-view'+ID,'#DOPBSPSearch-check-out'+ID);methods_days.events.checkOut();}},checkIn:function(){$('#DOPBSPSearch-check-in-view'+ID).unbind('click');$('#DOPBSPSearch-check-in-view'+ID).bind('click',function(){$(this).val('');$('#DOPBSPSearch-check-in'+ID).val('');});$('#DOPBSPSearch-check-in-view'+ID).unbind('blur');$('#DOPBSPSearch-check-in-view'+ID).bind('blur',function(){var $this=$(this);if($this.val()===''){$this.val(methods_search.text['checkIn']);$('#DOPBSPSearch-check-in'+ID).val('');}});$('#DOPBSPSearch-check-in-view'+ID).unbind('change');$('#DOPBSPSearch-check-in-view'+ID).bind('change',function(){var ciDay=$('#DOPBSPSearch-check-in'+ID).val(),minDateValue;if(methods_days.validate(ciDay)){if(methods_days.data['multipleSelect']){minDateValue=prototypes.getNoDays(prototypes.getToday(),ciDay)-1;methods_days.initDatepicker('#DOPBSPSearch-check-out-view'+ID,'#DOPBSPSearch-check-out'+ID,minDateValue);if(($('#DOPBSPSearch-check-in'+ID).val()>$('#DOPBSPSearch-check-out'+ID).val()&&$('#DOPBSPSearch-check-out'+ID).val()!=='')||$('#DOPBSPSearch-check-out'+ID).val()===''){setTimeout(function(){$('#DOPBSPSearch-check-out-view'+ID).val('').select();$('#DOPBSPSearch-check-out'+ID).val('');},100);}else{methods_search.get();}}else{methods_search.get();}}else{$('#DOPBSPSearch-check-in-view'+ID).val(methods_search.text['checkIn']);$('#DOPBSPSearch-check-in'+ID).val('');}});},checkOut:function(){$('#DOPBSPSearch-check-out-view'+ID).unbind('click');$('#DOPBSPSearch-check-out-view'+ID).bind('click',function(){$(this).val('');$('#DOPBSPSearch-check-out'+ID).val('');});$('#DOPBSPSearch-check-out-view'+ID).unbind('blur');$('#DOPBSPSearch-check-out-view'+ID).bind('blur',function(){var $this=$(this);if($this.val()===''){$this.val(methods_search.text['checkOut']);$('#DOPBSPSearch-check-out'+ID).val('');}});$('#DOPBSPSearch-check-out-view'+ID).unbind('change');$('#DOPBSPSearch-check-out-view'+ID).bind('change',function(){var coDay=$('#DOPBSPSearch-check-out'+ID).val();if(methods_days.validate(coDay)){if($('#DOPBSPSearch-check-in'+ID).val()!==''){methods_search.get();}}else{$('#DOPBSPSearch-check-out-view'+ID).val(methods_search.text['checkOut']);$('#DOPBSPSearch-check-out'+ID).val('');}});}}},methods_hours={data:{},text:{},init:function(){$('#DOPBSPSearch-start-hour'+ID).DOPSelect();if(methods_hours.data['multipleSelect']){$('#DOPBSPSearch-end-hour'+ID).DOPSelect();}methods_hours.events();},set:function(){var HTML=new Array(),hours=methods_hours.data['definitions'],i,startHour=$('#DOPBSPSearch-start-hour'+ID).val(),endHour=$('#DOPBSPSearch-end-hour'+ID).val();HTML.push('<select id="DOPBSPSearch-end-hour'+ID+'" class="dopbsp-small">');for(i=0;i<hours.length;i++){if(startHour<=hours[i]['value']){HTML.push('     <option value="'+hours[i]['value']+'"'+(endHour===hours[i]['value']?' selected="selected"':'')+'>'+prototypes.getAMPM(hours[i]['value'])+'</option>');}}HTML.push('</select>');$('#DOPSelect-DOPBSPSearch-end-hour'+ID).replaceWith(HTML.join());$('#DOPBSPSearch-end-hour'+ID).DOPSelect();methods_hours.events();},events:function(){$('#DOPBSPSearch-start-hour'+ID).unbind('change');$('#DOPBSPSearch-start-hour'+ID).bind('change',function(){if(methods_hours.data['multipleSelect']){methods_hours.set();}methods_search.get();});if(methods_hours.data['multipleSelect']){$('#DOPBSPSearch-end-hour'+ID).unbind('change');$('#DOPBSPSearch-end-hour'+ID).bind('change',function(){if($('#DOPBSPSearch-start-hour'+ID).val()!==''){methods_search.get();}});}}},methods_availability={data:{},text:{},init:function(){$('#DOPBSPSearch-no-items'+ID).DOPSelect();methods_availability.events();},events:function(){$('#DOPBSPSearch-no-items'+ID).unbind('change');$('#DOPBSPSearch-no-items'+ID).bind('change',function(){methods_search.get();});}},methods_price={data:{},text:{},init:function(){$('#DOPBSPSearch-price'+ID).slider({max:methods_price.data['max'],min:methods_price.data['min'],values:[methods_price.data['min'],methods_price.data['max']],range:true,step:1,create:function(event,ui){$('#DOPBSPSearch-price-min'+ID).html(methods_price.set(methods_price.data['min']));$('#DOPBSPSearch-price-max'+ID).html(methods_price.set(methods_price.data['max']));$('#DOPBSPSearch-price-min-value'+ID).val(methods_price.data['min']);$('#DOPBSPSearch-price-max-value'+ID).val(methods_price.data['max']);},slide:function(event,ui){$('#DOPBSPSearch-price-min'+ID).html(methods_price.set(ui.values[0]));$('#DOPBSPSearch-price-max'+ID).html(methods_price.set(ui.values[1]));$('#DOPBSPSearch-price-min-value'+ID).val(ui.values[0]);$('#DOPBSPSearch-price-max-value'+ID).val(ui.values[1]);},stop:function(event,ui){methods_search.get();}});},set:function(price){var priceDisplayed='';price=prototypes.getWithDecimals(Math.abs(price),2);switch(methods_currency.data['position']){case'after':priceDisplayed=price+methods_currency.data['sign'];break;case'after_with_space':priceDisplayed=price+' '+methods_currency.data['sign'];break;case'before_with_space':priceDisplayed=methods_currency.data['sign']+' '+price;break;default:priceDisplayed=methods_currency.data['sign']+price;}return priceDisplayed;}},methods_sort={data:{},text:{},init:function(){$('#DOPBSPSearch-sort-by'+ID).DOPSelect();methods_sort.events();},events:function(){$('#DOPBSPSearch-sort-by'+ID).unbind('change');$('#DOPBSPSearch-sort-by'+ID).bind('change',function(){methods_search.get();});$('#DOPBSPSearch-sort-direction'+ID).unbind('click');$('#DOPBSPSearch-sort-direction'+ID).bind('click',function(){if($(this).hasClass('dopbsp-asc')){$(this).removeClass('dopbsp-asc').addClass('dopbsp-desc');$('#DOPBSPSearch-sort-direction-value'+ID).val('DESC');}else{$(this).removeClass('dopbsp-desc').addClass('dopbsp-asc');$('#DOPBSPSearch-sort-direction-value'+ID).val('ASC');}methods_search.get();});}},methods_view={data:{},text:{},init:function(){methods_view.events();},events:function(){if(methods_view.data['listEnabled']){$('#DOPBSPSearch-view-list'+ID).unbind('click');$('#DOPBSPSearch-view-list'+ID).bind('click',function(){if(!$(this).hasClass('dopbsp-selected')){methods_view.data['gridEnabled']?$('#DOPBSPSearch-view-grid'+ID).removeClass('dopbsp-selected'):'';methods_view.data['mapEnabled']?$('#DOPBSPSearch-view-map'+ID).removeClass('dopbsp-selected'):'';$(this).addClass('dopbsp-selected');$('#DOPBSPSearch-view'+ID).val('list');methods_search.get();}});}if(methods_view.data['gridEnabled']){$('#DOPBSPSearch-view-grid'+ID).unbind('click');$('#DOPBSPSearch-view-grid'+ID).bind('click',function(){if(!$(this).hasClass('dopbsp-selected')){methods_view.data['listEnabled']?$('#DOPBSPSearch-view-list'+ID).removeClass('dopbsp-selected'):'';methods_view.data['mapEnabled']?$('#DOPBSPSearch-view-map'+ID).removeClass('dopbsp-selected'):'';$(this).addClass('dopbsp-selected');$('#DOPBSPSearch-view'+ID).val('grid');methods_search.get();}});}if(methods_view.data['mapEnabled']){$('#DOPBSPSearch-view-map'+ID).unbind('click');$('#DOPBSPSearch-view-map'+ID).bind('click',function(){if(!$(this).hasClass('dopbsp-selected')){methods_view.data['listEnabled']?$('#DOPBSPSearch-view-list'+ID).removeClass('dopbsp-selected'):'';methods_view.data['gridEnabled']?$('#DOPBSPSearch-view-grid'+ID).removeClass('dopbsp-selected'):'';$(this).addClass('dopbsp-selected');$('#DOPBSPSearch-view'+ID).val('map');methods_search.get();}});}}},methods_map={vars:{locations:new Array(),map:null},load:function(){if(typeof google!=='object'||typeof google.maps!=='object'){var script=document.createElement('script');script.type='text/JavaScript';script.src='https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places&callback=DOPBSPSearchLoadInfobox';$('body').append(script);}else{DOPBSPSearchLoadInfobox();}},display:function(data){var HTML=new Array();if(typeof google==='object'&&typeof google.maps==='object'&&typeof InfoBox==='function'){methods_map.vars.locations=JSON.parse(data.split(';;;;;')[0]);HTML.push('<div id="DOPBSPSearch-results-map'+ID+'" class="dopbsp-map"></div>');HTML.push(data.split(';;;;;')[1]);$('#DOPBSPSearch-results-loader'+ID).addClass('DOPBSPSearch-hidden');$('#DOPBSPSearch-results'+ID).html(HTML.join(''));methods_search.events();setTimeout(function(){google.maps.event.addDomListener(window,'load',methods_map.init());},100);}else{setTimeout(function(){methods_map.display();},500);}},init:function(){var
options;options={center:new google.maps.LatLng(0,0),mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:2};methods_map.vars.map=new google.maps.Map(document.getElementById('DOPBSPSearch-results-map'+ID),options);methods_map.set();},set:function(){var bounds=new google.maps.LatLngBounds(),coordinates,icon=new google.maps.MarkerImage(Data['pluginURL']+'templates/'+methods_search.data['template']+'/images/marker.png',new google.maps.Size(36,52),new google.maps.Point(1,0),new google.maps.Point(18,52)),i,locations=methods_map.vars.locations,markers=new Array(),position=new Array(),shadow=new google.maps.MarkerImage(Data['pluginURL']+'templates/'+methods_search.data['template']+'/images/marker.png',new google.maps.Size(36,52),new google.maps.Point(1,0),new google.maps.Point(18,52)),shape={coord:[0,0,36,0,36,52,0,52],type:'poly'};for(i=0;i<locations.length;i++){coordinates=JSON.parse(locations[i]['coordinates']);position=new google.maps.LatLng(coordinates[0],coordinates[1]);bounds.extend(position);markers[i]=new google.maps.Marker({animation:null,clickable:true,draggable:false,icon:icon,map:methods_map.vars.map,position:position,shadow:shadow,shape:shape});markers[i].info=new InfoBox({alignBottom:true,boxClass:'dopbsp-infobox',closeBoxMargin:'0px',closeBoxURL:Data['pluginURL']+'templates/'+methods_search.data['template']+'/images/close.png',disableAutoPan:false,content:methods_map.get(locations[i]['calendars'],i),isHidden:false,infoBoxClearance:new google.maps.Size(20,20),pixelOffset:new google.maps.Size(-190,-60),position:position});markers[i].index=i;google.maps.event.addListener(markers[i],'click',function(){var index=this.index;for(i=0;i<locations.length;i++){markers[i].info.close();}this.info.open(methods_map.vars.map,this);setTimeout(function(){methods_map.events(index);},100);});}methods_map.vars.map.fitBounds(bounds);},get:function(calendars,index){var HTML=new Array(),i;HTML.push('<ul class="dopbsp-locations" id="DOPBSPSearch-locations-'+ID+'-'+index+'">');for(i=0;i<calendars.length;i++){HTML.push('<li>');HTML.push('     <div class="dopbsp-image">');HTML.push('         <a href="'+calendars[i]['link']+'" target="_parent" style="background-image: url('+calendars[i]['image']+');">');HTML.push('             <img src="'+calendars[i]['image']+'" alt="'+calendars[i]['name']+'" title="'+calendars[i]['name']+'" />');HTML.push('         </a>');HTML.push('     </div>');HTML.push('     <div class="dopbsp-content">');HTML.push('         <h3>');HTML.push('             <a href="'+calendars[i]['link']+'" target="_parent">'+calendars[i]['name']+'</a>');HTML.push('         </h3>');HTML.push('         <div class="dopbsp-address">'+(calendars[i]['address_alt']===''?calendars[i]['address']:calendars[i]['address_alt'])+'</div>');HTML.push('         <div class="dopbsp-price-wrapper">'+calendars[i]['price']+'</div>');HTML.push('     </div>');HTML.push('</li>');}HTML.push('</ul>');if(calendars.length>1){HTML.push('<div class="dopbsp-navigation" id="DOPBSPSearch-locations-navigation-'+ID+'-'+index+'">');HTML.push('     <a href="javascript:void(0)" class="dopbsp-prev dopbsp-disabled"></a>');HTML.push('     <a href="javascript:void(0)" class="dopbsp-next"></a>');HTML.push('</div>');}return HTML.join('');},events:function(i){$('#DOPBSPSearch-locations-navigation-'+ID+'-'+i+' .dopbsp-prev').unbind('click');$('#DOPBSPSearch-locations-navigation-'+ID+'-'+i+' .dopbsp-prev').bind('click',function(){var $this=$(this),id=$this.parent().attr('id').split('DOPBSPSearch-locations-navigation-')[1],$li=$('#DOPBSPSearch-locations-'+id+' li:first-child');if(!$this.hasClass('dopbsp-disabled')){$('#DOPBSPSearch-locations-navigation-'+ID+'-'+i+' .dopbsp-next').removeClass('dopbsp-disabled');$li.css('margin-top',parseInt($li.css('margin-top'))+($li.height()+parseInt($li.css('margin-bottom'))));setTimeout(function(){if(parseInt($li.css('margin-top'))>=0){$this.addClass('dopbsp-disabled');}},150);}});$('#DOPBSPSearch-locations-navigation-'+ID+'-'+i+' .dopbsp-next').unbind('click');$('#DOPBSPSearch-locations-navigation-'+ID+'-'+i+' .dopbsp-next').bind('click',function(){var $this=$(this),id=$this.parent().attr('id').split('DOPBSPSearch-locations-navigation-')[1],$li=$('#DOPBSPSearch-locations-'+id+' li:first-child'),locations=methods_map.vars.locations;if(!$this.hasClass('dopbsp-disabled')){$('#DOPBSPSearch-locations-navigation-'+ID+'-'+i+' .dopbsp-prev').removeClass('dopbsp-disabled');$li.css('margin-top',parseInt($li.css('margin-top'))-($li.height()+parseInt($li.css('margin-bottom'))));setTimeout(function(){if(-1*parseInt($li.css('margin-top'))>=($li.height()+parseInt($li.css('margin-bottom')))*(locations.length-1)){$this.addClass('dopbsp-disabled');}},150);}});}},prototypes={doHiddenBuster:function(item){var parent=item.parent(),items=new Array();if(item.prop('tagName')!==undefined&&item.prop('tagName').toLowerCase()!=='body'){items=prototypes.doHiddenBuster(parent);}if(item.css('display')==='none'){item.css('display','block');items.push(item);}return items;},undoHiddenBuster:function(items){var i;for(i=0;i<items.length;i++){items[i].css('display','none');}},openLink:function(url,target){switch(target.toLowerCase()){case'_blank':window.open(url);break;case'_parent':parent.location.href=url;break;case'_top':top.location.href=url;break;default:window.location=url;}},randomizeArray:function(theArray){theArray.sort(function(){return 0.5-Math.random();});return theArray;},scrollToY:function(position,speed){speed=speed!==undefined?speed:300;$('html').stop(true,true).animate({'scrollTop':position},speed);$('body').stop(true,true).animate({'scrollTop':position},speed);},touchNavigation:function(parent,child){var prevX,prevY,currX,currY,touch,childX,childY;parent.bind('touchstart',function(e){touch=e.originalEvent.touches[0];prevX=touch.clientX;prevY=touch.clientY;});parent.bind('touchmove',function(e){touch=e.originalEvent.touches[0];currX=touch.clientX;currY=touch.clientY;childX=currX>prevX?parseInt(child.css('margin-left'))+(currX-prevX):parseInt(child.css('margin-left'))-(prevX-currX);childY=currY>prevY?parseInt(child.css('margin-top'))+(currY-prevY):parseInt(child.css('margin-top'))-(prevY-currY);if(childX<(-1)*(child.width()-parent.width())){childX=(-1)*(child.width()-parent.width());}else if(childX>0){childX=0;}else{e.preventDefault();}if(childY<(-1)*(child.height()-parent.height())){childY=(-1)*(child.height()-parent.height());}else if(childY>0){childY=0;}else{e.preventDefault();}prevX=currX;prevY=currY;if(parent.width()<child.width()){child.css('margin-left',childX);}if(parent.height()<child.height()){child.css('margin-top',childY);}});parent.bind('touchend',function(e){if(!prototypes.isChromeMobileBrowser()){e.preventDefault();}});},isAndroid:function(){var isAndroid=false,agent=navigator.userAgent.toLowerCase();if(agent.indexOf('android')!==-1){isAndroid=true;}return isAndroid;},isChromeMobileBrowser:function(){var isChromeMobile=false,agent=navigator.userAgent.toLowerCase();if((agent.indexOf('chrome')!==-1||agent.indexOf('crios')!==-1)&&prototypes.isTouchDevice()){isChromeMobile=true;}return isChromeMobile;},isIE8Browser:function(){var isIE8=false,agent=navigator.userAgent.toLowerCase();if(agent.indexOf('msie 8')!==-1){isIE8=true;}return isIE8;},isIEBrowser:function(){var isIE=false,agent=navigator.userAgent.toLowerCase();if(agent.indexOf('msie')!==-1){isIE=true;}return isIE;},isTouchDevice:function(){var os=navigator.platform;if(os.toLowerCase().indexOf('win')!==-1){return window.navigator.msMaxTouchPoints;}else{return'ontouchstart'in document;}},deleteCookie:function(name,path,domain){if(prototypes.getCookie(name)){document.cookie=name+'='+((path)?';path='+path:'')+((domain)?';domain='+domain:'')+';expires=Thu, 01-Jan-1970 00:00:01 GMT';}},getCookie:function(name){var namePiece=name+"=",cookie=document.cookie.split(";"),i;for(i=0;i<cookie.length;i++){var cookiePiece=cookie[i];while(cookiePiece.charAt(0)===' '){cookiePiece=cookiePiece.substring(1,cookiePiece.length);}if(cookiePiece.indexOf(namePiece)===0){return unescape(cookiePiece.substring(namePiece.length,cookiePiece.length));}}return null;},setCookie:function(name,value,expire){var expirationDate=new Date();expirationDate.setDate(expirationDate.getDate()+expire);document.cookie=name+'='+escape(value)+((expire===null)?'':';expires='+expirationDate.toUTCString())+';javahere=yes;path=/';},getAMPM:function(time){var hour=parseInt(time.split(':')[0],10),minutes=time.split(':')[1],result='';if(hour===0){result='12';}else if(hour>12){result=prototypes.getLeadingZero(hour-12);}else{result=prototypes.getLeadingZero(hour);}result+=':'+minutes+' '+(hour<12?'AM':'PM');return result;},getDatesDifference:function(date1,date2,type,valueType,noDecimals){var y1=date1.split('-')[0],m1=date1.split('-')[1],d1=date1.split('-')[2],y2=date2.split('-')[0],m2=date2.split('-')[1],d2=date2.split('-')[2],time1=(new Date(y1,m1-1,d1)).getTime(),time2=(new Date(y2,m2-1,d2)).getTime(),diff=Math.abs(time1-time2);if(type===undefined){type='seconds';}if(valueType===undefined){valueType='float';}if(noDecimals===undefined){noDecimals=-1;}switch(type){case'days':diff=diff/(1000*60*60*24);break;case'hours':diff=diff/(1000*60*60);break;case'minutes':diff=diff/(1000*60);break;default:diff=diff/(1000);}if(valueType==='float'){return noDecimals===-1?diff:prototypes.getWithDecimals(diff,noDecimals);}else{return Math.ceil(diff);}},getHoursDifference:function(hour1,hour2,type,valueType,noDecimals){var hours1=parseInt(hour1.split(':')[0],10),minutes1=parseInt(hour1.split(':')[1],10),seconds1=hour1.split(':')[2]!==undefined?parseInt(hour1.split(':')[2],10):0,hours2=parseInt(hour2.split(':')[0],10),minutes2=parseInt(hour2.split(':')[1],10),seconds2=hour2.split(':')[2]!==undefined?parseInt(hour2.split(':')[2],10):0,time1,time2,diff;if(type===undefined){type='seconds';}if(valueType===undefined){valueType='float';}if(noDecimals===undefined){noDecimals=-1;}switch(type){case'hours':time1=hours1+minutes1/60+seconds1/60/60;time2=hours2+minutes2/60+seconds2/60/60;break;case'minutes':time1=hours1*60+minutes1+seconds1/60;time2=hours2*60+minutes2+seconds2/60;break;default:time1=hours1*60*60+minutes1*60+seconds1;time2=hours2*60*60+minutes2*60+seconds2;}diff=Math.abs(time1-time2);if(valueType==='float'){return noDecimals===-1?diff:prototypes.getWithDecimals(diff,noDecimals);}else{return Math.ceil(diff);}},getNextDay:function(date){var nextDay=new Date(),parts=date.split('-');nextDay.setFullYear(parts[0],parts[1],parts[2]);nextDay.setTime(nextDay.getTime()+86400000);return nextDay.getFullYear()+'-'+prototypes.getLeadingZero(nextDay.getMonth())+'-'+prototypes.getLeadingZero(nextDay.getDate());},getNoDays:function(date1,date2){var y1=date1.split('-')[0],m1=date1.split('-')[1],d1=date1.split('-')[2],y2=date2.split('-')[0],m2=date2.split('-')[1],d2=date2.split('-')[2],time1=(new Date(y1,m1-1,d1)).getTime(),time2=(new Date(y2,m2-1,d2)).getTime(),diff=Math.abs(time1-time2);return Math.round(diff/(1000*60*60*24))+1;},getPrevDay:function(date){var previousDay=new Date(),parts=date.split('-');previousDay.setFullYear(parts[0],parseInt(parts[1])-1,parts[2]);previousDay.setTime(previousDay.getTime()-86400000);return previousDay.getFullYear()+'-'+prototypes.getLeadingZero(previousDay.getMonth()+1)+'-'+prototypes.getLeadingZero(previousDay.getDate());},getPrevTime:function(time,diff,diffBy){var timePieces=time.split(':'),hours=parseInt(timePieces[0],10),minutes=timePieces[1]===undefined?0:parseInt(timePieces[1],10),seconds=timePieces[2]===undefined?0:parseInt(timePieces[2],10);switch(diffBy){case'seconds':seconds=seconds-diff;if(seconds<0){seconds=60+seconds;minutes=minutes-1;if(minutes<0){minutes=60+minutes;hours=hours-1<0?0:hours-1;}}break;case'minutes':minutes=minutes-diff;if(minutes<0){minutes=60+minutes;hours=hours-1<0?0:hours-1;}break;default:hours=hours-diff<0?0:hours-diff;}return prototypes.getLeadingZero(hours)+(timePieces[1]===undefined?'':':'+prototypes.getLeadingZero(minutes)+(timePieces[2]===undefined?'':':'+prototypes.getLeadingZero(seconds)));},getToday:function(){var today=new Date();return today.getFullYear()+'-'+prototypes.getLeadingZero(today.getMonth()+1)+'-'+prototypes.getLeadingZero(today.getDate());},getWeekDay:function(date){var months=['January','February','March','April','May','June','July','August','September','October','November','December'],year=date.split('-')[0],month=date.split('-')[1],day=date.split('-')[2],newDate=new Date(eval('"'+day+' '+months[parseInt(month,10)-1]+', '+year+'"'));return newDate.getDay();},$_GET:function(name){var url=window.location.href.split('?')[1],variables=url!==undefined?url.split('&'):[],i;for(i=0;i<variables.length;i++){if(variables[i].indexOf(name)!==-1){return variables[i].split('=')[1];break;}}return undefined;},acaoBuster:function(url){var browserURL=window.location.href,pathPiece1='',pathPiece2='';if(prototypes.getDomain(browserURL)===prototypes.getDomain(url)){if(url.indexOf('https')!==-1||url.indexOf('http')!==-1){if(browserURL.indexOf('http://www.')!==-1){pathPiece1='http://www.';}else if(browserURL.indexOf('http://')!==-1){pathPiece1='http://';}else if(browserURL.indexOf('https://www.')!==-1){pathPiece1='https://www.';}else if(browserURL.indexOf('https://')!==-1){pathPiece1='https://';}if(url.indexOf('http://www.')!==-1){pathPiece2=url.split('http://www.')[1];}else if(url.indexOf('http://')!==-1){pathPiece2=url.split('http://')[1];}else if(url.indexOf('https://www.')!==-1){pathPiece2=url.split('https://www.')[1];}else if(url.indexOf('https://')!==-1){pathPiece2=url.split('https://')[1];}return pathPiece1+pathPiece2;}else{return url;}}else{return url;}},getDomain:function(url){var domain=url;domain=domain.replace(new RegExp(/^\s+/),"");domain=domain.replace(new RegExp(/\s+$/),"");domain=domain.replace(new RegExp(/\\/g),"/");domain=domain.replace(new RegExp(/^http\:\/\/|^https\:\/\/|^ftp\:\/\//i),"");domain=domain.replace(new RegExp(/^www\./i),"");domain=domain.replace(new RegExp(/\/(.*)/),"");return domain;},hasSubdomain:function(url){var subdomain;url=url.replace(new RegExp(/^\s+/),"");url=url.replace(new RegExp(/\s+$/),"");url=url.replace(new RegExp(/\\/g),"/");url=url.replace(new RegExp(/^http\:\/\/|^https\:\/\/|^ftp\:\/\//i),"");url=url.replace(new RegExp(/^www\./i),"");url=url.replace(new RegExp(/\/(.*)/),"");if(url.match(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i))){url=url.replace(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i),"");}else if(url.match(new RegExp(/\.[a-z]{2,4}$/i))){url=url.replace(new RegExp(/\.[a-z]{2,4}$/i),"");}subdomain=(url.match(new RegExp(/\./g)))?true:false;return(subdomain);},rp:function(parent,child,pw,ph,cw,ch,pos,type){var newW=0,newH=0;if(cw<=pw&&ch<=ph){newW=cw;newH=ch;}else{switch(type){case'fill':newH=ph;newW=(cw*ph)/ch;if(newW<pw){newW=pw;newH=(ch*pw)/cw;}break;default:newH=ph;newW=(cw*ph)/ch;if(newW>pw){newW=pw;newH=(ch*pw)/cw;}break;}}child.width(newW);child.height(newH);switch(pos.toLowerCase()){case'bottom':prototypes.rpBottom(parent,child,ph);break;case'bottom-center':prototypes.rpBottomCenter(parent,child,pw,ph);break;case'bottom-left':prototypes.rpBottomLeft(parent,child,pw,ph);break;case'bottom-right':prototypes.rpBottomRight(parent,child,pw,ph);break;case'center':prototypes.rpCenter(parent,child,pw,ph);break;case'left':prototypes.rpLeft(parent,child,pw);break;case'horizontal-center':prototypes.rpCenterHorizontally(parent,child,pw);break;case'middle-left':prototypes.rpMiddleLeft(parent,child,pw,ph);break;case'middle-right':prototypes.rpMiddleRight(parent,child,pw,ph);break;case'right':prototypes.rpRight(parent,child,pw);break;case'top':prototypes.rpTop(parent,child,ph);break;case'top-center':prototypes.rpTopCenter(parent,child,pw,ph);break;case'top-left':prototypes.rpTopLeft(parent,child,pw,ph);break;case'top-right':prototypes.rpTopRight(parent,child,pw,ph);break;case'vertical-center':prototypes.rpCenterVertically(parent,child,ph);break;}},rpBottom:function(parent,child,ph){if(ph!==undefined){parent.height(ph);}child.css('margin-top',parent.height()-child.height());},rpBottomCenter:function(parent,child,pw,ph){prototypes.rpBottom(parent,child,ph);prototypes.rpCenterHorizontally(parent,child,pw);},rpBottomLeft:function(parent,child,pw,ph){prototypes.rpBottom(parent,child,ph);prototypes.rpLeft(parent,child,pw);},rpBottomRight:function(parent,child,pw,ph){prototypes.rpBottom(parent,child,ph);prototypes.rpRight(parent,child,pw);},rpCenter:function(parent,child,pw,ph){prototypes.rpCenterHorizontally(parent,child,pw);prototypes.rpCenterVertically(parent,child,ph);},rpCenterHorizontally:function(parent,child,pw){if(pw!==undefined){parent.width(pw);}child.css('margin-left',(parent.width()-child.width())/2);},rpCenterVertically:function(parent,child,ph){if(ph!==undefined){parent.height(ph);}child.css('margin-top',(parent.height()-child.height())/2);},rpLeft:function(parent,child,pw){if(pw!==undefined){parent.width(pw);}child.css('margin-left',0);},rpMiddleLeft:function(parent,child,pw,ph){prototypes.rpCenterVertically(parent,child,ph);prototypes.rpLeft(parent,child,pw);},rpMiddleRight:function(parent,child,pw,ph){prototypes.rpCenterVertically(parent,child,ph);prototypes.rpRight(parent,child,pw);},rpRight:function(parent,child,pw){if(pw!==undefined){parent.width(pw);}child.css('margin-left',parent.width()-child.width());},rpTop:function(parent,child,ph){if(ph!==undefined){parent.height(ph);}child.css('margin-top',0);},rpTopCenter:function(parent,child,pw,ph){prototypes.rpTop(parent,child,ph);prototypes.rpCenterHorizontally(parent,child,pw);},rpTopLeft:function(parent,child,pw,ph){prototypes.rpTop(parent,child,ph);prototypes.rpLeft(parent,child,pw);},rpTopRight:function(parent,child,pw,ph){prototypes.rpTop(parent,child,ph);prototypes.rpRight(parent,child,pw);},cleanInput:function(input,allowedCharacters,firstNotAllowed,min){var characters=input.val().split(''),returnStr='',i,startIndex=0;if(characters.length>1&&characters[0]===firstNotAllowed){startIndex=1;}for(i=startIndex;i<characters.length;i++){if(allowedCharacters.indexOf(characters[i])!==-1){returnStr+=characters[i];}}if(min>returnStr){returnStr=min;}input.val(returnStr);},getLeadingZero:function(no){if(no<10){return'0'+no;}else{return no;}},getRandomString:function(stringLength,allowedCharacters){var randomString='',charactersPosition,i;allowedCharacters=allowedCharacters!==undefined?allowedCharacters:'0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';for(i=0;i<stringLength;i++){charactersPosition=Math.floor(Math.random()*allowedCharacters.length);randomString+=allowedCharacters.substring(charactersPosition,charactersPosition+1);}return randomString;},getShortString:function(str,size){var newStr=new Array(),pieces=str.split(''),i;if(pieces.length<=size){newStr.push(str);}else{for(i=0;i<size-3;i++){newStr.push(pieces[i]);}newStr.push('...');}return newStr.join('');},getWithDecimals:function(number,no){no=no===undefined?2:no;return parseInt(number)===number?String(number):parseFloat(number).toFixed(no);},validateCharacters:function(str,allowedCharacters){var characters=str.split(''),i;for(i=0;i<characters.length;i++){if(allowedCharacters.indexOf(characters[i])===-1){return false;}}return true;},validEmail:function(email){var filter=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;if(filter.test(email)){return true;}return false;},stripSlashes:function(str){return(str+'').replace(/\\(.?)/g,function(s,n1){switch(n1){case'\\':return'\\';case'0':return'\u0000';case'':return'';default:return n1;}});},getHEXfromRGB:function(rgb){var hexDigits=new Array('0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f');rgb=rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return(isNaN(rgb[1])?'00':hexDigits[(rgb[1]-rgb[1]%16)/16]+hexDigits[rgb[1]%16])+(isNaN(rgb[2])?'00':hexDigits[(rgb[2]-rgb[2]%16)/16]+hexDigits[rgb[2]%16])+(isNaN(rgb[3])?'00':hexDigits[(rgb[3]-rgb[3]%16)/16]+hexDigits[rgb[3]%16]);},getIdealTextColor:function(bgColor){var rgb=/rgb\((\d+).*?(\d+).*?(\d+)\)/.exec(bgColor);if(rgb!==null){return parseInt(rgb[1],10)+parseInt(rgb[2],10)+parseInt(rgb[3],10)<3*256/2?'white':'black';}else{return parseInt(bgColor.substring(0,2),16)+parseInt(bgColor.substring(2,4),16)+parseInt(bgColor.substring(4,6),16)<3*256/2?'white':'black';}}};return methods.init.apply(this);};})(jQuery);function DOPBSPSearchLoadInfobox(){var script=document.createElement('script');script.type='text/JavaScript';script.src='http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/src/infobox_packed.js';jQuery('body').append(script);return true;};
var DOPBSPBackEnd=new function(){'use strict';var $=jQuery.noConflict();this.messagesTimeout=0;this.__construct=function(){$(document).ready(function(){if(typeof DOPBSP_curr_page!=='undefined'){switch(DOPBSP_curr_page){case'Addons':DOPBSPBackEndAddons.display();break;case'Amenities':DOPBSPBackEndAmenities.display();break;case'Calendars':DOPBSPBackEndCalendars.display();break;case'Coupons':DOPBSPBackEndCoupons.display();break;case'Dashboard':DOPBSPBackEndDashboard.display();break;case'Discounts':DOPBSPBackEndDiscounts.display();break;case'Emails':DOPBSPBackEndEmails.display();break;case'Events':DOPBSPBackEndEvents.display();break;case'Extras':DOPBSPBackEndExtras.display();break;case'Fees':DOPBSPBackEndFees.display();break;case'Forms':DOPBSPBackEndForms.display();break;case'Locations':DOPBSPBackEndLocations.init();break;case'Reservations':DOPBSPBackEndReservations.display();break;case'Reviews':DOPBSPBackEndReviews.display();break;case'Rules':DOPBSPBackEndRules.display();break;case'Search':DOPBSPBackEndSearches.display();break;case'Settings':break;case'Staff':DOPBSPBackEndStaff.display();break;case'Templates':DOPBSPBackEndTemplates.display();break;case'Themes':DOPBSPBackEndThemes.display();break;case'Tools':DOPBSPBackEndTools.display();break;case'Translation':if(DOPPrototypes.getCookie('DOPBSP-translation-redirect')==='languages'){DOPPrototypes.deleteCookie('DOPBSP-translation-redirect','/');DOPBSPBackEndLanguages.display();}else{DOPBSPBackEndTranslation.display();}break;}DOPBSPBackEnd.rp();}});$(document).scroll(function(){if($(document).scrollTop()>0){$('#DOPBSP-go-top').css('display','block');}else{$('#DOPBSP-go-top').css('display','none');}});$(window).resize(function(){DOPBSPBackEnd.rp();});$('#collapse-menu').click(function(){DOPBSPBackEnd.rp();});};this.clearColumns=function(no){if(no<=1){$('#DOPBSP-column1 .dopbsp-column-content').html('');}if(no<=2){$('#DOPBSP-col-column2').removeClass('dopbsp-calendar');$('#DOPBSP-column2 .dopbsp-column-header').html('');$('#DOPBSP-column2 .dopbsp-column-content').html('');}if(no<=3){$('#DOPBSP-column3 .dopbsp-column-header').html('');$('#DOPBSP-column3 .dopbsp-column-content').html('');}};this.confirmation=function(message,yesAction,noAction,messageFallback){var text=DOPBSPBackEnd.text(message,messageFallback);yesAction=yesAction===undefined?'':yesAction;noAction=noAction===undefined?'':noAction;$('#DOPBSP-messages-box').removeClass('dopbsp-active').removeClass('dopbsp-active-info').removeClass('dopbsp-error').removeClass('dopbsp-success');$('#DOPBSP-messages-box .dopbsp-message').html('');$('#DOPBSP-messages-background').addClass('dopbsp-active');$('#DOPBSP-confirmation-box').addClass('dopbsp-active');$('#DOPBSP-confirmation-box .dopbsp-message').html(text);$('#DOPBSP-confirmation-box .dopbsp-button-yes').unbind('click');$('#DOPBSP-confirmation-box .dopbsp-button-yes').bind('click',function(){$('#DOPBSP-messages-background').removeClass('dopbsp-active');$('#DOPBSP-confirmation-box').removeClass('dopbsp-active');$('#DOPBSP-confirmation-box .dopbsp-message').html('');if(yesAction!==''){eval(yesAction);}});$('#DOPBSP-confirmation-box .dopbsp-button-no').unbind('click');$('#DOPBSP-confirmation-box .dopbsp-button-no').bind('click',function(){$('#DOPBSP-messages-background').removeClass('dopbsp-active');$('#DOPBSP-confirmation-box').removeClass('dopbsp-active');$('#DOPBSP-confirmation-box .dopbsp-message').html('');if(noAction!==''){eval(noAction);}});};this.rp=function(){var $admin=$('.DOPBSP-admin'),w=$admin.width();$admin.removeClass('dopbsp-notebook').removeClass('dopbsp-tablet').removeClass('dopbsp-phone').removeClass('dopbsp-responsive-hidden');if(w<=740){$admin.addClass('dopbsp-phone');}else if(w<=1024){$admin.addClass('dopbsp-tablet');}else if(w<=1370){$admin.addClass('dopbsp-notebook');}if(w<300){$admin.addClass('dopbsp-responsive-hidden');}};this.text=function(key,fallback){fallback=fallback===undefined?'!':fallback;return DOPBSP_translation_text[key]===undefined?fallback:DOPBSP_translation_text[key];};this.toggleBox=function(id){if($('#DOPBSP-box-button-'+id).parent().hasClass('dopbsp-display')){$('#DOPBSP-box-button-'+id).parent().removeClass('dopbsp-display').addClass('dopbsp-hide');$('#DOPBSP-box-'+id).stop(true,false).fadeIn(300,function(){});}else{$('#DOPBSP-box-'+id).stop(true,false).fadeOut(300,function(){$('#DOPBSP-box-button-'+id).parent().removeClass('dopbsp-hide').addClass('dopbsp-display');});}};this.toggleInputs=function(id){if($('#DOPBSP-inputs-button-'+id).parent().hasClass('dopbsp-display')){$('#DOPBSP-inputs-button-'+id).parent().removeClass('dopbsp-display').addClass('dopbsp-hide');$('#DOPBSP-inputs-'+id).stop(true,false).fadeIn(300,function(){});}else{$('#DOPBSP-inputs-'+id).stop(true,false).fadeOut(300,function(){$('#DOPBSP-inputs-button-'+id).parent().removeClass('dopbsp-hide').addClass('dopbsp-display');});}};this.toggleMessages=function(action,message){action=action===undefined?'none':action;message=message===undefined?'':message;clearTimeout(this.messagesTimeout);$('#DOPBSP-messages-background').removeClass('dopbsp-active');$('#DOPBSP-messages-box').removeClass('dopbsp-active').removeClass('dopbsp-active-info').removeClass('dopbsp-error').removeClass('dopbsp-success').addClass('dopbsp-'+action);$('#DOPBSP-messages-box .dopbsp-message').html(message);switch(action){case'active':$('#DOPBSP-messages-background').addClass('dopbsp-active');break;case'success':this.messagesTimeout=setTimeout(function(){$('#DOPBSP-messages-box').removeClass('dopbsp-success');$('#DOPBSP-messages-box .dopbsp-message').html('');},2000);break;}};return this.__construct();};
var DOPBSPFrontEnd=new function(){'use strict';var $=jQuery.noConflict();this.calendar=new Array();this.__construct=function(){};this.setPrice=function(ID,price){var dataCurrency=DOPBSPFrontEnd.calendar[ID]['currency']['data'],priceDisplayed='';price=DOPPrototypes.getWithDecimals(Math.abs(price),2);var tipo_reserva=current_place[0].tipo_reserva;if(!tipo_reserva)tipo_reserva="horas";if(tipo_reserva=="convenir"){priceDisplayed="*";}
else{var new_sign="";if(tipo_reserva=="horas"){new_sign="/H*";}
else if(tipo_reserva=="servicio"){new_sign="/S*";}
switch(dataCurrency['position']){case'after':priceDisplayed=price+' '+dataCurrency['sign']+new_sign;break;case'after_with_space':priceDisplayed=price+' '+dataCurrency['sign'];break;case'before_with_space':priceDisplayed=dataCurrency['sign']+' '+price;break;default:priceDisplayed=dataCurrency['sign']+price;}}
return priceDisplayed;};this.text=function(ID,section,key,plugin){plugin=plugin===undefined?'calendar':plugin;switch(plugin){case'calendar':return DOPBSPFrontEnd.calendar[ID][section]['text'][key];break;}};return this.__construct();};
var DOPBSPFrontEndDeposit=new function(){'use strict';var $=jQuery.noConflict();this.__construct=function(){};this.get=function(ID){var dataDeposit=DOPBSPFrontEnd.calendar[ID]['deposit']['data'],dataWooCommerce=DOPBSPFrontEnd.calendar[ID]['woocommerce']['data'],deposit={'price':0,'price_type':'percent'};if(dataWooCommerce['enabled']){return deposit;}if(dataDeposit['deposit']!==0){deposit['price']=dataDeposit['deposit'];deposit['price_type']=dataDeposit['type'];}return deposit;};this.getPrice=function(ID,deposit,totalPrice){var dataWooCommerce=DOPBSPFrontEnd.calendar[ID]['woocommerce']['data'],price=0;if(dataWooCommerce['enabled']){return price;}price+=parseFloat(deposit['price'])*(deposit['price_type']==='fixed'?1:totalPrice)/(deposit['price_type']==='fixed'?1:100);return price;};this.set=function(ID,deposit,totalPrice){var HTML=new Array(),price=0;if(deposit['price']!==0){price=DOPBSPFrontEndDeposit.getPrice(ID,deposit,totalPrice);HTML.push(' <tr class="dopbsp-deposit">');HTML.push('     <td class="dopbsp-label">'+DOPBSPFrontEnd.text(ID,'deposit','title')+'</td>');HTML.push('     <td class="dopbsp-value">'+DOPBSPFrontEnd.setPrice(ID,price)+'</td>');HTML.push(' </tr>');}return HTML.join('');};return this.__construct();};
var DOPBSPFrontEndDiscounts=new function(){'use strict';var $=jQuery.noConflict();this.__construct=function(){};this.get=function(ID,ciDay,coDay,startHour,endHour){var dataDays=DOPBSPFrontEnd.calendar[ID]['days']['data'],dataDiscounts=DOPBSPFrontEnd.calendar[ID]['discounts']['data'],dataHours=DOPBSPFrontEnd.calendar[ID]['hours']['data'],discount={'id':0,'rule_id':0,'operation':'-','price':0,'price_type':'percent','price_by':'once','start_date':'','end_date':'','start_hour':'','end_hour':'','translation':''},discounts=dataDiscounts['discount'],i,j,rule,ruleFound,timeLapse;coDay===''?ciDay:coDay;endHour===''?startHour:endHour;timeLapse=dataHours['enabled']?DOPPrototypes.getHoursDifference(startHour,endHour,'hours')+(dataHours['addLastHourToTotalPrice']?1:0):DOPPrototypes.getNoDays(ciDay,coDay)-(dataDays['morningCheckOut']?1:0);for(i=0;i<discounts.length;i++){if((discounts[i]['start_time_lapse']===''||parseInt(discounts[i]['start_time_lapse'])<=timeLapse)&&(discounts[i]['end_time_lapse']===''||parseInt(discounts[i]['end_time_lapse'])>=timeLapse)){discount['id']=discounts[i]['id'];discount['operation']=discounts[i]['operation'];discount['price']=discounts[i]['price'];discount['price_by']=discounts[i]['price_by'];discount['price_type']=discounts[i]['price_type'];discount['translation']=discounts[i]['translation'];for(j=0;j<discounts[i]['rules'].length;j++){rule=discounts[i]['rules'][j];ruleFound=false;if((rule['start_date']===''||rule['start_date']<=ciDay)&&(rule['end_date']===''||rule['end_date']>=coDay)){if(dataHours['enabled']){if((rule['start_hour']===''||rule['start_hour']<=startHour)&&(rule['end_hour']===''||rule['end_hour']>=endHour)){ruleFound=true;}}else{ruleFound=true;}}if(ruleFound){discount['rule_id']=rule['id'];discount['operation']=rule['operation'];discount['price']=rule['price'];discount['price_by']=rule['price_by'];discount['price_type']=rule['price_type'];discount['start_date']=rule['start_date'];discount['end_date']=rule['end_date'];break;}}break;}}return discount;};this.getPrice=function(ID,discount,reservationPrice,extrasPrice,ciDay,coDay,startHour,endHour,noItems){var dataDays=DOPBSPFrontEnd.calendar[ID]['days']['data'],dataDiscounts=DOPBSPFrontEnd.calendar[ID]['discounts']['data'],dataHours=DOPBSPFrontEnd.calendar[ID]['hours']['data'],timeLapse;coDay=coDay===''?ciDay:coDay;endHour=endHour===''?startHour:endHour;timeLapse=dataHours['enabled']?DOPPrototypes.getHoursDifference(startHour,endHour,'hours')+(dataHours['addLastHourToTotalPrice']?1:0):DOPPrototypes.getNoDays(ciDay,coDay)-(dataDays['morningCheckOut']?1:0);return(discount['operation']==='-'?-1:1)*(discount['price_by']==='once'?1:timeLapse)*discount['price']*(discount['price_type']==='fixed'?noItems:(reservationPrice+(dataDiscounts['extras']?extrasPrice:0)))/(discount['price_type']==='fixed'?1:100);};this.set=function(ID,discount,reservationPrice,extrasPrice,ciDay,coDay,startHour,endHour,noItems){var dataHours=DOPBSPFrontEnd.calendar[ID]['hours']['data'],HTML=new Array(),price;coDay=coDay===''?ciDay:coDay;endHour=endHour===''?startHour:endHour;if(discount['price']>0){price=DOPBSPFrontEndDiscounts.getPrice(ID,discount,reservationPrice,extrasPrice,ciDay,coDay,startHour,endHour,noItems);HTML.push(' <tr class="dopbsp-separator">');HTML.push('     <td class="dopbsp-label"><div class="dopbsp-line"></div></td>');HTML.push('     <td class="dopbsp-value"><div class="dopbsp-line"></div></td>');HTML.push(' </tr>');HTML.push(' <tr>');HTML.push('     <td class="dopbsp-label">'+DOPBSPFrontEnd.text(ID,'discounts','title')+'</td>');HTML.push('     <td class="dopbsp-value dopbsp-info">');HTML.push('         '+discount['translation']+'<br />');if(discount['price_type']!=='fixed'||discount['price_by']!=='once'){HTML.push('         <span class="dopbsp-info-rule">&#9632;&nbsp;');if(discount['price_type']==='fixed'){HTML.push(discount['operation']+DOPBSPFrontEnd.setPrice(ID,discount['price']));}else{HTML.push(discount['operation']+discount['price']+'%');}if(discount['price_by']!=='once'){HTML.push('/'+(dataHours['enabled']?DOPBSPFrontEnd.text(ID,'discounts','byHour'):DOPBSPFrontEnd.text(ID,'discounts','byDay')));}HTML.push('         </span><br />');}HTML.push('         <span class="dopbsp-info-price">'+discount['operation']+'&nbsp;'+DOPBSPFrontEnd.setPrice(ID,price)+'</span>');HTML.push('     </td>');HTML.push(' </tr>');}return HTML.join('');};return this.__construct();};
var DOPBSPFrontEndFees=new function(){'use strict';var $=jQuery.noConflict();this.__construct=function(){};this.get=function(ID,reservationPrice,discountPrice,extrasPrice,ciDay,coDay,startHour,endHour,noItems){var dataDays=DOPBSPFrontEnd.calendar[ID]['days']['data'],dataFees=DOPBSPFrontEnd.calendar[ID]['fees']['data'],dataHours=DOPBSPFrontEnd.calendar[ID]['hours']['data'],dataWooCommerce=DOPBSPFrontEnd.calendar[ID]['woocommerce']['data'],fees=dataFees['fees'],i,timeLapse;if(dataWooCommerce['enabled']){return'';}coDay=coDay===''?ciDay:coDay;endHour=endHour===''?startHour:endHour;timeLapse=dataHours['enabled']?DOPPrototypes.getHoursDifference(startHour,endHour,'hours')+(dataHours['addLastHourToTotalPrice']?1:0):DOPPrototypes.getNoDays(ciDay,coDay)-(dataDays['morningCheckOut']?1:0);for(i=0;i<fees.length;i++){fees[i]['price_total']=this.getPrice(ID,[fees[i]],reservationPrice,discountPrice,extrasPrice,ciDay,coDay,startHour,endHour,noItems);}return fees;};this.getPrice=function(ID,fees,reservationPrice,discountPrice,extrasPrice,ciDay,coDay,startHour,endHour,noItems){var dataDays=DOPBSPFrontEnd.calendar[ID]['days']['data'],dataHours=DOPBSPFrontEnd.calendar[ID]['hours']['data'],dataWooCommerce=DOPBSPFrontEnd.calendar[ID]['woocommerce']['data'],fee,i,price=0,timeLapse;if(dataWooCommerce['enabled']){return price;}coDay=coDay===''?ciDay:coDay;endHour=endHour===''?startHour:endHour;timeLapse=dataHours['enabled']?DOPPrototypes.getHoursDifference(startHour,endHour,'hours')+(dataHours['addLastHourToTotalPrice']?1:0):DOPPrototypes.getNoDays(ciDay,coDay)-(dataDays['morningCheckOut']?1:0);for(i=0;i<fees.length;i++){fee=fees[i];if(fee['included']==='false'){price+=(fee['operation']==='-'?-1:1)*(fee['price_by']==='once'?1:timeLapse)*parseFloat(fee['price'])*(fee['price_type']==='fixed'?noItems:(reservationPrice+discountPrice+(fee['extras']==='true'?extrasPrice:0)))/(fee['price_type']==='fixed'?1:100);}}return price;};this.set=function(ID,type,fees,ciDay,coDay,startHour,endHour){var dataCart=DOPBSPFrontEnd.calendar[ID]['cart']['data'],dataHours=DOPBSPFrontEnd.calendar[ID]['hours']['data'],HTML=new Array(),i;coDay=coDay===''?ciDay:coDay;endHour=endHour===''?startHour:endHour;if(fees.length>0){HTML.push(' <tr class="dopbsp-separator">');HTML.push('     <td class="dopbsp-label"><div class="dopbsp-line"></div></td>');HTML.push('     <td class="dopbsp-value"><div class="dopbsp-line"></div></td>');HTML.push(' </tr>');}for(i=0;i<fees.length;i++){if((type==='reservation'&&(fees[i]['cart']==='false'||!dataCart['enabled']))||(type==='cart'&&fees[i]['cart']==='true')){HTML.push(' <tr>');HTML.push('     <td class="dopbsp-label">'+fees[i]['translation']+'</td>');HTML.push('     <td class="dopbsp-value">');if(fees[i]['price_type']!=='fixed'||fees[i]['price_by']!=='once'){HTML.push('         <span class="dopbsp-info-rule">&#9632;&nbsp;');if(fees[i]['price_type']==='fixed'){HTML.push(fees[i]['operation']+DOPBSPFrontEnd.setPrice(ID,fees[i]['price']));}else{HTML.push(fees[i]['operation']+fees[i]['price']+'%');}if(fees[i]['price_by']!=='once'){HTML.push('/'+(dataHours['enabled']?DOPBSPFrontEnd.text(ID,'fees','byHour'):DOPBSPFrontEnd.text(ID,'fees','byDay')));}HTML.push('         </span><br />');}HTML.push('         <span class="dopbsp-info-price">');if(fees[i]['included']==='true'){HTML.push(DOPBSPFrontEnd.text(ID,'fees','included'));}else{HTML.push(fees[i]['operation']+'&nbsp;'+DOPBSPFrontEnd.setPrice(ID,fees[i]['price_total']));}HTML.push('         </span>');HTML.push('     </td>');HTML.push(' </tr>');}}return HTML.join('');};return this.__construct();};
var DOPBSPFrontEndRules=new function(){'use strict';var $=jQuery.noConflict();this.__construct=function(){};this.getMaxTimeLapse=function(ID){var dataRules=DOPBSPFrontEnd.calendar[ID]['rules']['data'];return dataRules['id']!=='0'?parseFloat(dataRules['rule']['time_lapse_max']):0;};this.getMinTimeLapse=function(ID){var dataDays=DOPBSPFrontEnd.calendar[ID]['days']['data'],dataHours=DOPBSPFrontEnd.calendar[ID]['hours']['data'],dataRules=DOPBSPFrontEnd.calendar[ID]['rules']['data'];return dataRules['id']!=='0'&&(!dataHours['enabled']&&dataDays['multipleSelect']||dataHours['enabled']&&dataDays['multipleSelect'])?parseFloat(dataRules['rule']['time_lapse_min']):0;};return this.__construct();};
/*!
 * jquery-timepicker v1.8.2 - A jQuery timepicker plugin inspired by Google Calendar. It supports both mouse and keyboard navigation.
 * Copyright (c) 2015 Jon Thornton - http://jonthornton.github.com/jquery-timepicker/
 * License: MIT
 */
!function(a){"object"==typeof exports&&exports&&"object"==typeof module&&module&&module.exports===exports?a(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(a){var b=a[0];return b.offsetWidth>0&&b.offsetHeight>0}function c(b){if(b.minTime&&(b.minTime=u(b.minTime)),b.maxTime&&(b.maxTime=u(b.maxTime)),b.durationTime&&"function"!=typeof b.durationTime&&(b.durationTime=u(b.durationTime)),"now"==b.scrollDefault)b.scrollDefault=function(){return b.roundingFunction(u(new Date),b)};else if(b.scrollDefault&&"function"!=typeof b.scrollDefault){var c=b.scrollDefault;b.scrollDefault=function(){return b.roundingFunction(u(c),b)}}else b.minTime&&(b.scrollDefault=function(){return b.roundingFunction(b.minTime,b)});if("string"===a.type(b.timeFormat)&&b.timeFormat.match(/[gh]/)&&(b._twelveHourTime=!0),b.showOnFocus===!1&&-1!=b.showOn.indexOf("focus")&&b.showOn.splice(b.showOn.indexOf("focus"),1),b.disableTimeRanges.length>0){for(var d in b.disableTimeRanges)b.disableTimeRanges[d]=[u(b.disableTimeRanges[d][0]),u(b.disableTimeRanges[d][1])];b.disableTimeRanges=b.disableTimeRanges.sort(function(a,b){return a[0]-b[0]});for(var d=b.disableTimeRanges.length-1;d>0;d--)b.disableTimeRanges[d][0]<=b.disableTimeRanges[d-1][1]&&(b.disableTimeRanges[d-1]=[Math.min(b.disableTimeRanges[d][0],b.disableTimeRanges[d-1][0]),Math.max(b.disableTimeRanges[d][1],b.disableTimeRanges[d-1][1])],b.disableTimeRanges.splice(d,1))}return b}function d(b){var c=b.data("timepicker-settings"),d=b.data("timepicker-list");if(d&&d.length&&(d.remove(),b.data("timepicker-list",!1)),c.useSelect){d=a("<select />",{"class":"ui-timepicker-select"});var g=d}else{d=a("<ul />",{"class":"ui-timepicker-list"});var g=a("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1});g.css({display:"none",position:"absolute"}).append(d)}if(c.noneOption)if(c.noneOption===!0&&(c.noneOption=c.useSelect?"Time...":"None"),a.isArray(c.noneOption)){for(var h in c.noneOption)if(parseInt(h,10)==h){var i=e(c.noneOption[h],c.useSelect);d.append(i)}}else{var i=e(c.noneOption,c.useSelect);d.append(i)}if(c.className&&g.addClass(c.className),(null!==c.minTime||null!==c.durationTime)&&c.showDuration){"function"==typeof c.step?"function":c.step;g.addClass("ui-timepicker-with-duration"),g.addClass("ui-timepicker-step-"+c.step)}var k=c.minTime;"function"==typeof c.durationTime?k=u(c.durationTime()):null!==c.durationTime&&(k=c.durationTime);var m=null!==c.minTime?c.minTime:0,n=null!==c.maxTime?c.maxTime:m+w-1;m>n&&(n+=w),n===w-1&&"string"===a.type(c.timeFormat)&&c.show2400&&(n=w);var p=c.disableTimeRanges,q=0,v=p.length,x=c.step;"function"!=typeof x&&(x=function(){return c.step});for(var h=m,z=0;n>=h;z++,h+=60*x(z)){var A=h,B=t(A,c);if(c.useSelect){var C=a("<option />",{value:B});C.text(B)}else{var C=a("<li />");C.data("time",86400>=A?A:A%86400),C.text(B)}if((null!==c.minTime||null!==c.durationTime)&&c.showDuration){var D=s(h-k,c.step);if(c.useSelect)C.text(C.text()+" ("+D+")");else{var E=a("<span />",{"class":"ui-timepicker-duration"});E.text(" ("+D+")"),C.append(E)}}v>q&&(A>=p[q][1]&&(q+=1),p[q]&&A>=p[q][0]&&A<p[q][1]&&(c.useSelect?C.prop("disabled",!0):C.addClass("ui-timepicker-disabled"))),d.append(C)}if(g.data("timepicker-input",b),b.data("timepicker-list",g),c.useSelect)b.val()&&d.val(f(u(b.val()),c)),d.on("focus",function(){a(this).data("timepicker-input").trigger("showTimepicker")}),d.on("blur",function(){a(this).data("timepicker-input").trigger("hideTimepicker")}),d.on("change",function(){o(b,a(this).val(),"select")}),o(b,d.val(),"initial"),b.hide().after(d);else{var F=c.appendTo;"string"==typeof F?F=a(F):"function"==typeof F&&(F=F(b)),F.append(g),l(b,d),d.on("mousedown","li",function(c){b.off("focus.timepicker"),b.on("focus.timepicker-ie-hack",function(){b.off("focus.timepicker-ie-hack"),b.on("focus.timepicker",y.show)}),j(b)||b[0].focus(),d.find("li").removeClass("ui-timepicker-selected"),a(this).addClass("ui-timepicker-selected"),r(b)&&(b.trigger("hideTimepicker"),d.on("mouseup.timepicker","li",function(a){d.off("mouseup.timepicker"),g.hide()}))})}}function e(b,c){var d,e,f;return"object"==typeof b?(d=b.label,e=b.className,f=b.value):"string"==typeof b?d=b:a.error("Invalid noneOption value"),c?a("<option />",{value:f,"class":e,text:d}):a("<li />",{"class":e,text:d}).data("time",f)}function f(a,b){return a=b.roundingFunction(a,b),null!==a?t(a,b):void 0}function g(){return new Date(1970,1,1,0,0,0)}function h(b){var c=a(b.target),d=c.closest(".ui-timepicker-input");0===d.length&&0===c.closest(".ui-timepicker-wrapper").length&&(y.hide(),a(document).unbind(".ui-timepicker"),a(window).unbind(".ui-timepicker"))}function j(a){var b=a.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&b.disableTouchKeyboard}function k(b,c,d){if(!d&&0!==d)return!1;var e=b.data("timepicker-settings"),f=!1,d=e.roundingFunction(d,e);return c.find("li").each(function(b,c){var e=a(c);if("number"==typeof e.data("time"))return e.data("time")==d?(f=e,!1):void 0}),f}function l(a,b){b.find("li").removeClass("ui-timepicker-selected");var c=u(n(a),a.data("timepicker-settings"));if(null!==c){var d=k(a,b,c);if(d){var e=d.offset().top-b.offset().top;(e+d.outerHeight()>b.outerHeight()||0>e)&&b.scrollTop(b.scrollTop()+d.position().top-d.outerHeight()),d.addClass("ui-timepicker-selected")}}}function m(b,c){if(""!==this.value&&"timepicker"!=c){var d=a(this);if(!d.is(":focus")||b&&"change"==b.type){var e=d.data("timepicker-settings"),f=u(this.value,e);if(null===f)return void d.trigger("timeFormatError");var g=!1;null!==e.minTime&&f<e.minTime?g=!0:null!==e.maxTime&&f>e.maxTime&&(g=!0),a.each(e.disableTimeRanges,function(){return f>=this[0]&&f<this[1]?(g=!0,!1):void 0}),e.forceRoundTime&&(f=e.roundingFunction(f,e));var h=t(f,e);g?o(d,h,"error")&&d.trigger("timeRangeError"):o(d,h)}}}function n(a){return a.is("input")?a.val():a.data("ui-timepicker-value")}function o(a,b,c){if(a.is("input")){a.val(b);var d=a.data("timepicker-settings");d.useSelect&&"select"!=c&&"initial"!=c&&a.data("timepicker-list").val(f(u(b),d))}return a.data("ui-timepicker-value")!=b?(a.data("ui-timepicker-value",b),"select"==c?a.trigger("selectTime").trigger("changeTime").trigger("change","timepicker"):"error"!=c&&a.trigger("changeTime"),!0):(a.trigger("selectTime"),!1)}function p(c){var d=a(this),e=d.data("timepicker-list");if(!e||!b(e)){if(40!=c.keyCode)return!0;y.show.call(d.get(0)),e=d.data("timepicker-list"),j(d)||d.focus()}switch(c.keyCode){case 13:return r(d)&&y.hide.apply(this),c.preventDefault(),!1;case 38:var f=e.find(".ui-timepicker-selected");return f.length?f.is(":first-child")||(f.removeClass("ui-timepicker-selected"),f.prev().addClass("ui-timepicker-selected"),f.prev().position().top<f.outerHeight()&&e.scrollTop(e.scrollTop()-f.outerHeight())):(e.find("li").each(function(b,c){return a(c).position().top>0?(f=a(c),!1):void 0}),f.addClass("ui-timepicker-selected")),!1;case 40:return f=e.find(".ui-timepicker-selected"),0===f.length?(e.find("li").each(function(b,c){return a(c).position().top>0?(f=a(c),!1):void 0}),f.addClass("ui-timepicker-selected")):f.is(":last-child")||(f.removeClass("ui-timepicker-selected"),f.next().addClass("ui-timepicker-selected"),f.next().position().top+2*f.outerHeight()>e.outerHeight()&&e.scrollTop(e.scrollTop()+f.outerHeight())),!1;case 27:e.find("li").removeClass("ui-timepicker-selected"),y.hide();break;case 9:y.hide();break;default:return!0}}function q(c){var d=a(this),e=d.data("timepicker-list"),f=d.data("timepicker-settings");if(!e||!b(e)||f.disableTextInput)return!0;switch(c.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:f.typeaheadHighlight?l(d,e):e.hide()}}function r(a){var b=a.data("timepicker-settings"),c=a.data("timepicker-list"),d=null,e=c.find(".ui-timepicker-selected");return e.hasClass("ui-timepicker-disabled")?!1:(e.length&&(d=e.data("time")),null!==d&&("string"!=typeof d&&(d=t(d,b)),o(a,d,"select")),!0)}function s(a,b){a=Math.abs(a);var c,d,e=Math.round(a/60),f=[];return 60>e?f=[e,x.mins]:(c=Math.floor(e/60),d=e%60,30==b&&30==d&&(c+=x.decimal+5),f.push(c),f.push(1==c?x.hr:x.hrs),30!=b&&d&&(f.push(d),f.push(x.mins))),f.join(" ")}function t(b,c){if(null===b)return null;var d=new Date(v.valueOf()+1e3*b);if(isNaN(d.getTime()))return null;if("function"===a.type(c.timeFormat))return c.timeFormat(d);for(var e,f,g="",h=0;h<c.timeFormat.length;h++)switch(f=c.timeFormat.charAt(h)){case"a":g+=d.getHours()>11?x.pm:x.am;break;case"A":g+=d.getHours()>11?x.PM:x.AM;break;case"g":e=d.getHours()%12,g+=0===e?"12":e;break;case"G":e=d.getHours(),b===w&&(e=24),g+=e;break;case"h":e=d.getHours()%12,0!==e&&10>e&&(e="0"+e),g+=0===e?"12":e;break;case"H":e=d.getHours(),b===w&&(e=24),g+=e>9?e:"0"+e;break;case"i":var i=d.getMinutes();g+=i>9?i:"0"+i;break;case"s":b=d.getSeconds(),g+=b>9?b:"0"+b;break;case"\\":h++,g+=c.timeFormat.charAt(h);break;default:g+=f}return g}function u(a,b){if(""===a)return null;if(!a||a+0==a)return a;if("object"==typeof a)return 3600*a.getHours()+60*a.getMinutes()+a.getSeconds();a=a.toLowerCase().replace(/[\s\.]/g,""),("a"==a.slice(-1)||"p"==a.slice(-1))&&(a+="m");var c="("+x.am.replace(".","")+"|"+x.pm.replace(".","")+"|"+x.AM.replace(".","")+"|"+x.PM.replace(".","")+")?",d=new RegExp("^"+c+"([0-2]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?"+c+"$"),e=a.match(d);if(!e)return null;var f=parseInt(1*e[2],10),g=e[1]||e[5],h=f;if(12>=f&&g){var i=g==x.pm||g==x.PM;h=12==f?i?12:0:f+(i?12:0)}var j=1*e[3]||0,k=1*e[4]||0,l=3600*h+60*j+k;if(12>f&&!g&&b&&b._twelveHourTime&&b.scrollDefault){var m=l-b.scrollDefault();0>m&&m>=w/-2&&(l=(l+w/2)%w)}return l}var v=g(),w=86400,x={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},y={init:function(b){return this.each(function(){var e=a(this),f=[];for(var g in a.fn.timepicker.defaults)e.data(g)&&(f[g]=e.data(g));var h=a.extend({},a.fn.timepicker.defaults,f,b);if(h.lang&&(x=a.extend(x,h.lang)),h=c(h),e.data("timepicker-settings",h),e.addClass("ui-timepicker-input"),h.useSelect)d(e);else{if(e.prop("autocomplete","off"),h.showOn)for(i in h.showOn)e.on(h.showOn[i]+".timepicker",y.show);e.on("change.timepicker",m),e.on("keydown.timepicker",p),e.on("keyup.timepicker",q),h.disableTextInput&&e.on("keypress.timepicker",function(a){a.preventDefault()}),m.call(e.get(0))}})},show:function(c){var e=a(this),f=e.data("timepicker-settings");if(c&&c.preventDefault(),f.useSelect)return void e.data("timepicker-list").focus();j(e)&&e.blur();var g=e.data("timepicker-list");if(!e.prop("readonly")&&(g&&0!==g.length&&"function"!=typeof f.durationTime||(d(e),g=e.data("timepicker-list")),!b(g))){e.data("ui-timepicker-value",e.val()),l(e,g),y.hide(),g.show();var i={};f.orientation.match(/r/)?i.left=e.offset().left+e.outerWidth()-g.outerWidth()+parseInt(g.css("marginLeft").replace("px",""),10):i.left=e.offset().left+parseInt(g.css("marginLeft").replace("px",""),10);var m;m=f.orientation.match(/t/)?"t":f.orientation.match(/b/)?"b":e.offset().top+e.outerHeight(!0)+g.outerHeight()>a(window).height()+a(window).scrollTop()?"t":"b","t"==m?(g.addClass("ui-timepicker-positioned-top"),i.top=e.offset().top-g.outerHeight()+parseInt(g.css("marginTop").replace("px",""),10)):(g.removeClass("ui-timepicker-positioned-top"),i.top=e.offset().top+e.outerHeight()+parseInt(g.css("marginTop").replace("px",""),10)),g.offset(i);var o=g.find(".ui-timepicker-selected");if(o.length||(n(e)?o=k(e,g,u(n(e))):f.scrollDefault&&(o=k(e,g,f.scrollDefault()))),o&&o.length){var p=g.scrollTop()+o.position().top-o.outerHeight();g.scrollTop(p)}else g.scrollTop(0);return f.stopScrollPropagation&&a(document).on("wheel.ui-timepicker",".ui-timepicker-wrapper",function(b){b.preventDefault();var c=a(this).scrollTop();a(this).scrollTop(c+b.originalEvent.deltaY)}),a(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",h),a(window).on("resize.ui-timepicker",h),f.closeOnWindowScroll&&a(document).on("scroll.ui-timepicker",h),e.trigger("showTimepicker"),this}},hide:function(c){var d=a(this),e=d.data("timepicker-settings");return e&&e.useSelect&&d.blur(),a(".ui-timepicker-wrapper").each(function(){var c=a(this);if(b(c)){var d=c.data("timepicker-input"),e=d.data("timepicker-settings");e&&e.selectOnBlur&&r(d),c.hide(),d.trigger("hideTimepicker")}}),this},option:function(b,e){return this.each(function(){var f=a(this),g=f.data("timepicker-settings"),h=f.data("timepicker-list");if("object"==typeof b)g=a.extend(g,b);else if("string"==typeof b&&"undefined"!=typeof e)g[b]=e;else if("string"==typeof b)return g[b];g=c(g),f.data("timepicker-settings",g),h&&(h.remove(),f.data("timepicker-list",!1)),g.useSelect&&d(f)})},getSecondsFromMidnight:function(){return u(n(this))},getTime:function(a){var b=this,c=n(b);if(!c)return null;var d=u(c);if(null===d)return null;a||(a=new Date);var e=new Date(a);return e.setHours(d/3600),e.setMinutes(d%3600/60),e.setSeconds(d%60),e.setMilliseconds(0),e},setTime:function(a){var b=this,c=b.data("timepicker-settings");if(c.forceRoundTime)var d=f(u(a),c);else var d=t(u(a),c);return a&&null===d&&c.noneOption&&(d=a),o(b,d),b.data("timepicker-list")&&l(b,b.data("timepicker-list")),this},remove:function(){var a=this;if(a.hasClass("ui-timepicker-input")){var b=a.data("timepicker-settings");return a.removeAttr("autocomplete","off"),a.removeClass("ui-timepicker-input"),a.removeData("timepicker-settings"),a.off(".timepicker"),a.data("timepicker-list")&&a.data("timepicker-list").remove(),b.useSelect&&a.show(),a.removeData("timepicker-list"),this}}};a.fn.timepicker=function(b){return this.length?y[b]?this.hasClass("ui-timepicker-input")?y[b].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.timepicker"):y.init.apply(this,arguments):this},a.fn.timepicker.defaults={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,showOnFocus:!0,showOn:["click","focus"],timeFormat:"g:ia",scrollDefault:null,selectOnBlur:!1,disableTextInput:!1,disableTouchKeyboard:!1,forceRoundTime:!1,roundingFunction:function(a,b){if(null===a)return null;var c=a%(60*b.step);return c>=30*b.step?a+=60*b.step-c:a-=c,a},appendTo:"body",orientation:"l",disableTimeRanges:[],closeOnWindowScroll:!1,typeaheadHighlight:!0,noneOption:!1,show2400:!1,stopScrollPropagation:!1}});
!function(a,b){"use strict";function c(a,b){var c=b||{};for(var d in a)d in c||(c[d]=a[d]);return c}function d(a,c){if(h)h(a).trigger(c);else{var d=b.createEvent("CustomEvent");d.initCustomEvent(c,!0,!0,{}),a.dispatchEvent(d)}}function e(a,b){return h?h(a).hasClass(b):a.classList.contains(b)}function f(a,b){this.dateDelta=null,this.timeDelta=null,this._defaults={startClass:"start",endClass:"end",timeClass:"time",dateClass:"date",defaultDateDelta:0,defaultTimeDelta:36e5,anchor:"start",parseTime:function(a){return h(a).timepicker("getTime")},updateTime:function(a,b){h(a).timepicker("setTime",b)},setMinTime:function(a,b){h(a).timepicker("option","minTime",b)},parseDate:function(a){return a.value&&h(a).datepicker("getDate")},updateDate:function(a,b){h(a).datepicker("update",b)}},this.container=a,this.settings=c(this._defaults,b),this.startDateInput=this.container.querySelector("."+this.settings.startClass+"."+this.settings.dateClass),this.endDateInput=this.container.querySelector("."+this.settings.endClass+"."+this.settings.dateClass),this.startTimeInput=this.container.querySelector("."+this.settings.startClass+"."+this.settings.timeClass),this.endTimeInput=this.container.querySelector("."+this.settings.endClass+"."+this.settings.timeClass),this.refresh(),this._bindChangeHandler()}var g=864e5,h=a.Zepto||a.jQuery;f.prototype={constructor:f,option:function(a,b){if("object"==typeof a)this.settings=c(this.settings,a);else if("string"==typeof a&&"undefined"!=typeof b)this.settings[a]=b;else if("string"==typeof a)return this.settings[a];this._updateEndMintime()},getTimeDiff:function(){var a=this.dateDelta+this.timeDelta;return!(0>a)||this.startDateInput&&this.endDateInput||(a+=g),a},refresh:function(){if(this.startDateInput&&this.startDateInput.value&&this.endDateInput&&this.endDateInput.value){var a=this.settings.parseDate(this.startDateInput),b=this.settings.parseDate(this.endDateInput);a&&b&&(this.dateDelta=b.getTime()-a.getTime())}if(this.startTimeInput&&this.startTimeInput.value&&this.endTimeInput&&this.endTimeInput.value){var c=this.settings.parseTime(this.startTimeInput),d=this.settings.parseTime(this.endTimeInput);c&&d&&(this.timeDelta=d.getTime()-c.getTime(),this._updateEndMintime())}},remove:function(){this._unbindChangeHandler()},_bindChangeHandler:function(){h?h(this.container).on("change.datepair",h.proxy(this.handleEvent,this)):this.container.addEventListener("change",this,!1)},_unbindChangeHandler:function(){h?h(this.container).off("change.datepair"):this.container.removeEventListener("change",this,!1)},handleEvent:function(a){this._unbindChangeHandler(),e(a.target,this.settings.dateClass)?""!=a.target.value?(this._dateChanged(a.target),this._timeChanged(a.target)):this.dateDelta=null:e(a.target,this.settings.timeClass)&&(""!=a.target.value?this._timeChanged(a.target):this.timeDelta=null),this._validateRanges(),this._updateEndMintime(),this._bindChangeHandler()},_dateChanged:function(a){if(this.startDateInput&&this.endDateInput){var b=this.settings.parseDate(this.startDateInput),c=this.settings.parseDate(this.endDateInput);if(b&&c)if("start"==this.settings.anchor&&e(a,this.settings.startClass)){var d=new Date(b.getTime()+this.dateDelta);this.settings.updateDate(this.endDateInput,d)}else if("end"==this.settings.anchor&&e(a,this.settings.endClass)){var d=new Date(c.getTime()-this.dateDelta);this.settings.updateDate(this.startDateInput,d)}else if(b>c){var f=e(a,this.settings.startClass)?this.endDateInput:this.startDateInput,h=this.settings.parseDate(a);this.dateDelta=0,this.settings.updateDate(f,h)}else this.dateDelta=c.getTime()-b.getTime();else if(null!==this.settings.defaultDateDelta){if(b){var i=new Date(b.getTime()+this.settings.defaultDateDelta*g);this.settings.updateDate(this.endDateInput,i)}else if(c){var j=new Date(c.getTime()-this.settings.defaultDateDelta*g);this.settings.updateDate(this.startDateInput,j)}this.dateDelta=this.settings.defaultDateDelta*g}else this.dateDelta=null}},_timeChanged:function(a){if(this.startTimeInput&&this.endTimeInput){var b=this.settings.parseTime(this.startTimeInput),c=this.settings.parseTime(this.endTimeInput);if(b&&c)if("start"==this.settings.anchor&&e(a,this.settings.startClass)){var d=new Date(b.getTime()+this.timeDelta);this.settings.updateTime(this.endTimeInput,d),c=this.settings.parseTime(this.endTimeInput),this._doMidnightRollover(b,c)}else if("end"==this.settings.anchor&&e(a,this.settings.endClass)){var d=new Date(c.getTime()-this.timeDelta);this.settings.updateTime(this.startTimeInput,d),b=this.settings.parseTime(this.startTimeInput),this._doMidnightRollover(b,c)}else{this._doMidnightRollover(b,c);var f,g;if(this.startDateInput&&this.endDateInput&&(f=this.settings.parseDate(this.startDateInput),g=this.settings.parseDate(this.endDateInput)),+f==+g&&b>c){var h=e(a,this.settings.endClass)?this.endTimeInput:this.startTimeInput,i=e(a,this.settings.startClass)?this.endTimeInput:this.startTimeInput,j=this.settings.parseTime(h);this.timeDelta=0,this.settings.updateTime(i,j)}else this.timeDelta=c.getTime()-b.getTime()}else if(null!==this.settings.defaultTimeDelta){if(b){var k=new Date(b.getTime()+this.settings.defaultTimeDelta);this.settings.updateTime(this.endTimeInput,k)}else if(c){var l=new Date(c.getTime()-this.settings.defaultTimeDelta);this.settings.updateTime(this.startTimeInput,l)}this.timeDelta=this.settings.defaultTimeDelta}else this.timeDelta=null}},_doMidnightRollover:function(a,b){if(this.startDateInput&&this.endDateInput){var c=this.settings.parseDate(this.endDateInput),d=this.settings.parseDate(this.startDateInput),e=b.getTime()-a.getTime(),f=a>b?g:-1*g;null!==this.dateDelta&&this.dateDelta+this.timeDelta<=g&&this.dateDelta+e!=0&&(f>0||0!=this.dateDelta)&&(e>=0&&this.timeDelta<0||0>e&&this.timeDelta>=0)&&("start"==this.settings.anchor?(this.settings.updateDate(this.endDateInput,new Date(c.getTime()+f)),this._dateChanged(this.endDateInput)):"end"==this.settings.anchor&&(this.settings.updateDate(this.startDateInput,new Date(d.getTime()-f)),this._dateChanged(this.startDateInput))),this.timeDelta=e}},_updateEndMintime:function(){if("function"==typeof this.settings.setMinTime){var a=null;"start"==this.settings.anchor&&(!this.dateDelta||this.dateDelta<g||this.timeDelta&&this.dateDelta+this.timeDelta<g)&&(a=this.settings.parseTime(this.startTimeInput)),this.settings.setMinTime(this.endTimeInput,a)}},_validateRanges:function(){return this.startTimeInput&&this.endTimeInput&&null===this.timeDelta?void d(this.container,"rangeIncomplete"):this.startDateInput&&this.endDateInput&&null===this.dateDelta?void d(this.container,"rangeIncomplete"):void(!this.startDateInput||!this.endDateInput||this.dateDelta+this.timeDelta>=0?d(this.container,"rangeSelected"):d(this.container,"rangeError"))}},a.Datepair=f}(window,document),function(a){a&&(a.fn.datepair=function(b){var c;return this.each(function(){var d=a(this),e=d.data("datepair"),f="object"==typeof b&&b;e||(e=new Datepair(this,f),d.data("datepair",e)),"string"==typeof b&&(c=e[b]())}),c||this},a("[data-datepair]").each(function(){var b=a(this);b.datepair(b.data())}))}(window.Zepto||window.jQuery);
(function($){if(!window.console)window.console={};if(!window.console.log)window.console.log=function(){};$.fn.euCookieLawPopup=(function(){var _self=this;_self.params={cookiePolicyUrl:'https://www.servilisto.com/politica-de-cookies',popupPosition:'top',colorStyle:'default',compactStyle:false,popupTitle:'Este sitio web está usando cookies',popupText:'Este sitio web utiliza cookies propias y de terceros para optimizar su navegación, adaptarse a sus preferencias y realizar labores analíticas. Al continuar navegando acepta nuestra política de cookies.',buttonContinueTitle:'Continuar',buttonLearnmoreTitle:'Ver más',buttonLearnmoreOpenInNewWindow:true,agreementExpiresInDays:30,autoAcceptCookiePolicy:false,htmlMarkup:null};_self.vars={INITIALISED:false,HTML_MARKUP:null,COOKIE_NAME:'EU_COOKIE_LAW_CONSENT'};var parseParameters=function(object,markup,settings){if(object){var className=$(object).attr('class')?$(object).attr('class'):'';if(className.indexOf('eupopup-top')>-1){_self.params.popupPosition='top';}else if(className.indexOf('eupopup-fixedtop')>-1){_self.params.popupPosition='fixedtop';}else if(className.indexOf('eupopup-bottomright')>-1){_self.params.popupPosition='bottomright';}else if(className.indexOf('eupopup-bottomleft')>-1){_self.params.popupPosition='bottomleft';}else if(className.indexOf('eupopup-bottom')>-1){_self.params.popupPosition='bottom';}else if(className.indexOf('eupopup-block')>-1){_self.params.popupPosition='block';}if(className.indexOf('eupopup-color-default')>-1){_self.params.colorStyle='default';}else if(className.indexOf('eupopup-color-inverse')>-1){_self.params.colorStyle='inverse';}if(className.indexOf('eupopup-style-compact')>-1){_self.params.compactStyle=true;}}if(markup){_self.params.htmlMarkup=markup;}if(settings){if(typeof settings.cookiePolicyUrl!=='undefined'){_self.params.cookiePolicyUrl=settings.cookiePolicyUrl;}if(typeof settings.popupPosition!=='undefined'){_self.params.popupPosition=settings.popupPosition;}if(typeof settings.colorStyle!=='undefined'){_self.params.colorStyle=settings.colorStyle;}if(typeof settings.popupTitle!=='undefined'){_self.params.popupTitle=settings.popupTitle;}if(typeof settings.popupText!=='undefined'){_self.params.popupText=settings.popupText;}if(typeof settings.buttonContinueTitle!=='undefined'){_self.params.buttonContinueTitle=settings.buttonContinueTitle;}if(typeof settings.buttonLearnmoreTitle!=='undefined'){_self.params.buttonLearnmoreTitle=settings.buttonLearnmoreTitle;}if(typeof settings.buttonLearnmoreOpenInNewWindow!=='undefined'){_self.params.buttonLearnmoreOpenInNewWindow=settings.buttonLearnmoreOpenInNewWindow;}if(typeof settings.agreementExpiresInDays!=='undefined'){_self.params.agreementExpiresInDays=settings.agreementExpiresInDays;}if(typeof settings.autoAcceptCookiePolicy!=='undefined'){_self.params.autoAcceptCookiePolicy=settings.autoAcceptCookiePolicy;}if(typeof settings.htmlMarkup!=='undefined'){_self.params.htmlMarkup=settings.htmlMarkup;}}};var createHtmlMarkup=function(){if(_self.params.htmlMarkup){return _self.params.htmlMarkup;}var html='<div class="eupopup-container'+' eupopup-container-'+_self.params.popupPosition+(_self.params.compactStyle?' eupopup-style-compact':'')+' eupopup-color-'+_self.params.colorStyle+'">'+'<div class="eupopup-head">'+_self.params.popupTitle+'</div>'+'<div class="eupopup-body">'+_self.params.popupText+'</div>'+'<div class="eupopup-buttons">'+'<a href="#" class="eupopup-button eupopup-button_1">'+_self.params.buttonContinueTitle+'</a>'+'<a href="'+_self.params.cookiePolicyUrl+'"'+(_self.params.buttonLearnmoreOpenInNewWindow?' target=_blank ':'')+' class="eupopup-button eupopup-button_2">'+_self.params.buttonLearnmoreTitle+'</a>'+'<div class="clearfix"></div>'+'</div>'+'<a href="#" class="eupopup-closebutton">x</a>'+'</div>';return html;};var setUserAcceptsCookies=function(consent){var d=new Date();var expiresInDays=_self.params.agreementExpiresInDays*24*60*60*1000;d.setTime(d.getTime()+expiresInDays);var expires="expires="+d.toGMTString();document.cookie=_self.vars.COOKIE_NAME+'='+consent+"; "+expires+";path=/";$(document).trigger("user_cookie_consent_changed",{'consent':consent});};var userAlreadyAcceptedCookies=function(){var userAcceptedCookies=false;var cookies=document.cookie.split(";");for(var i=0;i<cookies.length;i++){var c=cookies[i].trim();if(c.indexOf(_self.vars.COOKIE_NAME)==0){userAcceptedCookies=c.substring(_self.vars.COOKIE_NAME.length+1,c.length);}}return userAcceptedCookies;};var hideContainer=function(){$('.eupopup-container').animate({opacity:0,height:0},200,function(){$('.eupopup-container').hide(0);});};var publicfunc={init:function(settings){parseParameters($(".eupopup").first(),$(".eupopup-markup").html(),settings);if(userAlreadyAcceptedCookies()){return;}if(_self.vars.INITIALISED){return;}_self.vars.INITIALISED=true;$('.eupopup-button_1').click(function(){setUserAcceptsCookies(true);hideContainer();return false;});$('.eupopup-closebutton').click(function(){setUserAcceptsCookies(true);hideContainer();return false;});$('.eupopup-container').show();if(_self.params.autoAcceptCookiePolicy){setUserAcceptsCookies(true);}}};return publicfunc;});$(document).ready(function(){if($(".eupopup").length>0){$(document).euCookieLawPopup().init();}});}(jQuery));

;window.Modernizr=function(a,b,c){function z(a){j.cssText=a}function A(a,b){return z(m.join(a+";")+(b||""))}function B(a,b){return typeof a===b}function C(a,b){return!!~(""+a).indexOf(b)}function D(a,b){for(var d in a){var e=a[d];if(!C(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function E(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:B(f,"function")?f.bind(d||b):f}return!1}function F(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+o.join(d+" ")+d).split(" ");return B(b,"string")||B(b,"undefined")?D(e,b):(e=(a+" "+p.join(d+" ")+d).split(" "),E(e,b,c))}var d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l={}.toString,m=" -webkit- -moz- -o- -ms- ".split(" "),n="Webkit Moz O ms",o=n.split(" "),p=n.toLowerCase().split(" "),q={},r={},s={},t=[],u=t.slice,v,w=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},x={}.hasOwnProperty,y;!B(x,"undefined")&&!B(x.call,"undefined")?y=function(a,b){return x.call(a,b)}:y=function(a,b){return b in a&&B(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=u.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(u.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(u.call(arguments)))};return e}),q.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:w(["@media (",m.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=a.offsetTop===9}),c},q.cssanimations=function(){return F("animationName")},q.csstransitions=function(){return F("transition")};for(var G in q)y(q,G)&&(v=G.toLowerCase(),e[v]=q[G](),t.push((e[v]?"":"no-")+v));return e.addTest=function(a,b){if(typeof a=="object")for(var d in a)y(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},z(""),i=k=null,function(a,b){function k(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function l(){var a=r.elements;return typeof a=="string"?a.split(" "):a}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b}function n(a,c,f){c||(c=b);if(j)return c.createElement(a);f||(f=m(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():e.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),g.canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g}function o(a,c){a||(a=b);if(j)return a.createDocumentFragment();c=c||m(a);var d=c.frag.cloneNode(),e=0,f=l(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(r,b.frag)}function q(a){a||(a=b);var c=m(a);return r.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=!!k(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),j||p(a,c),a}var c=a.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f,g="_html5shiv",h=0,i={},j;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",f="hidden"in a,j=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined"}()}catch(c){f=!0,j=!0}})();var r={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:j,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b)}(this,b),e._version=d,e._prefixes=m,e._domPrefixes=p,e._cssomPrefixes=o,e.testProp=function(a){return D([a])},e.testAllProps=F,e.testStyles=w,e.prefixed=function(a,b,c){return b?F(a,b,c):F(a,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+t.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};
/*! jQuery Validation Plugin - v1.11.1 - 3/22/2013\n* https://github.com/jzaefferer/jquery-validation
* Copyright (c) 2013 Jörn Zaefferer; Licensed MIT */(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."),void 0;var i=t.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){i.settings.submitHandler&&(i.submitButton=e.target),t(e.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(e){function s(){var s;return i.settings.submitHandler?(i.submitButton&&(s=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&s.remove(),!1):!0}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,s()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):s():(i.focusInvalid(),!1)})),i)},valid:function(){if(t(this[0]).is("form"))return this.validate().form();var e=!0,i=t(this[0].form).validate();return this.each(function(){e=e&&i.element(this)}),e},removeAttrs:function(e){var i={},s=this;return t.each(e.split(/\s/),function(t,e){i[e]=s.attr(e),s.removeAttr(e)}),i},rules:function(e,i){var s=this[0];if(e){var r=t.data(s.form,"validator").settings,n=r.rules,a=t.validator.staticRules(s);switch(e){case"add":t.extend(a,t.validator.normalizeRule(i)),delete a.messages,n[s.name]=a,i.messages&&(r.messages[s.name]=t.extend(r.messages[s.name],i.messages));break;case"remove":if(!i)return delete n[s.name],a;var u={};return t.each(i.split(/\s/),function(t,e){u[e]=a[e],delete a[e]}),u}}var o=t.validator.normalizeRules(t.extend({},t.validator.classRules(s),t.validator.attributeRules(s),t.validator.dataRules(s),t.validator.staticRules(s)),s);if(o.required){var l=o.required;delete o.required,o=t.extend({required:l},o)}return o}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(RegExp("\\{"+t+"\\}","g"),function(){return i})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(t)).hide())},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,s){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(s):t(e).addClass(i).removeClass(s)},unhighlight:function(e,i,s){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(s):t(e).removeClass(i).addClass(s)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var i=t.data(this[0].form,"validator"),s="on"+e.type.replace(/^validate/,"");i.settings[s]&&i.settings[s].call(i,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};t.each(this.settings.groups,function(e,s){"string"==typeof s&&(s=s.split(/\s/)),t.each(s,function(t,s){i[s]=e})});var s=this.settings.rules;t.each(s,function(e,i){s[e]=t.validator.normalizeRule(i)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=t(e);var i=this.check(e)!==!1;return i?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var i in e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e=0;for(var i in t)e++;return e},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!e.objectLength(t(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i=t(e).attr("type"),s=t(e).val();return"radio"===i||"checkbox"===i?t("input[name='"+t(e).attr("name")+"']:checked").val():"string"==typeof s?s.replace(/\r/g,""):s},check:function(e){e=this.validationTargetFor(this.clean(e));var i,s=t(e).rules(),r=!1,n=this.elementValue(e);for(var a in s){var u={method:a,parameters:s[a]};try{if(i=t.validator.methods[a].call(this,n,e,u.parameters),"dependency-mismatch"===i){r=!0;continue}if(r=!1,"pending"===i)return this.toHide=this.toHide.not(this.errorsFor(e)),void 0;if(!i)return this.formatAndAdd(e,u),!1}catch(o){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+u.method+"' method.",o),o}}return r?void 0:(this.objectLength(s)&&this.successList.push(e),!0)},customDataMessage:function(e,i){return t(e).data("msg-"+i.toLowerCase())||e.attributes&&t(e).attr("data-msg-"+i.toLowerCase())},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;arguments.length>t;t++)if(void 0!==arguments[t])return arguments[t];return void 0},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customDataMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,i){var s=this.defaultMessage(e,i.method),r=/\$?\{(\d+)\}/g;"function"==typeof s?s=s.call(this,i.parameters,e):r.test(s)&&(s=t.validator.format(s.replace(r,"{$1}"),i.parameters)),this.errorList.push({message:s,element:e}),this.errorMap[e.name]=s,this.submitted[e.name]=s},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e;for(t=0;this.errorList[t];t++){var i=this.errorList[t];this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var s=this.errorsFor(e);s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(i)):(s=t("<"+this.settings.errorElement+">").attr("for",this.idOrName(e)).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(s=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(s).length||(this.settings.errorPlacement?this.settings.errorPlacement(s,t(e)):s.insertAfter(e))),!i&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,e)),this.toShow=this.toShow.add(s)},errorsFor:function(e){var i=this.idOrName(e);return this.errors().filter(function(){return t(this).attr("for")===i})},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]),t},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t){return t},string:function(e,i){return!!t(e,i.form).length},"function":function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,0>this.pendingRequest&&(this.pendingRequest=0),delete this.pending[e.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},s=t(e).attr("class");return s&&t.each(s.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},attributeRules:function(e){var i={},s=t(e),r=s[0].getAttribute("type");for(var n in t.validator.methods){var a;"required"===n?(a=s.get(0).getAttribute(n),""===a&&(a=!0),a=!!a):a=s.attr(n),/min|max/.test(n)&&(null===r||/number|range|text/.test(r))&&(a=Number(a)),a?i[n]=a:r===n&&"range"!==r&&(i[n]=!0)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(e){var i,s,r={},n=t(e);for(i in t.validator.methods)s=n.data("rule-"+i.toLowerCase()),void 0!==s&&(r[i]=s);return r},staticRules:function(e){var i={},s=t.data(e.form,"validator");return s.settings.rules&&(i=t.validator.normalizeRule(s.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(s,r){if(r===!1)return delete e[s],void 0;if(r.param||r.depends){var n=!0;switch(typeof r.depends){case"string":n=!!t(r.depends,i.form).length;break;case"function":n=r.depends.call(i,i)}n?e[s]=void 0!==r.param?r.param:!0:delete e[s]}}),t.each(e,function(s,r){e[s]=t.isFunction(r)?r(i):r}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var i;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(i=e[this].split(/[\s,]+/),e[this]=[Number(i[0]),Number(i[1])]))}),t.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,s){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==s?s:t.validator.messages[e],3>i.length&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,s){if(!this.depend(s,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var r=t(i).val();return r&&r.length>0}return this.checkable(i)?this.getLength(e,i)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(""+new Date(t))},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i=0,s=0,r=!1;t=t.replace(/\D/g,"");for(var n=t.length-1;n>=0;n--){var a=t.charAt(n);s=parseInt(a,10),r&&(s*=2)>9&&(s-=9),i+=s,r=!r}return 0===i%10},minlength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||r>=s},maxlength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||s>=r},rangelength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||r>=s[0]&&s[1]>=r},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&i[1]>=t},equalTo:function(e,i,s){var r=t(s);return this.settings.onfocusout&&r.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(i).valid()}),e===r.val()},remote:function(e,i,s){if(this.optional(i))return"dependency-mismatch";var r=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),r.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=r.message,s="string"==typeof s&&{url:s}||s,r.old===e)return r.valid;r.old=e;var n=this;this.startRequest(i);var a={};return a[i.name]=e,t.ajax(t.extend(!0,{url:s,mode:"abort",port:"validate"+i.name,dataType:"json",data:a,success:function(s){n.settings.messages[i.name].remote=r.originalMessage;var a=s===!0||"true"===s;if(a){var u=n.formSubmitted;n.prepareElement(i),n.formSubmitted=u,n.successList.push(i),delete n.invalid[i.name],n.showErrors()}else{var o={},l=s||n.defaultMessage(i,"remote");o[i.name]=r.message=t.isFunction(l)?l(e):l,n.invalid[i.name]=!0,n.showErrors(o)}r.valid=a,n.stopRequest(i,a)}},s)),"pending"}}}),t.format=t.validator.format})(jQuery),function(t){var e={};if(t.ajaxPrefilter)t.ajaxPrefilter(function(t,i,s){var r=t.port;"abort"===t.mode&&(e[r]&&e[r].abort(),e[r]=s)});else{var i=t.ajax;t.ajax=function(s){var r=("mode"in s?s:t.ajaxSettings).mode,n=("port"in s?s:t.ajaxSettings).port;return"abort"===r?(e[n]&&e[n].abort(),e[n]=i.apply(this,arguments),e[n]):i.apply(this,arguments)}}}(jQuery),function(t){t.extend(t.fn,{validateDelegate:function(e,i,s){return this.bind(i,function(i){var r=t(i.target);return r.is(e)?s.apply(r,arguments):void 0})}})}(jQuery);
if(!(typeof window.google==='object'&&window.google.maps)){}else{var extend_object=function(obj,new_obj){var name;if(obj===new_obj){return obj;}for(name in new_obj){obj[name]=new_obj[name];}return obj;};var replace_object=function(obj,replace){var name;if(obj===replace){return obj;}for(name in replace){if(obj[name]!=undefined){obj[name]=replace[name];}}return obj;};var array_map=function(array,callback){var original_callback_params=Array.prototype.slice.call(arguments,2),array_return=[],array_length=array.length,i;if(Array.prototype.map&&array.map===Array.prototype.map){array_return=Array.prototype.map.call(array,function(item){callback_params=original_callback_params;callback_params.splice(0,0,item);return callback.apply(this,callback_params);});}else{for(i=0;i<array_length;i++){callback_params=original_callback_params;callback_params.splice(0,0,array[i]);array_return.push(callback.apply(this,callback_params));}}return array_return;};var array_flat=function(array){var new_array=[],i;for(i=0;i<array.length;i++){new_array=new_array.concat(array[i]);}return new_array;};var coordsToLatLngs=function(coords,useGeoJSON){var first_coord=coords[0],second_coord=coords[1];if(useGeoJSON){first_coord=coords[1];second_coord=coords[0];}return new google.maps.LatLng(first_coord,second_coord);};var arrayToLatLng=function(coords,useGeoJSON){var i;for(i=0;i<coords.length;i++){if(coords[i].length>0&&typeof(coords[i][0])=="object"){coords[i]=arrayToLatLng(coords[i],useGeoJSON);}else{coords[i]=coordsToLatLngs(coords[i],useGeoJSON);}}return coords;};var getElementById=function(id,context){var element,id=id.replace('#','');if('jQuery'in this&&context){element=$("#"+id,context)[0];}else{element=document.getElementById(id);};return element;};var findAbsolutePosition=function(obj){var curleft=0,curtop=0;if(obj.offsetParent){do{curleft+=obj.offsetLeft;curtop+=obj.offsetTop;}while(obj=obj.offsetParent);}return[curleft,curtop];};var GMaps=(function(global){"use strict";var doc=document;var GMaps=function(options){if(!this)return new GMaps(options);options.zoom=options.zoom||15;options.mapType=options.mapType||'roadmap';var self=this,i,events_that_hide_context_menu=['bounds_changed','center_changed','click','dblclick','drag','dragend','dragstart','idle','maptypeid_changed','projection_changed','resize','tilesloaded','zoom_changed'],events_that_doesnt_hide_context_menu=['mousemove','mouseout','mouseover'],options_to_be_deleted=['el','lat','lng','mapType','width','height','markerClusterer','enableNewStyle'],container_id=options.el||options.div,markerClustererFunction=options.markerClusterer,mapType=google.maps.MapTypeId[options.mapType.toUpperCase()],map_center=new google.maps.LatLng(options.lat,options.lng),zoomControl=options.zoomControl||true,zoomControlOpt=options.zoomControlOpt||{style:'DEFAULT',position:'TOP_LEFT'},zoomControlStyle=zoomControlOpt.style||'DEFAULT',zoomControlPosition=zoomControlOpt.position||'TOP_LEFT',panControl=options.panControl||true,mapTypeControl=options.mapTypeControl||true,scaleControl=options.scaleControl||true,streetViewControl=options.streetViewControl||true,overviewMapControl=overviewMapControl||true,map_options={},map_base_options={zoom:this.zoom,center:map_center,mapTypeId:mapType},map_controls_options={panControl:panControl,zoomControl:zoomControl,zoomControlOptions:{style:google.maps.ZoomControlStyle[zoomControlStyle],position:google.maps.ControlPosition[zoomControlPosition]},mapTypeControl:mapTypeControl,scaleControl:scaleControl,streetViewControl:streetViewControl,overviewMapControl:overviewMapControl};if(typeof(options.el)==='string'||typeof(options.div)==='string'){this.el=getElementById(container_id,options.context);}else{this.el=container_id;}if(typeof(this.el)==='undefined'||this.el===null){throw'No element defined.';}window.context_menu=window.context_menu||{};window.context_menu[self.el.id]={};this.controls=[];this.overlays=[];this.layers=[];this.singleLayers={};this.markers=[];this.polylines=[];this.routes=[];this.polygons=[];this.infoWindow=null;this.overlay_el=null;this.zoom=options.zoom;this.registered_events={};this.el.style.width=options.width||this.el.scrollWidth||this.el.offsetWidth;this.el.style.height=options.height||this.el.scrollHeight||this.el.offsetHeight;google.maps.visualRefresh=options.enableNewStyle;for(i=0;i<options_to_be_deleted.length;i++){delete options[options_to_be_deleted[i]];}if(options.disableDefaultUI!=true){map_base_options=extend_object(map_base_options,map_controls_options);}map_options=extend_object(map_base_options,options);for(i=0;i<events_that_hide_context_menu.length;i++){delete map_options[events_that_hide_context_menu[i]];}for(i=0;i<events_that_doesnt_hide_context_menu.length;i++){delete map_options[events_that_doesnt_hide_context_menu[i]];}this.map=new google.maps.Map(this.el,map_options);if(markerClustererFunction){this.markerClusterer=markerClustererFunction.apply(this,[this.map]);}var buildContextMenuHTML=function(control,e){var html='',options=window.context_menu[self.el.id][control];for(var i in options){if(options.hasOwnProperty(i)){var option=options[i];html+='<li><a id="'+control+'_'+i+'" href="#">'+option.title+'</a></li>';}}if(!getElementById('gmaps_context_menu'))return;var context_menu_element=getElementById('gmaps_context_menu');context_menu_element.innerHTML=html;var context_menu_items=context_menu_element.getElementsByTagName('a'),context_menu_items_count=context_menu_items.length;for(i=0;i<context_menu_items_count;i++){var context_menu_item=context_menu_items[i];var assign_menu_item_action=function(ev){ev.preventDefault();options[this.id.replace(control+'_','')].action.apply(self,[e]);self.hideContextMenu();};google.maps.event.clearListeners(context_menu_item,'click');google.maps.event.addDomListenerOnce(context_menu_item,'click',assign_menu_item_action,false);}var position=findAbsolutePosition.apply(this,[self.el]),left=position[0]+e.pixel.x-15,top=position[1]+e.pixel.y-15;context_menu_element.style.left=left+"px";context_menu_element.style.top=top+"px";context_menu_element.style.display='block';};this.buildContextMenu=function(control,e){if(control==='marker'){e.pixel={};var overlay=new google.maps.OverlayView();overlay.setMap(self.map);overlay.draw=function(){var projection=overlay.getProjection(),position=e.marker.getPosition();e.pixel=projection.fromLatLngToContainerPixel(position);buildContextMenuHTML(control,e);};}else{buildContextMenuHTML(control,e);}};this.setContextMenu=function(options){window.context_menu[self.el.id][options.control]={};var i,ul=doc.createElement('ul');for(i in options.options){if(options.options.hasOwnProperty(i)){var option=options.options[i];window.context_menu[self.el.id][options.control][option.name]={title:option.title,action:option.action};}}ul.id='gmaps_context_menu';ul.style.display='none';ul.style.position='absolute';ul.style.minWidth='100px';ul.style.background='white';ul.style.listStyle='none';ul.style.padding='8px';ul.style.boxShadow='2px 2px 6px #ccc';doc.body.appendChild(ul);var context_menu_element=getElementById('gmaps_context_menu');google.maps.event.addDomListener(context_menu_element,'mouseout',function(ev){if(!ev.relatedTarget||!this.contains(ev.relatedTarget)){window.setTimeout(function(){context_menu_element.style.display='none';},400);}},false);};this.hideContextMenu=function(){var context_menu_element=getElementById('gmaps_context_menu');if(context_menu_element){context_menu_element.style.display='none';}};var setupListener=function(object,name){google.maps.event.addListener(object,name,function(e){if(e==undefined){e=this;}options[name].apply(this,[e]);self.hideContextMenu();});};for(var ev=0;ev<events_that_hide_context_menu.length;ev++){var name=events_that_hide_context_menu[ev];if(name in options){setupListener(this.map,name);}}for(var ev=0;ev<events_that_doesnt_hide_context_menu.length;ev++){var name=events_that_doesnt_hide_context_menu[ev];if(name in options){setupListener(this.map,name);}}google.maps.event.addListener(this.map,'rightclick',function(e){if(options.rightclick){options.rightclick.apply(this,[e]);}if(window.context_menu[self.el.id]['map']!=undefined){self.buildContextMenu('map',e);}});this.refresh=function(){google.maps.event.trigger(this.map,'resize');};this.fitZoom=function(){var latLngs=[],markers_length=this.markers.length,i;for(i=0;i<markers_length;i++){latLngs.push(this.markers[i].getPosition());}this.fitLatLngBounds(latLngs);};this.fitLatLngBounds=function(latLngs){var total=latLngs.length;var bounds=new google.maps.LatLngBounds();for(var i=0;i<total;i++){bounds.extend(latLngs[i]);}this.map.fitBounds(bounds);};this.setCenter=function(lat,lng,callback){this.map.panTo(new google.maps.LatLng(lat,lng));if(callback){callback();}};this.getElement=function(){return this.el;};this.zoomIn=function(value){value=value||1;this.zoom=this.map.getZoom()+value;this.map.setZoom(this.zoom);};this.zoomOut=function(value){value=value||1;this.zoom=this.map.getZoom()-value;this.map.setZoom(this.zoom);};var native_methods=[],method;for(method in this.map){if(typeof(this.map[method])=='function'&&!this[method]){native_methods.push(method);}}for(i=0;i<native_methods.length;i++){(function(gmaps,scope,method_name){gmaps[method_name]=function(){return scope[method_name].apply(scope,arguments);};})(this,this.map,native_methods[i]);}};return GMaps;})(this);GMaps.prototype.createControl=function(options){var control=document.createElement('div');control.style.cursor='pointer';control.style.fontFamily='Arial, sans-serif';control.style.fontSize='13px';control.style.boxShadow='rgba(0, 0, 0, 0.398438) 0px 2px 4px';for(var option in options.style){control.style[option]=options.style[option];}if(options.id){control.id=options.id;}if(options.classes){control.className=options.classes;}if(options.content){control.innerHTML=options.content;}for(var ev in options.events){(function(object,name){google.maps.event.addDomListener(object,name,function(){options.events[name].apply(this,[this]);});})(control,ev);}control.index=1;return control;};GMaps.prototype.addControl=function(options){var position=google.maps.ControlPosition[options.position.toUpperCase()];delete options.position;var control=this.createControl(options);this.controls.push(control);this.map.controls[position].push(control);return control;};GMaps.prototype.createMarker=function(options){if(options.lat==undefined&&options.lng==undefined&&options.position==undefined){throw'No latitude or longitude defined.';}var self=this,details=options.details,fences=options.fences,outside=options.outside,base_options={position:new google.maps.LatLng(options.lat,options.lng),map:null};delete options.lat;delete options.lng;delete options.fences;delete options.outside;var marker_options=extend_object(base_options,options),marker=new google.maps.Marker(marker_options);marker.fences=fences;if(options.infoWindow){marker.infoWindow=new google.maps.InfoWindow(options.infoWindow);var info_window_events=['closeclick','content_changed','domready','position_changed','zindex_changed'];for(var ev=0;ev<info_window_events.length;ev++){(function(object,name){if(options.infoWindow[name]){google.maps.event.addListener(object,name,function(e){options.infoWindow[name].apply(this,[e]);});}})(marker.infoWindow,info_window_events[ev]);}}var marker_events=['animation_changed','clickable_changed','cursor_changed','draggable_changed','flat_changed','icon_changed','position_changed','shadow_changed','shape_changed','title_changed','visible_changed','zindex_changed'];var marker_events_with_mouse=['dblclick','drag','dragend','dragstart','mousedown','mouseout','mouseover','mouseup'];for(var ev=0;ev<marker_events.length;ev++){(function(object,name){if(options[name]){google.maps.event.addListener(object,name,function(){options[name].apply(this,[this]);});}})(marker,marker_events[ev]);}for(var ev=0;ev<marker_events_with_mouse.length;ev++){(function(map,object,name){if(options[name]){google.maps.event.addListener(object,name,function(me){if(!me.pixel){me.pixel=map.getProjection().fromLatLngToPoint(me.latLng)}options[name].apply(this,[me]);});}})(this.map,marker,marker_events_with_mouse[ev]);}google.maps.event.addListener(marker,'click',function(){this.details=details;if(options.click){options.click.apply(this,[this]);}if(marker.infoWindow){self.hideInfoWindows();marker.infoWindow.open(self.map,marker);}});google.maps.event.addListener(marker,'rightclick',function(e){e.marker=this;if(options.rightclick){options.rightclick.apply(this,[e]);}if(window.context_menu[self.el.id]['marker']!=undefined){self.buildContextMenu('marker',e);}});if(marker.fences){google.maps.event.addListener(marker,'dragend',function(){self.checkMarkerGeofence(marker,function(m,f){outside(m,f);});});}return marker;};GMaps.prototype.addMarker=function(options){var marker;if(options.hasOwnProperty('gm_accessors_')){marker=options;}else{if((options.hasOwnProperty('lat')&&options.hasOwnProperty('lng'))||options.position){marker=this.createMarker(options);}else{throw'No latitude or longitude defined.';}}marker.setMap(this.map);if(this.markerClusterer){this.markerClusterer.addMarker(marker);}this.markers.push(marker);GMaps.fire('marker_added',marker,this);return marker;};GMaps.prototype.addMarkers=function(array){for(var i=0,marker;marker=array[i];i++){this.addMarker(marker);}return this.markers;};GMaps.prototype.hideInfoWindows=function(){for(var i=0,marker;marker=this.markers[i];i++){if(marker.infoWindow){marker.infoWindow.close();}}};GMaps.prototype.removeMarker=function(marker){for(var i=0;i<this.markers.length;i++){if(this.markers[i]===marker){this.markers[i].setMap(null);this.markers.splice(i,1);if(this.markerClusterer){this.markerClusterer.removeMarker(marker);}GMaps.fire('marker_removed',marker,this);break;}}return marker;};GMaps.prototype.removeMarkers=function(collection){var collection=(collection||this.markers);for(var i=0;i<this.markers.length;i++){if(this.markers[i]===collection[i]){this.markers[i].setMap(null);}}var new_markers=[];for(var i=0;i<this.markers.length;i++){if(this.markers[i].getMap()!=null){new_markers.push(this.markers[i]);}}this.markers=new_markers;};GMaps.prototype.drawOverlay=function(options){var overlay=new google.maps.OverlayView(),auto_show=true;overlay.setMap(this.map);if(options.auto_show!=null){auto_show=options.auto_show;}overlay.onAdd=function(){var el=document.createElement('div');el.style.borderStyle="none";el.style.borderWidth="0px";el.style.position="absolute";el.style.zIndex=100;el.innerHTML=options.content;overlay.el=el;if(!options.layer){options.layer='overlayLayer';}var panes=this.getPanes(),overlayLayer=panes[options.layer],stop_overlay_events=['contextmenu','DOMMouseScroll','dblclick','mousedown'];overlayLayer.appendChild(el);for(var ev=0;ev<stop_overlay_events.length;ev++){(function(object,name){google.maps.event.addDomListener(object,name,function(e){if(navigator.userAgent.toLowerCase().indexOf('msie')!=-1&&document.all){e.cancelBubble=true;e.returnValue=false;}else{e.stopPropagation();}});})(el,stop_overlay_events[ev]);}google.maps.event.trigger(this,'ready');};overlay.draw=function(){var projection=this.getProjection(),pixel=projection.fromLatLngToDivPixel(new google.maps.LatLng(options.lat,options.lng));options.horizontalOffset=options.horizontalOffset||0;options.verticalOffset=options.verticalOffset||0;var el=overlay.el,content=el.children[0],content_height=content.clientHeight,content_width=content.clientWidth;switch(options.verticalAlign){case'top':el.style.top=(pixel.y-content_height+options.verticalOffset)+'px';break;default:case'middle':el.style.top=(pixel.y-(content_height/2)+options.verticalOffset)+'px';break;case'bottom':el.style.top=(pixel.y+options.verticalOffset)+'px';break;}switch(options.horizontalAlign){case'left':el.style.left=(pixel.x-content_width+options.horizontalOffset)+'px';break;default:case'center':el.style.left=(pixel.x-(content_width/2)+options.horizontalOffset)+'px';break;case'right':el.style.left=(pixel.x+options.horizontalOffset)+'px';break;}el.style.display=auto_show?'block':'none';if(!auto_show){options.show.apply(this,[el]);}};overlay.onRemove=function(){var el=overlay.el;if(options.remove){options.remove.apply(this,[el]);}else{overlay.el.parentNode.removeChild(overlay.el);overlay.el=null;}};this.overlays.push(overlay);return overlay;};GMaps.prototype.removeOverlay=function(overlay){for(var i=0;i<this.overlays.length;i++){if(this.overlays[i]===overlay){this.overlays[i].setMap(null);this.overlays.splice(i,1);break;}}};GMaps.prototype.removeOverlays=function(){for(var i=0,item;item=this.overlays[i];i++){item.setMap(null);}this.overlays=[];};GMaps.prototype.drawPolyline=function(options){var path=[],points=options.path;if(points.length){if(points[0][0]===undefined){path=points;}else{for(var i=0,latlng;latlng=points[i];i++){path.push(new google.maps.LatLng(latlng[0],latlng[1]));}}}var polyline_options={map:this.map,path:path,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight,geodesic:options.geodesic,clickable:true,editable:false,visible:true};if(options.hasOwnProperty("clickable")){polyline_options.clickable=options.clickable;}if(options.hasOwnProperty("editable")){polyline_options.editable=options.editable;}if(options.hasOwnProperty("icons")){polyline_options.icons=options.icons;}if(options.hasOwnProperty("zIndex")){polyline_options.zIndex=options.zIndex;}var polyline=new google.maps.Polyline(polyline_options);var polyline_events=['click','dblclick','mousedown','mousemove','mouseout','mouseover','mouseup','rightclick'];for(var ev=0;ev<polyline_events.length;ev++){(function(object,name){if(options[name]){google.maps.event.addListener(object,name,function(e){options[name].apply(this,[e]);});}})(polyline,polyline_events[ev]);}this.polylines.push(polyline);GMaps.fire('polyline_added',polyline,this);return polyline;};GMaps.prototype.removePolyline=function(polyline){for(var i=0;i<this.polylines.length;i++){if(this.polylines[i]===polyline){this.polylines[i].setMap(null);this.polylines.splice(i,1);GMaps.fire('polyline_removed',polyline,this);break;}}};GMaps.prototype.removePolylines=function(){for(var i=0,item;item=this.polylines[i];i++){item.setMap(null);}this.polylines=[];};GMaps.prototype.drawCircle=function(options){options=extend_object({map:this.map,center:new google.maps.LatLng(options.lat,options.lng)},options);delete options.lat;delete options.lng;var polygon=new google.maps.Circle(options),polygon_events=['click','dblclick','mousedown','mousemove','mouseout','mouseover','mouseup','rightclick'];for(var ev=0;ev<polygon_events.length;ev++){(function(object,name){if(options[name]){google.maps.event.addListener(object,name,function(e){options[name].apply(this,[e]);});}})(polygon,polygon_events[ev]);}this.polygons.push(polygon);return polygon;};GMaps.prototype.drawRectangle=function(options){options=extend_object({map:this.map},options);var latLngBounds=new google.maps.LatLngBounds(new google.maps.LatLng(options.bounds[0][0],options.bounds[0][1]),new google.maps.LatLng(options.bounds[1][0],options.bounds[1][1]));options.bounds=latLngBounds;var polygon=new google.maps.Rectangle(options),polygon_events=['click','dblclick','mousedown','mousemove','mouseout','mouseover','mouseup','rightclick'];for(var ev=0;ev<polygon_events.length;ev++){(function(object,name){if(options[name]){google.maps.event.addListener(object,name,function(e){options[name].apply(this,[e]);});}})(polygon,polygon_events[ev]);}this.polygons.push(polygon);return polygon;};GMaps.prototype.drawPolygon=function(options){var useGeoJSON=false;if(options.hasOwnProperty("useGeoJSON")){useGeoJSON=options.useGeoJSON;}delete options.useGeoJSON;options=extend_object({map:this.map},options);if(useGeoJSON==false){options.paths=[options.paths.slice(0)];}if(options.paths.length>0){if(options.paths[0].length>0){options.paths=array_flat(array_map(options.paths,arrayToLatLng,useGeoJSON));}}var polygon=new google.maps.Polygon(options),polygon_events=['click','dblclick','mousedown','mousemove','mouseout','mouseover','mouseup','rightclick'];for(var ev=0;ev<polygon_events.length;ev++){(function(object,name){if(options[name]){google.maps.event.addListener(object,name,function(e){options[name].apply(this,[e]);});}})(polygon,polygon_events[ev]);}this.polygons.push(polygon);GMaps.fire('polygon_added',polygon,this);return polygon;};GMaps.prototype.removePolygon=function(polygon){for(var i=0;i<this.polygons.length;i++){if(this.polygons[i]===polygon){this.polygons[i].setMap(null);this.polygons.splice(i,1);GMaps.fire('polygon_removed',polygon,this);break;}}};GMaps.prototype.removePolygons=function(){for(var i=0,item;item=this.polygons[i];i++){item.setMap(null);}this.polygons=[];};GMaps.prototype.getFromFusionTables=function(options){var events=options.events;delete options.events;var fusion_tables_options=options,layer=new google.maps.FusionTablesLayer(fusion_tables_options);for(var ev in events){(function(object,name){google.maps.event.addListener(object,name,function(e){events[name].apply(this,[e]);});})(layer,ev);}this.layers.push(layer);return layer;};GMaps.prototype.loadFromFusionTables=function(options){var layer=this.getFromFusionTables(options);layer.setMap(this.map);return layer;};GMaps.prototype.getFromKML=function(options){var url=options.url,events=options.events;delete options.url;delete options.events;var kml_options=options,layer=new google.maps.KmlLayer(url,kml_options);for(var ev in events){(function(object,name){google.maps.event.addListener(object,name,function(e){events[name].apply(this,[e]);});})(layer,ev);}this.layers.push(layer);return layer;};GMaps.prototype.loadFromKML=function(options){var layer=this.getFromKML(options);layer.setMap(this.map);return layer;};GMaps.prototype.addLayer=function(layerName,options){options=options||{};var layer;switch(layerName){case'weather':this.singleLayers.weather=layer=new google.maps.weather.WeatherLayer();break;case'clouds':this.singleLayers.clouds=layer=new google.maps.weather.CloudLayer();break;case'traffic':this.singleLayers.traffic=layer=new google.maps.TrafficLayer();break;case'transit':this.singleLayers.transit=layer=new google.maps.TransitLayer();break;case'bicycling':this.singleLayers.bicycling=layer=new google.maps.BicyclingLayer();break;case'panoramio':this.singleLayers.panoramio=layer=new google.maps.panoramio.PanoramioLayer();layer.setTag(options.filter);delete options.filter;if(options.click){google.maps.event.addListener(layer,'click',function(event){options.click(event);delete options.click;});}break;case'places':this.singleLayers.places=layer=new google.maps.places.PlacesService(this.map);if(options.search||options.nearbySearch){var placeSearchRequest={bounds:options.bounds||null,keyword:options.keyword||null,location:options.location||null,name:options.name||null,radius:options.radius||null,rankBy:options.rankBy||null,types:options.types||null};if(options.search){layer.search(placeSearchRequest,options.search);}if(options.nearbySearch){layer.nearbySearch(placeSearchRequest,options.nearbySearch);}}if(options.textSearch){var textSearchRequest={bounds:options.bounds||null,location:options.location||null,query:options.query||null,radius:options.radius||null};layer.textSearch(textSearchRequest,options.textSearch);}break;}if(layer!==undefined){if(typeof layer.setOptions=='function'){layer.setOptions(options);}if(typeof layer.setMap=='function'){layer.setMap(this.map);}return layer;}};GMaps.prototype.removeLayer=function(layer){if(typeof(layer)=="string"&&this.singleLayers[layer]!==undefined){this.singleLayers[layer].setMap(null);delete this.singleLayers[layer];}else{for(var i=0;i<this.layers.length;i++){if(this.layers[i]===layer){this.layers[i].setMap(null);this.layers.splice(i,1);break;}}}};var travelMode,unitSystem;GMaps.prototype.getRoutes=function(options){switch(options.travelMode){case'bicycling':travelMode=google.maps.TravelMode.BICYCLING;break;case'transit':travelMode=google.maps.TravelMode.TRANSIT;break;case'driving':travelMode=google.maps.TravelMode.DRIVING;break;default:travelMode=google.maps.TravelMode.WALKING;break;}if(options.unitSystem==='imperial'){unitSystem=google.maps.UnitSystem.IMPERIAL;}else{unitSystem=google.maps.UnitSystem.METRIC;}var base_options={avoidHighways:false,avoidTolls:false,optimizeWaypoints:false,waypoints:[]},request_options=extend_object(base_options,options);request_options.origin=/string/.test(typeof options.origin)?options.origin:new google.maps.LatLng(options.origin[0],options.origin[1]);request_options.destination=/string/.test(typeof options.destination)?options.destination:new google.maps.LatLng(options.destination[0],options.destination[1]);request_options.travelMode=travelMode;request_options.unitSystem=unitSystem;delete request_options.callback;delete request_options.error;var self=this,service=new google.maps.DirectionsService();service.route(request_options,function(result,status){if(status===google.maps.DirectionsStatus.OK){for(var r in result.routes){if(result.routes.hasOwnProperty(r)){self.routes.push(result.routes[r]);}}if(options.callback){options.callback(self.routes);}}else{if(options.error){options.error(result,status);}}});};GMaps.prototype.removeRoutes=function(){this.routes=[];};GMaps.prototype.getElevations=function(options){options=extend_object({locations:[],path:false,samples:256},options);if(options.locations.length>0){if(options.locations[0].length>0){options.locations=array_flat(array_map([options.locations],arrayToLatLng,false));}}var callback=options.callback;delete options.callback;var service=new google.maps.ElevationService();if(!options.path){delete options.path;delete options.samples;service.getElevationForLocations(options,function(result,status){if(callback&&typeof(callback)==="function"){callback(result,status);}});}else{var pathRequest={path:options.locations,samples:options.samples};service.getElevationAlongPath(pathRequest,function(result,status){if(callback&&typeof(callback)==="function"){callback(result,status);}});}};GMaps.prototype.cleanRoute=GMaps.prototype.removePolylines;GMaps.prototype.drawRoute=function(options){var self=this;this.getRoutes({origin:options.origin,destination:options.destination,travelMode:options.travelMode,waypoints:options.waypoints,unitSystem:options.unitSystem,error:options.error,callback:function(e){if(e.length>0){self.drawPolyline({path:e[e.length-1].overview_path,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight});if(options.callback){options.callback(e[e.length-1]);}}}});};GMaps.prototype.travelRoute=function(options){if(options.origin&&options.destination){this.getRoutes({origin:options.origin,destination:options.destination,travelMode:options.travelMode,waypoints:options.waypoints,error:options.error,callback:function(e){if(e.length>0&&options.start){options.start(e[e.length-1]);}if(e.length>0&&options.step){var route=e[e.length-1];if(route.legs.length>0){var steps=route.legs[0].steps;for(var i=0,step;step=steps[i];i++){step.step_number=i;options.step(step,(route.legs[0].steps.length-1));}}}if(e.length>0&&options.end){options.end(e[e.length-1]);}}});}else if(options.route){if(options.route.legs.length>0){var steps=options.route.legs[0].steps;for(var i=0,step;step=steps[i];i++){step.step_number=i;options.step(step);}}}};GMaps.prototype.drawSteppedRoute=function(options){var self=this;if(options.origin&&options.destination){this.getRoutes({origin:options.origin,destination:options.destination,travelMode:options.travelMode,waypoints:options.waypoints,error:options.error,callback:function(e){if(e.length>0&&options.start){options.start(e[e.length-1]);}if(e.length>0&&options.step){var route=e[e.length-1];if(route.legs.length>0){var steps=route.legs[0].steps;for(var i=0,step;step=steps[i];i++){step.step_number=i;self.drawPolyline({path:step.path,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight});options.step(step,(route.legs[0].steps.length-1));}}}if(e.length>0&&options.end){options.end(e[e.length-1]);}}});}else if(options.route){if(options.route.legs.length>0){var steps=options.route.legs[0].steps;for(var i=0,step;step=steps[i];i++){step.step_number=i;self.drawPolyline({path:step.path,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight});options.step(step);}}}};GMaps.Route=function(options){this.origin=options.origin;this.destination=options.destination;this.waypoints=options.waypoints;this.map=options.map;this.route=options.route;this.step_count=0;this.steps=this.route.legs[0].steps;this.steps_length=this.steps.length;this.polyline=this.map.drawPolyline({path:new google.maps.MVCArray(),strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight}).getPath();};GMaps.Route.prototype.getRoute=function(options){var self=this;this.map.getRoutes({origin:this.origin,destination:this.destination,travelMode:options.travelMode,waypoints:this.waypoints||[],error:options.error,callback:function(){self.route=e[0];if(options.callback){options.callback.call(self);}}});};GMaps.Route.prototype.back=function(){if(this.step_count>0){this.step_count--;var path=this.route.legs[0].steps[this.step_count].path;for(var p in path){if(path.hasOwnProperty(p)){this.polyline.pop();}}}};GMaps.Route.prototype.forward=function(){if(this.step_count<this.steps_length){var path=this.route.legs[0].steps[this.step_count].path;for(var p in path){if(path.hasOwnProperty(p)){this.polyline.push(path[p]);}}this.step_count++;}};GMaps.prototype.checkGeofence=function(lat,lng,fence){return fence.containsLatLng(new google.maps.LatLng(lat,lng));};GMaps.prototype.checkMarkerGeofence=function(marker,outside_callback){if(marker.fences){for(var i=0,fence;fence=marker.fences[i];i++){var pos=marker.getPosition();if(!this.checkGeofence(pos.lat(),pos.lng(),fence)){outside_callback(marker,fence);}}}};GMaps.prototype.toImage=function(options){var options=options||{},static_map_options={};static_map_options['size']=options['size']||[this.el.clientWidth,this.el.clientHeight];static_map_options['lat']=this.getCenter().lat();static_map_options['lng']=this.getCenter().lng();if(this.markers.length>0){static_map_options['markers']=[];for(var i=0;i<this.markers.length;i++){static_map_options['markers'].push({lat:this.markers[i].getPosition().lat(),lng:this.markers[i].getPosition().lng()});}}if(this.polylines.length>0){var polyline=this.polylines[0];static_map_options['polyline']={};static_map_options['polyline']['path']=google.maps.geometry.encoding.encodePath(polyline.getPath());static_map_options['polyline']['strokeColor']=polyline.strokeColor;static_map_options['polyline']['strokeOpacity']=polyline.strokeOpacity;static_map_options['polyline']['strokeWeight']=polyline.strokeWeight;}return GMaps.staticMapURL(static_map_options);};GMaps.staticMapURL=function(options){var parameters=[],data,static_root='http://maps.googleapis.com/maps/api/staticmap';if(options.url){static_root=options.url;delete options.url;}static_root+='?';var markers=options.markers;delete options.markers;if(!markers&&options.marker){markers=[options.marker];delete options.marker;}var styles=options.styles;delete options.styles;var polyline=options.polyline;delete options.polyline;if(options.center){parameters.push('center='+options.center);delete options.center;}else if(options.address){parameters.push('center='+options.address);delete options.address;}else if(options.lat){parameters.push(['center=',options.lat,',',options.lng].join(''));delete options.lat;delete options.lng;}else if(options.visible){var visible=encodeURI(options.visible.join('|'));parameters.push('visible='+visible);}var size=options.size;if(size){if(size.join){size=size.join('x');}delete options.size;}else{size='630x300';}parameters.push('size='+size);if(!options.zoom&&options.zoom!==false){options.zoom=15;}var sensor=options.hasOwnProperty('sensor')?!!options.sensor:true;delete options.sensor;parameters.push('sensor='+sensor);for(var param in options){if(options.hasOwnProperty(param)){parameters.push(param+'='+options[param]);}}if(markers){var marker,loc;for(var i=0;data=markers[i];i++){marker=[];if(data.size&&data.size!=='normal'){marker.push('size:'+data.size);delete data.size;}else if(data.icon){marker.push('icon:'+encodeURI(data.icon));delete data.icon;}if(data.color){marker.push('color:'+data.color.replace('#','0x'));delete data.color;}if(data.label){marker.push('label:'+data.label[0].toUpperCase());delete data.label;}loc=(data.address?data.address:data.lat+','+data.lng);delete data.address;delete data.lat;delete data.lng;for(var param in data){if(data.hasOwnProperty(param)){marker.push(param+':'+data[param]);}}if(marker.length||i===0){marker.push(loc);marker=marker.join('|');parameters.push('markers='+encodeURI(marker));}else{marker=parameters.pop()+encodeURI('|'+loc);parameters.push(marker);}}}if(styles){for(var i=0;i<styles.length;i++){var styleRule=[];if(styles[i].featureType&&styles[i].featureType!='all'){styleRule.push('feature:'+styles[i].featureType);}if(styles[i].elementType&&styles[i].elementType!='all'){styleRule.push('element:'+styles[i].elementType);}for(var j=0;j<styles[i].stylers.length;j++){for(var p in styles[i].stylers[j]){var ruleArg=styles[i].stylers[j][p];if(p=='hue'||p=='color'){ruleArg='0x'+ruleArg.substring(1);}styleRule.push(p+':'+ruleArg);}}var rule=styleRule.join('|');if(rule!=''){parameters.push('style='+rule);}}}function parseColor(color,opacity){if(color[0]==='#'){color=color.replace('#','0x');if(opacity){opacity=parseFloat(opacity);opacity=Math.min(1,Math.max(opacity,0));if(opacity===0){return'0x00000000';}opacity=(opacity*255).toString(16);if(opacity.length===1){opacity+=opacity;}color=color.slice(0,8)+opacity;}}return color;}if(polyline){data=polyline;polyline=[];if(data.strokeWeight){polyline.push('weight:'+parseInt(data.strokeWeight,10));}if(data.strokeColor){var color=parseColor(data.strokeColor,data.strokeOpacity);polyline.push('color:'+color);}if(data.fillColor){var fillcolor=parseColor(data.fillColor,data.fillOpacity);polyline.push('fillcolor:'+fillcolor);}var path=data.path;if(path.join){for(var j=0,pos;pos=path[j];j++){polyline.push(pos.join(','));}}else{polyline.push('enc:'+path);}polyline=polyline.join('|');parameters.push('path='+encodeURI(polyline));}parameters=parameters.join('&');return static_root+parameters;};GMaps.prototype.addMapType=function(mapTypeId,options){if(options.hasOwnProperty("getTileUrl")&&typeof(options["getTileUrl"])=="function"){options.tileSize=options.tileSize||new google.maps.Size(256,256);var mapType=new google.maps.ImageMapType(options);this.map.mapTypes.set(mapTypeId,mapType);}else{throw"'getTileUrl' function required.";}};GMaps.prototype.addOverlayMapType=function(options){if(options.hasOwnProperty("getTile")&&typeof(options["getTile"])=="function"){var overlayMapTypeIndex=options.index;delete options.index;this.map.overlayMapTypes.insertAt(overlayMapTypeIndex,options);}else{throw"'getTile' function required.";}};GMaps.prototype.removeOverlayMapType=function(overlayMapTypeIndex){this.map.overlayMapTypes.removeAt(overlayMapTypeIndex);};GMaps.prototype.addStyle=function(options){var styledMapType=new google.maps.StyledMapType(options.styles,{name:options.styledMapName});this.map.mapTypes.set(options.mapTypeId,styledMapType);};GMaps.prototype.setStyle=function(mapTypeId){this.map.setMapTypeId(mapTypeId);};GMaps.prototype.createPanorama=function(streetview_options){if(!streetview_options.hasOwnProperty('lat')||!streetview_options.hasOwnProperty('lng')){streetview_options.lat=this.getCenter().lat();streetview_options.lng=this.getCenter().lng();}this.panorama=GMaps.createPanorama(streetview_options);this.map.setStreetView(this.panorama);return this.panorama;};GMaps.createPanorama=function(options){var el=getElementById(options.el,options.context);options.position=new google.maps.LatLng(options.lat,options.lng);delete options.el;delete options.context;delete options.lat;delete options.lng;var streetview_events=['closeclick','links_changed','pano_changed','position_changed','pov_changed','resize','visible_changed'],streetview_options=extend_object({visible:true},options);for(var i=0;i<streetview_events.length;i++){delete streetview_options[streetview_events[i]];}var panorama=new google.maps.StreetViewPanorama(el,streetview_options);for(var i=0;i<streetview_events.length;i++){(function(object,name){if(options[name]){google.maps.event.addListener(object,name,function(){options[name].apply(this);});}})(panorama,streetview_events[i]);}return panorama;};GMaps.prototype.on=function(event_name,handler){return GMaps.on(event_name,this,handler);};GMaps.prototype.off=function(event_name){GMaps.off(event_name,this);};GMaps.custom_events=['marker_added','marker_removed','polyline_added','polyline_removed','polygon_added','polygon_removed','geolocated','geolocation_failed'];GMaps.on=function(event_name,object,handler){if(GMaps.custom_events.indexOf(event_name)==-1){return google.maps.event.addListener(object,event_name,handler);}else{var registered_event={handler:handler,eventName:event_name};object.registered_events[event_name]=object.registered_events[event_name]||[];object.registered_events[event_name].push(registered_event);return registered_event;}};GMaps.off=function(event_name,object){if(GMaps.custom_events.indexOf(event_name)==-1){google.maps.event.clearListeners(object,event_name);}else{object.registered_events[event_name]=[];}};GMaps.fire=function(event_name,object,scope){if(GMaps.custom_events.indexOf(event_name)==-1){google.maps.event.trigger(object,event_name,Array.prototype.slice.apply(arguments).slice(2));}else{if(event_name in scope.registered_events){var firing_events=scope.registered_events[event_name];for(var i=0;i<firing_events.length;i++){(function(handler,scope,object){handler.apply(scope,[object]);})(firing_events[i]['handler'],scope,object);}}}};GMaps.geolocate=function(options){var complete_callback=options.always||options.complete;if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){options.success(position);if(complete_callback){complete_callback();}},function(error){options.error(error);if(complete_callback){complete_callback();}},options.options);}else{options.not_supported();if(complete_callback){complete_callback();}}};GMaps.geocode=function(options){this.geocoder=new google.maps.Geocoder();var callback=options.callback;if(options.hasOwnProperty('lat')&&options.hasOwnProperty('lng')){options.latLng=new google.maps.LatLng(options.lat,options.lng);}delete options.lat;delete options.lng;delete options.callback;this.geocoder.geocode(options,function(results,status){callback(results,status);});};if(!google.maps.Polygon.prototype.getBounds){google.maps.Polygon.prototype.getBounds=function(latLng){var bounds=new google.maps.LatLngBounds();var paths=this.getPaths();var path;for(var p=0;p<paths.getLength();p++){path=paths.getAt(p);for(var i=0;i<path.getLength();i++){bounds.extend(path.getAt(i));}}return bounds;};}if(!google.maps.Polygon.prototype.containsLatLng){google.maps.Polygon.prototype.containsLatLng=function(latLng){var bounds=this.getBounds();if(bounds!==null&&!bounds.contains(latLng)){return false;}var inPoly=false;var numPaths=this.getPaths().getLength();for(var p=0;p<numPaths;p++){var path=this.getPaths().getAt(p);var numPoints=path.getLength();var j=numPoints-1;for(var i=0;i<numPoints;i++){var vertex1=path.getAt(i);var vertex2=path.getAt(j);if(vertex1.lng()<latLng.lng()&&vertex2.lng()>=latLng.lng()||vertex2.lng()<latLng.lng()&&vertex1.lng()>=latLng.lng()){if(vertex1.lat()+(latLng.lng()-vertex1.lng())/(vertex2.lng()-vertex1.lng())*(vertex2.lat()-vertex1.lat())<latLng.lat()){inPoly=!inPoly;}}j=i;}}return inPoly;};}google.maps.LatLngBounds.prototype.containsLatLng=function(latLng){return this.contains(latLng);};google.maps.Marker.prototype.setFences=function(fences){this.fences=fences;};google.maps.Marker.prototype.addFence=function(fence){this.fences.push(fence);};google.maps.Marker.prototype.getId=function(){return this['__gm_id'];};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(searchElement){"use strict";if(this==null){throw new TypeError();}var t=Object(this);var len=t.length>>>0;if(len===0){return-1;}var n=0;if(arguments.length>1){n=Number(arguments[1]);if(n!=n){n=0;}else if(n!=0&&n!=Infinity&&n!=-Infinity){n=(n>0||-1)*Math.floor(Math.abs(n));}}if(n>=len){return-1;}var k=n>=0?n:Math.max(len-Math.abs(n),0);for(;k<len;k++){if(k in t&&t[k]===searchElement){return k;}}return-1;}}};
/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under the MIT license
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.7",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a("#"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.7",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c).prop(c,!0)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c).prop(c,!1))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target).closest(".btn");b.call(d,"toggle"),a(c.target).is('input[type="radio"], input[type="checkbox"]')||(c.preventDefault(),d.is("input,button")?d.trigger("focus"):d.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1||a<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){if(!this.sliding)return this.slide("next")},c.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.7",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);if(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),!c.isInStateTrue())return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);if(this.$element.trigger(g),!g.isDefaultPrevented())return f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.7",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.7",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){
    this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return e<c&&"top";if("bottom"==this.affixed)return null!=c?!(e+this.unpin<=f.top)&&"bottom":!(e+g<=a-d)&&"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&e<=c?"top":null!=d&&i+j>=a-d&&"bottom"},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);
!function($){var Slider=function(element,options){this.element=$(element);this.picker=$('<div class="slider">'+'<div class="slider-track">'+'<div class="slider-selection"></div>'+'<div class="slider-handle"></div>'+'<div class="slider-handle"></div>'+'</div>'+'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'+'</div>').insertBefore(this.element).append(this.element);this.id=this.element.data('slider-id')||options.id;if(this.id){this.picker[0].id=this.id;}if(typeof Modernizr!=='undefined'&&Modernizr.touch){this.touchCapable=true;}var tooltip=this.element.data('slider-tooltip')||options.tooltip;this.tooltip=this.picker.find('.tooltip');this.tooltipInner=this.tooltip.find('div.tooltip-inner');this.orientation=this.element.data('slider-orientation')||options.orientation;switch(this.orientation){case'vertical':this.picker.addClass('slider-vertical');this.stylePos='top';this.mousePos='pageY';this.sizePos='offsetHeight';this.tooltip.addClass('right')[0].style.left='100%';break;default:this.picker.addClass('slider-horizontal').css('width',this.element.outerWidth());this.orientation='horizontal';this.stylePos='left';this.mousePos='pageX';this.sizePos='offsetWidth';this.tooltip.addClass('top')[0].style.top=-this.tooltip.outerHeight()-14+'px';break;}this.min=this.element.data('slider-min')||options.min;this.max=this.element.data('slider-max')||options.max;this.step=this.element.data('slider-step')||options.step;this.value=this.element.data('slider-value')||options.value;if(this.value[1]){this.range=true;}this.selection=this.element.data('slider-selection')||options.selection;this.selectionEl=this.picker.find('.slider-selection');if(this.selection==='none'){this.selectionEl.addClass('hide');}this.selectionElStyle=this.selectionEl[0].style;this.handle1=this.picker.find('.slider-handle:first');this.handle1Stype=this.handle1[0].style;this.handle2=this.picker.find('.slider-handle:last');this.handle2Stype=this.handle2[0].style;var handle=this.element.data('slider-handle')||options.handle;switch(handle){case'round':this.handle1.addClass('round');this.handle2.addClass('round');break;case'triangle':this.handle1.addClass('triangle');this.handle2.addClass('triangle');break;}if(this.range){this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0]));this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]));}else{this.value=[Math.max(this.min,Math.min(this.max,this.value))];this.handle2.addClass('hide');if(this.selection=='after'){this.value[1]=this.max;}else{this.value[1]=this.min;}}this.diff=this.max-this.min;this.percentage=[(this.value[0]-this.min)*100/this.diff,(this.value[1]-this.min)*100/this.diff,this.step*100/this.diff];this.offset=this.picker.offset();this.size=this.picker[0][this.sizePos];this.formater=options.formater;this.layout();if(this.touchCapable){this.picker.on({touchstart:$.proxy(this.mousedown,this)});}else{this.picker.on({mousedown:$.proxy(this.mousedown,this)});}if(tooltip==='show'){this.picker.on({mouseenter:$.proxy(this.showTooltip,this),mouseleave:$.proxy(this.hideTooltip,this)});}else{this.tooltip.addClass('hide');}};Slider.prototype={constructor:Slider,over:false,inDrag:false,showTooltip:function(){this.tooltip.addClass('in');this.over=true;},hideTooltip:function(){if(this.inDrag===false){this.tooltip.removeClass('in');}this.over=false;},layout:function(){this.handle1Stype[this.stylePos]=this.percentage[0]+'%';this.handle2Stype[this.stylePos]=this.percentage[1]+'%';if(this.orientation=='vertical'){this.selectionElStyle.top=Math.min(this.percentage[0],this.percentage[1])+'%';this.selectionElStyle.height=Math.abs(this.percentage[0]-this.percentage[1])+'%';}else{this.selectionElStyle.left=Math.min(this.percentage[0],this.percentage[1])+'%';this.selectionElStyle.width=Math.abs(this.percentage[0]-this.percentage[1])+'%';}if(this.range){this.tooltipInner.text(this.formater(this.value[0])+' : '+this.formater(this.value[1]));this.tooltip[0].style[this.stylePos]=this.size*(this.percentage[0]+(this.percentage[1]-this.percentage[0])/2)/100-(this.orientation==='vertical'?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+'px';}else{this.tooltipInner.text(this.formater(this.value[0]));this.tooltip[0].style[this.stylePos]=this.size*this.percentage[0]/100-(this.orientation==='vertical'?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+'px';}},mousedown:function(ev){if(this.touchCapable&&ev.type==='touchstart'){ev=ev.originalEvent;}this.offset=this.picker.offset();this.size=this.picker[0][this.sizePos];var percentage=this.getPercentage(ev);if(this.range){var diff1=Math.abs(this.percentage[0]-percentage);var diff2=Math.abs(this.percentage[1]-percentage);this.dragged=(diff1<diff2)?0:1;}else{this.dragged=0;}this.percentage[this.dragged]=percentage;this.layout();if(this.touchCapable){$(document).on({touchmove:$.proxy(this.mousemove,this),touchend:$.proxy(this.mouseup,this)});}else{$(document).on({mousemove:$.proxy(this.mousemove,this),mouseup:$.proxy(this.mouseup,this)});}this.inDrag=true;var val=this.calculateValue();this.element.trigger({type:'slideStart',value:val}).trigger({type:'slide',value:val});return false;},mousemove:function(ev){if(this.touchCapable&&ev.type==='touchmove'){ev=ev.originalEvent;}var percentage=this.getPercentage(ev);if(this.range){if(this.dragged===0&&this.percentage[1]<percentage){this.percentage[0]=this.percentage[1];this.dragged=1;}else if(this.dragged===1&&this.percentage[0]>percentage){this.percentage[1]=this.percentage[0];this.dragged=0;}}this.percentage[this.dragged]=percentage;this.layout();var val=this.calculateValue();this.element.trigger({type:'slide',value:val}).data('value',val).prop('value',val);return false;},mouseup:function(ev){if(this.touchCapable){$(document).off({touchmove:this.mousemove,touchend:this.mouseup});}else{$(document).off({mousemove:this.mousemove,mouseup:this.mouseup});}this.inDrag=false;if(this.over==false){this.hideTooltip();}this.element;var val=this.calculateValue();this.element.trigger({type:'slideStop',value:val}).data('value',val).prop('value',val);return false;},calculateValue:function(){var val;if(this.range){val=[(this.min+Math.round((this.diff*this.percentage[0]/100)/this.step)*this.step),(this.min+Math.round((this.diff*this.percentage[1]/100)/this.step)*this.step)];this.value=val;}else{val=(this.min+Math.round((this.diff*this.percentage[0]/100)/this.step)*this.step);this.value=[val,this.value[1]];}return val;},getPercentage:function(ev){if(this.touchCapable){ev=ev.touches[0];}var percentage=(ev[this.mousePos]-this.offset[this.stylePos])*100/this.size;percentage=Math.round(percentage/this.percentage[2])*this.percentage[2];return Math.max(0,Math.min(100,percentage));},getValue:function(){if(this.range){return this.value;}return this.value[0];},setValue:function(val){this.value=val;if(this.range){this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0]));this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]));}else{this.value=[Math.max(this.min,Math.min(this.max,this.value))];this.handle2.addClass('hide');if(this.selection=='after'){this.value[1]=this.max;}else{this.value[1]=this.min;}}this.diff=this.max-this.min;this.percentage=[(this.value[0]-this.min)*100/this.diff,(this.value[1]-this.min)*100/this.diff,this.step*100/this.diff];this.layout();}};$.fn.slider=function(option,val){return this.each(function(){var $this=$(this),data=$this.data('slider'),options=typeof option==='object'&&option;if(!data){$this.data('slider',(data=new Slider(this,$.extend({},$.fn.slider.defaults,options))));}if(typeof option=='string'){data[option](val);}})};$.fn.slider.defaults={min:0,max:10,step:1,orientation:'horizontal',value:5,selection:'before',tooltip:'show',handle:'round',formater:function(value){return value;}};$.fn.slider.Constructor=Slider;}(window.jQuery);

!function(e){"undefined"!=typeof module&&module.exports?module.exports=e:e(jQuery,window,document)}(function(e){!function(t){var o="function"==typeof define&&define.amd,a="undefined"!=typeof module&&module.exports,n="https:"==document.location.protocol?"https:":"http:",i="cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.12/jquery.mousewheel.min.js";o||(a?require("jquery-mousewheel")(e):e.event.special.mousewheel||e("head").append(decodeURI("%3Cscript src="+n+"//"+i+"%3E%3C/script%3E"))),t()}(function(){var t,o="mCustomScrollbar",a="mCS",n=".mCustomScrollbar",i={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},r=0,l={},s=window.attachEvent&&!window.addEventListener?1:0,c=!1,d=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],u={init:function(t){var t=e.extend(!0,{},i,t),o=f.call(this);if(t.live){var s=t.liveSelector||this.selector||n,c=e(s);if("off"===t.live)return void m(s);l[s]=setTimeout(function(){c.mCustomScrollbar(t),"once"===t.live&&c.length&&m(s)},500)}else m(s);return t.setWidth=t.set_width?t.set_width:t.setWidth,t.setHeight=t.set_height?t.set_height:t.setHeight,t.axis=t.horizontalScroll?"x":p(t.axis),t.scrollInertia=t.scrollInertia>0&&t.scrollInertia<17?17:t.scrollInertia,"object"!=typeof t.mouseWheel&&1==t.mouseWheel&&(t.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),t.mouseWheel.scrollAmount=t.mouseWheelPixels?t.mouseWheelPixels:t.mouseWheel.scrollAmount,t.mouseWheel.normalizeDelta=t.advanced.normalizeMouseWheelDelta?t.advanced.normalizeMouseWheelDelta:t.mouseWheel.normalizeDelta,t.scrollButtons.scrollType=g(t.scrollButtons.scrollType),h(t),e(o).each(function(){var o=e(this);if(!o.data(a)){o.data(a,{idx:++r,opt:t,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:o.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var n=o.data(a),i=n.opt,l=o.data("mcs-axis"),s=o.data("mcs-scrollbar-position"),c=o.data("mcs-theme");l&&(i.axis=l),s&&(i.scrollbarPosition=s),c&&(i.theme=c,h(i)),v.call(this),n&&i.callbacks.onCreate&&"function"==typeof i.callbacks.onCreate&&i.callbacks.onCreate.call(this),e("#mCSB_"+n.idx+"_container img:not(."+d[2]+")").addClass(d[2]),u.update.call(null,o)}})},update:function(t,o){var n=t||f.call(this);return e(n).each(function(){var t=e(this);if(t.data(a)){var n=t.data(a),i=n.opt,r=e("#mCSB_"+n.idx+"_container"),l=e("#mCSB_"+n.idx),s=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")];if(!r.length)return;n.tweenRunning&&N(t),o&&n&&i.callbacks.onBeforeUpdate&&"function"==typeof i.callbacks.onBeforeUpdate&&i.callbacks.onBeforeUpdate.call(this),t.hasClass(d[3])&&t.removeClass(d[3]),t.hasClass(d[4])&&t.removeClass(d[4]),l.height()!==t.height()&&l.css("max-height",t.height()),_.call(this),"y"===i.axis||i.advanced.autoExpandHorizontalScroll||r.css("width",x(r)),n.overflowed=y.call(this),M.call(this),i.autoDraggerLength&&S.call(this),b.call(this),T.call(this);var c=[Math.abs(r[0].offsetTop),Math.abs(r[0].offsetLeft)];"x"!==i.axis&&(n.overflowed[0]?s[0].height()>s[0].parent().height()?B.call(this):(V(t,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}),n.contentReset.y=null):(B.call(this),"y"===i.axis?k.call(this):"yx"===i.axis&&n.overflowed[1]&&V(t,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==i.axis&&(n.overflowed[1]?s[1].width()>s[1].parent().width()?B.call(this):(V(t,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}),n.contentReset.x=null):(B.call(this),"x"===i.axis?k.call(this):"yx"===i.axis&&n.overflowed[0]&&V(t,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),o&&n&&(2===o&&i.callbacks.onImageLoad&&"function"==typeof i.callbacks.onImageLoad?i.callbacks.onImageLoad.call(this):3===o&&i.callbacks.onSelectorChange&&"function"==typeof i.callbacks.onSelectorChange?i.callbacks.onSelectorChange.call(this):i.callbacks.onUpdate&&"function"==typeof i.callbacks.onUpdate&&i.callbacks.onUpdate.call(this)),j.call(this)}})},scrollTo:function(t,o){if("undefined"!=typeof t&&null!=t){var n=f.call(this);return e(n).each(function(){var n=e(this);if(n.data(a)){var i=n.data(a),r=i.opt,l={trigger:"external",scrollInertia:r.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},s=e.extend(!0,{},l,o),c=q.call(this,t),d=s.scrollInertia>0&&s.scrollInertia<17?17:s.scrollInertia;c[0]=Y.call(this,c[0],"y"),c[1]=Y.call(this,c[1],"x"),s.moveDragger&&(c[0]*=i.scrollRatio.y,c[1]*=i.scrollRatio.x),s.dur=d,setTimeout(function(){null!==c[0]&&"undefined"!=typeof c[0]&&"x"!==r.axis&&i.overflowed[0]&&(s.dir="y",s.overwrite="all",V(n,c[0].toString(),s)),null!==c[1]&&"undefined"!=typeof c[1]&&"y"!==r.axis&&i.overflowed[1]&&(s.dir="x",s.overwrite="none",V(n,c[1].toString(),s))},s.timeout)}})}},stop:function(){var t=f.call(this);return e(t).each(function(){var t=e(this);t.data(a)&&N(t)})},disable:function(t){var o=f.call(this);return e(o).each(function(){var o=e(this);if(o.data(a)){{o.data(a)}j.call(this,"remove"),k.call(this),t&&B.call(this),M.call(this,!0),o.addClass(d[3])}})},destroy:function(){var t=f.call(this);return e(t).each(function(){var n=e(this);if(n.data(a)){var i=n.data(a),r=i.opt,l=e("#mCSB_"+i.idx),s=e("#mCSB_"+i.idx+"_container"),c=e(".mCSB_"+i.idx+"_scrollbar");r.live&&m(r.liveSelector||e(t).selector),j.call(this,"remove"),k.call(this),B.call(this),n.removeData(a),K(this,"mcs"),c.remove(),s.find("img."+d[2]).removeClass(d[2]),l.replaceWith(s.contents()),n.removeClass(o+" _"+a+"_"+i.idx+" "+d[6]+" "+d[7]+" "+d[5]+" "+d[3]).addClass(d[4])}})}},f=function(){return"object"!=typeof e(this)||e(this).length<1?n:this},h=function(t){var o=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],a=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],n=["minimal","minimal-dark"],i=["minimal","minimal-dark"],r=["minimal","minimal-dark"];t.autoDraggerLength=e.inArray(t.theme,o)>-1?!1:t.autoDraggerLength,t.autoExpandScrollbar=e.inArray(t.theme,a)>-1?!1:t.autoExpandScrollbar,t.scrollButtons.enable=e.inArray(t.theme,n)>-1?!1:t.scrollButtons.enable,t.autoHideScrollbar=e.inArray(t.theme,i)>-1?!0:t.autoHideScrollbar,t.scrollbarPosition=e.inArray(t.theme,r)>-1?"outside":t.scrollbarPosition},m=function(e){l[e]&&(clearTimeout(l[e]),K(l,e))},p=function(e){return"yx"===e||"xy"===e||"auto"===e?"yx":"x"===e||"horizontal"===e?"x":"y"},g=function(e){return"stepped"===e||"pixels"===e||"step"===e||"click"===e?"stepped":"stepless"},v=function(){var t=e(this),n=t.data(a),i=n.opt,r=i.autoExpandScrollbar?" "+d[1]+"_expand":"",l=["<div id='mCSB_"+n.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+n.idx+"_scrollbar mCS-"+i.theme+" mCSB_scrollTools_vertical"+r+"'><div class='"+d[12]+"'><div id='mCSB_"+n.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+n.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+n.idx+"_scrollbar mCS-"+i.theme+" mCSB_scrollTools_horizontal"+r+"'><div class='"+d[12]+"'><div id='mCSB_"+n.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],s="yx"===i.axis?"mCSB_vertical_horizontal":"x"===i.axis?"mCSB_horizontal":"mCSB_vertical",c="yx"===i.axis?l[0]+l[1]:"x"===i.axis?l[1]:l[0],u="yx"===i.axis?"<div id='mCSB_"+n.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",f=i.autoHideScrollbar?" "+d[6]:"",h="x"!==i.axis&&"rtl"===n.langDir?" "+d[7]:"";i.setWidth&&t.css("width",i.setWidth),i.setHeight&&t.css("height",i.setHeight),i.setLeft="y"!==i.axis&&"rtl"===n.langDir?"989999px":i.setLeft,t.addClass(o+" _"+a+"_"+n.idx+f+h).wrapInner("<div id='mCSB_"+n.idx+"' class='mCustomScrollBox mCS-"+i.theme+" "+s+"'><div id='mCSB_"+n.idx+"_container' class='mCSB_container' style='position:relative; top:"+i.setTop+"; left:"+i.setLeft+";' dir="+n.langDir+" /></div>");var m=e("#mCSB_"+n.idx),p=e("#mCSB_"+n.idx+"_container");"y"===i.axis||i.advanced.autoExpandHorizontalScroll||p.css("width",x(p)),"outside"===i.scrollbarPosition?("static"===t.css("position")&&t.css("position","relative"),t.css("overflow","visible"),m.addClass("mCSB_outside").after(c)):(m.addClass("mCSB_inside").append(c),p.wrap(u)),w.call(this);var g=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")];g[0].css("min-height",g[0].height()),g[1].css("min-width",g[1].width())},x=function(t){var o=[t[0].scrollWidth,Math.max.apply(Math,t.children().map(function(){return e(this).outerWidth(!0)}).get())],a=t.parent().width();return o[0]>a?o[0]:o[1]>a?o[1]:"100%"},_=function(){var t=e(this),o=t.data(a),n=o.opt,i=e("#mCSB_"+o.idx+"_container");if(n.advanced.autoExpandHorizontalScroll&&"y"!==n.axis){i.css({width:"auto","min-width":0,"overflow-x":"scroll"});var r=Math.ceil(i[0].scrollWidth);3===n.advanced.autoExpandHorizontalScroll||2!==n.advanced.autoExpandHorizontalScroll&&r>i.parent().width()?i.css({width:r,"min-width":"100%","overflow-x":"inherit"}):i.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(i[0].getBoundingClientRect().right+.4)-Math.floor(i[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},w=function(){var t=e(this),o=t.data(a),n=o.opt,i=e(".mCSB_"+o.idx+"_scrollbar:first"),r=ee(n.scrollButtons.tabindex)?"tabindex='"+n.scrollButtons.tabindex+"'":"",l=["<a href='#' class='"+d[13]+"' oncontextmenu='return false;' "+r+" />","<a href='#' class='"+d[14]+"' oncontextmenu='return false;' "+r+" />","<a href='#' class='"+d[15]+"' oncontextmenu='return false;' "+r+" />","<a href='#' class='"+d[16]+"' oncontextmenu='return false;' "+r+" />"],s=["x"===n.axis?l[2]:l[0],"x"===n.axis?l[3]:l[1],l[2],l[3]];n.scrollButtons.enable&&i.prepend(s[0]).append(s[1]).next(".mCSB_scrollTools").prepend(s[2]).append(s[3])},S=function(){var t=e(this),o=t.data(a),n=e("#mCSB_"+o.idx),i=e("#mCSB_"+o.idx+"_container"),r=[e("#mCSB_"+o.idx+"_dragger_vertical"),e("#mCSB_"+o.idx+"_dragger_horizontal")],l=[n.height()/i.outerHeight(!1),n.width()/i.outerWidth(!1)],c=[parseInt(r[0].css("min-height")),Math.round(l[0]*r[0].parent().height()),parseInt(r[1].css("min-width")),Math.round(l[1]*r[1].parent().width())],d=s&&c[1]<c[0]?c[0]:c[1],u=s&&c[3]<c[2]?c[2]:c[3];r[0].css({height:d,"max-height":r[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":c[0]+"px"}),r[1].css({width:u,"max-width":r[1].parent().width()-10})},b=function(){var t=e(this),o=t.data(a),n=e("#mCSB_"+o.idx),i=e("#mCSB_"+o.idx+"_container"),r=[e("#mCSB_"+o.idx+"_dragger_vertical"),e("#mCSB_"+o.idx+"_dragger_horizontal")],l=[i.outerHeight(!1)-n.height(),i.outerWidth(!1)-n.width()],s=[l[0]/(r[0].parent().height()-r[0].height()),l[1]/(r[1].parent().width()-r[1].width())];o.scrollRatio={y:s[0],x:s[1]}},C=function(e,t,o){var a=o?d[0]+"_expanded":"",n=e.closest(".mCSB_scrollTools");"active"===t?(e.toggleClass(d[0]+" "+a),n.toggleClass(d[1]),e[0]._draggable=e[0]._draggable?0:1):e[0]._draggable||("hide"===t?(e.removeClass(d[0]),n.removeClass(d[1])):(e.addClass(d[0]),n.addClass(d[1])))},y=function(){var t=e(this),o=t.data(a),n=e("#mCSB_"+o.idx),i=e("#mCSB_"+o.idx+"_container"),r=null==o.overflowed?i.height():i.outerHeight(!1),l=null==o.overflowed?i.width():i.outerWidth(!1),s=i[0].scrollHeight,c=i[0].scrollWidth;return s>r&&(r=s),c>l&&(l=c),[r>n.height(),l>n.width()]},B=function(){var t=e(this),o=t.data(a),n=o.opt,i=e("#mCSB_"+o.idx),r=e("#mCSB_"+o.idx+"_container"),l=[e("#mCSB_"+o.idx+"_dragger_vertical"),e("#mCSB_"+o.idx+"_dragger_horizontal")];if(N(t),("x"!==n.axis&&!o.overflowed[0]||"y"===n.axis&&o.overflowed[0])&&(l[0].add(r).css("top",0),V(t,"_resetY")),"y"!==n.axis&&!o.overflowed[1]||"x"===n.axis&&o.overflowed[1]){var s=dx=0;"rtl"===o.langDir&&(s=i.width()-r.outerWidth(!1),dx=Math.abs(s/o.scrollRatio.x)),r.css("left",s),l[1].css("left",dx),V(t,"_resetX")}},T=function(){function t(){r=setTimeout(function(){e.event.special.mousewheel?(clearTimeout(r),E.call(o[0])):t()},100)}var o=e(this),n=o.data(a),i=n.opt;if(!n.bindEvents){if(I.call(this),i.contentTouchScroll&&R.call(this),D.call(this),i.mouseWheel.enable){var r;t()}z.call(this),P.call(this),i.advanced.autoScrollOnFocus&&A.call(this),i.scrollButtons.enable&&H.call(this),i.keyboard.enable&&U.call(this),n.bindEvents=!0}},k=function(){var t=e(this),o=t.data(a),n=o.opt,i=a+"_"+o.idx,r=".mCSB_"+o.idx+"_scrollbar",l=e("#mCSB_"+o.idx+",#mCSB_"+o.idx+"_container,#mCSB_"+o.idx+"_container_wrapper,"+r+" ."+d[12]+",#mCSB_"+o.idx+"_dragger_vertical,#mCSB_"+o.idx+"_dragger_horizontal,"+r+">a"),s=e("#mCSB_"+o.idx+"_container");n.advanced.releaseDraggableSelectors&&l.add(e(n.advanced.releaseDraggableSelectors)),o.bindEvents&&(e(document).unbind("."+i),l.each(function(){e(this).unbind("."+i)}),clearTimeout(t[0]._focusTimeout),K(t[0],"_focusTimeout"),clearTimeout(o.sequential.step),K(o.sequential,"step"),clearTimeout(s[0].onCompleteTimeout),K(s[0],"onCompleteTimeout"),o.bindEvents=!1)},M=function(t){var o=e(this),n=o.data(a),i=n.opt,r=e("#mCSB_"+n.idx+"_container_wrapper"),l=r.length?r:e("#mCSB_"+n.idx+"_container"),s=[e("#mCSB_"+n.idx+"_scrollbar_vertical"),e("#mCSB_"+n.idx+"_scrollbar_horizontal")],c=[s[0].find(".mCSB_dragger"),s[1].find(".mCSB_dragger")];"x"!==i.axis&&(n.overflowed[0]&&!t?(s[0].add(c[0]).add(s[0].children("a")).css("display","block"),l.removeClass(d[8]+" "+d[10])):(i.alwaysShowScrollbar?(2!==i.alwaysShowScrollbar&&c[0].css("display","none"),l.removeClass(d[10])):(s[0].css("display","none"),l.addClass(d[10])),l.addClass(d[8]))),"y"!==i.axis&&(n.overflowed[1]&&!t?(s[1].add(c[1]).add(s[1].children("a")).css("display","block"),l.removeClass(d[9]+" "+d[11])):(i.alwaysShowScrollbar?(2!==i.alwaysShowScrollbar&&c[1].css("display","none"),l.removeClass(d[11])):(s[1].css("display","none"),l.addClass(d[11])),l.addClass(d[9]))),n.overflowed[0]||n.overflowed[1]?o.removeClass(d[5]):o.addClass(d[5])},O=function(e){var t=e.type;switch(t){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return e.target.ownerDocument!==document?[e.originalEvent.screenY,e.originalEvent.screenX,!1]:[e.originalEvent.pageY,e.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var o=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],a=e.originalEvent.touches.length||e.originalEvent.changedTouches.length;return e.target.ownerDocument!==document?[o.screenY,o.screenX,a>1]:[o.pageY,o.pageX,a>1];default:return[e.pageY,e.pageX,!1]}},I=function(){function t(e){var t=m.find("iframe");if(t.length){var o=e?"auto":"none";t.css("pointer-events",o)}}function o(e,t,o,a){if(m[0].idleTimer=u.scrollInertia<233?250:0,n.attr("id")===h[1])var i="x",r=(n[0].offsetLeft-t+a)*d.scrollRatio.x;else var i="y",r=(n[0].offsetTop-e+o)*d.scrollRatio.y;V(l,r.toString(),{dir:i,drag:!0})}var n,i,r,l=e(this),d=l.data(a),u=d.opt,f=a+"_"+d.idx,h=["mCSB_"+d.idx+"_dragger_vertical","mCSB_"+d.idx+"_dragger_horizontal"],m=e("#mCSB_"+d.idx+"_container"),p=e("#"+h[0]+",#"+h[1]),g=u.advanced.releaseDraggableSelectors?p.add(e(u.advanced.releaseDraggableSelectors)):p;p.bind("mousedown."+f+" touchstart."+f+" pointerdown."+f+" MSPointerDown."+f,function(o){if(o.stopImmediatePropagation(),o.preventDefault(),Z(o)){c=!0,s&&(document.onselectstart=function(){return!1}),t(!1),N(l),n=e(this);var a=n.offset(),d=O(o)[0]-a.top,f=O(o)[1]-a.left,h=n.height()+a.top,m=n.width()+a.left;h>d&&d>0&&m>f&&f>0&&(i=d,r=f),C(n,"active",u.autoExpandScrollbar)}}).bind("touchmove."+f,function(e){e.stopImmediatePropagation(),e.preventDefault();var t=n.offset(),a=O(e)[0]-t.top,l=O(e)[1]-t.left;o(i,r,a,l)}),e(document).bind("mousemove."+f+" pointermove."+f+" MSPointerMove."+f,function(e){if(n){var t=n.offset(),a=O(e)[0]-t.top,l=O(e)[1]-t.left;if(i===a)return;o(i,r,a,l)}}).add(g).bind("mouseup."+f+" touchend."+f+" pointerup."+f+" MSPointerUp."+f,function(e){n&&(C(n,"active",u.autoExpandScrollbar),n=null),c=!1,s&&(document.onselectstart=null),t(!0)})},R=function(){function o(e){if(!$(e)||c||O(e)[2])return void(t=0);t=1,b=0,C=0,d=1,y.removeClass("mCS_touch_action");var o=I.offset();u=O(e)[0]-o.top,f=O(e)[1]-o.left,A=[O(e)[0],O(e)[1]]}function n(e){if($(e)&&!c&&!O(e)[2]&&(e.stopImmediatePropagation(),(!C||b)&&d)){g=G();var t=M.offset(),o=O(e)[0]-t.top,a=O(e)[1]-t.left,n="mcsLinearOut";if(D.push(o),E.push(a),A[2]=Math.abs(O(e)[0]-A[0]),A[3]=Math.abs(O(e)[1]-A[1]),B.overflowed[0])var i=R[0].parent().height()-R[0].height(),r=u-o>0&&o-u>-(i*B.scrollRatio.y)&&(2*A[3]<A[2]||"yx"===T.axis);if(B.overflowed[1])var l=R[1].parent().width()-R[1].width(),h=f-a>0&&a-f>-(l*B.scrollRatio.x)&&(2*A[2]<A[3]||"yx"===T.axis);r||h?(U||e.preventDefault(),b=1):(C=1,y.addClass("mCS_touch_action")),U&&e.preventDefault(),w="yx"===T.axis?[u-o,f-a]:"x"===T.axis?[null,f-a]:[u-o,null],I[0].idleTimer=250,B.overflowed[0]&&s(w[0],L,n,"y","all",!0),B.overflowed[1]&&s(w[1],L,n,"x",z,!0)}}function i(e){if(!$(e)||c||O(e)[2])return void(t=0);t=1,e.stopImmediatePropagation(),N(y),p=G();var o=M.offset();h=O(e)[0]-o.top,m=O(e)[1]-o.left,D=[],E=[]}function r(e){if($(e)&&!c&&!O(e)[2]){d=0,e.stopImmediatePropagation(),b=0,C=0,v=G();var t=M.offset(),o=O(e)[0]-t.top,a=O(e)[1]-t.left;if(!(v-g>30)){_=1e3/(v-p);var n="mcsEaseOut",i=2.5>_,r=i?[D[D.length-2],E[E.length-2]]:[0,0];x=i?[o-r[0],a-r[1]]:[o-h,a-m];var u=[Math.abs(x[0]),Math.abs(x[1])];_=i?[Math.abs(x[0]/4),Math.abs(x[1]/4)]:[_,_];var f=[Math.abs(I[0].offsetTop)-x[0]*l(u[0]/_[0],_[0]),Math.abs(I[0].offsetLeft)-x[1]*l(u[1]/_[1],_[1])];w="yx"===T.axis?[f[0],f[1]]:"x"===T.axis?[null,f[1]]:[f[0],null],S=[4*u[0]+T.scrollInertia,4*u[1]+T.scrollInertia];var y=parseInt(T.contentTouchScroll)||0;w[0]=u[0]>y?w[0]:0,w[1]=u[1]>y?w[1]:0,B.overflowed[0]&&s(w[0],S[0],n,"y",z,!1),B.overflowed[1]&&s(w[1],S[1],n,"x",z,!1)}}}function l(e,t){var o=[1.5*t,2*t,t/1.5,t/2];return e>90?t>4?o[0]:o[3]:e>60?t>3?o[3]:o[2]:e>30?t>8?o[1]:t>6?o[0]:t>4?t:o[2]:t>8?t:o[3]}function s(e,t,o,a,n,i){e&&V(y,e.toString(),{dur:t,scrollEasing:o,dir:a,overwrite:n,drag:i})}var d,u,f,h,m,p,g,v,x,_,w,S,b,C,y=e(this),B=y.data(a),T=B.opt,k=a+"_"+B.idx,M=e("#mCSB_"+B.idx),I=e("#mCSB_"+B.idx+"_container"),R=[e("#mCSB_"+B.idx+"_dragger_vertical"),e("#mCSB_"+B.idx+"_dragger_horizontal")],D=[],E=[],L=0,z="yx"===T.axis?"none":"all",A=[],P=I.find("iframe"),H=["touchstart."+k+" pointerdown."+k+" MSPointerDown."+k,"touchmove."+k+" pointermove."+k+" MSPointerMove."+k,"touchend."+k+" pointerup."+k+" MSPointerUp."+k],U=void 0!==document.body.style.touchAction;I.bind(H[0],function(e){o(e)}).bind(H[1],function(e){n(e)}),M.bind(H[0],function(e){i(e)}).bind(H[2],function(e){r(e)}),P.length&&P.each(function(){e(this).load(function(){W(this)&&e(this.contentDocument||this.contentWindow.document).bind(H[0],function(e){o(e),i(e)}).bind(H[1],function(e){n(e)}).bind(H[2],function(e){r(e)})})})},D=function(){function o(){return window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function n(e,t,o){d.type=o&&i?"stepped":"stepless",d.scrollAmount=10,F(r,e,t,"mcsLinearOut",o?60:null)}var i,r=e(this),l=r.data(a),s=l.opt,d=l.sequential,u=a+"_"+l.idx,f=e("#mCSB_"+l.idx+"_container"),h=f.parent();f.bind("mousedown."+u,function(e){t||i||(i=1,c=!0)}).add(document).bind("mousemove."+u,function(e){if(!t&&i&&o()){var a=f.offset(),r=O(e)[0]-a.top+f[0].offsetTop,c=O(e)[1]-a.left+f[0].offsetLeft;r>0&&r<h.height()&&c>0&&c<h.width()?d.step&&n("off",null,"stepped"):("x"!==s.axis&&l.overflowed[0]&&(0>r?n("on",38):r>h.height()&&n("on",40)),"y"!==s.axis&&l.overflowed[1]&&(0>c?n("on",37):c>h.width()&&n("on",39)))}}).bind("mouseup."+u+" dragend."+u,function(e){t||(i&&(i=0,n("off",null)),c=!1)})},E=function(){function t(t,a){if(N(o),!L(o,t.target)){var r="auto"!==i.mouseWheel.deltaFactor?parseInt(i.mouseWheel.deltaFactor):s&&t.deltaFactor<100?100:t.deltaFactor||100;if("x"===i.axis||"x"===i.mouseWheel.axis)var d="x",u=[Math.round(r*n.scrollRatio.x),parseInt(i.mouseWheel.scrollAmount)],f="auto"!==i.mouseWheel.scrollAmount?u[1]:u[0]>=l.width()?.9*l.width():u[0],h=Math.abs(e("#mCSB_"+n.idx+"_container")[0].offsetLeft),m=c[1][0].offsetLeft,p=c[1].parent().width()-c[1].width(),g=t.deltaX||t.deltaY||a;else var d="y",u=[Math.round(r*n.scrollRatio.y),parseInt(i.mouseWheel.scrollAmount)],f="auto"!==i.mouseWheel.scrollAmount?u[1]:u[0]>=l.height()?.9*l.height():u[0],h=Math.abs(e("#mCSB_"+n.idx+"_container")[0].offsetTop),m=c[0][0].offsetTop,p=c[0].parent().height()-c[0].height(),g=t.deltaY||a;"y"===d&&!n.overflowed[0]||"x"===d&&!n.overflowed[1]||((i.mouseWheel.invert||t.webkitDirectionInvertedFromDevice)&&(g=-g),i.mouseWheel.normalizeDelta&&(g=0>g?-1:1),(g>0&&0!==m||0>g&&m!==p||i.mouseWheel.preventDefault)&&(t.stopImmediatePropagation(),t.preventDefault()),V(o,(h-g*f).toString(),{dir:d}))}}if(e(this).data(a)){var o=e(this),n=o.data(a),i=n.opt,r=a+"_"+n.idx,l=e("#mCSB_"+n.idx),c=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")],d=e("#mCSB_"+n.idx+"_container").find("iframe");d.length&&d.each(function(){e(this).load(function(){W(this)&&e(this.contentDocument||this.contentWindow.document).bind("mousewheel."+r,function(e,o){t(e,o)})})}),l.bind("mousewheel."+r,function(e,o){t(e,o)})}},W=function(e){var t=null;try{var o=e.contentDocument||e.contentWindow.document;t=o.body.innerHTML}catch(a){}return null!==t},L=function(t,o){var n=o.nodeName.toLowerCase(),i=t.data(a).opt.mouseWheel.disableOver,r=["select","textarea"];return e.inArray(n,i)>-1&&!(e.inArray(n,r)>-1&&!e(o).is(":focus"))},z=function(){var t=e(this),o=t.data(a),n=a+"_"+o.idx,i=e("#mCSB_"+o.idx+"_container"),r=i.parent(),l=e(".mCSB_"+o.idx+"_scrollbar ."+d[12]);l.bind("touchstart."+n+" pointerdown."+n+" MSPointerDown."+n,function(e){c=!0}).bind("touchend."+n+" pointerup."+n+" MSPointerUp."+n,function(e){c=!1}).bind("click."+n,function(a){if(e(a.target).hasClass(d[12])||e(a.target).hasClass("mCSB_draggerRail")){N(t);var n=e(this),l=n.find(".mCSB_dragger");if(n.parent(".mCSB_scrollTools_horizontal").length>0){if(!o.overflowed[1])return;var s="x",c=a.pageX>l.offset().left?-1:1,u=Math.abs(i[0].offsetLeft)-.9*c*r.width()}else{if(!o.overflowed[0])return;var s="y",c=a.pageY>l.offset().top?-1:1,u=Math.abs(i[0].offsetTop)-.9*c*r.height()}V(t,u.toString(),{dir:s,scrollEasing:"mcsEaseInOut"})}})},A=function(){var t=e(this),o=t.data(a),n=o.opt,i=a+"_"+o.idx,r=e("#mCSB_"+o.idx+"_container"),l=r.parent();r.bind("focusin."+i,function(o){var a=e(document.activeElement),i=r.find(".mCustomScrollBox").length,s=0;a.is(n.advanced.autoScrollOnFocus)&&(N(t),clearTimeout(t[0]._focusTimeout),t[0]._focusTimer=i?(s+17)*i:0,t[0]._focusTimeout=setTimeout(function(){var e=[te(a)[0],te(a)[1]],o=[r[0].offsetTop,r[0].offsetLeft],i=[o[0]+e[0]>=0&&o[0]+e[0]<l.height()-a.outerHeight(!1),o[1]+e[1]>=0&&o[0]+e[1]<l.width()-a.outerWidth(!1)],c="yx"!==n.axis||i[0]||i[1]?"all":"none";"x"===n.axis||i[0]||V(t,e[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:c,dur:s}),"y"===n.axis||i[1]||V(t,e[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:c,dur:s})},t[0]._focusTimer))})},P=function(){var t=e(this),o=t.data(a),n=a+"_"+o.idx,i=e("#mCSB_"+o.idx+"_container").parent();i.bind("scroll."+n,function(t){(0!==i.scrollTop()||0!==i.scrollLeft())&&e(".mCSB_"+o.idx+"_scrollbar").css("visibility","hidden")})},H=function(){var t=e(this),o=t.data(a),n=o.opt,i=o.sequential,r=a+"_"+o.idx,l=".mCSB_"+o.idx+"_scrollbar",s=e(l+">a");s.bind("mousedown."+r+" touchstart."+r+" pointerdown."+r+" MSPointerDown."+r+" mouseup."+r+" touchend."+r+" pointerup."+r+" MSPointerUp."+r+" mouseout."+r+" pointerout."+r+" MSPointerOut."+r+" click."+r,function(a){function r(e,o){i.scrollAmount=n.snapAmount||n.scrollButtons.scrollAmount,F(t,e,o)}if(a.preventDefault(),Z(a)){var l=e(this).attr("class");switch(i.type=n.scrollButtons.scrollType,a.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===i.type)return;c=!0,o.tweenRunning=!1,r("on",l);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===i.type)return;c=!1,i.dir&&r("off",l);break;case"click":if("stepped"!==i.type||o.tweenRunning)return;r("on",l)}}})},U=function(){function t(t){function a(e,t){r.type=i.keyboard.scrollType,r.scrollAmount=i.snapAmount||i.keyboard.scrollAmount,"stepped"===r.type&&n.tweenRunning||F(o,e,t)}switch(t.type){case"blur":n.tweenRunning&&r.dir&&a("off",null);break;case"keydown":case"keyup":var l=t.keyCode?t.keyCode:t.which,s="on";if("x"!==i.axis&&(38===l||40===l)||"y"!==i.axis&&(37===l||39===l)){if((38===l||40===l)&&!n.overflowed[0]||(37===l||39===l)&&!n.overflowed[1])return;"keyup"===t.type&&(s="off"),e(document.activeElement).is(u)||(t.preventDefault(),t.stopImmediatePropagation(),a(s,l))}else if(33===l||34===l){if((n.overflowed[0]||n.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type){N(o);var f=34===l?-1:1;if("x"===i.axis||"yx"===i.axis&&n.overflowed[1]&&!n.overflowed[0])var h="x",m=Math.abs(c[0].offsetLeft)-.9*f*d.width();else var h="y",m=Math.abs(c[0].offsetTop)-.9*f*d.height();V(o,m.toString(),{dir:h,scrollEasing:"mcsEaseInOut"})}}else if((35===l||36===l)&&!e(document.activeElement).is(u)&&((n.overflowed[0]||n.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type)){if("x"===i.axis||"yx"===i.axis&&n.overflowed[1]&&!n.overflowed[0])var h="x",m=35===l?Math.abs(d.width()-c.outerWidth(!1)):0;else var h="y",m=35===l?Math.abs(d.height()-c.outerHeight(!1)):0;V(o,m.toString(),{dir:h,scrollEasing:"mcsEaseInOut"})}}}var o=e(this),n=o.data(a),i=n.opt,r=n.sequential,l=a+"_"+n.idx,s=e("#mCSB_"+n.idx),c=e("#mCSB_"+n.idx+"_container"),d=c.parent(),u="input,textarea,select,datalist,keygen,[contenteditable='true']",f=c.find("iframe"),h=["blur."+l+" keydown."+l+" keyup."+l];f.length&&f.each(function(){e(this).load(function(){W(this)&&e(this.contentDocument||this.contentWindow.document).bind(h[0],function(e){t(e)})})}),s.attr("tabindex","0").bind(h[0],function(e){t(e)})},F=function(t,o,n,i,r){function l(e){var o="stepped"!==f.type,a=r?r:e?o?p/1.5:g:1e3/60,n=e?o?7.5:40:2.5,s=[Math.abs(h[0].offsetTop),Math.abs(h[0].offsetLeft)],d=[c.scrollRatio.y>10?10:c.scrollRatio.y,c.scrollRatio.x>10?10:c.scrollRatio.x],u="x"===f.dir[0]?s[1]+f.dir[1]*d[1]*n:s[0]+f.dir[1]*d[0]*n,m="x"===f.dir[0]?s[1]+f.dir[1]*parseInt(f.scrollAmount):s[0]+f.dir[1]*parseInt(f.scrollAmount),v="auto"!==f.scrollAmount?m:u,x=i?i:e?o?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",_=e?!0:!1;return e&&17>a&&(v="x"===f.dir[0]?s[1]:s[0]),V(t,v.toString(),{dir:f.dir[0],scrollEasing:x,dur:a,onComplete:_}),e?void(f.dir=!1):(clearTimeout(f.step),void(f.step=setTimeout(function(){l()},a)))}function s(){clearTimeout(f.step),K(f,"step"),N(t)}var c=t.data(a),u=c.opt,f=c.sequential,h=e("#mCSB_"+c.idx+"_container"),m="stepped"===f.type?!0:!1,p=u.scrollInertia<26?26:u.scrollInertia,g=u.scrollInertia<1?17:u.scrollInertia;switch(o){case"on":if(f.dir=[n===d[16]||n===d[15]||39===n||37===n?"x":"y",n===d[13]||n===d[15]||38===n||37===n?-1:1],N(t),ee(n)&&"stepped"===f.type)return;l(m);break;case"off":s(),(m||c.tweenRunning&&f.dir)&&l(!0)}},q=function(t){var o=e(this).data(a).opt,n=[];return"function"==typeof t&&(t=t()),t instanceof Array?n=t.length>1?[t[0],t[1]]:"x"===o.axis?[null,t[0]]:[t[0],null]:(n[0]=t.y?t.y:t.x||"x"===o.axis?null:t,n[1]=t.x?t.x:t.y||"y"===o.axis?null:t),"function"==typeof n[0]&&(n[0]=n[0]()),"function"==typeof n[1]&&(n[1]=n[1]()),n},Y=function(t,o){if(null!=t&&"undefined"!=typeof t){var n=e(this),i=n.data(a),r=i.opt,l=e("#mCSB_"+i.idx+"_container"),s=l.parent(),c=typeof t;o||(o="x"===r.axis?"x":"y");var d="x"===o?l.outerWidth(!1):l.outerHeight(!1),f="x"===o?l[0].offsetLeft:l[0].offsetTop,h="x"===o?"left":"top";switch(c){case"function":return t();case"object":var m=t.jquery?t:e(t);if(!m.length)return;return"x"===o?te(m)[1]:te(m)[0];case"string":case"number":if(ee(t))return Math.abs(t);if(-1!==t.indexOf("%"))return Math.abs(d*parseInt(t)/100);if(-1!==t.indexOf("-="))return Math.abs(f-parseInt(t.split("-=")[1]));if(-1!==t.indexOf("+=")){var p=f+parseInt(t.split("+=")[1]);return p>=0?0:Math.abs(p)}if(-1!==t.indexOf("px")&&ee(t.split("px")[0]))return Math.abs(t.split("px")[0]);if("top"===t||"left"===t)return 0;if("bottom"===t)return Math.abs(s.height()-l.outerHeight(!1));if("right"===t)return Math.abs(s.width()-l.outerWidth(!1));if("first"===t||"last"===t){var m=l.find(":"+t);return"x"===o?te(m)[1]:te(m)[0]}return e(t).length?"x"===o?te(e(t))[1]:te(e(t))[0]:(l.css(h,t),void u.update.call(null,n[0]))}}},j=function(t){function o(){return clearTimeout(f[0].autoUpdate),0===l.parents("html").length?void(l=null):void(f[0].autoUpdate=setTimeout(function(){return c.advanced.updateOnSelectorChange&&(s.poll.change.n=i(),s.poll.change.n!==s.poll.change.o)?(s.poll.change.o=s.poll.change.n,void r(3)):c.advanced.updateOnContentResize&&(s.poll.size.n=l[0].scrollHeight+l[0].scrollWidth+f[0].offsetHeight+l[0].offsetHeight,s.poll.size.n!==s.poll.size.o)?(s.poll.size.o=s.poll.size.n,void r(1)):!c.advanced.updateOnImageLoad||"auto"===c.advanced.updateOnImageLoad&&"y"===c.axis||(s.poll.img.n=f.find("img").length,s.poll.img.n===s.poll.img.o)?void((c.advanced.updateOnSelectorChange||c.advanced.updateOnContentResize||c.advanced.updateOnImageLoad)&&o()):(s.poll.img.o=s.poll.img.n,void f.find("img").each(function(){n(this)}))},c.advanced.autoUpdateTimeout))}function n(t){function o(e,t){return function(){return t.apply(e,arguments)}}function a(){this.onload=null,e(t).addClass(d[2]),r(2)}if(e(t).hasClass(d[2]))return void r();var n=new Image;n.onload=o(n,a),n.src=t.src}function i(){c.advanced.updateOnSelectorChange===!0&&(c.advanced.updateOnSelectorChange="*");var e=0,t=f.find(c.advanced.updateOnSelectorChange);return c.advanced.updateOnSelectorChange&&t.length>0&&t.each(function(){e+=this.offsetHeight+this.offsetWidth}),e}function r(e){clearTimeout(f[0].autoUpdate),u.update.call(null,l[0],e)}var l=e(this),s=l.data(a),c=s.opt,f=e("#mCSB_"+s.idx+"_container");return t?(clearTimeout(f[0].autoUpdate),void K(f[0],"autoUpdate")):void o()},X=function(e,t,o){return Math.round(e/t)*t-o},N=function(t){var o=t.data(a),n=e("#mCSB_"+o.idx+"_container,#mCSB_"+o.idx+"_container_wrapper,#mCSB_"+o.idx+"_dragger_vertical,#mCSB_"+o.idx+"_dragger_horizontal");n.each(function(){J.call(this)})},V=function(t,o,n){function i(e){return s&&c.callbacks[e]&&"function"==typeof c.callbacks[e]}function r(){return[c.callbacks.alwaysTriggerOffsets||_>=w[0]+b,c.callbacks.alwaysTriggerOffsets||-y>=_]}function l(){var e=[h[0].offsetTop,h[0].offsetLeft],o=[v[0].offsetTop,v[0].offsetLeft],a=[h.outerHeight(!1),h.outerWidth(!1)],i=[f.height(),f.width()];t[0].mcs={content:h,
top:e[0],left:e[1],draggerTop:o[0],draggerLeft:o[1],topPct:Math.round(100*Math.abs(e[0])/(Math.abs(a[0])-i[0])),leftPct:Math.round(100*Math.abs(e[1])/(Math.abs(a[1])-i[1])),direction:n.dir}}var s=t.data(a),c=s.opt,d={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:c.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},n=e.extend(d,n),u=[n.dur,n.drag?0:n.dur],f=e("#mCSB_"+s.idx),h=e("#mCSB_"+s.idx+"_container"),m=h.parent(),p=c.callbacks.onTotalScrollOffset?q.call(t,c.callbacks.onTotalScrollOffset):[0,0],g=c.callbacks.onTotalScrollBackOffset?q.call(t,c.callbacks.onTotalScrollBackOffset):[0,0];if(s.trigger=n.trigger,(0!==m.scrollTop()||0!==m.scrollLeft())&&(e(".mCSB_"+s.idx+"_scrollbar").css("visibility","visible"),m.scrollTop(0).scrollLeft(0)),"_resetY"!==o||s.contentReset.y||(i("onOverflowYNone")&&c.callbacks.onOverflowYNone.call(t[0]),s.contentReset.y=1),"_resetX"!==o||s.contentReset.x||(i("onOverflowXNone")&&c.callbacks.onOverflowXNone.call(t[0]),s.contentReset.x=1),"_resetY"!==o&&"_resetX"!==o){switch(!s.contentReset.y&&t[0].mcs||!s.overflowed[0]||(i("onOverflowY")&&c.callbacks.onOverflowY.call(t[0]),s.contentReset.x=null),!s.contentReset.x&&t[0].mcs||!s.overflowed[1]||(i("onOverflowX")&&c.callbacks.onOverflowX.call(t[0]),s.contentReset.x=null),c.snapAmount&&(o=X(o,c.snapAmount,c.snapOffset)),n.dir){case"x":var v=e("#mCSB_"+s.idx+"_dragger_horizontal"),x="left",_=h[0].offsetLeft,w=[f.width()-h.outerWidth(!1),v.parent().width()-v.width()],S=[o,0===o?0:o/s.scrollRatio.x],b=p[1],y=g[1],B=b>0?b/s.scrollRatio.x:0,T=y>0?y/s.scrollRatio.x:0;break;case"y":var v=e("#mCSB_"+s.idx+"_dragger_vertical"),x="top",_=h[0].offsetTop,w=[f.height()-h.outerHeight(!1),v.parent().height()-v.height()],S=[o,0===o?0:o/s.scrollRatio.y],b=p[0],y=g[0],B=b>0?b/s.scrollRatio.y:0,T=y>0?y/s.scrollRatio.y:0}S[1]<0||0===S[0]&&0===S[1]?S=[0,0]:S[1]>=w[1]?S=[w[0],w[1]]:S[0]=-S[0],t[0].mcs||(l(),i("onInit")&&c.callbacks.onInit.call(t[0])),clearTimeout(h[0].onCompleteTimeout),(s.tweenRunning||!(0===_&&S[0]>=0||_===w[0]&&S[0]<=w[0]))&&(Q(v[0],x,Math.round(S[1]),u[1],n.scrollEasing),Q(h[0],x,Math.round(S[0]),u[0],n.scrollEasing,n.overwrite,{onStart:function(){n.callbacks&&n.onStart&&!s.tweenRunning&&(i("onScrollStart")&&(l(),c.callbacks.onScrollStart.call(t[0])),s.tweenRunning=!0,C(v),s.cbOffsets=r())},onUpdate:function(){n.callbacks&&n.onUpdate&&i("whileScrolling")&&(l(),c.callbacks.whileScrolling.call(t[0]))},onComplete:function(){if(n.callbacks&&n.onComplete){"yx"===c.axis&&clearTimeout(h[0].onCompleteTimeout);var e=h[0].idleTimer||0;h[0].onCompleteTimeout=setTimeout(function(){i("onScroll")&&(l(),c.callbacks.onScroll.call(t[0])),i("onTotalScroll")&&S[1]>=w[1]-B&&s.cbOffsets[0]&&(l(),c.callbacks.onTotalScroll.call(t[0])),i("onTotalScrollBack")&&S[1]<=T&&s.cbOffsets[1]&&(l(),c.callbacks.onTotalScrollBack.call(t[0])),s.tweenRunning=!1,h[0].idleTimer=0,C(v,"hide")},e)}}}))}},Q=function(e,t,o,a,n,i,r){function l(){S.stop||(x||m.call(),x=G()-v,s(),x>=S.time&&(S.time=x>S.time?x+f-(x-S.time):x+f-1,S.time<x+1&&(S.time=x+1)),S.time<a?S.id=h(l):g.call())}function s(){a>0?(S.currVal=u(S.time,_,b,a,n),w[t]=Math.round(S.currVal)+"px"):w[t]=o+"px",p.call()}function c(){f=1e3/60,S.time=x+f,h=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return s(),setTimeout(e,.01)},S.id=h(l)}function d(){null!=S.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(S.id):clearTimeout(S.id),S.id=null)}function u(e,t,o,a,n){switch(n){case"linear":case"mcsLinear":return o*e/a+t;case"mcsLinearOut":return e/=a,e--,o*Math.sqrt(1-e*e)+t;case"easeInOutSmooth":return e/=a/2,1>e?o/2*e*e+t:(e--,-o/2*(e*(e-2)-1)+t);case"easeInOutStrong":return e/=a/2,1>e?o/2*Math.pow(2,10*(e-1))+t:(e--,o/2*(-Math.pow(2,-10*e)+2)+t);case"easeInOut":case"mcsEaseInOut":return e/=a/2,1>e?o/2*e*e*e+t:(e-=2,o/2*(e*e*e+2)+t);case"easeOutSmooth":return e/=a,e--,-o*(e*e*e*e-1)+t;case"easeOutStrong":return o*(-Math.pow(2,-10*e/a)+1)+t;case"easeOut":case"mcsEaseOut":default:var i=(e/=a)*e,r=i*e;return t+o*(.499999999999997*r*i+-2.5*i*i+5.5*r+-6.5*i+4*e)}}e._mTween||(e._mTween={top:{},left:{}});var f,h,r=r||{},m=r.onStart||function(){},p=r.onUpdate||function(){},g=r.onComplete||function(){},v=G(),x=0,_=e.offsetTop,w=e.style,S=e._mTween[t];"left"===t&&(_=e.offsetLeft);var b=o-_;S.stop=0,"none"!==i&&d(),c()},G=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},J=function(){var e=this;e._mTween||(e._mTween={top:{},left:{}});for(var t=["top","left"],o=0;o<t.length;o++){var a=t[o];e._mTween[a].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._mTween[a].id):clearTimeout(e._mTween[a].id),e._mTween[a].id=null,e._mTween[a].stop=1)}},K=function(e,t){try{delete e[t]}catch(o){e[t]=null}},Z=function(e){return!(e.which&&1!==e.which)},$=function(e){var t=e.originalEvent.pointerType;return!(t&&"touch"!==t&&2!==t)},ee=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},te=function(e){var t=e.parents(".mCSB_container");return[e.offset().top-t.offset().top,e.offset().left-t.offset().left]};e.fn[o]=function(t){return u[t]?u[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):u.init.apply(this,arguments)},e[o]=function(t){return u[t]?u[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):u.init.apply(this,arguments)},e[o].defaults=i,window[o]=!0,e(window).load(function(){e(n)[o](),e.extend(e.expr[":"],{mcsInView:e.expr[":"].mcsInView||function(t){var o,a,n=e(t),i=n.parents(".mCSB_container");if(i.length)return o=i.parent(),a=[i[0].offsetTop,i[0].offsetLeft],a[0]+te(n)[0]>=0&&a[0]+te(n)[0]<o.height()-n.outerHeight(!1)&&a[1]+te(n)[1]>=0&&a[1]+te(n)[1]<o.width()-n.outerWidth(!1)},mcsOverflow:e.expr[":"].mcsOverflow||function(t){var o=e(t).data(a);if(o)return o.overflowed[0]||o.overflowed[1]}})})})});
(function($,window,document,undefined){var $window=$(window);$.fn.lazyload=function(options){var elements=this;var $container;var settings={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:false,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};function update(){var counter=0;elements.each(function(){var $this=$(this);if(settings.skip_invisible&&!$this.is(":visible")){return;}if($.abovethetop(this,settings)||$.leftofbegin(this,settings)){}else if(!$.belowthefold(this,settings)&&!$.rightoffold(this,settings)){$this.trigger("appear");counter=0;}else{if(++counter>settings.failure_limit){return false;}}});}if(options){if(undefined!==options.failurelimit){options.failure_limit=options.failurelimit;delete options.failurelimit;}if(undefined!==options.effectspeed){options.effect_speed=options.effectspeed;delete options.effectspeed;}$.extend(settings,options);}$container=(settings.container===undefined||settings.container===window)?$window:$(settings.container);if(0===settings.event.indexOf("scroll")){$container.bind(settings.event,function(){return update();});}this.each(function(){var self=this;var $self=$(self);self.loaded=false;if($self.attr("src")===undefined||$self.attr("src")===false){if($self.is("img")){$self.attr("src",settings.placeholder);}}$self.one("appear",function(){if(!this.loaded){if(settings.appear){var elements_left=elements.length;settings.appear.call(self,elements_left,settings);}$("<img />").bind("load",function(){var original=$self.attr("data-"+settings.data_attribute);$self.hide();if($self.is("img")){$self.attr("src",original);}else{$self.css("background-image","url('"+original+"')");}$self[settings.effect](settings.effect_speed);self.loaded=true;var temp=$.grep(elements,function(element){return!element.loaded;});elements=$(temp);if(settings.load){var elements_left=elements.length;settings.load.call(self,elements_left,settings);}}).attr("src",$self.attr("data-"+settings.data_attribute));}});if(0!==settings.event.indexOf("scroll")){$self.bind(settings.event,function(){if(!self.loaded){$self.trigger("appear");}});}});$window.bind("resize",function(){update();});if((/(?:iphone|ipod|ipad).*os 5/gi).test(navigator.appVersion)){$window.bind("pageshow",function(event){if(event.originalEvent&&event.originalEvent.persisted){elements.each(function(){$(this).trigger("appear");});}});}$(document).ready(function(){update();});return this;};$.belowthefold=function(element,settings){var fold;if(settings.container===undefined||settings.container===window){fold=(window.innerHeight?window.innerHeight:$window.height())+$window.scrollTop();}else{fold=$(settings.container).offset().top+$(settings.container).height();}return fold<=$(element).offset().top-settings.threshold;};$.rightoffold=function(element,settings){var fold;if(settings.container===undefined||settings.container===window){fold=$window.width()+$window.scrollLeft();}else{fold=$(settings.container).offset().left+$(settings.container).width();}return fold<=$(element).offset().left-settings.threshold;};$.abovethetop=function(element,settings){var fold;if(settings.container===undefined||settings.container===window){fold=$window.scrollTop();}else{fold=$(settings.container).offset().top;}return fold>=$(element).offset().top+settings.threshold+$(element).height();};$.leftofbegin=function(element,settings){var fold;if(settings.container===undefined||settings.container===window){fold=$window.scrollLeft();}else{fold=$(settings.container).offset().left;}return fold>=$(element).offset().left+settings.threshold+$(element).width();};$.inviewport=function(element,settings){return!$.rightoffold(element,settings)&&!$.leftofbegin(element,settings)&&!$.belowthefold(element,settings)&&!$.abovethetop(element,settings);};$.extend($.expr[":"],{"below-the-fold":function(a){return $.belowthefold(a,{threshold:0});},"above-the-top":function(a){return!$.belowthefold(a,{threshold:0});},"right-of-screen":function(a){return $.rightoffold(a,{threshold:0});},"left-of-screen":function(a){return!$.rightoffold(a,{threshold:0});},"in-viewport":function(a){return $.inviewport(a,{threshold:0});},"above-the-fold":function(a){return!$.belowthefold(a,{threshold:0});},"right-of-fold":function(a){return $.rightoffold(a,{threshold:0});},"left-of-fold":function(a){return!$.rightoffold(a,{threshold:0});}});})(jQuery,window,document);
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){module.exports=factory(require('jquery'));}else{factory(jQuery);}}(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s);}function decode(s){return config.raw?s:decodeURIComponent(s);}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value));}function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');}try{s=decodeURIComponent(s.replace(pluses,' '));return config.json?JSON.parse(s):s;}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value;}var config=$.cookie=function(key,value,options){if(arguments.length>1&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setMilliseconds(t.getMilliseconds()+days*864e+5);}return(document.cookie=[encode(key),'=',stringifyCookieValue(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}var result=key?undefined:{},cookies=document.cookie?document.cookie.split('; '):[],i=0,l=cookies.length;for(;i<l;i++){var parts=cookies[i].split('='),name=decode(parts.shift()),cookie=parts.join('=');if(key===name){result=read(cookie,value);break;}if(!key&&(cookie=read(cookie))!==undefined){result[name]=cookie;}}return result;};config.defaults={};$.removeCookie=function(key,options){$.cookie(key,'',$.extend({},options,{expires:-1}));return!$.cookie(key);};}));
"function"!==typeof Object.create&&(Object.create=function(f){function g(){}g.prototype=f;return new g});(function(f,g,k){var l={init:function(a,b){this.$elem=f(b);this.options=f.extend({},f.fn.owlCarousel.options,this.$elem.data(),a);this.userOptions=a;this.loadContent()},loadContent:function(){function a(a){var d,e="";if("function"===typeof b.options.jsonSuccess)b.options.jsonSuccess.apply(this,[a]);else{for(d in a.owl)a.owl.hasOwnProperty(d)&&(e+=a.owl[d].item);b.$elem.html(e)}b.logIn()}var b=this,e;"function"===typeof b.options.beforeInit&&b.options.beforeInit.apply(this,[b.$elem]);"string"===typeof b.options.jsonPath?(e=b.options.jsonPath,f.getJSON(e,a)):b.logIn()},logIn:function(){this.$elem.data("owl-originalStyles",this.$elem.attr("style"));this.$elem.data("owl-originalClasses",this.$elem.attr("class"));this.$elem.css({opacity:0});this.orignalItems=this.options.items;this.checkBrowser();this.wrapperWidth=0;this.checkVisible=null;this.setVars()},setVars:function(){if(0===this.$elem.children().length)return!1;this.baseClass();this.eventTypes();this.$userItems=this.$elem.children();this.itemsAmount=this.$userItems.length;this.wrapItems();this.$owlItems=this.$elem.find(".owl-item");this.$owlWrapper=this.$elem.find(".owl-wrapper");this.playDirection="next";this.prevItem=0;this.prevArr=[0];this.currentItem=0;this.customEvents();this.onStartup()},onStartup:function(){this.updateItems();this.calculateAll();this.buildControls();this.updateControls();this.response();this.moveEvents();this.stopOnHover();this.owlStatus();!1!==this.options.transitionStyle&&this.transitionTypes(this.options.transitionStyle);!0===this.options.autoPlay&&(this.options.autoPlay=5E3);this.play();this.$elem.find(".owl-wrapper").css("display","block");this.$elem.is(":visible")?this.$elem.css("opacity",1):this.watchVisibility();this.onstartup=!1;this.eachMoveUpdate();"function"===typeof this.options.afterInit&&this.options.afterInit.apply(this,[this.$elem])},eachMoveUpdate:function(){!0===this.options.lazyLoad&&this.lazyLoad();!0===this.options.autoHeight&&this.autoHeight();this.onVisibleItems();"function"===typeof this.options.afterAction&&this.options.afterAction.apply(this,[this.$elem])},updateVars:function(){"function"===typeof this.options.beforeUpdate&&this.options.beforeUpdate.apply(this,[this.$elem]);this.watchVisibility();this.updateItems();this.calculateAll();this.updatePosition();this.updateControls();this.eachMoveUpdate();"function"===typeof this.options.afterUpdate&&this.options.afterUpdate.apply(this,[this.$elem])},reload:function(){var a=this;g.setTimeout(function(){a.updateVars()},0)},watchVisibility:function(){var a=this;if(!1===a.$elem.is(":visible"))a.$elem.css({opacity:0}),g.clearInterval(a.autoPlayInterval),g.clearInterval(a.checkVisible);else return!1;a.checkVisible=g.setInterval(function(){a.$elem.is(":visible")&&(a.reload(),a.$elem.animate({opacity:1},200),g.clearInterval(a.checkVisible))},500)},wrapItems:function(){this.$userItems.wrapAll('<div class="owl-wrapper">').wrap('<div class="owl-item"></div>');this.$elem.find(".owl-wrapper").wrap('<div class="owl-wrapper-outer">');this.wrapperOuter=this.$elem.find(".owl-wrapper-outer");this.$elem.css("display","block")},baseClass:function(){var a=this.$elem.hasClass(this.options.baseClass),b=this.$elem.hasClass(this.options.theme);a||this.$elem.addClass(this.options.baseClass);b||this.$elem.addClass(this.options.theme)},updateItems:function(){var a,b;if(!1===this.options.responsive)return!1;if(!0===this.options.singleItem)return this.options.items=this.orignalItems=1,this.options.itemsCustom=!1,this.options.itemsDesktop=!1,this.options.itemsDesktopSmall=!1,this.options.itemsTablet=!1,this.options.itemsTabletSmall=!1,this.options.itemsMobile=!1;a=f(this.options.responsiveBaseWidth).width();a>(this.options.itemsDesktop[0]||this.orignalItems)&&(this.options.items=this.orignalItems);if(!1!==this.options.itemsCustom)for(this.options.itemsCustom.sort(function(a,b){return a[0]-b[0]}),b=0;b<this.options.itemsCustom.length;b+=1)this.options.itemsCustom[b][0]<=a&&(this.options.items=this.options.itemsCustom[b][1]);else a<=this.options.itemsDesktop[0]&&!1!==this.options.itemsDesktop&&(this.options.items=this.options.itemsDesktop[1]),a<=this.options.itemsDesktopSmall[0]&&!1!==this.options.itemsDesktopSmall&&(this.options.items=this.options.itemsDesktopSmall[1]),a<=this.options.itemsTablet[0]&&!1!==this.options.itemsTablet&&(this.options.items=this.options.itemsTablet[1]),a<=this.options.itemsTabletSmall[0]&&!1!==this.options.itemsTabletSmall&&(this.options.items=this.options.itemsTabletSmall[1]),a<=this.options.itemsMobile[0]&&!1!==this.options.itemsMobile&&(this.options.items=this.options.itemsMobile[1]);this.options.items>this.itemsAmount&&!0===this.options.itemsScaleUp&&(this.options.items=this.itemsAmount)},response:function(){var a=this,b,e;if(!0!==a.options.responsive)return!1;e=f(g).width();a.resizer=function(){f(g).width()!==e&&(!1!==a.options.autoPlay&&g.clearInterval(a.autoPlayInterval),g.clearTimeout(b),b=g.setTimeout(function(){e=f(g).width();a.updateVars()},a.options.responsiveRefreshRate))};f(g).resize(a.resizer)},updatePosition:function(){this.jumpTo(this.currentItem);!1!==this.options.autoPlay&&this.checkAp()},appendItemsSizes:function(){var a=this,b=0,e=a.itemsAmount-a.options.items;a.$owlItems.each(function(c){var d=f(this);d.css({width:a.itemWidth}).data("owl-item",Number(c));if(0===c%a.options.items||c===e)c>e||(b+=1);d.data("owl-roundPages",b)})},appendWrapperSizes:function(){this.$owlWrapper.css({width:this.$owlItems.length*this.itemWidth*2,left:0});this.appendItemsSizes()},calculateAll:function(){this.calculateWidth();this.appendWrapperSizes();this.loops();this.max()},calculateWidth:function(){this.itemWidth=Math.round(this.$elem.width()/this.options.items)},max:function(){var a=-1*(this.itemsAmount*this.itemWidth-this.options.items*this.itemWidth);this.options.items>this.itemsAmount?this.maximumPixels=a=this.maximumItem=0:(this.maximumItem=this.itemsAmount-this.options.items,this.maximumPixels=a);return a},min:function(){return 0},loops:function(){var a=0,b=0,e,c;this.positionsInArray=[0];this.pagesInArray=[];for(e=0;e<this.itemsAmount;e+=1)b+=this.itemWidth,this.positionsInArray.push(-b),!0===this.options.scrollPerPage&&(c=f(this.$owlItems[e]),c=c.data("owl-roundPages"),c!==a&&(this.pagesInArray[a]=this.positionsInArray[e],a=c))},buildControls:function(){if(!0===this.options.navigation||!0===this.options.pagination)this.owlControls=f('<div class="owl-controls"/>').toggleClass("clickable",!this.browser.isTouch).appendTo(this.$elem);!0===this.options.pagination&&this.buildPagination();!0===this.options.navigation&&this.buildButtons()},buildButtons:function(){var a=this,b=f('<div class="owl-buttons"/>');a.owlControls.append(b);a.buttonPrev=f("<div/>",{"class":"owl-prev",html:a.options.navigationText[0]||""});a.buttonNext=f("<div/>",{"class":"owl-next",html:a.options.navigationText[1]||""});b.append(a.buttonPrev).append(a.buttonNext);b.on("touchstart.owlControls mousedown.owlControls",'div[class^="owl"]',function(a){a.preventDefault()});b.on("touchend.owlControls mouseup.owlControls",'div[class^="owl"]',function(b){b.preventDefault();f(this).hasClass("owl-next")?a.next():a.prev()})},buildPagination:function(){var a=this;a.paginationWrapper=f('<div class="owl-pagination"/>');a.owlControls.append(a.paginationWrapper);a.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(b){b.preventDefault();Number(f(this).data("owl-page"))!==a.currentItem&&a.goTo(Number(f(this).data("owl-page")),!0)})},updatePagination:function(){var a,b,e,c,d,g;if(!1===this.options.pagination)return!1;this.paginationWrapper.html("");a=0;b=this.itemsAmount-this.itemsAmount%this.options.items;for(c=0;c<this.itemsAmount;c+=1)0===c%this.options.items&&(a+=1,b===c&&(e=this.itemsAmount-this.options.items),d=f("<div/>",{"class":"owl-page"}),g=f("<span></span>",{text:!0===this.options.paginationNumbers?a:"","class":!0===this.options.paginationNumbers?"owl-numbers":""}),d.append(g),d.data("owl-page",b===c?e:c),d.data("owl-roundPages",a),this.paginationWrapper.append(d));this.checkPagination()},checkPagination:function(){var a=this;if(!1===a.options.pagination)return!1;a.paginationWrapper.find(".owl-page").each(function(){f(this).data("owl-roundPages")===f(a.$owlItems[a.currentItem]).data("owl-roundPages")&&(a.paginationWrapper.find(".owl-page").removeClass("active"),f(this).addClass("active"))})},checkNavigation:function(){if(!1===this.options.navigation)return!1;!1===this.options.rewindNav&&(0===this.currentItem&&0===this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.addClass("disabled")):0===this.currentItem&&0!==this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.removeClass("disabled")):this.currentItem===this.maximumItem?(this.buttonPrev.removeClass("disabled"),this.buttonNext.addClass("disabled")):0!==this.currentItem&&this.currentItem!==this.maximumItem&&(this.buttonPrev.removeClass("disabled"),this.buttonNext.removeClass("disabled")))},updateControls:function(){this.updatePagination();this.checkNavigation();this.owlControls&&(this.options.items>=this.itemsAmount?this.owlControls.hide():this.owlControls.show())},destroyControls:function(){this.owlControls&&this.owlControls.remove()},next:function(a){if(this.isTransition)return!1;this.currentItem+=!0===this.options.scrollPerPage?this.options.items:1;if(this.currentItem>this.maximumItem+(!0===this.options.scrollPerPage?this.options.items-1:0))if(!0===this.options.rewindNav)this.currentItem=0,a="rewind";else return this.currentItem=this.maximumItem,!1;this.goTo(this.currentItem,a)},prev:function(a){if(this.isTransition)return!1;this.currentItem=!0===this.options.scrollPerPage&&0<this.currentItem&&this.currentItem<this.options.items?0:this.currentItem-(!0===this.options.scrollPerPage?this.options.items:1);if(0>this.currentItem)if(!0===this.options.rewindNav)this.currentItem=this.maximumItem,a="rewind";else return this.currentItem=0,!1;this.goTo(this.currentItem,a)},goTo:function(a,b,e){var c=this;if(c.isTransition)return!1;"function"===typeof c.options.beforeMove&&c.options.beforeMove.apply(this,[c.$elem]);a>=c.maximumItem?a=c.maximumItem:0>=a&&(a=0);c.currentItem=c.owl.currentItem=a;if(!1!==c.options.transitionStyle&&"drag"!==e&&1===c.options.items&&!0===c.browser.support3d)return c.swapSpeed(0),!0===c.browser.support3d?c.transition3d(c.positionsInArray[a]):c.css2slide(c.positionsInArray[a],1),c.afterGo(),c.singleItemTransition(),!1;a=c.positionsInArray[a];!0===c.browser.support3d?(c.isCss3Finish=!1,!0===b?(c.swapSpeed("paginationSpeed"),g.setTimeout(function(){c.isCss3Finish=!0},c.options.paginationSpeed)):"rewind"===b?(c.swapSpeed(c.options.rewindSpeed),g.setTimeout(function(){c.isCss3Finish=!0},c.options.rewindSpeed)):(c.swapSpeed("slideSpeed"),g.setTimeout(function(){c.isCss3Finish=!0},c.options.slideSpeed)),c.transition3d(a)):!0===b?c.css2slide(a,c.options.paginationSpeed):"rewind"===b?c.css2slide(a,c.options.rewindSpeed):c.css2slide(a,c.options.slideSpeed);c.afterGo()},jumpTo:function(a){"function"===typeof this.options.beforeMove&&this.options.beforeMove.apply(this,[this.$elem]);a>=this.maximumItem||-1===a?a=this.maximumItem:0>=a&&(a=0);this.swapSpeed(0);!0===this.browser.support3d?this.transition3d(this.positionsInArray[a]):this.css2slide(this.positionsInArray[a],1);this.currentItem=this.owl.currentItem=a;this.afterGo()},afterGo:function(){this.prevArr.push(this.currentItem);this.prevItem=this.owl.prevItem=this.prevArr[this.prevArr.length-2];this.prevArr.shift(0);this.prevItem!==this.currentItem&&(this.checkPagination(),this.checkNavigation(),this.eachMoveUpdate(),!1!==this.options.autoPlay&&this.checkAp());"function"===typeof this.options.afterMove&&this.prevItem!==this.currentItem&&this.options.afterMove.apply(this,[this.$elem])},stop:function(){this.apStatus="stop";g.clearInterval(this.autoPlayInterval)},checkAp:function(){"stop"!==this.apStatus&&this.play()},play:function(){var a=this;a.apStatus="play";if(!1===a.options.autoPlay)return!1;g.clearInterval(a.autoPlayInterval);a.autoPlayInterval=g.setInterval(function(){a.next(!0)},a.options.autoPlay)},swapSpeed:function(a){"slideSpeed"===a?this.$owlWrapper.css(this.addCssSpeed(this.options.slideSpeed)):"paginationSpeed"===a?this.$owlWrapper.css(this.addCssSpeed(this.options.paginationSpeed)):"string"!==typeof a&&this.$owlWrapper.css(this.addCssSpeed(a))},addCssSpeed:function(a){return{"-webkit-transition":"all "+a+"ms ease","-moz-transition":"all "+a+"ms ease","-o-transition":"all "+a+"ms ease",transition:"all "+a+"ms ease"}},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""}},doTranslate:function(a){return{"-webkit-transform":"translate3d("+a+"px, 0px, 0px)","-moz-transform":"translate3d("+a+"px, 0px, 0px)","-o-transform":"translate3d("+a+"px, 0px, 0px)","-ms-transform":"translate3d("+a+"px, 0px, 0px)",transform:"translate3d("+a+"px, 0px,0px)"}},transition3d:function(a){this.$owlWrapper.css(this.doTranslate(a))},css2move:function(a){this.$owlWrapper.css({left:a})},css2slide:function(a,b){var e=this;e.isCssFinish=!1;e.$owlWrapper.stop(!0,!0).animate({left:a},{duration:b||e.options.slideSpeed,complete:function(){e.isCssFinish=!0}})},checkBrowser:function(){var a=k.createElement("div");a.style.cssText="  -moz-transform:translate3d(0px, 0px, 0px); -ms-transform:translate3d(0px, 0px, 0px); -o-transform:translate3d(0px, 0px, 0px); -webkit-transform:translate3d(0px, 0px, 0px); transform:translate3d(0px, 0px, 0px)";a=a.style.cssText.match(/translate3d\(0px, 0px, 0px\)/g);this.browser={support3d:null!==a&&1===a.length,isTouch:"ontouchstart"in g||g.navigator.msMaxTouchPoints}},moveEvents:function(){if(!1!==this.options.mouseDrag||!1!==this.options.touchDrag)this.gestures(),this.disabledEvents()},eventTypes:function(){var a=["s","e","x"];this.ev_types={};!0===this.options.mouseDrag&&!0===this.options.touchDrag?a=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"]:!1===this.options.mouseDrag&&!0===this.options.touchDrag?a=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"]:!0===this.options.mouseDrag&&!1===this.options.touchDrag&&(a=["mousedown.owl","mousemove.owl","mouseup.owl"]);this.ev_types.start=a[0];this.ev_types.move=a[1];this.ev_types.end=a[2]},disabledEvents:function(){this.$elem.on("dragstart.owl",function(a){a.preventDefault()});this.$elem.on("mousedown.disableTextSelect",function(a){return f(a.target).is("input, textarea, select, option")})},gestures:function(){function a(a){if(void 0!==a.touches)return{x:a.touches[0].pageX,y:a.touches[0].pageY};if(void 0===a.touches){if(void 0!==a.pageX)return{x:a.pageX,y:a.pageY};if(void 0===a.pageX)return{x:a.clientX,y:a.clientY}}}function b(a){"on"===a?(f(k).on(d.ev_types.move,e),f(k).on(d.ev_types.end,c)):"off"===a&&(f(k).off(d.ev_types.move),f(k).off(d.ev_types.end))}function e(b){b=b.originalEvent||b||g.event;d.newPosX=a(b).x-h.offsetX;d.newPosY=a(b).y-h.offsetY;d.newRelativeX=d.newPosX-h.relativePos;"function"===typeof d.options.startDragging&&!0!==h.dragging&&0!==d.newRelativeX&&(h.dragging=!0,d.options.startDragging.apply(d,[d.$elem]));(8<d.newRelativeX||-8>d.newRelativeX)&&!0===d.browser.isTouch&&(void 0!==b.preventDefault?b.preventDefault():b.returnValue=!1,h.sliding=!0);(10<d.newPosY||-10>d.newPosY)&&!1===h.sliding&&f(k).off("touchmove.owl");d.newPosX=Math.max(Math.min(d.newPosX,d.newRelativeX/5),d.maximumPixels+d.newRelativeX/5);!0===d.browser.support3d?d.transition3d(d.newPosX):d.css2move(d.newPosX)}function c(a){a=a.originalEvent||a||g.event;var c;a.target=a.target||a.srcElement;h.dragging=!1;!0!==d.browser.isTouch&&d.$owlWrapper.removeClass("grabbing");d.dragDirection=0>d.newRelativeX?d.owl.dragDirection="left":d.owl.dragDirection="right";0!==d.newRelativeX&&(c=d.getNewPosition(),d.goTo(c,!1,"drag"),h.targetElement===a.target&&!0!==d.browser.isTouch&&(f(a.target).on("click.disable",function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();f(a.target).off("click.disable")}),a=f._data(a.target,"events").click,c=a.pop(),a.splice(0,0,c)));b("off")}var d=this,h={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};d.isCssFinish=!0;d.$elem.on(d.ev_types.start,".owl-wrapper",function(c){c=c.originalEvent||c||g.event;var e;if(3===c.which)return!1;if(!(d.itemsAmount<=d.options.items)){if(!1===d.isCssFinish&&!d.options.dragBeforeAnimFinish||!1===d.isCss3Finish&&!d.options.dragBeforeAnimFinish)return!1;!1!==d.options.autoPlay&&g.clearInterval(d.autoPlayInterval);!0===d.browser.isTouch||d.$owlWrapper.hasClass("grabbing")||d.$owlWrapper.addClass("grabbing");d.newPosX=0;d.newRelativeX=0;f(this).css(d.removeTransition());e=f(this).position();h.relativePos=e.left;h.offsetX=a(c).x-e.left;h.offsetY=a(c).y-e.top;b("on");h.sliding=!1;h.targetElement=c.target||c.srcElement}})},getNewPosition:function(){var a=this.closestItem();a>this.maximumItem?a=this.currentItem=this.maximumItem:0<=this.newPosX&&(this.currentItem=a=0);return a},closestItem:function(){var a=this,b=!0===a.options.scrollPerPage?a.pagesInArray:a.positionsInArray,e=a.newPosX,c=null;f.each(b,function(d,g){e-a.itemWidth/20>b[d+1]&&e-a.itemWidth/20<g&&"left"===a.moveDirection()?(c=g,a.currentItem=!0===a.options.scrollPerPage?f.inArray(c,a.positionsInArray):d):e+a.itemWidth/20<g&&e+a.itemWidth/20>(b[d+1]||b[d]-a.itemWidth)&&"right"===a.moveDirection()&&(!0===a.options.scrollPerPage?(c=b[d+1]||b[b.length-1],a.currentItem=f.inArray(c,a.positionsInArray)):(c=b[d+1],a.currentItem=d+1))});return a.currentItem},moveDirection:function(){var a;0>this.newRelativeX?(a="right",this.playDirection="next"):(a="left",this.playDirection="prev");return a},customEvents:function(){var a=this;a.$elem.on("owl.next",function(){a.next()});a.$elem.on("owl.prev",function(){a.prev()});a.$elem.on("owl.play",function(b,e){a.options.autoPlay=e;a.play();a.hoverStatus="play"});a.$elem.on("owl.stop",function(){a.stop();a.hoverStatus="stop"});a.$elem.on("owl.goTo",function(b,e){a.goTo(e)});a.$elem.on("owl.jumpTo",function(b,e){a.jumpTo(e)})},stopOnHover:function(){var a=this;!0===a.options.stopOnHover&&!0!==a.browser.isTouch&&!1!==a.options.autoPlay&&(a.$elem.on("mouseover",function(){a.stop()}),a.$elem.on("mouseout",function(){"stop"!==a.hoverStatus&&a.play()}))},lazyLoad:function(){var a,b,e,c,d;if(!1===this.options.lazyLoad)return!1;for(a=0;a<this.itemsAmount;a+=1)b=f(this.$owlItems[a]),"loaded"!==b.data("owl-loaded")&&(e=b.data("owl-item"),c=b.find(".lazyOwl"),"string"!==typeof c.data("src")?b.data("owl-loaded","loaded"):(void 0===b.data("owl-loaded")&&(c.hide(),b.addClass("loading").data("owl-loaded","checked")),(d=!0===this.options.lazyFollow?e>=this.currentItem:!0)&&e<this.currentItem+this.options.items&&c.length&&this.lazyPreload(b,c)))},lazyPreload:function(a,b){function e(){a.data("owl-loaded","loaded").removeClass("loading");b.removeAttr("data-src");"fade"===d.options.lazyEffect?b.fadeIn(400):b.show();"function"===typeof d.options.afterLazyLoad&&d.options.afterLazyLoad.apply(this,[d.$elem])}function c(){f+=1;d.completeImg(b.get(0))||!0===k?e():100>=f?g.setTimeout(c,100):e()}var d=this,f=0,k;"DIV"===b.prop("tagName")?(b.css("background-image","url("+b.data("src")+")"),k=!0):b[0].src=b.data("src");c()},autoHeight:function(){function a(){var a=f(e.$owlItems[e.currentItem]).height();e.wrapperOuter.css("height",a+"px");e.wrapperOuter.hasClass("autoHeight")||g.setTimeout(function(){e.wrapperOuter.addClass("autoHeight")},0)}function b(){d+=1;e.completeImg(c.get(0))?a():100>=d?g.setTimeout(b,100):e.wrapperOuter.css("height","")}var e=this,c=f(e.$owlItems[e.currentItem]).find("img"),d;void 0!==c.get(0)?(d=0,b()):a()},completeImg:function(a){return!a.complete||"undefined"!==typeof a.naturalWidth&&0===a.naturalWidth?!1:!0},onVisibleItems:function(){var a;!0===this.options.addClassActive&&this.$owlItems.removeClass("active");this.visibleItems=[];for(a=this.currentItem;a<this.currentItem+this.options.items;a+=1)this.visibleItems.push(a),!0===this.options.addClassActive&&f(this.$owlItems[a]).addClass("active");this.owl.visibleItems=this.visibleItems},transitionTypes:function(a){this.outClass="owl-"+a+"-out";this.inClass="owl-"+a+"-in"},singleItemTransition:function(){var a=this,b=a.outClass,e=a.inClass,c=a.$owlItems.eq(a.currentItem),d=a.$owlItems.eq(a.prevItem),f=Math.abs(a.positionsInArray[a.currentItem])+a.positionsInArray[a.prevItem],g=Math.abs(a.positionsInArray[a.currentItem])+a.itemWidth/2;a.isTransition=!0;a.$owlWrapper.addClass("owl-origin").css({"-webkit-transform-origin":g+"px","-moz-perspective-origin":g+"px","perspective-origin":g+"px"});d.css({position:"relative",left:f+"px"}).addClass(b).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){a.endPrev=!0;d.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend");a.clearTransStyle(d,b)});c.addClass(e).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){a.endCurrent=!0;c.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend");a.clearTransStyle(c,e)})},clearTransStyle:function(a,b){a.css({position:"",left:""}).removeClass(b);this.endPrev&&this.endCurrent&&(this.$owlWrapper.removeClass("owl-origin"),this.isTransition=this.endCurrent=this.endPrev=!1)},owlStatus:function(){this.owl={userOptions:this.userOptions,baseElement:this.$elem,userItems:this.$userItems,owlItems:this.$owlItems,currentItem:this.currentItem,prevItem:this.prevItem,visibleItems:this.visibleItems,isTouch:this.browser.isTouch,browser:this.browser,dragDirection:this.dragDirection}},clearEvents:function(){this.$elem.off(".owl owl mousedown.disableTextSelect");f(k).off(".owl owl");f(g).off("resize",this.resizer)},unWrap:function(){0!==this.$elem.children().length&&(this.$owlWrapper.unwrap(),this.$userItems.unwrap().unwrap(),this.owlControls&&this.owlControls.remove());this.clearEvents();this.$elem.attr("style",this.$elem.data("owl-originalStyles")||"").attr("class",this.$elem.data("owl-originalClasses"))},destroy:function(){this.stop();g.clearInterval(this.checkVisible);this.unWrap();this.$elem.removeData()},reinit:function(a){a=f.extend({},this.userOptions,a);this.unWrap();this.init(a,this.$elem)},addItem:function(a,b){var e;if(!a)return!1;if(0===this.$elem.children().length)return this.$elem.append(a),this.setVars(),!1;this.unWrap();e=void 0===b||-1===b?-1:b;e>=this.$userItems.length||-1===e?this.$userItems.eq(-1).after(a):this.$userItems.eq(e).before(a);this.setVars()},removeItem:function(a){if(0===this.$elem.children().length)return!1;a=void 0===a||-1===a?-1:a;this.unWrap();this.$userItems.eq(a).remove();this.setVars()}};f.fn.owlCarousel=function(a){return this.each(function(){if(!0===f(this).data("owl-init"))return!1;f(this).data("owl-init",!0);var b=Object.create(l);b.init(a,this);f.data(this,"owlCarousel",b)})};f.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1E3,autoPlay:!1,stopOnHover:!1,navigation:!1,navigationText:["prev","next"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,responsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:g,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:!1,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1}})(jQuery,window,document);function MarkerClusterer(e,t,n){this.extend(MarkerClusterer,google.maps.OverlayView);this.map_=e;this.markers_=[];this.clusters_=[];this.sizes=[53,56,66,78,90];this.styles_=[];this.ready_=false;var r=n||{};this.gridSize_=r["gridSize"]||60;this.minClusterSize_=r["minimumClusterSize"]||2;this.maxZoom_=r["maxZoom"]||null;this.styles_=r["styles"]||[];this.imagePath_=r["imagePath"]||this.MARKER_CLUSTER_IMAGE_PATH_;this.imageExtension_=r["imageExtension"]||this.MARKER_CLUSTER_IMAGE_EXTENSION_;this.zoomOnClick_=true;if(r["zoomOnClick"]!=undefined){this.zoomOnClick_=r["zoomOnClick"]}this.averageCenter_=false;if(r["averageCenter"]!=undefined){this.averageCenter_=r["averageCenter"]}this.setupStyles_();this.setMap(e);this.prevZoom_=this.map_.getZoom();var i=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var e=i.map_.getZoom();var t=i.map_.minZoom||0;var n=Math.min(i.map_.maxZoom||100,i.map_.mapTypes[i.map_.getMapTypeId()].maxZoom);e=Math.min(Math.max(e,t),n);if(i.prevZoom_!=e){i.prevZoom_=e;i.resetViewport()}});google.maps.event.addListener(this.map_,"idle",function(){i.redraw()});if(t&&t.length){this.addMarkers(t,false)}}function Cluster(e){this.markerClusterer_=e;this.map_=e.getMap();this.gridSize_=e.getGridSize();this.minClusterSize_=e.getMinClusterSize();this.averageCenter_=e.isAverageCenter();this.center_=null;this.markers_=[];this.bounds_=null;this.clusterIcon_=new ClusterIcon(this,e.getStyles(),e.getGridSize())}function ClusterIcon(e,t,n){e.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView);this.styles_=t;this.padding_=n||0;this.cluster_=e;this.center_=null;this.map_=e.getMap();this.div_=null;this.sums_=null;this.visible_=false;this.setMap(this.map_)}function inherits(e,t){function n(){}n.prototype=t.prototype;e.superClass_=t.prototype;e.prototype=new n;e.prototype.constructor=e}function MarkerLabel_(e,t,n){this.marker_=e;this.handCursorURL_=e.handCursorURL;this.labelDiv_=document.createElement("div");this.labelDiv_.style.cssText="position: absolute; overflow: hidden;";this.eventDiv_=document.createElement("div");this.eventDiv_.style.cssText=this.labelDiv_.style.cssText;this.eventDiv_.setAttribute("onselectstart","return false;");this.eventDiv_.setAttribute("ondragstart","return false;");this.crossDiv_=MarkerLabel_.getSharedCross(t)}function MarkerWithLabel(e){e=e||{};e.labelContent=e.labelContent||"";e.labelAnchor=e.labelAnchor||new google.maps.Point(0,0);e.labelClass=e.labelClass||"markerLabels";e.labelStyle=e.labelStyle||{};e.labelInBackground=e.labelInBackground||false;if(typeof e.labelVisible==="undefined"){e.labelVisible=true}if(typeof e.raiseOnDrag==="undefined"){e.raiseOnDrag=true}if(typeof e.clickable==="undefined"){e.clickable=true}if(typeof e.draggable==="undefined"){e.draggable=false}if(typeof e.optimized==="undefined"){e.optimized=false}e.crossImage=e.crossImage||"http"+(document.location.protocol==="https:"?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png";e.handCursor=e.handCursor||"http"+(document.location.protocol==="https:"?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur";e.optimized=false;this.label=new MarkerLabel_(this,e.crossImage,e.handCursor);google.maps.Marker.apply(this,arguments)}function makeid(){var e="";var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function InfoBubble(e){this.extend(InfoBubble,google.maps.OverlayView);this.tabs_=[];this.activeTab_=null;this.baseZIndex_=100;this.isOpen_=false;var t=e||{};if(t["backgroundColor"]==undefined){t["backgroundColor"]=this.BACKGROUND_COLOR_}if(t["borderColor"]==undefined){t["borderColor"]=this.BORDER_COLOR_}if(t["borderRadius"]==undefined){t["borderRadius"]=this.BORDER_RADIUS_}if(t["borderWidth"]==undefined){t["borderWidth"]=this.BORDER_WIDTH_}if(t["padding"]==undefined){t["padding"]=this.PADDING_}if(t["arrowPosition"]==undefined){t["arrowPosition"]=this.ARROW_POSITION_}if(t["disableAutoPan"]==undefined){t["disableAutoPan"]=false}if(t["disableAnimation"]==undefined){t["disableAnimation"]=false}if(t["minWidth"]==undefined){t["minWidth"]=this.MIN_WIDTH_}if(t["shadowStyle"]==undefined){t["shadowStyle"]=this.SHADOW_STYLE_}if(t["arrowSize"]==undefined){t["arrowSize"]=this.ARROW_SIZE_}if(t["arrowStyle"]==undefined){t["arrowStyle"]=this.ARROW_STYLE_}this.ANCHOR_TOP=t['anchorTop'];this.buildDom_();this.setValues(t)}function inherits(e,t){function n(){}n.prototype=t.prototype;e.superClass_=t.prototype;e.prototype=new n;e.prototype.constructor=e}function MarkerLabel_(e,t,n){this.marker_=e;this.handCursorURL_=e.handCursorURL;this.labelDiv_=document.createElement("div");this.labelDiv_.style.cssText="position: absolute; overflow: hidden;";this.eventDiv_=document.createElement("div");this.eventDiv_.style.cssText=this.labelDiv_.style.cssText;this.eventDiv_.setAttribute("onselectstart","return false;");this.eventDiv_.setAttribute("ondragstart","return false;");this.crossDiv_=MarkerLabel_.getSharedCross(t)}function MarkerWithLabel(e){e=e||{};e.labelContent=e.labelContent||"";e.labelAnchor=e.labelAnchor||new google.maps.Point(0,0);e.labelClass=e.labelClass||"markerLabels";e.labelStyle=e.labelStyle||{};e.labelInBackground=e.labelInBackground||false;if(typeof e.labelVisible==="undefined"){e.labelVisible=true}if(typeof e.raiseOnDrag==="undefined"){e.raiseOnDrag=true}if(typeof e.clickable==="undefined"){e.clickable=true}if(typeof e.draggable==="undefined"){e.draggable=false}if(typeof e.optimized==="undefined"){e.optimized=false}e.crossImage=e.crossImage||"http"+(document.location.protocol==="https:"?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png";e.handCursor=e.handCursor||"http"+(document.location.protocol==="https:"?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur";e.optimized=false;this.label=new MarkerLabel_(this,e.crossImage,e.handCursor);google.maps.Marker.apply(this,arguments)}MarkerClusterer.prototype.onClick=function(){return true};MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="//google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/"+"images/m";MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png";MarkerClusterer.prototype.extend=function(e,t){return function(e){for(var t in e.prototype){this.prototype[t]=e.prototype[t]}return this}.apply(e,[t])};MarkerClusterer.prototype.onAdd=function(){this.setReady_(true)};MarkerClusterer.prototype.draw=function(){};MarkerClusterer.prototype.setupStyles_=function(){if(this.styles_.length){return}for(var e=0,t;t=this.sizes[e];e++){this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})}};MarkerClusterer.prototype.fitMapToMarkers=function(){var e=this.getMarkers();var t=new google.maps.LatLngBounds;for(var n=0,r;r=e[n];n++){t.extend(r.getPosition())}this.map_.fitBounds(t)};MarkerClusterer.prototype.setStyles=function(e){this.styles_=e};MarkerClusterer.prototype.getStyles=function(){return this.styles_};MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_};MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_};MarkerClusterer.prototype.getMarkers=function(){return this.markers_};MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length};MarkerClusterer.prototype.setMaxZoom=function(e){this.maxZoom_=e};MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_};MarkerClusterer.prototype.calculator_=function(e,t){var n=0;var r=e.length;var i=r;while(i!==0){i=parseInt(i/10,10);n++}n=Math.min(n,t);return{text:r,index:n}};MarkerClusterer.prototype.setCalculator=function(e){this.calculator_=e};MarkerClusterer.prototype.getCalculator=function(){return this.calculator_};MarkerClusterer.prototype.addMarkers=function(e,t){for(var n=0,r;r=e[n];n++){this.pushMarkerTo_(r)}if(!t){this.redraw()}};MarkerClusterer.prototype.pushMarkerTo_=function(e){e.isAdded=false;if(e["draggable"]){var t=this;google.maps.event.addListener(e,"dragend",function(){e.isAdded=false;t.repaint()})}this.markers_.push(e)};MarkerClusterer.prototype.addMarker=function(e,t){this.pushMarkerTo_(e);if(!t){this.redraw()}};MarkerClusterer.prototype.removeMarker_=function(e){var t=-1;if(this.markers_.indexOf){t=this.markers_.indexOf(e)}else{for(var n=0,r;r=this.markers_[n];n++){if(r==e){t=n;break}}}if(t==-1){return false}e.setMap(null);this.markers_.splice(t,1);return true};MarkerClusterer.prototype.removeMarker=function(e,t){var n=this.removeMarker_(e);if(!t&&n){this.resetViewport();this.redraw();return true}else{return false}};MarkerClusterer.prototype.removeMarkers=function(e,t){var n=false;for(var r=0,i;i=e[r];r++){var s=this.removeMarker_(i);n=n||s}if(!t&&n){this.resetViewport();this.redraw();return true}};MarkerClusterer.prototype.setReady_=function(e){if(!this.ready_){this.ready_=e;this.createClusters_()}};MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length};MarkerClusterer.prototype.getMap=function(){return this.map_};MarkerClusterer.prototype.setMap=function(e){this.map_=e};MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_};MarkerClusterer.prototype.setGridSize=function(e){this.gridSize_=e};MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_};MarkerClusterer.prototype.setMinClusterSize=function(e){this.minClusterSize_=e};MarkerClusterer.prototype.getExtendedBounds=function(e){var t=this.getProjection();var n=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng());var r=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng());var i=t.fromLatLngToDivPixel(n);i.x+=this.gridSize_;i.y-=this.gridSize_;var s=t.fromLatLngToDivPixel(r);s.x-=this.gridSize_;s.y+=this.gridSize_;var o=t.fromDivPixelToLatLng(i);var u=t.fromDivPixelToLatLng(s);e.extend(o);e.extend(u);return e};MarkerClusterer.prototype.isMarkerInBounds_=function(e,t){return t.contains(e.getPosition())};MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(true);this.markers_=[]};MarkerClusterer.prototype.resetViewport=function(e){for(var t=0,n;n=this.clusters_[t];t++){n.remove()}for(var t=0,r;r=this.markers_[t];t++){r.isAdded=false;if(e){r.setMap(null)}}this.clusters_=[]};MarkerClusterer.prototype.repaint=function(){var e=this.clusters_.slice();this.clusters_.length=0;this.resetViewport();this.redraw();window.setTimeout(function(){for(var t=0,n;n=e[t];t++){n.remove()}},0)};MarkerClusterer.prototype.redraw=function(){this.createClusters_()};MarkerClusterer.prototype.distanceBetweenPoints_=function(e,t){if(!e||!t){return 0}var n=6371;var r=(t.lat()-e.lat())*Math.PI/180;var i=(t.lng()-e.lng())*Math.PI/180;var s=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);var o=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));var u=n*o;return u;};MarkerClusterer.prototype.addToClosestCluster_=function(e){var t=4e4;var n=null;var r=e.getPosition();for(var i=0,s;s=this.clusters_[i];i++){var o=s.getCenter();if(o){var u=this.distanceBetweenPoints_(o,e.getPosition());if(u<t){t=u;n=s}}}if(n&&n.isMarkerInClusterBounds(e)){n.addMarker(e)}else{var s=new Cluster(this);s.addMarker(e);this.clusters_.push(s)}};MarkerClusterer.prototype.createClusters_=function(){if(!this.ready_){return}var e=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast());var t=this.getExtendedBounds(e);for(var n=0,r;r=this.markers_[n];n++){if(!r.isAdded&&this.isMarkerInBounds_(r,t)){this.addToClosestCluster_(r)}}};Cluster.prototype.isMarkerAlreadyAdded=function(e){if(this.markers_.indexOf){return this.markers_.indexOf(e)!=-1}else{for(var t=0,n;n=this.markers_[t];t++){if(n==e){return true}}}return false};Cluster.prototype.addMarker=function(e){if(this.isMarkerAlreadyAdded(e)){return false}if(!this.center_){this.center_=e.getPosition();this.calculateBounds_()}else{if(this.averageCenter_){var t=this.markers_.length+1;var n=(this.center_.lat()*(t-1)+e.getPosition().lat())/t;var r=(this.center_.lng()*(t-1)+e.getPosition().lng())/t;this.center_=new google.maps.LatLng(n,r);this.calculateBounds_()}}e.isAdded=true;this.markers_.push(e);var i=this.markers_.length;if(i<this.minClusterSize_&&e.getMap()!=this.map_){e.setMap(this.map_)}if(i==this.minClusterSize_){for(var s=0;s<i;s++){this.markers_[s].setMap(null)}}if(i>=this.minClusterSize_){e.setMap(null)}this.updateIcon();return true};Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_};Cluster.prototype.getBounds=function(){var e=new google.maps.LatLngBounds(this.center_,this.center_);var t=this.getMarkers();for(var n=0,r;r=t[n];n++){e.extend(r.getPosition())}return e};Cluster.prototype.remove=function(){this.clusterIcon_.remove();this.markers_.length=0;delete this.markers_};Cluster.prototype.getSize=function(){return this.markers_.length};Cluster.prototype.getMarkers=function(){return this.markers_};Cluster.prototype.getCenter=function(){return this.center_};Cluster.prototype.calculateBounds_=function(){var e=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(e)};Cluster.prototype.isMarkerInClusterBounds=function(e){return this.bounds_.contains(e.getPosition())};Cluster.prototype.getMap=function(){return this.map_};Cluster.prototype.updateIcon=function(){var e=this.map_.getZoom();var t=this.markerClusterer_.getMaxZoom();if(t&&e>t){for(var n=0,r;r=this.markers_[n];n++){r.setMap(this.map_)}return}if(this.markers_.length<this.minClusterSize_){this.clusterIcon_.hide();return}var i=this.markerClusterer_.getStyles().length;var s=this.markerClusterer_.getCalculator()(this.markers_,i);this.clusterIcon_.setCenter(this.center_);this.clusterIcon_.setSums(s);this.clusterIcon_.show()};ClusterIcon.prototype.triggerClusterClick=function(){var e=this.cluster_.getMarkerClusterer();google.maps.event.trigger(e,"clusterclick",this.cluster_);var t=e.getMap().getZoom();var n=15;if(t>=n&&this.cluster_.markers_.length>1){return e.onClick(this)}if(e.isZoomOnClick()){this.map_.fitBounds(this.cluster_.getBounds())}};ClusterIcon.prototype.onAdd=function(){this.div_=document.createElement("DIV");if(this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e);this.div_.innerHTML=this.sums_.text}var t=this.getPanes();t.overlayMouseTarget.appendChild(this.div_);var n=this;google.maps.event.addDomListener(this.div_,"click",function(){n.triggerClusterClick()})};ClusterIcon.prototype.getPosFromLatLng_=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);t.x-=parseInt(this.width_/2,10);t.y-=parseInt(this.height_/2,10);return t};ClusterIcon.prototype.draw=function(){if(this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.top=e.y+"px";this.div_.style.left=e.x+"px"}};ClusterIcon.prototype.hide=function(){if(this.div_){this.div_.style.display="none"}this.visible_=false};ClusterIcon.prototype.show=function(){if(this.div_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e);this.div_.style.display=""}this.visible_=true};ClusterIcon.prototype.remove=function(){this.setMap(null)};ClusterIcon.prototype.onRemove=function(){if(this.div_&&this.div_.parentNode){this.hide();this.div_.parentNode.removeChild(this.div_);this.div_=null}};ClusterIcon.prototype.setSums=function(e){this.sums_=e;this.text_=e.text;this.index_=e.index;if(this.div_){this.div_.innerHTML=e.text}this.useStyle()};ClusterIcon.prototype.useStyle=function(){var e=Math.max(0,this.sums_.index-1);e=Math.min(this.styles_.length-1,e);var t=this.styles_[e];this.url_=t["url"];this.height_=t["height"];this.width_=t["width"];this.textColor_=t["textColor"];this.anchor_=t["anchor"];this.textSize_=t["textSize"];this.backgroundPosition_=t["backgroundPosition"]};ClusterIcon.prototype.setCenter=function(e){this.center_=e};ClusterIcon.prototype.createCss=function(e){var t=[];t.push("background-image:url("+this.url_+");");var n=this.backgroundPosition_?this.backgroundPosition_:"0 0";t.push("background-position:"+n+";");if(typeof this.anchor_==="object"){if(typeof this.anchor_[0]==="number"&&this.anchor_[0]>0&&this.anchor_[0]<this.height_){t.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;")}else{t.push("height:"+this.height_+"px; line-height:"+this.height_+"px;")}if(typeof this.anchor_[1]==="number"&&this.anchor_[1]>0&&this.anchor_[1]<this.width_){t.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;")}else{t.push("width:"+this.width_+"px; text-align:center;")}}else{t.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;")}var r=this.textColor_?this.textColor_:"black";var i=this.textSize_?this.textSize_:11;t.push("cursor:pointer; top:"+e.y+"px; left:"+e.x+"px; color:"+r+"; position:absolute; font-size:"+i+"px; font-family:Arial,sans-serif; font-weight:bold");return t.join("")};window["MarkerClusterer"]=MarkerClusterer;MarkerClusterer.prototype["addMarker"]=MarkerClusterer.prototype.addMarker;MarkerClusterer.prototype["addMarkers"]=MarkerClusterer.prototype.addMarkers;MarkerClusterer.prototype["clearMarkers"]=MarkerClusterer.prototype.clearMarkers;MarkerClusterer.prototype["fitMapToMarkers"]=MarkerClusterer.prototype.fitMapToMarkers;MarkerClusterer.prototype["getCalculator"]=MarkerClusterer.prototype.getCalculator;MarkerClusterer.prototype["getGridSize"]=MarkerClusterer.prototype.getGridSize;MarkerClusterer.prototype["getExtendedBounds"]=MarkerClusterer.prototype.getExtendedBounds;MarkerClusterer.prototype["getMap"]=MarkerClusterer.prototype.getMap;MarkerClusterer.prototype["getMarkers"]=MarkerClusterer.prototype.getMarkers;MarkerClusterer.prototype["getMaxZoom"]=MarkerClusterer.prototype.getMaxZoom;MarkerClusterer.prototype["getStyles"]=MarkerClusterer.prototype.getStyles;MarkerClusterer.prototype["getTotalClusters"]=MarkerClusterer.prototype.getTotalClusters;MarkerClusterer.prototype["getTotalMarkers"]=MarkerClusterer.prototype.getTotalMarkers;MarkerClusterer.prototype["redraw"]=MarkerClusterer.prototype.redraw;MarkerClusterer.prototype["removeMarker"]=MarkerClusterer.prototype.removeMarker;MarkerClusterer.prototype["removeMarkers"]=MarkerClusterer.prototype.removeMarkers;MarkerClusterer.prototype["resetViewport"]=MarkerClusterer.prototype.resetViewport;MarkerClusterer.prototype["repaint"]=MarkerClusterer.prototype.repaint;MarkerClusterer.prototype["setCalculator"]=MarkerClusterer.prototype.setCalculator;MarkerClusterer.prototype["setGridSize"]=MarkerClusterer.prototype.setGridSize;MarkerClusterer.prototype["setMaxZoom"]=MarkerClusterer.prototype.setMaxZoom;MarkerClusterer.prototype["onAdd"]=MarkerClusterer.prototype.onAdd;MarkerClusterer.prototype["draw"]=MarkerClusterer.prototype.draw;Cluster.prototype["getCenter"]=Cluster.prototype.getCenter;Cluster.prototype["getSize"]=Cluster.prototype.getSize;Cluster.prototype["getMarkers"]=Cluster.prototype.getMarkers;ClusterIcon.prototype["onAdd"]=ClusterIcon.prototype.onAdd;ClusterIcon.prototype["draw"]=ClusterIcon.prototype.draw;ClusterIcon.prototype["onRemove"]=ClusterIcon.prototype.onRemove;inherits(MarkerLabel_,google.maps.OverlayView);MarkerLabel_.getSharedCross=function(e){var t;if(typeof MarkerLabel_.getSharedCross.crossDiv==="undefined"){t=document.createElement("img");t.style.cssText="position: absolute; z-index: 1000002; display: none;";t.style.marginLeft="-8px";t.style.marginTop="-9px";t.src=e;MarkerLabel_.getSharedCross.crossDiv=t}return MarkerLabel_.getSharedCross.crossDiv};MarkerLabel_.prototype.onAdd=function(){var e=this;var t=false;var n=false;var r;var i,s;var o;var u;var a;var f;var l=20;var c="url("+this.handCursorURL_+")";var h=function(e){if(e.preventDefault){e.preventDefault()}e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation()}};var p=function(){e.marker_.setAnimation(null)};this.getPanes().overlayImage.appendChild(this.labelDiv_);this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_);if(typeof MarkerLabel_.getSharedCross.processed==="undefined"){this.getPanes().overlayImage.appendChild(this.crossDiv_);MarkerLabel_.getSharedCross.processed=true}this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",function(t){if(e.marker_.getDraggable()||e.marker_.getClickable()){this.style.cursor="pointer";google.maps.event.trigger(e.marker_,"mouseover",t)}}),google.maps.event.addDomListener(this.eventDiv_,"mouseout",function(t){if((e.marker_.getDraggable()||e.marker_.getClickable())&&!n){this.style.cursor=e.marker_.getCursor();google.maps.event.trigger(e.marker_,"mouseout",t)}}),google.maps.event.addDomListener(this.eventDiv_,"mousedown",function(r){n=false;if(e.marker_.getDraggable()){t=true;this.style.cursor=c}if(e.marker_.getDraggable()||e.marker_.getClickable()){google.maps.event.trigger(e.marker_,"mousedown",r);h(r)}}),google.maps.event.addDomListener(document,"mouseup",function(i){var s;if(t){t=false;e.eventDiv_.style.cursor="pointer";google.maps.event.trigger(e.marker_,"mouseup",i)}if(n){if(u){s=e.getProjection().fromLatLngToDivPixel(e.marker_.getPosition());s.y+=l;e.marker_.setPosition(e.getProjection().fromDivPixelToLatLng(s));try{e.marker_.setAnimation(google.maps.Animation.BOUNCE);setTimeout(p,1406)}catch(a){}}e.crossDiv_.style.display="none";e.marker_.setZIndex(r);o=true;n=false;i.latLng=e.marker_.getPosition();google.maps.event.trigger(e.marker_,"dragend",i)}}),google.maps.event.addListener(e.marker_.getMap(),"mousemove",function(o){var c;if(t){if(n){o.latLng=new google.maps.LatLng(o.latLng.lat()-i,o.latLng.lng()-s);c=e.getProjection().fromLatLngToDivPixel(o.latLng);if(u){e.crossDiv_.style.left=c.x+"px";e.crossDiv_.style.top=c.y+"px";e.crossDiv_.style.display="";c.y-=l}e.marker_.setPosition(e.getProjection().fromDivPixelToLatLng(c));if(u){e.eventDiv_.style.top=c.y+l+"px"}google.maps.event.trigger(e.marker_,"drag",o)}else{i=o.latLng.lat()-e.marker_.getPosition().lat();s=o.latLng.lng()-e.marker_.getPosition().lng();r=e.marker_.getZIndex();a=e.marker_.getPosition();f=e.marker_.getMap().getCenter();u=e.marker_.get("raiseOnDrag");n=true;e.marker_.setZIndex(1e6);o.latLng=e.marker_.getPosition();google.maps.event.trigger(e.marker_,"dragstart",o)}}}),google.maps.event.addDomListener(document,"keydown",function(t){if(n){if(t.keyCode===27){u=false;e.marker_.setPosition(a);e.marker_.getMap().setCenter(f);google.maps.event.trigger(document,"mouseup",t)}}}),google.maps.event.addDomListener(this.eventDiv_,"click",function(t){if(e.marker_.getDraggable()||e.marker_.getClickable()){if(o){o=false}else{google.maps.event.trigger(e.marker_,"click",t);h(t)}}}),google.maps.event.addDomListener(this.eventDiv_,"dblclick",function(t){if(e.marker_.getDraggable()||e.marker_.getClickable()){google.maps.event.trigger(e.marker_,"dblclick",t);h(t)}}),google.maps.event.addListener(this.marker_,"dragstart",function(e){if(!n){u=this.get("raiseOnDrag")}}),google.maps.event.addListener(this.marker_,"drag",function(t){if(!n){if(u){e.setPosition(l);e.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:+1)}}}),google.maps.event.addListener(this.marker_,"dragend",function(t){if(!n){if(u){e.setPosition(0)}}}),google.maps.event.addListener(this.marker_,"position_changed",function(){e.setPosition()}),google.maps.event.addListener(this.marker_,"zindex_changed",function(){e.setZIndex()}),google.maps.event.addListener(this.marker_,"visible_changed",function(){e.setVisible()}),google.maps.event.addListener(this.marker_,"labelvisible_changed",function(){e.setVisible()}),google.maps.event.addListener(this.marker_,"title_changed",function(){e.setTitle()}),google.maps.event.addListener(this.marker_,"labelcontent_changed",function(){e.setContent()}),google.maps.event.addListener(this.marker_,"labelanchor_changed",function(){e.setAnchor()}),google.maps.event.addListener(this.marker_,"labelclass_changed",function(){e.setStyles()}),google.maps.event.addListener(this.marker_,"labelstyle_changed",function(){e.setStyles()})]};MarkerLabel_.prototype.onRemove=function(){var e;this.labelDiv_.parentNode.removeChild(this.labelDiv_);this.eventDiv_.parentNode.removeChild(this.eventDiv_);for(e=0;e<this.listeners_.length;e++){google.maps.event.removeListener(this.listeners_[e])}};MarkerLabel_.prototype.draw=function(){this.setContent();this.setTitle();this.setStyles()};MarkerLabel_.prototype.setContent=function(){var e=this.marker_.get("labelContent");if(typeof e.nodeType==="undefined"){this.labelDiv_.innerHTML=e;this.eventDiv_.innerHTML=this.labelDiv_.innerHTML}else{this.labelDiv_.innerHTML="";this.labelDiv_.appendChild(e);e=e.cloneNode(true);this.eventDiv_.appendChild(e)}};MarkerLabel_.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""};MarkerLabel_.prototype.setStyles=function(){var e,t;this.labelDiv_.className=this.marker_.get("labelClass");this.eventDiv_.className=this.labelDiv_.className;this.labelDiv_.style.cssText="";this.eventDiv_.style.cssText="";t=this.marker_.get("labelStyle");for(e in t){if(t.hasOwnProperty(e)){this.labelDiv_.style[e]=t[e];this.eventDiv_.style[e]=t[e]}}this.setMandatoryStyles()};MarkerLabel_.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute";this.labelDiv_.style.overflow="hidden";if(typeof this.labelDiv_.style.opacity!=="undefined"&&this.labelDiv_.style.opacity!==""){this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+this.labelDiv_.style.opacity*100+')"';this.labelDiv_.style.filter="alpha(opacity="+this.labelDiv_.style.opacity*100+")"}this.eventDiv_.style.position=this.labelDiv_.style.position;this.eventDiv_.style.overflow=this.labelDiv_.style.overflow;this.eventDiv_.style.opacity=.01;this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"';this.eventDiv_.style.filter="alpha(opacity=1)";this.setAnchor();this.setPosition();this.setVisible()};MarkerLabel_.prototype.setAnchor=function(){var e=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-e.x+"px";this.labelDiv_.style.marginTop=-e.y+"px";this.eventDiv_.style.marginLeft=-e.x+"px";this.eventDiv_.style.marginTop=-e.y+"px"};MarkerLabel_.prototype.setPosition=function(e){var t=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());if(typeof e==="undefined"){e=0}this.labelDiv_.style.left=Math.round(t.x)+"px";this.labelDiv_.style.top=Math.round(t.y-e)+"px";this.eventDiv_.style.left=this.labelDiv_.style.left;this.eventDiv_.style.top=this.labelDiv_.style.top;this.setZIndex()};MarkerLabel_.prototype.setZIndex=function(){var e=this.marker_.get("labelInBackground")?-1:+1;if(typeof this.marker_.getZIndex()==="undefined"){this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+e;this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex}else{this.labelDiv_.style.zIndex=this.marker_.getZIndex()+e;this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex}};MarkerLabel_.prototype.setVisible=function(){if(this.marker_.get("labelVisible")){this.labelDiv_.style.display=this.marker_.getVisible()?"block":"none"}else{this.labelDiv_.style.display="none"}this.eventDiv_.style.display=this.labelDiv_.style.display};inherits(MarkerWithLabel,google.maps.Marker);MarkerWithLabel.prototype.setMap=function(e){google.maps.Marker.prototype.setMap.apply(this,arguments);this.label.setMap(e)};window["InfoBubble"]=InfoBubble;InfoBubble.prototype.ARROW_SIZE_=15;InfoBubble.prototype.ARROW_STYLE_=0;InfoBubble.prototype.SHADOW_STYLE_=1;InfoBubble.prototype.MIN_WIDTH_=50;InfoBubble.prototype.ARROW_POSITION_=50;InfoBubble.prototype.PADDING_=10;InfoBubble.prototype.BORDER_WIDTH_=1;InfoBubble.prototype.BORDER_COLOR_="#ccc";InfoBubble.prototype.BORDER_RADIUS_=10;InfoBubble.prototype.BACKGROUND_COLOR_="#fff";InfoBubble.prototype.ANCHOR_TOP=0;InfoBubble.prototype.extend=function(e,t){return function(e){for(var t in e.prototype){this.prototype[t]=e.prototype[t]}return this}.apply(e,[t])};InfoBubble.prototype.buildDom_=function(){var e=this.bubble_=document.createElement("DIV");e.style["position"]="absolute";e.style["zIndex"]=this.baseZIndex_;var t=this.tabsContainer_=document.createElement("DIV");t.style["position"]="relative";var n=this.close_=document.createElement("IMG");n.style["position"]="absolute";n.style["width"]=this.px(12);n.style["height"]=this.px(12);n.style["border"]=0;n.style["zIndex"]=this.baseZIndex_+1;n.style["cursor"]="pointer";n.src="//www.google.com/intl/en_us/mapfiles/close.gif";var r=this;google.maps.event.addDomListener(n,"click",function(){r.close();google.maps.event.trigger(r,"closeclick")});var i=this.contentContainer_=document.createElement("DIV");i.style["overflowX"]="auto";i.style["overflowY"]="auto";i.style["cursor"]="default";i.style["clear"]="both";i.style["position"]="relative";var s=this.content_=document.createElement("DIV");i.appendChild(s);var o=this.arrow_=document.createElement("DIV");o.style["position"]="relative";var u=this.arrowOuter_=document.createElement("DIV");var a=this.arrowInner_=document.createElement("DIV");var f=this.getArrowSize_();u.style["position"]=a.style["position"]="absolute";u.style["left"]=a.style["left"]="50%";u.style["height"]=a.style["height"]="0";u.style["width"]=a.style["width"]="0";u.style["marginLeft"]=this.px(-f);u.style["borderWidth"]=this.px(f);u.style["borderBottomWidth"]=0;n.style["top"]=u.style["top"]=a.style["top"]=i.style["top"]=this.ANCHOR_TOP;var l=this.bubbleShadow_=document.createElement("DIV");l.style["position"]="absolute";e.style["display"]=l.style["display"]="none";e.appendChild(this.tabsContainer_);e.appendChild(n);e.appendChild(i);o.appendChild(u);o.appendChild(a);e.appendChild(o);var c=document.createElement("style");c.setAttribute("type","text/css");this.animationName_="_ibani_"+Math.round(Math.random()*1e4);var h="."+this.animationName_+"{-webkit-animation-name:"+this.animationName_+";-webkit-animation-duration:0.5s;"+"-webkit-animation-iteration-count:1;}"+"@-webkit-keyframes "+this.animationName_+" {from {"+"-webkit-transform: scale(0)}50% {-webkit-transform: scale(1.2)}90% "+"{-webkit-transform: scale(0.95)}to {-webkit-transform: scale(1)}}";c.textContent=h;document.getElementsByTagName("head")[0].appendChild(c)};InfoBubble.prototype.setBackgroundClassName=function(e){this.set("backgroundClassName",e)};InfoBubble.prototype["setBackgroundClassName"]=InfoBubble.prototype.setBackgroundClassName;InfoBubble.prototype.backgroundClassName_changed=function(){this.content_.className=this.get("backgroundClassName")};InfoBubble.prototype["backgroundClassName_changed"]=InfoBubble.prototype.backgroundClassName_changed;InfoBubble.prototype.setTabClassName=function(e){this.set("tabClassName",e)};InfoBubble.prototype["setTabClassName"]=InfoBubble.prototype.setTabClassName;InfoBubble.prototype.tabClassName_changed=function(){this.updateTabStyles_()};InfoBubble.prototype["tabClassName_changed"]=InfoBubble.prototype.tabClassName_changed;InfoBubble.prototype.getArrowStyle_=function(){return parseInt(this.get("arrowStyle"),10)||0};InfoBubble.prototype.setArrowStyle=function(e){this.set("arrowStyle",e)};InfoBubble.prototype["setArrowStyle"]=InfoBubble.prototype.setArrowStyle;InfoBubble.prototype.arrowStyle_changed=function(){this.arrowSize_changed()};InfoBubble.prototype["arrowStyle_changed"]=InfoBubble.prototype.arrowStyle_changed;InfoBubble.prototype.getArrowSize_=function(){return parseInt(this.get("arrowSize"),10)||0};InfoBubble.prototype.setArrowSize=function(e){this.set("arrowSize",e)};InfoBubble.prototype["setArrowSize"]=InfoBubble.prototype.setArrowSize;InfoBubble.prototype.arrowSize_changed=function(){this.borderWidth_changed()};InfoBubble.prototype["arrowSize_changed"]=InfoBubble.prototype.arrowSize_changed;InfoBubble.prototype.setArrowPosition=function(e){this.set("arrowPosition",e)};InfoBubble.prototype["setArrowPosition"]=InfoBubble.prototype.setArrowPosition;InfoBubble.prototype.getArrowPosition_=function(){return parseInt(this.get("arrowPosition"),10)||0};InfoBubble.prototype.arrowPosition_changed=function(){var e=this.getArrowPosition_();this.arrowOuter_.style["left"]=this.arrowInner_.style["left"]=e+"%";this.redraw_()};InfoBubble.prototype["arrowPosition_changed"]=InfoBubble.prototype.arrowPosition_changed;InfoBubble.prototype.setZIndex=function(e){this.set("zIndex",e)};InfoBubble.prototype["setZIndex"]=InfoBubble.prototype.setZIndex;InfoBubble.prototype.getZIndex=function(){return parseInt(this.get("zIndex"),10)||this.baseZIndex_};InfoBubble.prototype.zIndex_changed=function(){var e=this.getZIndex();this.bubble_.style["zIndex"]=this.baseZIndex_=e;this.close_.style["zIndex"]=e+1};InfoBubble.prototype["zIndex_changed"]=InfoBubble.prototype.zIndex_changed;InfoBubble.prototype.setShadowStyle=function(e){this.set("shadowStyle",e)};InfoBubble.prototype["setShadowStyle"]=InfoBubble.prototype.setShadowStyle;InfoBubble.prototype.getShadowStyle_=function(){return parseInt(this.get("shadowStyle"),10)||0};InfoBubble.prototype.shadowStyle_changed=function(){var e=this.getShadowStyle_();var t="";var n="";var r="";switch(e){case 0:t="none";break;case 1:n="40px 15px 10px rgba(33,33,33,0.3)";r="transparent";break;case 2:n="0 0 2px rgba(33,33,33,0.3)";r="rgba(33,33,33,0.35)";break}this.bubbleShadow_.style["boxShadow"]=this.bubbleShadow_.style["webkitBoxShadow"]=this.bubbleShadow_.style["MozBoxShadow"]=n;this.bubbleShadow_.style["backgroundColor"]=r;if(this.isOpen_){this.bubbleShadow_.style["display"]=t;this.draw()}};InfoBubble.prototype["shadowStyle_changed"]=InfoBubble.prototype.shadowStyle_changed;InfoBubble.prototype.showCloseButton=function(){this.set("hideCloseButton",false)};InfoBubble.prototype["showCloseButton"]=InfoBubble.prototype.showCloseButton;InfoBubble.prototype.hideCloseButton=function(){this.set("hideCloseButton",true)};InfoBubble.prototype["hideCloseButton"]=InfoBubble.prototype.hideCloseButton;InfoBubble.prototype.hideCloseButton_changed=function(){this.close_.style["display"]=this.get("hideCloseButton")?"none":""};InfoBubble.prototype["hideCloseButton_changed"]=InfoBubble.prototype.hideCloseButton_changed;InfoBubble.prototype.setBackgroundColor=function(e){if(e){this.set("backgroundColor",e)}};InfoBubble.prototype["setBackgroundColor"]=InfoBubble.prototype.setBackgroundColor;InfoBubble.prototype.backgroundColor_changed=function(){var e=this.get("backgroundColor");this.contentContainer_.style["backgroundColor"]=e;this.arrowInner_.style["borderColor"]=e+" transparent transparent";this.updateTabStyles_()};InfoBubble.prototype["backgroundColor_changed"]=InfoBubble.prototype.backgroundColor_changed;InfoBubble.prototype.setBorderColor=function(e){if(e){this.set("borderColor",e)}};InfoBubble.prototype["setBorderColor"]=InfoBubble.prototype.setBorderColor;InfoBubble.prototype.borderColor_changed=function(){var e=this.get("borderColor");var t=this.contentContainer_;var n=this.arrowOuter_;t.style["borderColor"]=e;n.style["borderColor"]=e+" transparent transparent";t.style["borderStyle"]=n.style["borderStyle"]=this.arrowInner_.style["borderStyle"]="solid";this.updateTabStyles_()};InfoBubble.prototype["borderColor_changed"]=InfoBubble.prototype.borderColor_changed;InfoBubble.prototype.setBorderRadius=function(e){this.set("borderRadius",e)};InfoBubble.prototype["setBorderRadius"]=InfoBubble.prototype.setBorderRadius;InfoBubble.prototype.getBorderRadius_=function(){return parseInt(this.get("borderRadius"),10)||0};InfoBubble.prototype.borderRadius_changed=function(){var e=this.getBorderRadius_();var t=this.getBorderWidth_();this.contentContainer_.style["borderRadius"]=this.contentContainer_.style["MozBorderRadius"]=this.contentContainer_.style["webkitBorderRadius"]=this.bubbleShadow_.style["borderRadius"]=this.bubbleShadow_.style["MozBorderRadius"]=this.bubbleShadow_.style["webkitBorderRadius"]=this.px(e);this.tabsContainer_.style["paddingLeft"]=this.tabsContainer_.style["paddingRight"]=this.px(e+t);this.redraw_()};InfoBubble.prototype["borderRadius_changed"]=InfoBubble.prototype.borderRadius_changed;InfoBubble.prototype.getBorderWidth_=function(){return parseInt(this.get("borderWidth"),10)||0};InfoBubble.prototype.setBorderWidth=function(e){this.set("borderWidth",e)};InfoBubble.prototype["setBorderWidth"]=InfoBubble.prototype.setBorderWidth;InfoBubble.prototype.borderWidth_changed=function(){var e=this.getBorderWidth_();this.contentContainer_.style["borderWidth"]=this.px(e);this.tabsContainer_.style["top"]=this.px(e);this.updateArrowStyle_();this.updateTabStyles_();this.borderRadius_changed();this.redraw_()};InfoBubble.prototype["borderWidth_changed"]=InfoBubble.prototype.borderWidth_changed;InfoBubble.prototype.updateArrowStyle_=function(){var e=this.getBorderWidth_();var t=this.getArrowSize_();var n=this.getArrowStyle_();var r=this.px(t);var i=this.px(Math.max(0,t-e));var s=this.arrowOuter_;var o=this.arrowInner_;this.arrow_.style["marginTop"]=this.px(-e);s.style["borderTopWidth"]=r;o.style["borderTopWidth"]=i;if(n==0||n==1){s.style["borderLeftWidth"]=r;o.style["borderLeftWidth"]=i}else{s.style["borderLeftWidth"]=o.style["borderLeftWidth"]=0}if(n==0||n==2){s.style["borderRightWidth"]=r;o.style["borderRightWidth"]=i}else{s.style["borderRightWidth"]=o.style["borderRightWidth"]=0}if(n<2){s.style["marginLeft"]=this.px(-t);o.style["marginLeft"]=this.px(-(t-e))}else{s.style["marginLeft"]=o.style["marginLeft"]=0}if(e==0){s.style["display"]="none"}else{s.style["display"]=""}};InfoBubble.prototype.setPadding=function(e){this.set("padding",e)};InfoBubble.prototype["setPadding"]=InfoBubble.prototype.setPadding;InfoBubble.prototype.getPadding_=function(){return parseInt(this.get("padding"),10)||0};InfoBubble.prototype.padding_changed=function(){var e=this.getPadding_();this.contentContainer_.style["padding"]=this.px(e);this.updateTabStyles_();this.redraw_()};InfoBubble.prototype["padding_changed"]=InfoBubble.prototype.padding_changed;InfoBubble.prototype.px=function(e){if(e){return e+"px"}return e};InfoBubble.prototype.addEvents_=function(){var e=["mousedown","mousemove","mouseover","mouseout","mouseup","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","dblclick","contextmenu","click"];var t=this.bubble_;this.listeners_=[];for(var n=0,r;r=e[n];n++){this.listeners_.push(google.maps.event.addDomListener(t,r,function(e){e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation()}}))}};InfoBubble.prototype.onAdd=function(){if(!this.bubble_){this.buildDom_()}this.addEvents_();var e=this.getPanes();if(e){e.floatPane.appendChild(this.bubble_);e.floatShadow.appendChild(this.bubbleShadow_)}};InfoBubble.prototype["onAdd"]=InfoBubble.prototype.onAdd;InfoBubble.prototype.draw=function(){var e=this.getProjection();if(!e){return}var t=this.get("position");if(!t){this.close();return}var n=0;if(this.activeTab_){n=this.activeTab_.offsetHeight}var r=this.getAnchorHeight_();var i=this.getArrowSize_();var s=this.getArrowPosition_();s=s/100;var o=e.fromLatLngToDivPixel(t);var u=this.contentContainer_.offsetWidth;var a=this.bubble_.offsetHeight;if(!u){return}var f=o.y-(a+i);if(r){f-=r}var l=o.x-u*s;this.bubble_.style["top"]=this.px(f);this.bubble_.style["left"]=this.px(l);var c=parseInt(this.get("shadowStyle"),10);switch(c){case 1:this.bubbleShadow_.style["top"]=this.px(f+n-1);this.bubbleShadow_.style["left"]=this.px(l);this.bubbleShadow_.style["width"]=this.px(u);this.bubbleShadow_.style["height"]=this.px(this.contentContainer_.offsetHeight-i);break;case 2:u=u*.8;if(r){this.bubbleShadow_.style["top"]=this.px(o.y)}else{this.bubbleShadow_.style["top"]=this.px(o.y+i)}this.bubbleShadow_.style["left"]=this.px(o.x-u*s);this.bubbleShadow_.style["width"]=this.px(u);this.bubbleShadow_.style["height"]=this.px(2);break}};InfoBubble.prototype["draw"]=InfoBubble.prototype.draw;InfoBubble.prototype.onRemove=function(){if(this.bubble_&&this.bubble_.parentNode){this.bubble_.parentNode.removeChild(this.bubble_)}if(this.bubbleShadow_&&this.bubbleShadow_.parentNode){this.bubbleShadow_.parentNode.removeChild(this.bubbleShadow_)}for(var e=0,t;t=this.listeners_[e];e++){google.maps.event.removeListener(t)}};InfoBubble.prototype["onRemove"]=InfoBubble.prototype.onRemove;InfoBubble.prototype.isOpen=function(){return this.isOpen_};InfoBubble.prototype["isOpen"]=InfoBubble.prototype.isOpen;InfoBubble.prototype.close=function(){if(this.bubble_){this.bubble_.style["display"]="none";this.bubble_.className=this.bubble_.className.replace(this.animationName_,"")}if(this.bubbleShadow_){this.bubbleShadow_.style["display"]="none";this.bubbleShadow_.className=this.bubbleShadow_.className.replace(this.animationName_,"")}this.isOpen_=false};InfoBubble.prototype["close"]=InfoBubble.prototype.close;InfoBubble.prototype.open=function(e,t){var n=this;window.setTimeout(function(){n.open_(e,t)},0)};InfoBubble.prototype.open_=function(e,t){this.updateContent_();if(e){this.setMap(e)}if(t){this.set("anchor",t);this.bindTo("anchorPoint",t);this.bindTo("position",t)}this.bubble_.style["display"]=this.bubbleShadow_.style["display"]="";var n=!this.get("disableAnimation");if(n){this.bubble_.className+=" "+this.animationName_;this.bubbleShadow_.className+=" "+this.animationName_}this.redraw_();this.isOpen_=true;var r=!this.get("disableAutoPan");if(r){var i=this;window.setTimeout(function(){i.panToView()},200)}};InfoBubble.prototype["open"]=InfoBubble.prototype.open;InfoBubble.prototype.setPosition=function(e){if(e){this.set("position",e)}};InfoBubble.prototype["setPosition"]=InfoBubble.prototype.setPosition;InfoBubble.prototype.getPosition=function(){return this.get("position")};InfoBubble.prototype["getPosition"]=InfoBubble.prototype.getPosition;InfoBubble.prototype.position_changed=function(){this.draw()};InfoBubble.prototype["position_changed"]=InfoBubble.prototype.position_changed;InfoBubble.prototype.panToView=function(){var e=this.getProjection();if(!e){return}if(!this.bubble_){return}var t=this.getAnchorHeight_();var n=this.bubble_.offsetHeight+t;var r=this.get("map");var i=r.getDiv();var s=i.offsetHeight;var o=this.getPosition();var u=e.fromLatLngToContainerPixel(r.getCenter());var a=e.fromLatLngToContainerPixel(o);var f=u.y-n;var l=s-u.y;var c=f<0;var h=0;if(c){f*=-1;h=(f+l)/2}a.y-=h;o=e.fromContainerPixelToLatLng(a);if(r.getCenter()!=o){r.panTo(o)}};InfoBubble.prototype["panToView"]=InfoBubble.prototype.panToView;InfoBubble.prototype.htmlToDocumentFragment_=function(e){e=e.replace(/^\s*([\S\s]*)\b\s*$/,"$1");var t=document.createElement("DIV");t.innerHTML=e;if(t.childNodes.length==1){return t.removeChild(t.firstChild)}else{var n=document.createDocumentFragment();while(t.firstChild){n.appendChild(t.firstChild)}return n}};InfoBubble.prototype.removeChildren_=function(e){if(!e){return}var t;while(t=e.firstChild){e.removeChild(t)}};InfoBubble.prototype.setContent=function(e){this.set("content",e)};InfoBubble.prototype["setContent"]=InfoBubble.prototype.setContent;InfoBubble.prototype.getContent=function(){return this.get("content")};InfoBubble.prototype["getContent"]=InfoBubble.prototype.getContent;InfoBubble.prototype.updateContent_=function(){if(!this.content_){return}this.removeChildren_(this.content_);var e=this.getContent();if(e){if(typeof e=="string"){e=this.htmlToDocumentFragment_(e)}this.content_.appendChild(e);var t=this;var n=this.content_.getElementsByTagName("IMG");for(var r=0,i;i=n[r];r++){google.maps.event.addDomListener(i,"load",function(){t.imageLoaded_()})}google.maps.event.trigger(this,"domready")}this.redraw_()};InfoBubble.prototype.imageLoaded_=function(){var e=!this.get("disableAutoPan");this.redraw_();if(e&&(this.tabs_.length==0||this.activeTab_.index==0)){this.panToView()}};InfoBubble.prototype.updateTabStyles_=function(){if(this.tabs_&&this.tabs_.length){for(var e=0,t;t=this.tabs_[e];e++){this.setTabStyle_(t.tab)}this.activeTab_.style["zIndex"]=this.baseZIndex_;var n=this.getBorderWidth_();var r=this.getPadding_()/2;this.activeTab_.style["borderBottomWidth"]=0;this.activeTab_.style["paddingBottom"]=this.px(r+n)}};InfoBubble.prototype.setTabStyle_=function(e){var t=this.get("backgroundColor");var n=this.get("borderColor");var r=this.getBorderRadius_();var i=this.getBorderWidth_();var s=this.getPadding_();var o=this.px(-Math.max(s,r));var u=this.px(r);var a=this.baseZIndex_;if(e.index){a-=e.index}var f={cssFloat:"left",position:"relative",cursor:"pointer",backgroundColor:t,border:this.px(i)+" solid "+n,padding:this.px(s/2)+" "+this.px(s),marginRight:o,whiteSpace:"nowrap",borderRadiusTopLeft:u,MozBorderRadiusTopleft:u,webkitBorderTopLeftRadius:u,borderRadiusTopRight:u,MozBorderRadiusTopright:u,webkitBorderTopRightRadius:u,zIndex:a,display:"inline"};for(var l in f){e.style[l]=f[l]}var c=this.get("tabClassName");if(c!=undefined){e.className+=" "+c}};InfoBubble.prototype.addTabActions_=function(e){var t=this;e.listener_=google.maps.event.addDomListener(e,"click",function(){t.setTabActive_(this)})};InfoBubble.prototype.setTabActive=function(e){var t=this.tabs_[e-1];if(t){this.setTabActive_(t.tab)}};InfoBubble.prototype["setTabActive"]=InfoBubble.prototype.setTabActive;InfoBubble.prototype.setTabActive_=function(e){if(!e){this.setContent("");this.updateContent_();return}var t=this.getPadding_()/2;var n=this.getBorderWidth_();if(this.activeTab_){var r=this.activeTab_;r.style["zIndex"]=this.baseZIndex_-r.index;r.style["paddingBottom"]=this.px(t);r.style["borderBottomWidth"]=this.px(n)}e.style["zIndex"]=this.baseZIndex_;e.style["borderBottomWidth"]=0;e.style["marginBottomWidth"]="-10px";e.style["paddingBottom"]=this.px(t+n);this.setContent(this.tabs_[e.index].content);this.updateContent_();this.activeTab_=e;this.redraw_()};InfoBubble.prototype.setMaxWidth=function(e){this.set("maxWidth",e)};InfoBubble.prototype["setMaxWidth"]=InfoBubble.prototype.setMaxWidth;InfoBubble.prototype.maxWidth_changed=function(){this.redraw_()};InfoBubble.prototype["maxWidth_changed"]=InfoBubble.prototype.maxWidth_changed;InfoBubble.prototype.setMaxHeight=function(e){this.set("maxHeight",e)};InfoBubble.prototype["setMaxHeight"]=InfoBubble.prototype.setMaxHeight;InfoBubble.prototype.maxHeight_changed=function(){this.redraw_()};InfoBubble.prototype["maxHeight_changed"]=InfoBubble.prototype.maxHeight_changed;InfoBubble.prototype.setMinWidth=function(e){this.set("minWidth",e)};InfoBubble.prototype["setMinWidth"]=InfoBubble.prototype.setMinWidth;InfoBubble.prototype.minWidth_changed=function(){this.redraw_()};InfoBubble.prototype["minWidth_changed"]=InfoBubble.prototype.minWidth_changed;InfoBubble.prototype.setMinHeight=function(e){this.set("minHeight",e)};InfoBubble.prototype["setMinHeight"]=InfoBubble.prototype.setMinHeight;InfoBubble.prototype.minHeight_changed=function(){this.redraw_()};InfoBubble.prototype["minHeight_changed"]=InfoBubble.prototype.minHeight_changed;InfoBubble.prototype.addTab=function(e,t){var n=document.createElement("DIV");n.innerHTML=e;this.setTabStyle_(n);this.addTabActions_(n);this.tabsContainer_.appendChild(n);this.tabs_.push({label:e,content:t,tab:n});n.index=this.tabs_.length-1;n.style["zIndex"]=this.baseZIndex_-n.index;if(!this.activeTab_){this.setTabActive_(n)}n.className=n.className+" "+this.animationName_;this.redraw_()};InfoBubble.prototype["addTab"]=InfoBubble.prototype.addTab;InfoBubble.prototype.updateTab=function(e,t,n){if(!this.tabs_.length||e<0||e>=this.tabs_.length){return}var r=this.tabs_[e];if(t!=undefined){r.tab.innerHTML=r.label=t}if(n!=undefined){r.content=n}if(this.activeTab_==r.tab){this.setContent(r.content);this.updateContent_()}this.redraw_()};InfoBubble.prototype["updateTab"]=InfoBubble.prototype.updateTab;InfoBubble.prototype.removeTab=function(e){if(!this.tabs_.length||e<0||e>=this.tabs_.length){return}var t=this.tabs_[e];t.tab.parentNode.removeChild(t.tab);google.maps.event.removeListener(t.tab.listener_);this.tabs_.splice(e,1);delete t;for(var n=0,r;r=this.tabs_[n];n++){r.tab.index=n}if(t.tab==this.activeTab_){if(this.tabs_[e]){this.activeTab_=this.tabs_[e].tab}else if(this.tabs_[e-1]){this.activeTab_=this.tabs_[e-1].tab}else{this.activeTab_=undefined}this.setTabActive_(this.activeTab_)}this.redraw_()};InfoBubble.prototype["removeTab"]=InfoBubble.prototype.removeTab;InfoBubble.prototype.getElementSize_=function(e,t,n){var r=document.createElement("DIV");r.style["display"]="inline";r.style["position"]="absolute";r.style["visibility"]="hidden";if(typeof e=="string"){r.innerHTML=e}else{r.appendChild(e.cloneNode(true))}document.body.appendChild(r);var i=new google.maps.Size(r.offsetWidth,r.offsetHeight);if(t&&i.width>t){r.style["width"]=this.px(t);i=new google.maps.Size(r.offsetWidth,r.offsetHeight)}if(n&&i.height>n){r.style["height"]=this.px(n);i=new google.maps.Size(r.offsetWidth,r.offsetHeight)}document.body.removeChild(r);delete r;return i};InfoBubble.prototype.redraw_=function(){this.figureOutSize_();this.positionCloseButton_();this.draw()};InfoBubble.prototype.figureOutSize_=function(){var e=this.get("map");if(!e){return}var t=this.getPadding_();var n=this.getBorderWidth_();var r=this.getBorderRadius_();var i=this.getArrowSize_();var s=e.getDiv();var o=i*2;var u=s.offsetWidth-o;var a=s.offsetHeight-o-this.getAnchorHeight_();var f=0;var l=this.get("minWidth")||0;var c=this.get("minHeight")||0;var h=this.get("maxWidth")||0;var p=this.get("maxHeight")||0;h=Math.min(u,h);p=Math.min(a,p);var d=0;if(this.tabs_.length){for(var v=0,m;m=this.tabs_[v];v++){var g=this.getElementSize_(m.tab,h,p);var y=this.getElementSize_(m.content,h,p);if(l<g.width){l=g.width}d+=g.width;if(c<g.height){c=g.height}if(g.height>f){f=g.height}if(l<y.width){l=y.width}if(c<y.height){c=y.height}}}else{var b=this.get("content");if(typeof b=="string"){b=this.htmlToDocumentFragment_(b)}if(b){var y=this.getElementSize_(b,h,p);if(l<y.width){l=y.width}if(c<y.height){c=y.height}}}if(h){l=Math.min(l,h)}if(p){c=Math.min(c,p)}l=Math.max(l,d);if(l==d){l=l+2*t}i=i*2;l=Math.max(l,i);if(l>u){l=u}if(c>a){c=a-f}if(this.tabsContainer_){this.tabHeight_=f;this.tabsContainer_.style["width"]=this.px(d)}this.contentContainer_.style["width"]=this.px(l);this.contentContainer_.style["height"]=this.px(c)};InfoBubble.prototype.getAnchorHeight_=function(){var e=this.get("anchor");if(e){var t=this.get("anchorPoint");if(t){return-1*t.y}}return 0};InfoBubble.prototype.anchorPoint_changed=function(){this.draw()};InfoBubble.prototype["anchorPoint_changed"]=InfoBubble.prototype.anchorPoint_changed;InfoBubble.prototype.positionCloseButton_=function(){var e=this.getBorderRadius_();var t=this.getBorderWidth_();var n=2;var r=2;if(this.tabs_.length&&this.tabHeight_){r+=this.tabHeight_}r+=t;n+=t;var i=this.contentContainer_;if(i&&i.clientHeight<i.scrollHeight){n+=15}this.close_.style["right"]=this.px(n);this.close_.style["top"]=this.px(r)};inherits(MarkerLabel_,google.maps.OverlayView);MarkerLabel_.getSharedCross=function(e){var t;if(typeof MarkerLabel_.getSharedCross.crossDiv==="undefined"){t=document.createElement("img");t.style.cssText="position: absolute; z-index: 1000002; display: none;";t.style.marginLeft="-8px";t.style.marginTop="-9px";t.src=e;MarkerLabel_.getSharedCross.crossDiv=t}return MarkerLabel_.getSharedCross.crossDiv};MarkerLabel_.prototype.onAdd=function(){var e=this;var t=false;var n=false;var r;var i,s;var o;var u;var a;var f;var l=20;var c="url("+this.handCursorURL_+")";var h=function(e){if(e.preventDefault){e.preventDefault()}e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation()}};var p=function(){e.marker_.setAnimation(null)};this.getPanes().overlayImage.appendChild(this.labelDiv_);this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_);if(typeof MarkerLabel_.getSharedCross.processed==="undefined"){this.getPanes().overlayImage.appendChild(this.crossDiv_);MarkerLabel_.getSharedCross.processed=true}this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",function(t){if(e.marker_.getDraggable()||e.marker_.getClickable()){this.style.cursor="pointer";google.maps.event.trigger(e.marker_,"mouseover",t)}}),google.maps.event.addDomListener(this.eventDiv_,"mouseout",function(t){if((e.marker_.getDraggable()||e.marker_.getClickable())&&!n){this.style.cursor=e.marker_.getCursor();google.maps.event.trigger(e.marker_,"mouseout",t)}}),google.maps.event.addDomListener(this.eventDiv_,"mousedown",function(r){n=false;if(e.marker_.getDraggable()){t=true;this.style.cursor=c}if(e.marker_.getDraggable()||e.marker_.getClickable()){google.maps.event.trigger(e.marker_,"mousedown",r);h(r)}}),google.maps.event.addDomListener(document,"mouseup",function(i){var s;if(t){t=false;e.eventDiv_.style.cursor="pointer";google.maps.event.trigger(e.marker_,"mouseup",i)}if(n){if(u){s=e.getProjection().fromLatLngToDivPixel(e.marker_.getPosition());s.y+=l;e.marker_.setPosition(e.getProjection().fromDivPixelToLatLng(s));try{e.marker_.setAnimation(google.maps.Animation.BOUNCE);setTimeout(p,1406)}catch(a){}}e.crossDiv_.style.display="none";e.marker_.setZIndex(r);o=true;n=false;i.latLng=e.marker_.getPosition();google.maps.event.trigger(e.marker_,"dragend",i)}}),google.maps.event.addListener(e.marker_.getMap(),"mousemove",function(o){var c;if(t){if(n){o.latLng=new google.maps.LatLng(o.latLng.lat()-i,o.latLng.lng()-s);c=e.getProjection().fromLatLngToDivPixel(o.latLng);if(u){e.crossDiv_.style.left=c.x+"px";e.crossDiv_.style.top=c.y+"px";e.crossDiv_.style.display="";c.y-=l}e.marker_.setPosition(e.getProjection().fromDivPixelToLatLng(c));if(u){e.eventDiv_.style.top=c.y+l+"px"}google.maps.event.trigger(e.marker_,"drag",o)}else{i=o.latLng.lat()-e.marker_.getPosition().lat();s=o.latLng.lng()-e.marker_.getPosition().lng();r=e.marker_.getZIndex();a=e.marker_.getPosition();f=e.marker_.getMap().getCenter();u=e.marker_.get("raiseOnDrag");n=true;e.marker_.setZIndex(1e6);o.latLng=e.marker_.getPosition();google.maps.event.trigger(e.marker_,"dragstart",o)}}}),google.maps.event.addDomListener(document,"keydown",function(t){if(n){if(t.keyCode===27){u=false;e.marker_.setPosition(a);e.marker_.getMap().setCenter(f);google.maps.event.trigger(document,"mouseup",t)}}}),google.maps.event.addDomListener(this.eventDiv_,"click",function(t){if(e.marker_.getDraggable()||e.marker_.getClickable()){if(o){o=false}else{google.maps.event.trigger(e.marker_,"click",t);h(t)}}}),google.maps.event.addDomListener(this.eventDiv_,"dblclick",function(t){if(e.marker_.getDraggable()||e.marker_.getClickable()){google.maps.event.trigger(e.marker_,"dblclick",t);h(t)}}),google.maps.event.addListener(this.marker_,"dragstart",function(e){if(!n){u=this.get("raiseOnDrag")}}),google.maps.event.addListener(this.marker_,"drag",function(t){if(!n){if(u){e.setPosition(l);e.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:+1)}}}),google.maps.event.addListener(this.marker_,"dragend",function(t){if(!n){if(u){e.setPosition(0)}}}),google.maps.event.addListener(this.marker_,"position_changed",function(){e.setPosition()}),google.maps.event.addListener(this.marker_,"zindex_changed",function(){e.setZIndex()}),google.maps.event.addListener(this.marker_,"visible_changed",function(){e.setVisible()}),google.maps.event.addListener(this.marker_,"labelvisible_changed",function(){e.setVisible()}),google.maps.event.addListener(this.marker_,"title_changed",function(){e.setTitle()}),google.maps.event.addListener(this.marker_,"labelcontent_changed",function(){e.setContent()}),google.maps.event.addListener(this.marker_,"labelanchor_changed",function(){e.setAnchor()}),google.maps.event.addListener(this.marker_,"labelclass_changed",function(){e.setStyles()}),google.maps.event.addListener(this.marker_,"labelstyle_changed",function(){e.setStyles()})]};MarkerLabel_.prototype.onRemove=function(){var e;this.labelDiv_.parentNode.removeChild(this.labelDiv_);this.eventDiv_.parentNode.removeChild(this.eventDiv_);for(e=0;e<this.listeners_.length;e++){google.maps.event.removeListener(this.listeners_[e])}};MarkerLabel_.prototype.draw=function(){this.setContent();this.setTitle();this.setStyles()};MarkerLabel_.prototype.setContent=function(){var e=this.marker_.get("labelContent");if(typeof e.nodeType==="undefined"){this.labelDiv_.innerHTML=e;this.eventDiv_.innerHTML=this.labelDiv_.innerHTML}else{this.labelDiv_.innerHTML="";this.labelDiv_.appendChild(e);e=e.cloneNode(true);this.eventDiv_.appendChild(e)}};MarkerLabel_.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""};MarkerLabel_.prototype.setStyles=function(){var e,t;this.labelDiv_.className=this.marker_.get("labelClass");this.eventDiv_.className=this.labelDiv_.className;this.labelDiv_.style.cssText="";this.eventDiv_.style.cssText="";t=this.marker_.get("labelStyle");for(e in t){if(t.hasOwnProperty(e)){this.labelDiv_.style[e]=t[e];this.eventDiv_.style[e]=t[e]}}this.setMandatoryStyles()};MarkerLabel_.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute";this.labelDiv_.style.overflow="hidden";if(typeof this.labelDiv_.style.opacity!=="undefined"&&this.labelDiv_.style.opacity!==""){this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+this.labelDiv_.style.opacity*100+')"';this.labelDiv_.style.filter="alpha(opacity="+this.labelDiv_.style.opacity*100+")"}this.eventDiv_.style.position=this.labelDiv_.style.position;this.eventDiv_.style.overflow=this.labelDiv_.style.overflow;this.eventDiv_.style.opacity=.01;this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"';this.eventDiv_.style.filter="alpha(opacity=1)";this.setAnchor();this.setPosition();this.setVisible()};MarkerLabel_.prototype.setAnchor=function(){var e=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-e.x+"px";this.labelDiv_.style.marginTop=-e.y+"px";this.eventDiv_.style.marginLeft=-e.x+"px";this.eventDiv_.style.marginTop=-e.y+"px"};MarkerLabel_.prototype.setPosition=function(e){var t=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());if(typeof e==="undefined"){e=0}this.labelDiv_.style.left=Math.round(t.x)+"px";this.labelDiv_.style.top=Math.round(t.y-e)+"px";this.eventDiv_.style.left=this.labelDiv_.style.left;this.eventDiv_.style.top=this.labelDiv_.style.top;this.setZIndex()};MarkerLabel_.prototype.setZIndex=function(){var e=this.marker_.get("labelInBackground")?-1:+1;if(typeof this.marker_.getZIndex()==="undefined"){this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+e;this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex}else{this.labelDiv_.style.zIndex=this.marker_.getZIndex()+e;this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex}};MarkerLabel_.prototype.setVisible=function(){if(this.marker_.get("labelVisible")){this.labelDiv_.style.display=this.marker_.getVisible()?"block":"none"}else{this.labelDiv_.style.display="none"}this.eventDiv_.style.display=this.labelDiv_.style.display};inherits(MarkerWithLabel,google.maps.Marker);MarkerWithLabel.prototype.setMap=function(e){google.maps.Marker.prototype.setMap.apply(this,arguments);this.label.setMap(e)};
/*! This file is auto-generated */
/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return n.indexOf(t)==-1&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n=i[e]=i[e]||{};return n[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return n!=-1&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var r=i[o],s=n&&n[r];s&&(this.off(e,r),delete n[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e){if(Array.isArray(e))return e;var t="object"==typeof e&&"number"==typeof e.length;return t?d.call(e):[e]}function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);var s=e;return"string"==typeof e&&(s=document.querySelectorAll(e)),s?(this.elements=n(s),this.options=i({},this.options),"function"==typeof t?r=t:i(this.options,t),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(s||e))}function r(e){this.img=e}function s(e,t){this.url=e,this.element=t,this.img=new Image}var h=e.jQuery,a=e.console,d=Array.prototype.slice;o.prototype=Object.create(t.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&u[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var u={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},o.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},o.prototype.addBackground=function(e,t){var i=new s(e,t);this.images.push(i)},o.prototype.check=function(){function e(e,i,n){setTimeout(function(){t.progress(e,i,n)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},o.makeJQueryPlugin=function(t){t=t||e.jQuery,t&&(h=t,h.fn.imagesLoaded=function(e,t){var i=new o(this,e,t);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
/*! This file is auto-generated */
/*!
 * Masonry PACKAGED v4.2.2
 * Cascading grid layout library
 * https://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */
!function(t,e){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,function(t,e){"use strict";function i(i,r,a){function h(t,e,n){var o,r="$()."+i+'("'+e+'")';return t.each(function(t,h){var u=a.data(h,i);if(!u)return void s(i+" not initialized. Cannot call methods, i.e. "+r);var d=u[e];if(!d||"_"==e.charAt(0))return void s(r+" is not a valid method");var l=d.apply(u,n);o=void 0===o?l:o}),void 0!==o?o:t}function u(t,e){t.each(function(t,n){var o=a.data(n,i);o?(o.option(e),o._init()):(o=new r(n,e),a.data(n,i,o))})}a=a||e||t.jQuery,a&&(r.prototype.option||(r.prototype.option=function(t){a.isPlainObject(t)&&(this.options=a.extend(!0,this.options,t))}),a.fn[i]=function(t){if("string"==typeof t){var e=o.call(arguments,1);return h(this,t,e)}return u(this,t),this},n(a))}function n(t){!t||t&&t.bridget||(t.bridget=i)}var o=Array.prototype.slice,r=t.console,s="undefined"==typeof r?function(){}:function(t){r.error(t)};return n(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||{};return n[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],o=0;o<i.length;o++){var r=i[o],s=n&&n[r];s&&(this.off(t,r),delete n[r]),r.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function t(t){var e=parseFloat(t),i=-1==t.indexOf("%")&&!isNaN(e);return i&&e}function e(){}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;u>e;e++){var i=h[e];t[i]=0}return t}function n(t){var e=getComputedStyle(t);return e||a("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e}function o(){if(!d){d=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var i=document.body||document.documentElement;i.appendChild(e);var o=n(e);s=200==Math.round(t(o.width)),r.isBoxSizeOuter=s,i.removeChild(e)}}function r(e){if(o(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var r=n(e);if("none"==r.display)return i();var a={};a.width=e.offsetWidth,a.height=e.offsetHeight;for(var d=a.isBorderBox="border-box"==r.boxSizing,l=0;u>l;l++){var c=h[l],f=r[c],m=parseFloat(f);a[c]=isNaN(m)?0:m}var p=a.paddingLeft+a.paddingRight,g=a.paddingTop+a.paddingBottom,y=a.marginLeft+a.marginRight,v=a.marginTop+a.marginBottom,_=a.borderLeftWidth+a.borderRightWidth,z=a.borderTopWidth+a.borderBottomWidth,E=d&&s,b=t(r.width);b!==!1&&(a.width=b+(E?0:p+_));var x=t(r.height);return x!==!1&&(a.height=x+(E?0:g+z)),a.innerWidth=a.width-(p+_),a.innerHeight=a.height-(g+z),a.outerWidth=a.width+y,a.outerHeight=a.height+v,a}}var s,a="undefined"==typeof console?e:function(t){console.error(t)},h=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],u=h.length,d=!1;return r}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var t=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i],o=n+"MatchesSelector";if(t[o])return o}}();return function(e,i){return e[t](i)}}),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,function(t,e){var i={};i.extend=function(t,e){for(var i in e)t[i]=e[i];return t},i.modulo=function(t,e){return(t%e+e)%e};var n=Array.prototype.slice;i.makeArray=function(t){if(Array.isArray(t))return t;if(null===t||void 0===t)return[];var e="object"==typeof t&&"number"==typeof t.length;return e?n.call(t):[t]},i.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},i.getParent=function(t,i){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,n){t=i.makeArray(t);var o=[];return t.forEach(function(t){if(t instanceof HTMLElement){if(!n)return void o.push(t);e(t,n)&&o.push(t);for(var i=t.querySelectorAll(n),r=0;r<i.length;r++)o.push(i[r])}}),o},i.debounceMethod=function(t,e,i){i=i||100;var n=t.prototype[e],o=e+"Timeout";t.prototype[e]=function(){var t=this[o];clearTimeout(t);var e=arguments,r=this;this[o]=setTimeout(function(){n.apply(r,e),delete r[o]},i)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var o=t.console;return i.htmlInit=function(e,n){i.docReady(function(){var r=i.toDashed(n),s="data-"+r,a=document.querySelectorAll("["+s+"]"),h=document.querySelectorAll(".js-"+r),u=i.makeArray(a).concat(i.makeArray(h)),d=s+"-options",l=t.jQuery;u.forEach(function(t){var i,r=t.getAttribute(s)||t.getAttribute(d);try{i=r&&JSON.parse(r)}catch(a){return void(o&&o.error("Error parsing "+s+" on "+t.className+": "+a))}var h=new e(t,i);l&&l.data(t,n,h)})})},i}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,function(t,e){"use strict";function i(t){for(var e in t)return!1;return e=null,!0}function n(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}function o(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}var r=document.documentElement.style,s="string"==typeof r.transition?"transition":"WebkitTransition",a="string"==typeof r.transform?"transform":"WebkitTransform",h={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[s],u={transform:a,transition:s,transitionDuration:s+"Duration",transitionProperty:s+"Property",transitionDelay:s+"Delay"},d=n.prototype=Object.create(t.prototype);d.constructor=n,d._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},d.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},d.getSize=function(){this.size=e(this.element)},d.css=function(t){var e=this.element.style;for(var i in t){var n=u[i]||i;e[n]=t[i]}},d.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=t[e?"left":"right"],o=t[i?"top":"bottom"],r=parseFloat(n),s=parseFloat(o),a=this.layout.size;-1!=n.indexOf("%")&&(r=r/100*a.width),-1!=o.indexOf("%")&&(s=s/100*a.height),r=isNaN(r)?0:r,s=isNaN(s)?0:s,r-=e?a.paddingLeft:a.paddingRight,s-=i?a.paddingTop:a.paddingBottom,this.position.x=r,this.position.y=s},d.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),o=i?"paddingLeft":"paddingRight",r=i?"left":"right",s=i?"right":"left",a=this.position.x+t[o];e[r]=this.getXValue(a),e[s]="";var h=n?"paddingTop":"paddingBottom",u=n?"top":"bottom",d=n?"bottom":"top",l=this.position.y+t[h];e[u]=this.getYValue(l),e[d]="",this.css(e),this.emitEvent("layout",[this])},d.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},d.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},d._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,o=t==this.position.x&&e==this.position.y;if(this.setPosition(t,e),o&&!this.isTransitioning)return void this.layoutPosition();var r=t-i,s=e-n,a={};a.transform=this.getTranslate(r,s),this.transition({to:a,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},d.getTranslate=function(t,e){var i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop");return t=i?t:-t,e=n?e:-e,"translate3d("+t+"px, "+e+"px, 0)"},d.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},d.moveTo=d._transitionTo,d.setPosition=function(t,e){this.position.x=parseFloat(t),this.position.y=parseFloat(e)},d._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},d.transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);var n=this.element.offsetHeight;n=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var l="opacity,"+o(a);d.enableTransition=function(){if(!this.isTransitioning){var t=this.layout.options.transitionDuration;t="number"==typeof t?t+"ms":t,this.css({transitionProperty:l,transitionDuration:t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(h,this,!1)}},d.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},d.onotransitionend=function(t){this.ontransitionend(t)};var c={"-webkit-transform":"transform"};d.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,n=c[t.propertyName]||t.propertyName;if(delete e.ingProperties[n],i(e.ingProperties)&&this.disableTransition(),n in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[n]),n in e.onEnd){var o=e.onEnd[n];o.call(this),delete e.onEnd[n]}this.emitEvent("transitionEnd",[this])}},d.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(h,this,!1),this.isTransitioning=!1},d._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var f={transitionProperty:"",transitionDuration:"",transitionDelay:""};return d.removeTransitionStyles=function(){this.css(f)},d.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},d.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},d.remove=function(){return s&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),void this.hide()):void this.removeElem()},d.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={},i=this.getHideRevealTransitionEndProperty("visibleStyle");e[i]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},d.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},d.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var i in e)return i},d.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={},i=this.getHideRevealTransitionEndProperty("hiddenStyle");e[i]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},d.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},d.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},n}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(i,n,o,r){return e(t,i,n,o,r)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):t.Outlayer=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,t.Outlayer.Item)}(window,function(t,e,i,n,o){"use strict";function r(t,e){var i=n.getQueryElement(t);if(!i)return void(h&&h.error("Bad element for "+this.constructor.namespace+": "+(i||t)));this.element=i,u&&(this.$element=u(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e);var o=++l;this.element.outlayerGUID=o,c[o]=this,this._create();var r=this._getOption("initLayout");r&&this.layout()}function s(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}function a(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),i=e&&e[1],n=e&&e[2];if(!i.length)return 0;i=parseFloat(i);var o=m[n]||1;return i*o}var h=t.console,u=t.jQuery,d=function(){},l=0,c={};r.namespace="outlayer",r.Item=o,r.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var f=r.prototype;n.extend(f,e.prototype),f.option=function(t){n.extend(this.options,t)},f._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},r.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},f._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle);var t=this._getOption("resize");t&&this.bindResize()},f.reloadItems=function(){this.items=this._itemize(this.element.children)},f._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],o=0;o<e.length;o++){var r=e[o],s=new i(r,this);n.push(s)}return n},f._filterFindItemElements=function(t){return n.filterFindElements(t,this.options.itemSelector)},f.getItemElements=function(){return this.items.map(function(t){return t.element})},f.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},f._init=f.layout,f._resetLayout=function(){this.getSize()},f.getSize=function(){this.size=i(this.element)},f._getMeasurement=function(t,e){var n,o=this.options[t];o?("string"==typeof o?n=this.element.querySelector(o):o instanceof HTMLElement&&(n=o),this[t]=n?i(n)[e]:o):this[t]=0},f.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},f._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},f._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){var i=[];t.forEach(function(t){var n=this._getItemLayoutPosition(t);n.item=t,n.isInstant=e||t.isLayoutInstant,i.push(n)},this),this._processLayoutQueue(i)}},f._getItemLayoutPosition=function(){return{x:0,y:0}},f._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},f.updateStagger=function(){var t=this.options.stagger;return null===t||void 0===t?void(this.stagger=0):(this.stagger=a(t),this.stagger)},f._positionItem=function(t,e,i,n,o){n?t.goTo(e,i):(t.stagger(o*this.stagger),t.moveTo(e,i))},f._postLayout=function(){this.resizeContainer()},f.resizeContainer=function(){var t=this._getOption("resizeContainer");if(t){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},f._getContainerSize=d,f._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},f._emitCompleteOnItems=function(t,e){function i(){o.dispatchEvent(t+"Complete",null,[e])}function n(){s++,s==r&&i()}var o=this,r=e.length;if(!e||!r)return void i();var s=0;e.forEach(function(e){e.once(t,n)})},f.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;if(this.emitEvent(t,n),u)if(this.$element=this.$element||u(this.element),e){var o=u.Event(e);o.type=t,this.$element.trigger(o,i)}else this.$element.trigger(t,i)},f.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},f.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},f.stamp=function(t){t=this._find(t),t&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},f.unstamp=function(t){t=this._find(t),t&&t.forEach(function(t){n.removeFrom(this.stamps,t),this.unignore(t)},this)},f._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n.makeArray(t)):void 0},f._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},f._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},f._manageStamp=d,f._getElementOffset=function(t){var e=t.getBoundingClientRect(),n=this._boundingRect,o=i(t),r={left:e.left-n.left-o.marginLeft,top:e.top-n.top-o.marginTop,right:n.right-e.right-o.marginRight,bottom:n.bottom-e.bottom-o.marginBottom};return r},f.handleEvent=n.handleEvent,f.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},f.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},f.onresize=function(){this.resize()},n.debounceMethod(r,"onresize",100),f.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},f.needsResizeLayout=function(){var t=i(this.element),e=this.size&&t;return e&&t.innerWidth!==this.size.innerWidth},f.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},f.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},f.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},f.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,i){t.stagger(i*e),t.reveal()})}},f.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,i){t.stagger(i*e),t.hide()})}},f.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},f.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},f.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},f.getItems=function(t){t=n.makeArray(t);var e=[];return t.forEach(function(t){var i=this.getItem(t);i&&e.push(i)},this),e},f.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach(function(t){t.remove(),n.removeFrom(this.items,t)},this)},f.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();var e=this.element.outlayerGUID;delete c[e],delete this.element.outlayerGUID,u&&u.removeData(this.element,this.constructor.namespace)},r.data=function(t){t=n.getQueryElement(t);var e=t&&t.outlayerGUID;return e&&c[e]},r.create=function(t,e){var i=s(r);return i.defaults=n.extend({},r.defaults),n.extend(i.defaults,e),i.compatOptions=n.extend({},r.compatOptions),i.namespace=t,i.data=r.data,i.Item=s(o),n.htmlInit(i,t),u&&u.bridget&&u.bridget(t,i),i};var m={ms:1,s:1e3};return r.Item=o,r}),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,function(t,e){var i=t.create("masonry");i.compatOptions.fitWidth="isFitWidth";var n=i.prototype;return n._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},n.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}var n=this.columnWidth+=this.gutter,o=this.containerWidth+this.gutter,r=o/n,s=n-o%n,a=s&&1>s?"round":"floor";r=Math[a](r),this.cols=Math.max(r,1)},n.getContainerWidth=function(){var t=this._getOption("fitWidth"),i=t?this.element.parentNode:this.element,n=e(i);this.containerWidth=n&&n.innerWidth},n._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,i=e&&1>e?"round":"ceil",n=Math[i](t.size.outerWidth/this.columnWidth);n=Math.min(n,this.cols);for(var o=this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition",r=this[o](n,t),s={x:this.columnWidth*r.col,y:r.y},a=r.y+t.size.outerHeight,h=n+r.col,u=r.col;h>u;u++)this.colYs[u]=a;return s},n._getTopColPosition=function(t){var e=this._getTopColGroup(t),i=Math.min.apply(Math,e);return{col:e.indexOf(i),y:i}},n._getTopColGroup=function(t){if(2>t)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;i>n;n++)e[n]=this._getColGroupY(n,t);return e},n._getColGroupY=function(t,e){if(2>e)return this.colYs[t];var i=this.colYs.slice(t,t+e);return Math.max.apply(Math,i)},n._getHorizontalColPosition=function(t,e){var i=this.horizontalColIndex%this.cols,n=t>1&&i+t>this.cols;i=n?0:i;var o=e.size.outerWidth&&e.size.outerHeight;return this.horizontalColIndex=o?i+t:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,t)}},n._manageStamp=function(t){var i=e(t),n=this._getElementOffset(t),o=this._getOption("originLeft"),r=o?n.left:n.right,s=r+i.outerWidth,a=Math.floor(r/this.columnWidth);a=Math.max(0,a);var h=Math.floor(s/this.columnWidth);h-=s%this.columnWidth?0:1,h=Math.min(this.cols-1,h);for(var u=this._getOption("originTop"),d=(u?n.top:n.bottom)+i.outerHeight,l=a;h>=l;l++)this.colYs[l]=Math.max(d,this.colYs[l])},n._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},n._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},n.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},i});
/*!
 * Masonry v2 shim
 * to maintain backwards compatibility
 * as of Masonry v3.1.2
 *
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */
!function(a){"use strict";var b=a.Masonry;b.prototype._remapV2Options=function(){this._remapOption("gutterWidth","gutter"),this._remapOption("isResizable","isResizeBound"),this._remapOption("isRTL","isOriginLeft",function(a){return!a});var a=this.options.isAnimated;if(void 0!==a&&(this.options.transitionDuration=a?this.options.transitionDuration:0),void 0===a||a){var b=this.options.animationOptions,c=b&&b.duration;c&&(this.options.transitionDuration="string"==typeof c?c:c+"ms")}},b.prototype._remapOption=function(a,b,c){var d=this.options[a];void 0!==d&&(this.options[b]=c?c(d):d)};var c=b.prototype._create;b.prototype._create=function(){var a=this;this._remapV2Options(),c.apply(this,arguments),setTimeout(function(){jQuery(a.element).addClass("masonry")},0)};var d=b.prototype.layout;b.prototype.layout=function(){this._remapV2Options(),d.apply(this,arguments)};var e=b.prototype.option;b.prototype.option=function(){e.apply(this,arguments),this._remapV2Options()};var f=b.prototype._itemize;b.prototype._itemize=function(a){var b=f.apply(this,arguments);return jQuery(a).addClass("masonry-brick"),b};var g=b.prototype.measureColumns;b.prototype.measureColumns=function(){var a=this.options.columnWidth;a&&"function"==typeof a&&(this.getContainerWidth(),this.columnWidth=a(this.containerWidth)),g.apply(this,arguments)},b.prototype.reload=function(){this.reloadItems.apply(this,arguments),this.layout.apply(this)};var h=b.prototype.destroy;b.prototype.destroy=function(){var a=this.getItemElements();jQuery(this.element).removeClass("masonry"),jQuery(a).removeClass("masonry-brick"),h.apply(this,arguments)}}(window);
function theChampPopup(e){window.open(e,"popUpWindow","height=400,width=600,left=400,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes")}function theChampStrReplace(e,t,n){for(var r=0;r<e.length;r++){n=n.replace(new RegExp(e[r],"g"),t[r])}return n}function theChampCallAjax(e){if(typeof jQuery!="undefined"){e()}else{theChampGetScript("http://code.jquery.com/jquery-latest.min.js",e)}}function theChampGetScript(e,t){var n=document.createElement("script");n.src=e;var r=document.getElementsByTagName("head")[0],i=false;n.onload=n.onreadystatechange=function(){if(!i&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){i=true;t();n.onload=n.onreadystatechange=null;r.removeChild(n)}};r.appendChild(n)}function theChampGetElementsByClass(e,t){if(e.getElementsByClassName){return e.getElementsByClassName(t)}else{return function(e,t){if(t==null){t=document}var n=[],r=t.getElementsByTagName("*"),i=r.length,s=new RegExp("(^|\\s)"+e+"(\\s|$)"),o,u;for(o=0,u=0;o<i;o++){if(s.test(r[o].className)){n[u]=r[o];u++}}return n}(t,e)}}if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}};
if(typeof theChampLinkingRedirection=="undefined"){var theChampLinkingRedirection='';}
function theChampLoadingIcon_fb(){jQuery(".the_champ_login_container_fb").html('<img id="the_champ_loading_image" src="'+theChampLoadingImgPath+'" />')}
function theChampLoadingIcon_goo(){jQuery(".the_champ_login_container_goo").html('<img id="the_champ_loading_image" src="'+theChampLoadingImgPath+'" />')}
function theChampAjaxUserAuth(e,t){var role=jQuery(".role_actual_login_social").html();if(role=="")role="user";if(t=="facebook"){theChampLoadingIcon_fb()}
else{theChampLoadingIcon_goo()}
jQuery.ajax({type:"POST",dataType:"json",async:false,url:theChampAjaxUrl,data:{action:"the_champ_user_auth",profileData:e,provider:t,role:role,redirectionUrl:theChampTwitterRedirect?theChampTwitterRedirect:""},success:function(e){var t=theChampSiteUrl;if(1==e.status)t="register"==e.message?e.url&&""!=e.url?e.url:theChampRegRedirectionUrl+(theChampCommentFormLogin?"/#commentform":""):"linked"==e.message?theChampLinkingRedirection+"?linked=1":e.url&&""!=e.url?e.url:theChampRedirectionUrl+(theChampCommentFormLogin?"/#commentform":"");else if(null!==e.message.match(/ask/)){var a=e.message.split("|");t=theChampSiteUrl+"?SuperSocializerEmail=1&par="+a[1]}else 0==e.status&&"registration disabled"==e.message?t="undefined"!=typeof theChampDisableRegRedirect?theChampDisableRegRedirect:decodeURIComponent(theChampTwitterRedirect):"unverified"==e.message?t=theChampSiteUrl+"?SuperSocializerUnverified=1":"not linked"==e.message?t=theChampLinkingRedirection+"?linked=0":"provider exists"==e.message&&(t=theChampLinkingRedirection+"?linked=2");window.location.reload()},error:function(){location.href=decodeURIComponent(theChampRedirectionUrl)}})}
function theChampInitiateLogin(e){var t=e.title;if("Entrar con Facebook"==t)navigator.userAgent.match("CriOS")?location.href="https://www.facebook.com/dialog/oauth?client_id="+theChampFBKey+"&redirect_uri="+theChampRedirectionUrl+"&scope="+theChampFacebookScope:theChampAuthUserFB();else if("Entrar con Twitch"==t)theChampPopup(theChampSiteUrl+"?SuperSocializerAuth=Twitch");else if("Entrar con Steam"==t)theChampPopup(theChampSteamAuthUrl);else if("Entrar con Twitter"==t)theChampPopup(theChampSiteUrl+"?SuperSocializerAuth=Twitter&super_socializer_redirect_to="+theChampTwitterRedirect);else if("Entrar con Xing"==t)theChampPopup(theChampSiteUrl+"?SuperSocializerAuth=Xing&super_socializer_redirect_to="+theChampTwitterRedirect);else{if("Entrar con Linkedin"==t)return IN.User.authorize(),!1;"Entrar con Google"==t?theChampInitializeGPLogin():"Entrar con Vkontakte"==t?theChampInitializeVKLogin():"Entrar con Instagram"==t&&theChampInitializeInstaLogin()}}
function theChampDisplayLoginIcon(e,t){if("undefined"!=typeof jQuery)for(var a=0;a<t.length;a++)jQuery("."+t[a]).css("display","block");else for(var a=0;a<t.length;a++)for(var i=theChampGetElementsByClass(e,t[a]),h=0;h<i.length;h++)i[h].style.display="block"}
function theChampValidateEmail(e){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}
function the_champ_save_email(e){var t=document.getElementById("the_champ_email").value.trim(),a=document.getElementById("the_champ_confirm_email").value.trim();return"save"!=e.id||theChampValidateEmail(t)?t!=a?(document.getElementById("the_champ_error").innerHTML="Email addresses do not match",void jQuery("#TB_ajaxContent").css("height","auto")):void theChampCallAjax(function(){theChampSaveEmail(e.id,t)}):(document.getElementById("the_champ_error").innerHTML=theChampEmailPopupErrorMsg,void jQuery("#TB_ajaxContent").css("height","auto"))}
function theChampSaveEmail(e,t){document.getElementById("the_champ_error").innerHTML='<img src="'+theChampLoadingImgPath+'" />',jQuery.ajax({type:"POST",dataType:"json",url:theChampAjaxUrl,data:{action:"the_champ_save_email",elemId:e,email:t,id:theChampEmailPopupUniqueId},success:function(e){window.history.pushState({html:"html",pageTitle:"page title"},"","?done=1"),1==e.status&&e.message.response&&"success"==e.message.response?location.href=e.message.url:1==e.status&&"success"==e.message?location.href=theChampRegRedirectionUrl:1==e.status&&"cancelled"==e.message?tb_remove():1==e.status&&"verify"==e.message?document.getElementById("TB_ajaxContent").innerHTML="<strong>"+theChampEmailPopupVerifyMessage+"</strong>":0==e.status&&(document.getElementById("the_champ_error").innerHTML=e.message,jQuery("#TB_ajaxContent").css("height","auto"))},error:function(){location.href=decodeURIComponent(theChampRedirectionUrl)}})}
function theChampCapitaliseFirstLetter2(e){return e.charAt(0).toUpperCase()+e.slice(1)}
theChampVerified&&theChampLoadEvent(function(){tb_show(theChampPopupTitle,theChampAjaxUrl)}),theChampEmailPopup&&theChampLoadEvent(function(){tb_show(theChampEmailPopupTitle,theChampEmailAjaxUrl)});var theChampCommentFormLogin=!1;
var thickboxL10n={"next":"Siguiente >","prev":"< Anterior","image":"Imagen","of":"de","close":"Cerrar","noiframes":"Esta funci\u00f3n necesita frames integrados. Tienes los iframes desactivados o tu navegador no es compatible.","loadingAnimation":"https:\/\/sedeportista.com\/wp-includes\/js\/thickbox\/loadingAnimation.gif"};
if(typeof tb_pathToImage!='string'){var tb_pathToImage=thickboxL10n.loadingAnimation;}
/*!!!!!!!!!!!!!!!!! edit below this line at your own risk !!!!!!!!!!!!!!!!!!!!!!!*/
jQuery(document).ready(function(){tb_init('a.thickbox, area.thickbox, input.thickbox');imgLoader=new Image();imgLoader.src=tb_pathToImage;});function tb_init(domChunk){jQuery('body').on('click',domChunk,tb_click).on('thickbox:iframe:loaded',function(){jQuery('#TB_window').removeClass('thickbox-loading');});}
function tb_click(){var t=this.title||this.name||null;var a=this.href||this.alt;var g=this.rel||false;tb_show(t,a,g);this.blur();return false;}
function tb_show(caption,url,imageGroup){var $closeBtn;try{if(typeof document.body.style.maxHeight==="undefined"){jQuery("body","html").css({height:"100%",width:"100%"});jQuery("html").css("overflow","hidden");if(document.getElementById("TB_HideSelect")===null){jQuery("body").append("<iframe id='TB_HideSelect'>"+thickboxL10n.noiframes+"</iframe><div id='TB_overlay'></div><div id='TB_window' class='thickbox-loading'></div>");jQuery("#TB_overlay").click(tb_remove);}}else{if(document.getElementById("TB_overlay")===null){jQuery("body").append("<div id='TB_overlay'></div><div id='TB_window' class='thickbox-loading'></div>");jQuery("#TB_overlay").click(tb_remove);jQuery('body').addClass('modal-open');}}
if(tb_detectMacXFF()){jQuery("#TB_overlay").addClass("TB_overlayMacFFBGHack");}else{jQuery("#TB_overlay").addClass("TB_overlayBG");}
if(caption===null){caption="";}
jQuery("body").append("<div id='TB_load'><img src='"+imgLoader.src+"' width='208' /></div>");jQuery('#TB_load').show();var baseURL;if(url.indexOf("?")!==-1){baseURL=url.substr(0,url.indexOf("?"));}else{baseURL=url;}
var urlString=/\.jpg$|\.jpeg$|\.png$|\.gif$|\.bmp$/;var urlType=baseURL.toLowerCase().match(urlString);if(urlType=='.jpg'||urlType=='.jpeg'||urlType=='.png'||urlType=='.gif'||urlType=='.bmp'){TB_PrevCaption="";TB_PrevURL="";TB_PrevHTML="";TB_NextCaption="";TB_NextURL="";TB_NextHTML="";TB_imageCount="";TB_FoundURL=false;if(imageGroup){TB_TempArray=jQuery("a[rel="+imageGroup+"]").get();for(TB_Counter=0;((TB_Counter<TB_TempArray.length)&&(TB_NextHTML===""));TB_Counter++){var urlTypeTemp=TB_TempArray[TB_Counter].href.toLowerCase().match(urlString);if(!(TB_TempArray[TB_Counter].href==url)){if(TB_FoundURL){TB_NextCaption=TB_TempArray[TB_Counter].title;TB_NextURL=TB_TempArray[TB_Counter].href;TB_NextHTML="<span id='TB_next'>&nbsp;&nbsp;<a href='#'>"+thickboxL10n.next+"</a></span>";}else{TB_PrevCaption=TB_TempArray[TB_Counter].title;TB_PrevURL=TB_TempArray[TB_Counter].href;TB_PrevHTML="<span id='TB_prev'>&nbsp;&nbsp;<a href='#'>"+thickboxL10n.prev+"</a></span>";}}else{TB_FoundURL=true;TB_imageCount=thickboxL10n.image+' '+(TB_Counter+1)+' '+thickboxL10n.of+' '+(TB_TempArray.length);}}}
imgPreloader=new Image();imgPreloader.onload=function(){imgPreloader.onload=null;var pagesize=tb_getPageSize();var x=pagesize[0]-150;var y=pagesize[1]-150;var imageWidth=imgPreloader.width;var imageHeight=imgPreloader.height;if(imageWidth>x){imageHeight=imageHeight*(x/imageWidth);imageWidth=x;if(imageHeight>y){imageWidth=imageWidth*(y/imageHeight);imageHeight=y;}}else if(imageHeight>y){imageWidth=imageWidth*(y/imageHeight);imageHeight=y;if(imageWidth>x){imageHeight=imageHeight*(x/imageWidth);imageWidth=x;}}
TB_WIDTH=imageWidth+30;TB_HEIGHT=imageHeight+60;jQuery("#TB_window").append("<a href='' id='TB_ImageOff'><span class='screen-reader-text'>"+thickboxL10n.close+"</span><img id='TB_Image' src='"+url+"' width='"+imageWidth+"' height='"+imageHeight+"' alt='"+caption+"'/></a>"+"<div id='TB_caption'>"+caption+"<div id='TB_secondLine'>"+TB_imageCount+TB_PrevHTML+TB_NextHTML+"</div></div><div id='TB_closeWindow'><button type='button' id='TB_closeWindowButton'><span class='screen-reader-text'>"+thickboxL10n.close+"</span><span class='tb-close-icon'></span></button></div>");jQuery("#TB_closeWindowButton").click(tb_remove);if(!(TB_PrevHTML==="")){function goPrev(){if(jQuery(document).unbind("click",goPrev)){jQuery(document).unbind("click",goPrev);}
jQuery("#TB_window").remove();jQuery("body").append("<div id='TB_window'></div>");tb_show(TB_PrevCaption,TB_PrevURL,imageGroup);return false;}
jQuery("#TB_prev").click(goPrev);}
if(!(TB_NextHTML==="")){function goNext(){jQuery("#TB_window").remove();jQuery("body").append("<div id='TB_window'></div>");tb_show(TB_NextCaption,TB_NextURL,imageGroup);return false;}
jQuery("#TB_next").click(goNext);}
jQuery(document).bind('keydown.thickbox',function(e){if(e.which==27){tb_remove();}else if(e.which==190){if(!(TB_NextHTML=="")){jQuery(document).unbind('thickbox');goNext();}}else if(e.which==188){if(!(TB_PrevHTML=="")){jQuery(document).unbind('thickbox');goPrev();}}
return false;});tb_position();jQuery("#TB_load").remove();jQuery("#TB_ImageOff").click(tb_remove);jQuery("#TB_window").css({'visibility':'visible'});};imgPreloader.src=url;}else{var queryString=url.replace(/^[^\?]+\??/,'');var params=tb_parseQuery(queryString);TB_WIDTH=(params['width']*1)+30||630;TB_HEIGHT=(params['height']*1)+40||440;ajaxContentW=TB_WIDTH-30;ajaxContentH=TB_HEIGHT-45;if(url.indexOf('TB_iframe')!=-1){urlNoQuery=url.split('TB_');jQuery("#TB_iframeContent").remove();if(params['modal']!="true"){jQuery("#TB_window").append("<div id='TB_title'><div id='TB_ajaxWindowTitle'>"+caption+"</div><div id='TB_closeAjaxWindow'><button type='button' id='TB_closeWindowButton'><span class='screen-reader-text'>"+thickboxL10n.close+"</span><span class='tb-close-icon'></span></button></div></div><iframe frameborder='0' hspace='0' allowtransparency='true' src='"+urlNoQuery[0]+"' id='TB_iframeContent' name='TB_iframeContent"+Math.round(Math.random()*1000)+"' onload='tb_showIframe()' style='width:"+(ajaxContentW+29)+"px;height:"+(ajaxContentH+17)+"px;' >"+thickboxL10n.noiframes+"</iframe>");}else{jQuery("#TB_overlay").unbind();jQuery("#TB_window").append("<iframe frameborder='0' hspace='0' allowtransparency='true' src='"+urlNoQuery[0]+"' id='TB_iframeContent' name='TB_iframeContent"+Math.round(Math.random()*1000)+"' onload='tb_showIframe()' style='width:"+(ajaxContentW+29)+"px;height:"+(ajaxContentH+17)+"px;'>"+thickboxL10n.noiframes+"</iframe>");}}else{if(jQuery("#TB_window").css("visibility")!="visible"){if(params['modal']!="true"){jQuery("#TB_window").append("<div id='TB_title'><div id='TB_ajaxWindowTitle'>"+caption+"</div><div id='TB_closeAjaxWindow'><button type='button' id='TB_closeWindowButton'><span class='screen-reader-text'>"+thickboxL10n.close+"</span><span class='tb-close-icon'></span></button></div></div><div id='TB_ajaxContent' style='width:"+ajaxContentW+"px;height:"+ajaxContentH+"px'></div>");}else{jQuery("#TB_overlay").unbind();jQuery("#TB_window").append("<div id='TB_ajaxContent' class='TB_modal' style='width:"+ajaxContentW+"px;height:"+ajaxContentH+"px;'></div>");}}else{jQuery("#TB_ajaxContent")[0].style.width=ajaxContentW+"px";jQuery("#TB_ajaxContent")[0].style.height=ajaxContentH+"px";jQuery("#TB_ajaxContent")[0].scrollTop=0;jQuery("#TB_ajaxWindowTitle").html(caption);}}
jQuery("#TB_closeWindowButton").click(tb_remove);if(url.indexOf('TB_inline')!=-1){jQuery("#TB_ajaxContent").append(jQuery('#'+params['inlineId']).children());jQuery("#TB_window").bind('tb_unload',function(){jQuery('#'+params['inlineId']).append(jQuery("#TB_ajaxContent").children());});tb_position();jQuery("#TB_load").remove();jQuery("#TB_window").css({'visibility':'visible'});}else if(url.indexOf('TB_iframe')!=-1){tb_position();jQuery("#TB_load").remove();jQuery("#TB_window").css({'visibility':'visible'});}else{var load_url=url;load_url+=-1===url.indexOf('?')?'?':'&';jQuery("#TB_ajaxContent").load(load_url+="random="+(new Date().getTime()),function(){tb_position();jQuery("#TB_load").remove();tb_init("#TB_ajaxContent a.thickbox");jQuery("#TB_window").css({'visibility':'visible'});});}}
if(!params['modal']){jQuery(document).bind('keydown.thickbox',function(e){if(e.which==27){tb_remove();return false;}});}
$closeBtn=jQuery('#TB_closeWindowButton');if($closeBtn.find('.tb-close-icon').is(':visible')){$closeBtn.focus();}}catch(e){}}
function tb_showIframe(){jQuery("#TB_load").remove();jQuery("#TB_window").css({'visibility':'visible'}).trigger('thickbox:iframe:loaded');}
function tb_remove(){jQuery("#TB_imageOff").unbind("click");jQuery("#TB_closeWindowButton").unbind("click");jQuery('#TB_window').fadeOut('fast',function(){jQuery('#TB_window, #TB_overlay, #TB_HideSelect').trigger('tb_unload').unbind().remove();jQuery('body').trigger('thickbox:removed');});jQuery('body').removeClass('modal-open');jQuery("#TB_load").remove();if(typeof document.body.style.maxHeight=="undefined"){jQuery("body","html").css({height:"auto",width:"auto"});jQuery("html").css("overflow","");}
jQuery(document).unbind('.thickbox');return false;}
function tb_position(){var isIE6=typeof document.body.style.maxHeight==="undefined";jQuery("#TB_window").css({marginLeft:'-'+parseInt((TB_WIDTH/2),10)+'px',width:TB_WIDTH+'px'});if(!isIE6){jQuery("#TB_window").css({marginTop:'-'+parseInt((TB_HEIGHT/2),10)+'px'});}}
function tb_parseQuery(query){var Params={};if(!query){return Params;}
var Pairs=query.split(/[;&]/);for(var i=0;i<Pairs.length;i++){var KeyVal=Pairs[i].split('=');if(!KeyVal||KeyVal.length!=2){continue;}
var key=unescape(KeyVal[0]);var val=unescape(KeyVal[1]);val=val.replace(/\+/g,' ');Params[key]=val;}
return Params;}
function tb_getPageSize(){var de=document.documentElement;var w=window.innerWidth||self.innerWidth||(de&&de.clientWidth)||document.body.clientWidth;var h=window.innerHeight||self.innerHeight||(de&&de.clientHeight)||document.body.clientHeight;arrayPageSize=[w,h];return arrayPageSize;}
function tb_detectMacXFF(){var userAgent=navigator.userAgent.toLowerCase();if(userAgent.indexOf('mac')!=-1&&userAgent.indexOf('firefox')!=-1){return true;}};
function theChampGoogleOnLoad(){theChampDisplayLoginIcon(document,["theChampGoogleButton","theChampGoogleLogin"])}
function theChampInitializeGPLogin(){gapi.auth.signIn({callback:theChampGPSignInCallback,clientid:theChampGoogleKey,cookiepolicy:"single_host_origin",scope:"profile email"})}
function theChampGPSignInCallback(e){e.status.signed_in?gapi.client.load("plus","v1",function(){e.access_token?theChampGetProfile():''}):''}
function theChampGetProfile(){theChampLoadingIcon_goo();var e=gapi.client.plus.people.get({userId:"me"});e.execute(function(e){return e.error?void("Access Not Configured. Please use Google Developers Console to activate the API for your project."==e.message&&(alert(theChampGoogleErrorMessage),window.open("http://support.heateor.com/how-to-get-google-plus-client-id/"))):void(e.id&&theChampCallAjax(function(){theChampAjaxUserAuth(e,"google")}))})}
!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/client:platform.js?onload=theChampGoogleOnLoad";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(e,o)}();
function theChampInitiateFB(){FB.init({appId:theChampFBKey,channelUrl:"//"+theChampSiteUrl+"/channel.html",status:!0,cookie:!0,xfbml:!0,version:"v2.8"})}
window.fbAsyncInit=function(){theChampInitiateFB(),theChampFbIosLogin&&theChampAuthUserFB(),"function"==typeof theChampDisplayLoginIcon&&theChampDisplayLoginIcon(document,["theChampFacebookButton","theChampFacebookLogin"]),typeof theChampCommentNotification!='undefined'&&theChampCommentNotification&&FB.Event.subscribe("comment.create",function(e){e.commentID&&jQuery.ajax({type:"POST",dataType:"json",url:theChampSiteUrl+"/index.php",data:{action:"the_champ_moderate_fb_comments",data:e},success:function(){}})}),typeof theChampFbLikeMycred!='undefined'&&theChampFbLikeMycred&&(FB.Event.subscribe("edge.create",function(e){heateorSsmiMycredPoints("Facebook_like_recommend","",e?e:"")}),FB.Event.subscribe("edge.remove",function(e){heateorSsmiMycredPoints("Facebook_like_recommend","",e?e:"","Minus point(s) for undoing Facebook like-recommend")})),typeof theChampSsga!='undefined'&&theChampSsga&&(FB.Event.subscribe("edge.create",function(e){heateorSsgaSocialPluginsTracking("Facebook","Like",e?e:"")}),FB.Event.subscribe("edge.remove",function(e){heateorSsgaSocialPluginsTracking("Facebook","Unlike",e?e:"")}))},function(e){var t,n="facebook-jssdk",o=e.getElementsByTagName("script")[0];e.getElementById(n)||(t=e.createElement("script"),t.id=n,t.async=!0,t.src="//connect.facebook.net/"+theChampFBLang+"/all.js",o.parentNode.insertBefore(t,o))}(document);
function theChampAuthUserFB(){FB.getLoginStatus(theChampFBCheckLoginStatus)}
function theChampFBCheckLoginStatus(response){if(response&&response.status=='connected'){theChampLoadingIcon_fb();theChampFBLoginUser()}else{FB.login(theChampFBLoginUser,{scope:theChampFacebookScope})}}
function theChampFBLoginUser(){FB.api('/me?fields=id,name,about,link,email,first_name,last_name',function(response){if(!response.id){return}
theChampCallAjax(function(){theChampAjaxUserAuth(response,'facebook')})})};
function onloadCallbackRecaptcha(){if(jQuery("#recaptcha_register").length){grecaptcha.render('recaptcha_register',{'sitekey':'6LfqjzIUAAAAAMp7IcTdBrXwtaN6XhYTizYiVLe4','theme':'light'});}
if(jQuery("#recaptcha_publica_tu_anuncio").length){grecaptcha.render('recaptcha_publica_tu_anuncio',{'sitekey':'6LfqjzIUAAAAAMp7IcTdBrXwtaN6XhYTizYiVLe4','theme':'light'});}}
function captchaCallbackRegister(){jQuery("#recaptcha_register_1").val(1);}
function captchaCallbackPublishPlace(){jQuery("#recaptcha_publica_tu_anuncio_1").val(1);}
function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1);}
function addZero(i){if(i<10){i="0"+i;}
return i;}
Date.prototype.getDateHoy=function(){var yyyy=this.getFullYear().toString();var mm=(this.getMonth()+1).toString();var dd=this.getDate().toString();return(dd[1]?dd:"0"+dd[0])+"/"+(mm[1]?mm:"0"+mm[0])+"/"+yyyy;};function getParamsGET_URL(name,url){if(!url)url=location.href;name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);return results==null?null:results[1];}
function setParamsGET_URL(url,param,value){var hash={};var parser=document.createElement('a');parser.href=url;var parameters=parser.search.split(/\?|&/);for(var i=0;i<parameters.length;i++){if(!parameters[i])
continue;var ary=parameters[i].split('=');hash[ary[0]]=ary[1];}
hash[param]=value;var list=[];Object.keys(hash).forEach(function(key){list.push(key+'='+hash[key]);});parser.search='?'+list.join('&');return parser.href;}
function geolocalizacion(forzar,refrescar){if(parseInt(ae_globals.geolocation)){if(forzar==1){frontEraseCookie('current_user_preguntado');frontEraseCookie('current_user_lat');frontEraseCookie('current_user_lng');frontEraseCookie('current_user_locality');frontEraseCookie('current_user_province');frontEraseCookie('current_user_postal_code');}
if(frontGetCookie('current_user_preguntado')==0||frontGetCookie('current_user_preguntado')==null){GMaps.geolocate({success:function(position){frontSetCookie('current_user_preguntado',1,1);var lat=position.coords.latitude;var lng=position.coords.longitude;var geocoder=new google.maps.Geocoder();var latlng=new google.maps.LatLng(lat,lng);geocoder.geocode({'latLng':latlng},function(results,status){if(status==google.maps.GeocoderStatus.OK){if(results[1]){for(var i=0;i<results[0].address_components.length;i++){for(var b=0;b<results[0].address_components[i].types.length;b++){if(results[0].address_components[i].types[b]=="locality"){var locality=results[0].address_components[i];break;}
if(results[0].address_components[i].types[b]=="administrative_area_level_2"){var provincia=results[0].address_components[i];break;}
if(results[0].address_components[i].types[b]=="postal_code"){var codigo_postal=results[0].address_components[i];break;}}}
frontSetCookie('current_user_lat',lat,1);frontSetCookie('current_user_lng',lng,1);if(locality.long_name){frontSetCookie('current_user_locality',locality.long_name,1);}
if(provincia.long_name)
frontSetCookie('current_user_province',provincia.long_name,1);if(codigo_postal.long_name)
frontSetCookie('current_user_postal_code',codigo_postal.long_name,1);AE.pubsub.trigger('ae:notification',{msg:ae_globals.geolocation_success,notice_type:'success'});if(refrescar==1){location.href=setParamsGET_URL(location.href,'l','cerca-de-ti');}
rellenarCamposConLocalizacion();}else{}}else{}});},error:function(error){frontSetCookie('current_user_preguntado',2,1);AE.pubsub.trigger('ae:notification',{msg:ae_globals.geolocation_failed,notice_type:'error'});frontEraseCookie('current_user_lat');frontEraseCookie('current_user_lng');frontEraseCookie('current_user_locality');frontEraseCookie('current_user_province');frontEraseCookie('current_user_postal_code');},not_supported:function(){frontSetCookie('current_user_preguntado',3,1);AE.pubsub.trigger('ae:notification',{msg:ae_globals.browser_supported,notice_type:'error'});frontEraseCookie('current_user_lat');frontEraseCookie('current_user_lng');frontEraseCookie('current_user_locality');frontEraseCookie('current_user_province');frontEraseCookie('current_user_postal_code');}});}}}
function rellenarCamposConLocalizacion(){var localizacion_user="";if(frontGetCookie('current_user_province')){localizacion_user=frontGetCookie('current_user_province');}
if(frontGetCookie('current_user_locality')&&frontGetCookie('current_user_province')){localizacion_user=frontGetCookie('current_user_locality')+", "+frontGetCookie('current_user_province');}
if(jQuery('#location-advanced-search').length>0&&localizacion_user){jQuery(('<option class="" value="cerca-de-ti">Cerca de ti ('+localizacion_user+')</option>')).insertAfter("#location-advanced-search option[data='por-defecto']");jQuery('#location-advanced-search').val("cerca-de-ti");jQuery('#location-advanced-search').trigger("chosen:updated");}
if(jQuery('#post-place #et_full_location').length>0&&frontGetCookie('current_user_postal_code')){var postal_code=frontGetCookie('current_user_postal_code').toLowerCase();jQuery('#post-place #et_full_location').val(postal_code);jQuery('#post-place #et_full_location').keyup()}
if(jQuery('#location-advanced-search-home').length>0&&frontGetCookie('current_user_province')){jQuery(('<option class="" value="cerca-de-ti">Cerca de ti ('+localizacion_user+')</option>')).insertAfter("#location-advanced-search-home option[data='por-defecto']");jQuery('#location-advanced-search-home').val("cerca-de-ti");jQuery('#location-advanced-search-home').trigger("chosen:updated");}
if(jQuery('#place-filter-select-provincias').length>0&&frontGetCookie('current_user_province')&&getParamsGET_URL("l")=="cerca-de-ti"){jQuery(('<option class="" value="cerca-de-ti">Cerca de ti ('+localizacion_user+')</option>')).insertAfter("#place-filter-select-provincias option[data='por-defecto']");jQuery('#place-filter-select-provincias').val("cerca-de-ti");jQuery('#place-filter-select-provincias').trigger("chosen:updated");}}
function scrollToErrorDatos(id){if(!id.length)
return;var offset=id.parent().offset().top-100;if(jQuery("html,body").is(':animated')==false){jQuery('html,body').animate({scrollTop:offset},800);}}
function frontSetCookie(c_name,value,expiredays){var exdate=new Date();exdate.setDate(exdate.getDate()+expiredays);document.cookie=c_name+"="+escape(value)+((expiredays==null)?"":"; path=/ ; expires="+exdate.toUTCString());}
function frontGetCookie(c_name){if(document.cookie.length>0){c_start=document.cookie.indexOf(c_name+"=");if(c_start!=-1){c_start=c_start+c_name.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1)c_end=document.cookie.length
return unescape(document.cookie.substring(c_start,c_end));}}
return""}
function frontEraseCookie(name){frontSetCookie(name,"",-1);}
jQuery(document).ready(function(){jQuery.ajaxSetup({cache:false});jQuery(".aviso-movil-upload").on("click",function(e){var mimsg="";if(jQuery(this).hasClass('modal-edit-place-cabecera-fotos')){mimsg="Para modificar las imagenes del anuncio, use la versión escritorio de Servilisto desde un ordenador";}
else if(jQuery(this).hasClass('modal-edit-place-imageanuncio')){mimsg="Para modificar las imagen del anuncio, use la versión escritorio de Servilisto desde un ordenador";}
else if(jQuery(this).hasClass('page-profile-imagen')){mimsg="Para modificar tu imagen de perfil, use la versión escritorio de Servilisto desde un ordenador";}
else if(jQuery(this).hasClass('post-place-step3-anuncio')){mimsg="Para subir una imagen a tu anuncio, use la versión escritorio de Servilisto desde un ordenador";}
else{mimsg="Para modificar imagenes, use la versión escritorio de Servilisto desde un ordenador";}
AE.pubsub.trigger('ae:notification',{msg:mimsg,notice_type:'warning'});return true;});rellenarCamposConLocalizacion();jQuery("#startGeolocation").on("click",function(e){var refrescar=0;if(jQuery(this).hasClass("search")||jQuery(this).hasClass("single-place")||jQuery(this).hasClass("category")||jQuery(this).hasClass("mobile")){refrescar=1;}
geolocalizacion(1,refrescar);});jQuery('.open-time,.close-time,.open-time-2,.close-time-2').on('changeTime',function(){if(this.value!=""){jQuery("#alguna_opcion_date_seleccionada").val(1);jQuery('.open-block').removeClass("error");jQuery('.open-block').find("div.message").remove();}
else{jQuery("#alguna_opcion_date_seleccionada").val("");jQuery('.open-block').addClass("error");jQuery('.open-block').find("div.message").remove();jQuery(".open-block").append("<div for='alguna_opcion_date_seleccionada' class='message'>Este campo es obligatorio</div>");}});jQuery.validator.addMethod("url2",function(val,elem){if(val.length==0){return true;}
if(!/^(https?|ftp):\/\//i.test(val)){val='http://'+val;jQuery(elem).val(val);}
return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(val);},jQuery.validator.messages.url);jQuery("html,body").click(function(event){if(!jQuery(event.target).closest("header").length){jQuery("header .top-menu-center").removeClass("abierto");jQuery("header .top-menu-right").removeClass("abierto");}});jQuery("header .menu-toogle").click(function(){if(window.outerWidth>768&&window.outerWidth<992){jQuery("header .top-menu-center").toggleClass("abierto");}
else{jQuery("header .top-menu-center").toggleClass("abierto");jQuery("header .top-menu-right").toggleClass("abierto");}});jQuery("#ir-a-mensaje .close").click(function(){frontSetCookie('no_ver_modal_mensajes',1,1);});jQuery(document).on('click','.tipo_servicio input',function(e){if(jQuery(this).val()=="horas"){jQuery(".tipo_servicio_hora").show()
jQuery(".tipo_servicio .aclaratoria_tipo_servicio").html("Los usuarios podrán reservar hora a hora").css("display","block")
jQuery(".tipo_servicio_hora .tiempo_servicio").hide()
jQuery(".tipo_servicio_hora .title-plan").html("<span class='mandatory_fields'>*</span>PRECIO POR HORA<span>Indique el precio por hora</span>");jQuery(".tipo_servicio_hora .title-plan-modal").html("<label>PRECIO POR HORA<span class='alert-icon'>*</span></label>");}
if(jQuery(this).val()=="servicio"){jQuery(".tipo_servicio_hora").show()
jQuery(".tipo_servicio .aclaratoria_tipo_servicio").html("Los usuarios reservarán por servicios completos").css("display","block")
jQuery(".tipo_servicio_hora .tiempo_servicio").show()
jQuery(".tipo_servicio_hora .title-plan").html("<span class='mandatory_fields'>*</span>PRECIO POR SERVICIO<span>Indique el precio y la duración del servicio</span>");jQuery(".tipo_servicio_hora .title-plan-modal").html("<label>PRECIO POR SERVICIO<span class='alert-icon'>*</span></label>");}
if(jQuery(this).val()=="convenir"){jQuery(".tipo_servicio_hora").hide()
jQuery(".tipo_servicio .aclaratoria_tipo_servicio").html("El tiempo y la duración será negociado individualmente con los usuarios").css("display","block")
jQuery("#hourly_rate1").val("")
jQuery("#duracion_servicio").val("").trigger('chosen:updated');}});jQuery(".box_home .fa.fa-map-marker").click(function(){geolocalizacion(1,0);});jQuery(document).on('click','.quitar_geo',function(e){jQuery(".quitar_geo img").show();frontEraseCookie('current_user_preguntado');frontEraseCookie('current_user_lat');frontEraseCookie('current_user_lng');frontEraseCookie('current_user_locality');frontEraseCookie('current_user_province');frontEraseCookie('current_user_postal_code');location.href=setParamsGET_URL(location.href,'l','');});jQuery(".select-category-with-clear-button .fa-times").click(function(){var id_select="#"+jQuery(this).parent().find("select").attr("id");jQuery(id_select).val("");jQuery(id_select).trigger("chosen:updated");jQuery(id_select).change()});if(jQuery("#post-place").length){setTimeout(function(){var a=tinymce.editors[0].on("focus",function(el_this){var center=jQuery(window).height()/4;var top=jQuery("#wp-post_content-wrap").offset().top;if(top>center){jQuery('html, body').animate({scrollTop:top-center},'2000');}});},300);}
jQuery("#post-place .onfocustop").on('click',function(){var center=jQuery(window).height()/4;var top=jQuery(this).offset().top;if(top>center){jQuery('html, body').animate({scrollTop:top-center},'2000');}});jQuery(".box_home form").submit(function(event){var cadena_enviar="?l=&s=";if(jQuery("#place_category-single").val()!=null&&(jQuery("#place_category-single").val())[0]!=""){cadena_enviar=(jQuery("#place_category-single").val())[0]
if(jQuery("#location-advanced-search-home").val()){cadena_enviar+="/en-"+(jQuery("#location-advanced-search-home").val());}}
else{if(jQuery("#location-advanced-search-home").val()){cadena_enviar=jQuery("#location-advanced-search-home").val();}}
window.location.replace(site_url+"/"+cadena_enviar);return false;});});
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else{factory(jQuery);}}(function($){$.ui=$.ui||{};var version=$.ui.version="1.12.1";var widgetUuid=0;var widgetSlice=Array.prototype.slice;$.cleanData=(function(orig){return function(elems){var events,elem,i;for(i=0;(elem=elems[i])!=null;i++){try{events=$._data(elem,"events");if(events&&events.remove){$(elem).triggerHandler("remove");}}catch(e){}}orig(elems);};})($.cleanData);$.widget=function(name,base,prototype){var existingConstructor,constructor,basePrototype;var proxiedPrototype={};var namespace=name.split(".")[0];name=name.split(".")[1];var fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget;}if($.isArray(prototype)){prototype=$.extend.apply(null,[{}].concat(prototype));}$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName);};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget){return new constructor(options,element);}if(arguments.length){this._createWidget(options,element);}};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base();basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if(!$.isFunction(value)){proxiedPrototype[prop]=value;return;}proxiedPrototype[prop]=(function(){function _super(){return base.prototype[prop].apply(this,arguments);}function _superApply(args){return base.prototype[prop].apply(this,args);}return function(){var __super=this._super;var __superApply=this._superApply;var returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue;};})();});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?(basePrototype.widgetEventPrefix||name):name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto);});delete existingConstructor._childConstructors;}else{base._childConstructors.push(constructor);}$.widget.bridge(name,constructor);return constructor;};$.widget.extend=function(target){var input=widgetSlice.call(arguments,1);var inputIndex=0;var inputLength=input.length;var key;var value;for(;inputIndex<inputLength;inputIndex++){for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined){if($.isPlainObject(value)){target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value);}else{target[key]=value;}}}}return target;};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall=typeof options==="string";var args=widgetSlice.call(arguments,1);var returnValue=this;if(isMethodCall){if(!this.length&&options==="instance"){returnValue=undefined;}else{this.each(function(){var methodValue;var instance=$.data(this,fullName);if(options==="instance"){returnValue=instance;return false;}if(!instance){return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'");}if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for "+name+" widget instance");}methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false;}});}}else{if(args.length){options=$.widget.extend.apply(null,[options].concat(args));}this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{});if(instance._init){instance._init();}}else{$.data(this,fullName,new object(options,this));}});}return returnValue;};};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=widgetUuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=$();this.hoverable=$();this.focusable=$();this.classesElementLookup={};if(element!==this){$.data(element,this.widgetFullName,this);this._on(true,this.element,{remove:function(event){if(event.target===element){this.destroy();}}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow);}this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this._create();if(this.options.disabled){this._setOptionDisabled(this.options.disabled);}this._trigger("create",null,this._getCreateEventData());this._init();},_getCreateOptions:function(){return{};},_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){var that=this;this._destroy();$.each(this.classesElementLookup,function(key,value){that._removeClass(value,key);});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace);},_destroy:$.noop,widget:function(){return this.element;},option:function(key,value){var options=key;var parts;var curOption;var i;if(arguments.length===0){return $.widget.extend({},this.options);}if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]];}key=parts.pop();if(arguments.length===1){return curOption[key]===undefined?null:curOption[key];}curOption[key]=value;}else{if(arguments.length===1){return this.options[key]===undefined?null:this.options[key];}options[key]=value;}}this._setOptions(options);return this;},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key]);}return this;},_setOption:function(key,value){if(key==="classes"){this._setOptionClasses(value);}this.options[key]=value;if(key==="disabled"){this._setOptionDisabled(value);}return this;},_setOptionClasses:function(value){var classKey,elements,currentElements;for(classKey in value){currentElements=this.classesElementLookup[classKey];if(value[classKey]===this.options.classes[classKey]||!currentElements||!currentElements.length){continue;}elements=$(currentElements.get());this._removeClass(currentElements,classKey);elements.addClass(this._classes({element:elements,keys:classKey,classes:value,add:true}));}},_setOptionDisabled:function(value){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!value);if(value){this._removeClass(this.hoverable,null,"ui-state-hover");this._removeClass(this.focusable,null,"ui-state-focus");}},enable:function(){return this._setOptions({disabled:false});},disable:function(){return this._setOptions({disabled:true});},_classes:function(options){var full=[];var that=this;options=$.extend({element:this.element,classes:this.options.classes||{}},options);function processClassString(classes,checkOption){var current,i;for(i=0;i<classes.length;i++){current=that.classesElementLookup[classes[i]]||$();if(options.add){current=$($.unique(current.get().concat(options.element.get())));}else{current=$(current.not(options.element).get());}that.classesElementLookup[classes[i]]=current;full.push(classes[i]);if(checkOption&&options.classes[classes[i]]){full.push(options.classes[classes[i]]);}}}this._on(options.element,{"remove":"_untrackClassesElement"});if(options.keys){processClassString(options.keys.match(/\S+/g)||[],true);}if(options.extra){processClassString(options.extra.match(/\S+/g)||[]);}return full.join(" ");},_untrackClassesElement:function(event){var that=this;$.each(that.classesElementLookup,function(key,value){if($.inArray(event.target,value)!==-1){that.classesElementLookup[key]=$(value.not(event.target).get());}});},_removeClass:function(element,keys,extra){return this._toggleClass(element,keys,extra,false);},_addClass:function(element,keys,extra){return this._toggleClass(element,keys,extra,true);},_toggleClass:function(element,keys,extra,add){add=(typeof add==="boolean")?add:extra;var shift=(typeof element==="string"||element===null),options={extra:shift?keys:extra,keys:shift?element:keys,element:shift?this.element:element,add:add};options.element.toggleClass(this._classes(options),add);return this;},_on:function(suppressDisabledCheck,element,handlers){var delegateElement;var instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=false;}if(!handlers){handlers=element;element=this.element;delegateElement=this.widget();}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element);}$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled"))){return;}return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}if(typeof handler!=="string"){handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++;}var match=event.match(/^([\w:-]*)\s*(.*)$/);var eventName=match[1]+instance.eventNamespace;var selector=match[2];if(selector){delegateElement.on(eventName,selector,handlerProxy);}else{element.on(eventName,handlerProxy);}});},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;element.off(eventName).off(eventName);this.bindings=$(this.bindings.not(element).get());this.focusable=$(this.focusable.not(element).get());this.hoverable=$(this.hoverable.not(element).get());},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}var instance=this;return setTimeout(handlerProxy,delay||0);},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){this._addClass($(event.currentTarget),null,"ui-state-hover");},mouseleave:function(event){this._removeClass($(event.currentTarget),null,"ui-state-hover");}});},_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){this._addClass($(event.currentTarget),null,"ui-state-focus");},focusout:function(event){this._removeClass($(event.currentTarget),null,"ui-state-focus");}});},_trigger:function(type,event,data){var prop,orig;var callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop];}}}this.element.trigger(event,data);return!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented());}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string"){options={effect:options};}var hasOptions;var effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number"){options={duration:options};}hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay){element.delay(options.delay);}if(hasOptions&&$.effects&&$.effects.effect[effectName]){element[method](options);}else if(effectName!==method&&element[effectName]){element[effectName](options.duration,options.easing,callback);}else{element.queue(function(next){$(this)[method]();if(callback){callback.call(element[0]);}next();});}};});var widget=$.widget;(function(){var cachedScrollbarWidth,max=Math.max,abs=Math.abs,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)];}function parseCss(element,property){return parseInt($.css(element,property),10)||0;}function getDimensions(elem){var raw=elem[0];if(raw.nodeType===9){return{width:elem.width(),height:elem.height(),offset:{top:0,left:0}};}if($.isWindow(raw)){return{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}};}if(raw.preventDefault){return{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}};}return{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()};}$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined){return cachedScrollbarWidth;}var w1,w2,div=$("<div "+"style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'>"+"<div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;if(w1===w2){w2=div[0].clientWidth;}div.remove();return(cachedScrollbarWidth=w1-w2);},getScrollInfo:function(within){var overflowX=within.isWindow||within.isDocument?"":within.element.css("overflow-x"),overflowY=within.isWindow||within.isDocument?"":within.element.css("overflow-y"),hasOverflowX=overflowX==="scroll"||(overflowX==="auto"&&within.width<within.element[0].scrollWidth),hasOverflowY=overflowY==="scroll"||(overflowY==="auto"&&within.height<within.element[0].scrollHeight);return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0};},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]),isDocument=!!withinElement[0]&&withinElement[0].nodeType===9,hasOffset=!isWindow&&!isDocument;return{element:withinElement,isWindow:isWindow,isDocument:isDocument,offset:hasOffset?$(element).offset():{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:withinElement.outerWidth(),height:withinElement.outerHeight()};}};$.fn.position=function(options){if(!options||!options.of){return _position.apply(this,arguments);}options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};dimensions=getDimensions(target);if(target[0].preventDefault){options.at="left top";}targetWidth=dimensions.width;targetHeight=dimensions.height;targetOffset=dimensions.offset;basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;if(pos.length===1){pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"];}pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]];});if(collision.length===1){collision[1]=collision[0];}if(options.at[0]==="right"){basePosition.left+=targetWidth;}else if(options.at[0]==="center"){basePosition.left+=targetWidth/2;}if(options.at[1]==="bottom"){basePosition.top+=targetHeight;}else if(options.at[1]==="center"){basePosition.top+=targetHeight/2;}atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==="right"){position.left-=elemWidth;}else if(options.my[0]==="center"){position.left-=elemWidth/2;}if(options.my[1]==="bottom"){position.top-=elemHeight;}else if(options.my[1]==="center"){position.top-=elemHeight/2;}position.left+=myOffset[0];position.top+=myOffset[1];collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]]){$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem});}});if(options.using){using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};if(targetWidth<elemWidth&&abs(left+right)<targetWidth){feedback.horizontal="center";}if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight){feedback.vertical="middle";}if(max(abs(left),abs(right))>max(abs(top),abs(bottom))){feedback.important="horizontal";}else{feedback.important="vertical";}options.using.call(this,props,feedback);};}elem.offset($.extend(position,{using:using}));});};$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>outerWidth){if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight;}else if(overRight>0&&overLeft<=0){position.left=withinOffset;}else{if(overLeft>overRight){position.left=withinOffset+outerWidth-data.collisionWidth;}else{position.left=withinOffset;}}}else if(overLeft>0){position.left+=overLeft;}else if(overRight>0){position.left-=overRight;}else{position.left=max(position.left-collisionPosLeft,position.left);}},top:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight){if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom;}else if(overBottom>0&&overTop<=0){position.top=withinOffset;}else{if(overTop>overBottom){position.top=withinOffset+outerHeight-data.collisionHeight;}else{position.top=withinOffset;}}}else if(overTop>0){position.top+=overTop;}else if(overBottom>0){position.top-=overBottom;}else{position.top=max(position.top-collisionPosTop,position.top);}}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft)){position.left+=myOffset+atOffset+offset;}}else if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight){position.left+=myOffset+atOffset+offset;}}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if(newOverBottom<0||newOverBottom<abs(overTop)){position.top+=myOffset+atOffset+offset;}}else if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if(newOverTop>0||abs(newOverTop)<overBottom){position.top+=myOffset+atOffset+offset;}}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments);},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments);}}};})();var position=$.ui.position;var data=$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName);};}):function(elem,i,match){return!!$.data(elem,match[3]);}});var disableSelection=$.fn.extend({disableSelection:(function(){var eventType="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(eventType+".ui-disableSelection",function(event){event.preventDefault();});};})(),enableSelection:function(){return this.off(".ui-disableSelection");}});var dataSpace="ui-effects-",dataSpaceStyle="ui-effects-style",dataSpaceAnimated="ui-effects-animated",jQuery=$;$.effects={effect:{}};(function(jQuery,undefined){var stepHooks="backgroundColor borderBottomColor borderLeftColor borderRightColor "+"borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,stringParsers=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]];}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1]*2.55,execResult[2]*2.55,execResult[3]*2.55,execResult[4]];}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)];}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)];}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(execResult){return[execResult[1],execResult[2]/100,execResult[3]/100,execResult[4]];}}],color=jQuery.Color=function(color,green,blue,alpha){return new jQuery.Color.fn.parse(color,green,blue,alpha);},spaces={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},propTypes={"byte":{floor:true,max:255},"percent":{max:1},"degrees":{mod:360,floor:true}},support=color.support={},supportElem=jQuery("<p>")[0],colors,each=jQuery.each;supportElem.style.cssText="background-color:rgba(1,1,1,.5)";support.rgba=supportElem.style.backgroundColor.indexOf("rgba")>-1;each(spaces,function(spaceName,space){space.cache="_"+spaceName;space.props.alpha={idx:3,type:"percent",def:1};});function clamp(value,prop,allowEmpty){var type=propTypes[prop.type]||{};if(value==null){return(allowEmpty||!prop.def)?null:prop.def;}value=type.floor?~~value:parseFloat(value);if(isNaN(value)){return prop.def;}if(type.mod){return(value+type.mod)%type.mod;}return 0>value?0:type.max<value?type.max:value;}function stringParse(string){var inst=color(),rgba=inst._rgba=[];string=string.toLowerCase();each(stringParsers,function(i,parser){var parsed,match=parser.re.exec(string),values=match&&parser.parse(match),spaceName=parser.space||"rgba";if(values){parsed=inst[spaceName](values);inst[spaces[spaceName].cache]=parsed[spaces[spaceName].cache];rgba=inst._rgba=parsed._rgba;return false;}});if(rgba.length){if(rgba.join()==="0,0,0,0"){jQuery.extend(rgba,colors.transparent);}return inst;}return colors[string];}color.fn=jQuery.extend(color.prototype,{parse:function(red,green,blue,alpha){if(red===undefined){this._rgba=[null,null,null,null];return this;}if(red.jquery||red.nodeType){red=jQuery(red).css(green);green=undefined;}var inst=this,type=jQuery.type(red),rgba=this._rgba=[];if(green!==undefined){red=[red,green,blue,alpha];type="array";}if(type==="string"){return this.parse(stringParse(red)||colors._default);}if(type==="array"){each(spaces.rgba.props,function(key,prop){rgba[prop.idx]=clamp(red[prop.idx],prop);});return this;}if(type==="object"){if(red instanceof color){each(spaces,function(spaceName,space){if(red[space.cache]){inst[space.cache]=red[space.cache].slice();}});}else{each(spaces,function(spaceName,space){var cache=space.cache;each(space.props,function(key,prop){if(!inst[cache]&&space.to){if(key==="alpha"||red[key]==null){return;}inst[cache]=space.to(inst._rgba);}inst[cache][prop.idx]=clamp(red[key],prop,true);});if(inst[cache]&&jQuery.inArray(null,inst[cache].slice(0,3))<0){inst[cache][3]=1;if(space.from){inst._rgba=space.from(inst[cache]);}}});}return this;}},is:function(compare){var is=color(compare),same=true,inst=this;each(spaces,function(_,space){var localCache,isCache=is[space.cache];if(isCache){localCache=inst[space.cache]||space.to&&space.to(inst._rgba)||[];each(space.props,function(_,prop){if(isCache[prop.idx]!=null){same=(isCache[prop.idx]===localCache[prop.idx]);return same;}});}return same;});return same;},_space:function(){var used=[],inst=this;each(spaces,function(spaceName,space){if(inst[space.cache]){used.push(spaceName);}});return used.pop();},transition:function(other,distance){var end=color(other),spaceName=end._space(),space=spaces[spaceName],startColor=this.alpha()===0?color("transparent"):this,start=startColor[space.cache]||space.to(startColor._rgba),result=start.slice();end=end[space.cache];each(space.props,function(key,prop){var index=prop.idx,startValue=start[index],endValue=end[index],type=propTypes[prop.type]||{};if(endValue===null){return;}if(startValue===null){result[index]=endValue;}else{if(type.mod){if(endValue-startValue>type.mod/2){startValue+=type.mod;}else if(startValue-endValue>type.mod/2){startValue-=type.mod;}}result[index]=clamp((endValue-startValue)*distance+startValue,prop);}});return this[spaceName](result);},blend:function(opaque){if(this._rgba[3]===1){return this;}var rgb=this._rgba.slice(),a=rgb.pop(),blend=color(opaque)._rgba;return color(jQuery.map(rgb,function(v,i){return(1-a)*blend[i]+a*v;}));},toRgbaString:function(){var prefix="rgba(",rgba=jQuery.map(this._rgba,function(v,i){return v==null?(i>2?1:0):v;});if(rgba[3]===1){rgba.pop();prefix="rgb(";}return prefix+rgba.join()+")";},toHslaString:function(){var prefix="hsla(",hsla=jQuery.map(this.hsla(),function(v,i){if(v==null){v=i>2?1:0;}if(i&&i<3){v=Math.round(v*100)+"%";}return v;});if(hsla[3]===1){hsla.pop();prefix="hsl(";}return prefix+hsla.join()+")";},toHexString:function(includeAlpha){var rgba=this._rgba.slice(),alpha=rgba.pop();if(includeAlpha){rgba.push(~~(alpha*255));}return"#"+jQuery.map(rgba,function(v){v=(v||0).toString(16);return v.length===1?"0"+v:v;}).join("");},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString();}});color.fn.parse.prototype=color.fn;function hue2rgb(p,q,h){h=(h+1)%1;if(h*6<1){return p+(q-p)*h*6;}if(h*2<1){return q;}if(h*3<2){return p+(q-p)*((2/3)-h)*6;}return p;}spaces.hsla.to=function(rgba){if(rgba[0]==null||rgba[1]==null||rgba[2]==null){return[null,null,null,rgba[3]];}var r=rgba[0]/255,g=rgba[1]/255,b=rgba[2]/255,a=rgba[3],max=Math.max(r,g,b),min=Math.min(r,g,b),diff=max-min,add=max+min,l=add*0.5,h,s;if(min===max){h=0;}else if(r===max){h=(60*(g-b)/diff)+360;}else if(g===max){h=(60*(b-r)/diff)+120;}else{h=(60*(r-g)/diff)+240;}if(diff===0){s=0;}else if(l<=0.5){s=diff/add;}else{s=diff/(2-add);}return[Math.round(h)%360,s,l,a==null?1:a];};spaces.hsla.from=function(hsla){if(hsla[0]==null||hsla[1]==null||hsla[2]==null){return[null,null,null,hsla[3]];}var h=hsla[0]/360,s=hsla[1],l=hsla[2],a=hsla[3],q=l<=0.5?l*(1+s):l+s-l*s,p=2*l-q;return[Math.round(hue2rgb(p,q,h+(1/3))*255),Math.round(hue2rgb(p,q,h)*255),Math.round(hue2rgb(p,q,h-(1/3))*255),a];};each(spaces,function(spaceName,space){var props=space.props,cache=space.cache,to=space.to,from=space.from;color.fn[spaceName]=function(value){if(to&&!this[cache]){this[cache]=to(this._rgba);}if(value===undefined){return this[cache].slice();}var ret,type=jQuery.type(value),arr=(type==="array"||type==="object")?value:arguments,local=this[cache].slice();each(props,function(key,prop){var val=arr[type==="object"?key:prop.idx];if(val==null){val=local[prop.idx];}local[prop.idx]=clamp(val,prop);});if(from){ret=color(from(local));ret[cache]=local;return ret;}else{return color(local);}};each(props,function(key,prop){if(color.fn[key]){return;}color.fn[key]=function(value){var vtype=jQuery.type(value),fn=(key==="alpha"?(this._hsla?"hsla":"rgba"):spaceName),local=this[fn](),cur=local[prop.idx],match;if(vtype==="undefined"){return cur;}if(vtype==="function"){value=value.call(this,cur);vtype=jQuery.type(value);}if(value==null&&prop.empty){return this;}if(vtype==="string"){match=rplusequals.exec(value);if(match){value=cur+parseFloat(match[2])*(match[1]==="+"?1:-1);}}local[prop.idx]=value;return this[fn](local);};});});color.hook=function(hook){var hooks=hook.split(" ");each(hooks,function(i,hook){jQuery.cssHooks[hook]={set:function(elem,value){var parsed,curElem,backgroundColor="";if(value!=="transparent"&&(jQuery.type(value)!=="string"||(parsed=stringParse(value)))){value=color(parsed||value);if(!support.rgba&&value._rgba[3]!==1){curElem=hook==="backgroundColor"?elem.parentNode:elem;while((backgroundColor===""||backgroundColor==="transparent")&&curElem&&curElem.style){try{backgroundColor=jQuery.css(curElem,"backgroundColor");curElem=curElem.parentNode;}catch(e){}}value=value.blend(backgroundColor&&backgroundColor!=="transparent"?backgroundColor:"_default");}value=value.toRgbaString();}try{elem.style[hook]=value;}catch(e){}}};jQuery.fx.step[hook]=function(fx){if(!fx.colorInit){fx.start=color(fx.elem,hook);fx.end=color(fx.end);fx.colorInit=true;}jQuery.cssHooks[hook].set(fx.elem,fx.start.transition(fx.end,fx.pos));};});};color.hook(stepHooks);jQuery.cssHooks.borderColor={expand:function(value){var expanded={};each(["Top","Right","Bottom","Left"],function(i,part){expanded["border"+part+"Color"]=value;});return expanded;}};colors=jQuery.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};})(jQuery);(function(){var classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};$.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(_,prop){$.fx.step[prop]=function(fx){if(fx.end!=="none"&&!fx.setAttr||fx.pos===1&&!fx.setAttr){jQuery.style(fx.elem,prop,fx.end);fx.setAttr=true;}};});function getElementStyles(elem){var key,len,style=elem.ownerDocument.defaultView?elem.ownerDocument.defaultView.getComputedStyle(elem,null):elem.currentStyle,styles={};if(style&&style.length&&style[0]&&style[style[0]]){len=style.length;while(len--){key=style[len];if(typeof style[key]==="string"){styles[$.camelCase(key)]=style[key];}}}else{for(key in style){if(typeof style[key]==="string"){styles[key]=style[key];}}}return styles;}function styleDifference(oldStyle,newStyle){var diff={},name,value;for(name in newStyle){value=newStyle[name];if(oldStyle[name]!==value){if(!shorthandStyles[name]){if($.fx.step[name]||!isNaN(parseFloat(value))){diff[name]=value;}}}}return diff;}if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}$.effects.animateClass=function(value,duration,easing,callback){var o=$.speed(duration,easing,callback);return this.queue(function(){var animated=$(this),baseClass=animated.attr("class")||"",applyClassChange,allAnimations=o.children?animated.find("*").addBack():animated;allAnimations=allAnimations.map(function(){var el=$(this);return{el:el,start:getElementStyles(this)};});applyClassChange=function(){$.each(classAnimationActions,function(i,action){if(value[action]){animated[action+"Class"](value[action]);}});};applyClassChange();allAnimations=allAnimations.map(function(){this.end=getElementStyles(this.el[0]);this.diff=styleDifference(this.start,this.end);return this;});animated.attr("class",baseClass);allAnimations=allAnimations.map(function(){var styleInfo=this,dfd=$.Deferred(),opts=$.extend({},o,{queue:false,complete:function(){dfd.resolve(styleInfo);}});this.el.animate(this.diff,opts);return dfd.promise();});$.when.apply($,allAnimations.get()).done(function(){applyClassChange();$.each(arguments,function(){var el=this.el;$.each(this.diff,function(key){el.css(key,"");});});o.complete.call(animated[0]);});});};$.fn.extend({addClass:(function(orig){return function(classNames,speed,easing,callback){return speed?$.effects.animateClass.call(this,{add:classNames},speed,easing,callback):orig.apply(this,arguments);};})($.fn.addClass),removeClass:(function(orig){return function(classNames,speed,easing,callback){return arguments.length>1?$.effects.animateClass.call(this,{remove:classNames},speed,easing,callback):orig.apply(this,arguments);};})($.fn.removeClass),toggleClass:(function(orig){return function(classNames,force,speed,easing,callback){if(typeof force==="boolean"||force===undefined){if(!speed){return orig.apply(this,arguments);}else{return $.effects.animateClass.call(this,(force?{add:classNames}:{remove:classNames}),speed,easing,callback);}}else{return $.effects.animateClass.call(this,{toggle:classNames},force,speed,easing);}};})($.fn.toggleClass),switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.call(this,{add:add,remove:remove},speed,easing,callback);}});})();(function(){if($.expr&&$.expr.filters&&$.expr.filters.animated){$.expr.filters.animated=(function(orig){return function(elem){return!!$(elem).data(dataSpaceAnimated)||orig(elem);};})($.expr.filters.animated);}if($.uiBackCompat!==false){$.extend($.effects,{save:function(element,set){var i=0,length=set.length;for(;i<length;i++){if(set[i]!==null){element.data(dataSpace+set[i],element[0].style[set[i]]);}}},restore:function(element,set){var val,i=0,length=set.length;for(;i<length;i++){if(set[i]!==null){val=element.data(dataSpace+set[i]);element.css(set[i],val);}}},setMode:function(el,mode){if(mode==="toggle"){mode=el.is(":hidden")?"show":"hide";}return mode;},createWrapper:function(element){if(element.parent().is(".ui-effects-wrapper")){return element.parent();}var props={width:element.outerWidth(true),height:element.outerHeight(true),"float":element.css("float")},wrapper=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),size={width:element.width(),height:element.height()},active=document.activeElement;try{active.id;}catch(e){active=document.body;}element.wrap(wrapper);if(element[0]===active||$.contains(element[0],active)){$(active).trigger("focus");}wrapper=element.parent();if(element.css("position")==="static"){wrapper.css({position:"relative"});element.css({position:"relative"});}else{$.extend(props,{position:element.css("position"),zIndex:element.css("z-index")});$.each(["top","left","bottom","right"],function(i,pos){props[pos]=element.css(pos);if(isNaN(parseInt(props[pos],10))){props[pos]="auto";}});element.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"});}element.css(size);return wrapper.css(props).show();},removeWrapper:function(element){var active=document.activeElement;if(element.parent().is(".ui-effects-wrapper")){element.parent().replaceWith(element);if(element[0]===active||$.contains(element[0],active)){$(active).trigger("focus");}}return element;}});}$.extend($.effects,{version:"1.12.1",define:function(name,mode,effect){if(!effect){effect=mode;mode="effect";}$.effects.effect[name]=effect;$.effects.effect[name].mode=mode;return effect;},scaledDimensions:function(element,percent,direction){if(percent===0){return{height:0,width:0,outerHeight:0,outerWidth:0};}var x=direction!=="horizontal"?((percent||100)/100):1,y=direction!=="vertical"?((percent||100)/100):1;return{height:element.height()*y,width:element.width()*x,outerHeight:element.outerHeight()*y,outerWidth:element.outerWidth()*x};},clipToBox:function(animation){return{width:animation.clip.right-animation.clip.left,height:animation.clip.bottom-animation.clip.top,left:animation.clip.left,top:animation.clip.top};},unshift:function(element,queueLength,count){var queue=element.queue();if(queueLength>1){queue.splice.apply(queue,[1,0].concat(queue.splice(queueLength,count)));}element.dequeue();},saveStyle:function(element){element.data(dataSpaceStyle,element[0].style.cssText);},restoreStyle:function(element){element[0].style.cssText=element.data(dataSpaceStyle)||"";element.removeData(dataSpaceStyle);},mode:function(element,mode){var hidden=element.is(":hidden");if(mode==="toggle"){mode=hidden?"show":"hide";}if(hidden?mode==="hide":mode==="show"){mode="none";}return mode;},getBaseline:function(origin,original){var y,x;switch(origin[0]){case"top":y=0;break;case"middle":y=0.5;break;case"bottom":y=1;break;default:y=origin[0]/original.height;}switch(origin[1]){case"left":x=0;break;case"center":x=0.5;break;case"right":x=1;break;default:x=origin[1]/original.width;}return{x:x,y:y};},createPlaceholder:function(element){var placeholder,cssPosition=element.css("position"),position=element.position();element.css({marginTop:element.css("marginTop"),marginBottom:element.css("marginBottom"),marginLeft:element.css("marginLeft"),marginRight:element.css("marginRight")}).outerWidth(element.outerWidth()).outerHeight(element.outerHeight());if(/^(static|relative)/.test(cssPosition)){cssPosition="absolute";placeholder=$("<"+element[0].nodeName+">").insertAfter(element).css({display:/^(inline|ruby)/.test(element.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:element.css("marginTop"),marginBottom:element.css("marginBottom"),marginLeft:element.css("marginLeft"),marginRight:element.css("marginRight"),"float":element.css("float")}).outerWidth(element.outerWidth()).outerHeight(element.outerHeight()).addClass("ui-effects-placeholder");element.data(dataSpace+"placeholder",placeholder);}element.css({position:cssPosition,left:position.left,top:position.top});return placeholder;},removePlaceholder:function(element){var dataKey=dataSpace+"placeholder",placeholder=element.data(dataKey);if(placeholder){placeholder.remove();element.removeData(dataKey);}},cleanUp:function(element){$.effects.restoreStyle(element);$.effects.removePlaceholder(element);},setTransition:function(element,list,factor,value){value=value||{};$.each(list,function(i,x){var unit=element.cssUnit(x);if(unit[0]>0){value[x]=unit[0]*factor+unit[1];}});return value;}});function _normalizeArguments(effect,options,speed,callback){if($.isPlainObject(effect)){options=effect;effect=effect.effect;}effect={effect:effect};if(options==null){options={};}if($.isFunction(options)){callback=options;speed=null;options={};}if(typeof options==="number"||$.fx.speeds[options]){callback=speed;speed=options;options={};}if($.isFunction(speed)){callback=speed;speed=null;}if(options){$.extend(effect,options);}speed=speed||options.duration;effect.duration=$.fx.off?0:typeof speed==="number"?speed:speed in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default;effect.complete=callback||options.complete;return effect;}function standardAnimationOption(option){if(!option||typeof option==="number"||$.fx.speeds[option]){return true;}if(typeof option==="string"&&!$.effects.effect[option]){return true;}if($.isFunction(option)){return true;}if(typeof option==="object"&&!option.effect){return true;}return false;}$.fn.extend({effect:function(){var args=_normalizeArguments.apply(this,arguments),effectMethod=$.effects.effect[args.effect],defaultMode=effectMethod.mode,queue=args.queue,queueName=queue||"fx",complete=args.complete,mode=args.mode,modes=[],prefilter=function(next){var el=$(this),normalizedMode=$.effects.mode(el,mode)||defaultMode;el.data(dataSpaceAnimated,true);modes.push(normalizedMode);if(defaultMode&&(normalizedMode==="show"||(normalizedMode===defaultMode&&normalizedMode==="hide"))){el.show();}if(!defaultMode||normalizedMode!=="none"){$.effects.saveStyle(el);}if($.isFunction(next)){next();}};if($.fx.off||!effectMethod){if(mode){return this[mode](args.duration,complete);}else{return this.each(function(){if(complete){complete.call(this);}});}}function run(next){var elem=$(this);function cleanup(){elem.removeData(dataSpaceAnimated);$.effects.cleanUp(elem);if(args.mode==="hide"){elem.hide();}done();}function done(){if($.isFunction(complete)){complete.call(elem[0]);}if($.isFunction(next)){next();}}args.mode=modes.shift();if($.uiBackCompat!==false&&!defaultMode){if(elem.is(":hidden")?mode==="hide":mode==="show"){elem[mode]();done();}else{effectMethod.call(elem[0],args,done);}}else{if(args.mode==="none"){elem[mode]();done();}else{effectMethod.call(elem[0],args,cleanup);}}}return queue===false?this.each(prefilter).each(run):this.queue(queueName,prefilter).queue(queueName,run);},show:(function(orig){return function(option){if(standardAnimationOption(option)){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="show";return this.effect.call(this,args);}};})($.fn.show),hide:(function(orig){return function(option){if(standardAnimationOption(option)){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="hide";return this.effect.call(this,args);}};})($.fn.hide),toggle:(function(orig){return function(option){if(standardAnimationOption(option)||typeof option==="boolean"){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="toggle";return this.effect.call(this,args);}};})($.fn.toggle),cssUnit:function(key){var style=this.css(key),val=[];$.each(["em","px","%","pt"],function(i,unit){if(style.indexOf(unit)>0){val=[parseFloat(style),unit];}});return val;},cssClip:function(clipObj){if(clipObj){return this.css("clip","rect("+clipObj.top+"px "+clipObj.right+"px "+clipObj.bottom+"px "+clipObj.left+"px)");}return parseClip(this.css("clip"),this);},transfer:function(options,done){var element=$(this),target=$(options.to),targetFixed=target.css("position")==="fixed",body=$("body"),fixTop=targetFixed?body.scrollTop():0,fixLeft=targetFixed?body.scrollLeft():0,endPosition=target.offset(),animation={top:endPosition.top-fixTop,left:endPosition.left-fixLeft,height:target.innerHeight(),width:target.innerWidth()},startPosition=element.offset(),transfer=$("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(options.className).css({top:startPosition.top-fixTop,left:startPosition.left-fixLeft,height:element.innerHeight(),width:element.innerWidth(),position:targetFixed?"fixed":"absolute"}).animate(animation,options.duration,options.easing,function(){transfer.remove();if($.isFunction(done)){done();}});}});function parseClip(str,element){var outerWidth=element.outerWidth(),outerHeight=element.outerHeight(),clipRegex=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,values=clipRegex.exec(str)||["",0,outerWidth,outerHeight,0];return{top:parseFloat(values[1])||0,right:values[2]==="auto"?outerWidth:parseFloat(values[2]),bottom:values[3]==="auto"?outerHeight:parseFloat(values[3]),left:parseFloat(values[4])||0};}$.fx.step.clip=function(fx){if(!fx.clipInit){fx.start=$(fx.elem).cssClip();if(typeof fx.end==="string"){fx.end=parseClip(fx.end,fx.elem);}fx.clipInit=true;}$(fx.elem).cssClip({top:fx.pos*(fx.end.top-fx.start.top)+fx.start.top,right:fx.pos*(fx.end.right-fx.start.right)+fx.start.right,bottom:fx.pos*(fx.end.bottom-fx.start.bottom)+fx.start.bottom,left:fx.pos*(fx.end.left-fx.start.left)+fx.start.left});};})();(function(){var baseEasings={};$.each(["Quad","Cubic","Quart","Quint","Expo"],function(i,name){baseEasings[name]=function(p){return Math.pow(p,i+2);};});$.extend(baseEasings,{Sine:function(p){return 1-Math.cos(p*Math.PI/2);},Circ:function(p){return 1-Math.sqrt(1-p*p);},Elastic:function(p){return p===0||p===1?p:-Math.pow(2,8*(p-1))*Math.sin(((p-1)*80-7.5)*Math.PI/15);},Back:function(p){return p*p*(3*p-2);},Bounce:function(p){var pow2,bounce=4;while(p<((pow2=Math.pow(2,--bounce))-1)/11){}return 1/Math.pow(4,3-bounce)-7.5625*Math.pow((pow2*3-2)/22-p,2);}});$.each(baseEasings,function(name,easeIn){$.easing["easeIn"+name]=easeIn;$.easing["easeOut"+name]=function(p){return 1-easeIn(1-p);};$.easing["easeInOut"+name]=function(p){return p<0.5?easeIn(p*2)/2:1-easeIn(p*-2+2)/2;};});})();var effect=$.effects;var effectsEffectBlind=$.effects.define("blind","hide",function(options,done){var map={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},element=$(this),direction=options.direction||"up",start=element.cssClip(),animate={clip:$.extend({},start)},placeholder=$.effects.createPlaceholder(element);animate.clip[map[direction][0]]=animate.clip[map[direction][1]];if(options.mode==="show"){element.cssClip(animate.clip);if(placeholder){placeholder.css($.effects.clipToBox(animate));}animate.clip=start;}if(placeholder){placeholder.animate($.effects.clipToBox(animate),options.duration,options.easing);}element.animate(animate,{queue:false,duration:options.duration,easing:options.easing,complete:done});});var effectsEffectBounce=$.effects.define("bounce",function(options,done){var upAnim,downAnim,refValue,element=$(this),mode=options.mode,hide=mode==="hide",show=mode==="show",direction=options.direction||"up",distance=options.distance,times=options.times||5,anims=times*2+(show||hide?1:0),speed=options.duration/anims,easing=options.easing,ref=(direction==="up"||direction==="down")?"top":"left",motion=(direction==="up"||direction==="left"),i=0,queuelen=element.queue().length;$.effects.createPlaceholder(element);refValue=element.css(ref);if(!distance){distance=element[ref==="top"?"outerHeight":"outerWidth"]()/3;}if(show){downAnim={opacity:1};downAnim[ref]=refValue;element.css("opacity",0).css(ref,motion?-distance*2:distance*2).animate(downAnim,speed,easing);}if(hide){distance=distance/Math.pow(2,times-1);}downAnim={};downAnim[ref]=refValue;for(;i<times;i++){upAnim={};upAnim[ref]=(motion?"-=":"+=")+distance;element.animate(upAnim,speed,easing).animate(downAnim,speed,easing);distance=hide?distance*2:distance/2;}if(hide){upAnim={opacity:0};upAnim[ref]=(motion?"-=":"+=")+distance;element.animate(upAnim,speed,easing);}element.queue(done);$.effects.unshift(element,queuelen,anims+1);});var effectsEffectClip=$.effects.define("clip","hide",function(options,done){var start,animate={},element=$(this),direction=options.direction||"vertical",both=direction==="both",horizontal=both||direction==="horizontal",vertical=both||direction==="vertical";start=element.cssClip();animate.clip={top:vertical?(start.bottom-start.top)/2:start.top,right:horizontal?(start.right-start.left)/2:start.right,bottom:vertical?(start.bottom-start.top)/2:start.bottom,left:horizontal?(start.right-start.left)/2:start.left};$.effects.createPlaceholder(element);if(options.mode==="show"){element.cssClip(animate.clip);animate.clip=start;}element.animate(animate,{queue:false,duration:options.duration,easing:options.easing,complete:done});});var effectsEffectDrop=$.effects.define("drop","hide",function(options,done){var distance,element=$(this),mode=options.mode,show=mode==="show",direction=options.direction||"left",ref=(direction==="up"||direction==="down")?"top":"left",motion=(direction==="up"||direction==="left")?"-=":"+=",oppositeMotion=(motion==="+=")?"-=":"+=",animation={opacity:0};$.effects.createPlaceholder(element);distance=options.distance||element[ref==="top"?"outerHeight":"outerWidth"](true)/2;animation[ref]=motion+distance;if(show){element.css(animation);animation[ref]=oppositeMotion+distance;animation.opacity=1;}element.animate(animation,{queue:false,duration:options.duration,easing:options.easing,complete:done});});var effectsEffectExplode=$.effects.define("explode","hide",function(options,done){var i,j,left,top,mx,my,rows=options.pieces?Math.round(Math.sqrt(options.pieces)):3,cells=rows,element=$(this),mode=options.mode,show=mode==="show",offset=element.show().css("visibility","hidden").offset(),width=Math.ceil(element.outerWidth()/cells),height=Math.ceil(element.outerHeight()/rows),pieces=[];function childComplete(){pieces.push(this);if(pieces.length===rows*cells){animComplete();}}for(i=0;i<rows;i++){top=offset.top+i*height;my=i-(rows-1)/2;for(j=0;j<cells;j++){left=offset.left+j*width;mx=j-(cells-1)/2;element.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*width,top:-i*height}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:width,height:height,left:left+(show?mx*width:0),top:top+(show?my*height:0),opacity:show?0:1}).animate({left:left+(show?0:mx*width),top:top+(show?0:my*height),opacity:show?1:0},options.duration||500,options.easing,childComplete);}}function animComplete(){element.css({visibility:"visible"});$(pieces).remove();done();}});var effectsEffectFade=$.effects.define("fade","toggle",function(options,done){var show=options.mode==="show";$(this).css("opacity",show?0:1).animate({opacity:show?1:0},{queue:false,duration:options.duration,easing:options.easing,complete:done});});var effectsEffectFold=$.effects.define("fold","hide",function(options,done){var element=$(this),mode=options.mode,show=mode==="show",hide=mode==="hide",size=options.size||15,percent=/([0-9]+)%/.exec(size),horizFirst=!!options.horizFirst,ref=horizFirst?["right","bottom"]:["bottom","right"],duration=options.duration/2,placeholder=$.effects.createPlaceholder(element),start=element.cssClip(),animation1={clip:$.extend({},start)},animation2={clip:$.extend({},start)},distance=[start[ref[0]],start[ref[1]]],queuelen=element.queue().length;if(percent){size=parseInt(percent[1],10)/100*distance[hide?0:1];}animation1.clip[ref[0]]=size;animation2.clip[ref[0]]=size;animation2.clip[ref[1]]=0;if(show){element.cssClip(animation2.clip);if(placeholder){placeholder.css($.effects.clipToBox(animation2));}animation2.clip=start;}element.queue(function(next){if(placeholder){placeholder.animate($.effects.clipToBox(animation1),duration,options.easing).animate($.effects.clipToBox(animation2),duration,options.easing);}next();}).animate(animation1,duration,options.easing).animate(animation2,duration,options.easing).queue(done);$.effects.unshift(element,queuelen,4);});var effectsEffectHighlight=$.effects.define("highlight","show",function(options,done){var element=$(this),animation={backgroundColor:element.css("backgroundColor")};if(options.mode==="hide"){animation.opacity=0;}$.effects.saveStyle(element);element.css({backgroundImage:"none",backgroundColor:options.color||"#ffff99"}).animate(animation,{queue:false,duration:options.duration,easing:options.easing,complete:done});});var effectsEffectSize=$.effects.define("size",function(options,done){var baseline,factor,temp,element=$(this),cProps=["fontSize"],vProps=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],hProps=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],mode=options.mode,restore=mode!=="effect",scale=options.scale||"both",origin=options.origin||["middle","center"],position=element.css("position"),pos=element.position(),original=$.effects.scaledDimensions(element),from=options.from||original,to=options.to||$.effects.scaledDimensions(element,0);$.effects.createPlaceholder(element);if(mode==="show"){temp=from;from=to;to=temp;}factor={from:{y:from.height/original.height,x:from.width/original.width},to:{y:to.height/original.height,x:to.width/original.width}};if(scale==="box"||scale==="both"){if(factor.from.y!==factor.to.y){from=$.effects.setTransition(element,vProps,factor.from.y,from);to=$.effects.setTransition(element,vProps,factor.to.y,to);}if(factor.from.x!==factor.to.x){from=$.effects.setTransition(element,hProps,factor.from.x,from);to=$.effects.setTransition(element,hProps,factor.to.x,to);}}if(scale==="content"||scale==="both"){if(factor.from.y!==factor.to.y){from=$.effects.setTransition(element,cProps,factor.from.y,from);to=$.effects.setTransition(element,cProps,factor.to.y,to);}}if(origin){baseline=$.effects.getBaseline(origin,original);from.top=(original.outerHeight-from.outerHeight)*baseline.y+pos.top;from.left=(original.outerWidth-from.outerWidth)*baseline.x+pos.left;to.top=(original.outerHeight-to.outerHeight)*baseline.y+pos.top;to.left=(original.outerWidth-to.outerWidth)*baseline.x+pos.left;}element.css(from);if(scale==="content"||scale==="both"){vProps=vProps.concat(["marginTop","marginBottom"]).concat(cProps);hProps=hProps.concat(["marginLeft","marginRight"]);element.find("*[width]").each(function(){var child=$(this),childOriginal=$.effects.scaledDimensions(child),childFrom={height:childOriginal.height*factor.from.y,width:childOriginal.width*factor.from.x,outerHeight:childOriginal.outerHeight*factor.from.y,outerWidth:childOriginal.outerWidth*factor.from.x},childTo={height:childOriginal.height*factor.to.y,width:childOriginal.width*factor.to.x,outerHeight:childOriginal.height*factor.to.y,outerWidth:childOriginal.width*factor.to.x};if(factor.from.y!==factor.to.y){childFrom=$.effects.setTransition(child,vProps,factor.from.y,childFrom);childTo=$.effects.setTransition(child,vProps,factor.to.y,childTo);}if(factor.from.x!==factor.to.x){childFrom=$.effects.setTransition(child,hProps,factor.from.x,childFrom);childTo=$.effects.setTransition(child,hProps,factor.to.x,childTo);}if(restore){$.effects.saveStyle(child);}child.css(childFrom);child.animate(childTo,options.duration,options.easing,function(){if(restore){$.effects.restoreStyle(child);}});});}element.animate(to,{queue:false,duration:options.duration,easing:options.easing,complete:function(){var offset=element.offset();if(to.opacity===0){element.css("opacity",from.opacity);}if(!restore){element.css("position",position==="static"?"relative":position).offset(offset);$.effects.saveStyle(element);}done();}});});var effectsEffectScale=$.effects.define("scale",function(options,done){var el=$(this),mode=options.mode,percent=parseInt(options.percent,10)||(parseInt(options.percent,10)===0?0:(mode!=="effect"?0:100)),newOptions=$.extend(true,{from:$.effects.scaledDimensions(el),to:$.effects.scaledDimensions(el,percent,options.direction||"both"),origin:options.origin||["middle","center"]},options);if(options.fade){newOptions.from.opacity=1;newOptions.to.opacity=0;}$.effects.effect.size.call(this,newOptions,done);});var effectsEffectPuff=$.effects.define("puff","hide",function(options,done){var newOptions=$.extend(true,{},options,{fade:true,percent:parseInt(options.percent,10)||150});$.effects.effect.scale.call(this,newOptions,done);});var effectsEffectPulsate=$.effects.define("pulsate","show",function(options,done){var element=$(this),mode=options.mode,show=mode==="show",hide=mode==="hide",showhide=show||hide,anims=((options.times||5)*2)+(showhide?1:0),duration=options.duration/anims,animateTo=0,i=1,queuelen=element.queue().length;if(show||!element.is(":visible")){element.css("opacity",0).show();animateTo=1;}for(;i<anims;i++){element.animate({opacity:animateTo},duration,options.easing);animateTo=1-animateTo;}element.animate({opacity:animateTo},duration,options.easing);element.queue(done);$.effects.unshift(element,queuelen,anims+1);});var effectsEffectShake=$.effects.define("shake",function(options,done){var i=1,element=$(this),direction=options.direction||"left",distance=options.distance||20,times=options.times||3,anims=times*2+1,speed=Math.round(options.duration/anims),ref=(direction==="up"||direction==="down")?"top":"left",positiveMotion=(direction==="up"||direction==="left"),animation={},animation1={},animation2={},queuelen=element.queue().length;$.effects.createPlaceholder(element);animation[ref]=(positiveMotion?"-=":"+=")+distance;animation1[ref]=(positiveMotion?"+=":"-=")+distance*2;animation2[ref]=(positiveMotion?"-=":"+=")+distance*2;element.animate(animation,speed,options.easing);for(;i<times;i++){element.animate(animation1,speed,options.easing).animate(animation2,speed,options.easing);}element.animate(animation1,speed,options.easing).animate(animation,speed/2,options.easing).queue(done);$.effects.unshift(element,queuelen,anims+1);});var effectsEffectSlide=$.effects.define("slide","show",function(options,done){var startClip,startRef,element=$(this),map={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},mode=options.mode,direction=options.direction||"left",ref=(direction==="up"||direction==="down")?"top":"left",positiveMotion=(direction==="up"||direction==="left"),distance=options.distance||element[ref==="top"?"outerHeight":"outerWidth"](true),animation={};$.effects.createPlaceholder(element);startClip=element.cssClip();startRef=element.position()[ref];animation[ref]=(positiveMotion?-1:1)*distance+startRef;animation.clip=element.cssClip();animation.clip[map[direction][1]]=animation.clip[map[direction][0]];if(mode==="show"){element.cssClip(animation.clip);element.css(ref,animation[ref]);animation.clip=startClip;animation[ref]=startRef;}element.animate(animation,{queue:false,duration:options.duration,easing:options.easing,complete:done});});var effect;if($.uiBackCompat!==false){effect=$.effects.define("transfer",function(options,done){$(this).transfer(options,done);});}var effectsEffectTransfer=effect;$.ui.focusable=function(element,hasTabindex){var map,mapName,img,focusableIfVisible,fieldset,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false;}img=$("img[usemap='#"+mapName+"']");return img.length>0&&img.is(":visible");}if(/^(input|select|textarea|button|object)$/.test(nodeName)){focusableIfVisible=!element.disabled;if(focusableIfVisible){fieldset=$(element).closest("fieldset")[0];if(fieldset){focusableIfVisible=!fieldset.disabled;}}}else if("a"===nodeName){focusableIfVisible=element.href||hasTabindex;}else{focusableIfVisible=hasTabindex;}return focusableIfVisible&&$(element).is(":visible")&&visible($(element));};function visible(element){var visibility=element.css("visibility");while(visibility==="inherit"){element=element.parent();visibility=element.css("visibility");}return visibility!=="hidden";}$.extend($.expr[":"],{focusable:function(element){return $.ui.focusable(element,$.attr(element,"tabindex")!=null);}});var focusable=$.ui.focusable;var form=$.fn.form=function(){return typeof this[0].form==="string"?this.closest("form"):$(this[0].form);};var formResetMixin=$.ui.formResetMixin={_formResetHandler:function(){var form=$(this);setTimeout(function(){var instances=form.data("ui-form-reset-instances");$.each(instances,function(){this.refresh();});});},_bindFormResetHandler:function(){this.form=this.element.form();if(!this.form.length){return;}var instances=this.form.data("ui-form-reset-instances")||[];if(!instances.length){this.form.on("reset.ui-form-reset",this._formResetHandler);}instances.push(this);this.form.data("ui-form-reset-instances",instances);},_unbindFormResetHandler:function(){if(!this.form.length){return;}var instances=this.form.data("ui-form-reset-instances");instances.splice($.inArray(this,instances),1);if(instances.length){this.form.data("ui-form-reset-instances",instances);}else{this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset");}}};if($.fn.jquery.substring(0,3)==="1.7"){$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border){size-=parseFloat($.css(elem,"border"+this+"Width"))||0;}if(margin){size-=parseFloat($.css(elem,"margin"+this))||0;}});return size;}$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this);}return this.each(function(){$(this).css(type,reduce(this,size)+"px");});};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size);}return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px");});};});$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};};var keycode=$.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};var escapeSelector=$.ui.escapeSelector=(function(){var selectorEscape=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g;return function(selector){return selector.replace(selectorEscape,"\\$1");};})();var labels=$.fn.labels=function(){var ancestor,selector,id,labels,ancestors;if(this[0].labels&&this[0].labels.length){return this.pushStack(this[0].labels);}labels=this.eq(0).parents("label");id=this.attr("id");if(id){ancestor=this.eq(0).parents().last();ancestors=ancestor.add(ancestor.length?ancestor.siblings():this.siblings());selector="label[for='"+$.ui.escapeSelector(id)+"']";labels=labels.add(ancestors.find(selector).addBack(selector));}return this.pushStack(labels);};var scrollParent=$.fn.scrollParent=function(includeHidden){var position=this.css("position"),excludeStaticParent=position==="absolute",overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter(function(){var parent=$(this);if(excludeStaticParent&&parent.css("position")==="static"){return false;}return overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"));}).eq(0);return position==="fixed"||!scrollParent.length?$(this[0].ownerDocument||document):scrollParent;};var tabbable=$.extend($.expr[":"],{tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),hasTabindex=tabIndex!=null;return(!hasTabindex||tabIndex>=0)&&$.ui.focusable(element,hasTabindex);}});var uniqueId=$.fn.extend({uniqueId:(function(){var uuid=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++uuid);}});};})(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){$(this).removeAttr("id");}});}});var widgetsAccordion=$.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:false,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var options=this.options;this.prevShow=this.prevHide=$();this._addClass("ui-accordion","ui-widget ui-helper-reset");this.element.attr("role","tablist");if(!options.collapsible&&(options.active===false||options.active==null)){options.active=0;}this._processPanels();if(options.active<0){options.active+=this.headers.length;}this._refresh();},_getCreateEventData:function(){return{header:this.active,panel:!this.active.length?$():this.active.next()};},_createIcons:function(){var icon,children,icons=this.options.icons;if(icons){icon=$("<span>");this._addClass(icon,"ui-accordion-header-icon","ui-icon "+icons.header);icon.prependTo(this.headers);children=this.active.children(".ui-accordion-header-icon");this._removeClass(children,icons.header)._addClass(children,null,icons.activeHeader)._addClass(this.headers,"ui-accordion-icons");}},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons");this.headers.children(".ui-accordion-header-icon").remove();},_destroy:function(){var contents;this.element.removeAttr("role");this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId();this._destroyIcons();contents=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId();if(this.options.heightStyle!=="content"){contents.css("height","");}},_setOption:function(key,value){if(key==="active"){this._activate(value);return;}if(key==="event"){if(this.options.event){this._off(this.headers,this.options.event);}this._setupEvents(value);}this._super(key,value);if(key==="collapsible"&&!value&&this.options.active===false){this._activate(0);}if(key==="icons"){this._destroyIcons();if(value){this._createIcons();}}},_setOptionDisabled:function(value){this._super(value);this.element.attr("aria-disabled",value);this._toggleClass(null,"ui-state-disabled",!!value);this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!value);},_keydown:function(event){if(event.altKey||event.ctrlKey){return;}var keyCode=$.ui.keyCode,length=this.headers.length,currentIndex=this.headers.index(event.target),toFocus=false;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._eventHandler(event);break;case keyCode.HOME:toFocus=this.headers[0];break;case keyCode.END:toFocus=this.headers[length-1];break;}if(toFocus){$(event.target).attr("tabIndex",-1);$(toFocus).attr("tabIndex",0);$(toFocus).trigger("focus");event.preventDefault();}},_panelKeyDown:function(event){if(event.keyCode===$.ui.keyCode.UP&&event.ctrlKey){$(event.currentTarget).prev().trigger("focus");}},refresh:function(){var options=this.options;this._processPanels();if((options.active===false&&options.collapsible===true)||!this.headers.length){options.active=false;this.active=$();}else if(options.active===false){this._activate(0);}else if(this.active.length&&!$.contains(this.element[0],this.active[0])){if(this.headers.length===this.headers.find(".ui-state-disabled").length){options.active=false;this.active=$();}else{this._activate(Math.max(0,options.active-1));}}else{options.active=this.headers.index(this.active);}this._destroyIcons();this._refresh();},_processPanels:function(){var prevHeaders=this.headers,prevPanels=this.panels;this.headers=this.element.find(this.options.header);this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default");this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide();this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content");if(prevPanels){this._off(prevHeaders.not(this.headers));this._off(prevPanels.not(this.panels));}},_refresh:function(){var maxHeight,options=this.options,heightStyle=options.heightStyle,parent=this.element.parent();this.active=this._findActive(options.active);this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed");this._addClass(this.active.next(),"ui-accordion-content-active");this.active.next().show();this.headers.attr("role","tab").each(function(){var header=$(this),headerId=header.uniqueId().attr("id"),panel=header.next(),panelId=panel.uniqueId().attr("id");header.attr("aria-controls",panelId);panel.attr("aria-labelledby",headerId);}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex",0);}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"});}this._createIcons();this._setupEvents(options.event);if(heightStyle==="fill"){maxHeight=parent.height();this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed"){return;}maxHeight-=elem.outerHeight(true);});this.headers.each(function(){maxHeight-=$(this).outerHeight(true);});this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()));}).css("overflow","auto");}else if(heightStyle==="auto"){maxHeight=0;this.headers.next().each(function(){var isVisible=$(this).is(":visible");if(!isVisible){$(this).show();}maxHeight=Math.max(maxHeight,$(this).css("height","").height());if(!isVisible){$(this).hide();}}).height(maxHeight);}},_activate:function(index){var active=this._findActive(index)[0];if(active===this.active[0]){return;}active=active||this.active[0];this._eventHandler({target:active,currentTarget:active,preventDefault:$.noop});},_findActive:function(selector){return typeof selector==="number"?this.headers.eq(selector):$();},_setupEvents:function(event){var events={keydown:"_keydown"};if(event){$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler";});}this._off(this.headers.add(this.headers.next()));this._on(this.headers,events);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers);},_eventHandler:function(event){var activeChildren,clickedChildren,options=this.options,active=this.active,clicked=$(event.currentTarget),clickedIsActive=clicked[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():clicked.next(),toHide=active.next(),eventData={oldHeader:active,oldPanel:toHide,newHeader:collapsing?$():clicked,newPanel:toShow};event.preventDefault();if((clickedIsActive&&!options.collapsible)||(this._trigger("beforeActivate",event,eventData)===false)){return;}options.active=collapsing?false:this.headers.index(clicked);this.active=clickedIsActive?$():clicked;this._toggle(eventData);this._removeClass(active,"ui-accordion-header-active","ui-state-active");if(options.icons){activeChildren=active.children(".ui-accordion-header-icon");this._removeClass(activeChildren,null,options.icons.activeHeader)._addClass(activeChildren,null,options.icons.header);}if(!clickedIsActive){this._removeClass(clicked,"ui-accordion-header-collapsed")._addClass(clicked,"ui-accordion-header-active","ui-state-active");if(options.icons){clickedChildren=clicked.children(".ui-accordion-header-icon");this._removeClass(clickedChildren,null,options.icons.header)._addClass(clickedChildren,null,options.icons.activeHeader);}this._addClass(clicked.next(),"ui-accordion-content-active");}},_toggle:function(data){var toShow=data.newPanel,toHide=this.prevShow.length?this.prevShow:data.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=toShow;this.prevHide=toHide;if(this.options.animate){this._animate(toShow,toHide,data);}else{toHide.hide();toShow.show();this._toggleComplete(data);}toHide.attr({"aria-hidden":"true"});toHide.prev().attr({"aria-selected":"false","aria-expanded":"false"});if(toShow.length&&toHide.length){toHide.prev().attr({"tabIndex":-1,"aria-expanded":"false"});}else if(toShow.length){this.headers.filter(function(){return parseInt($(this).attr("tabIndex"),10)===0;}).attr("tabIndex",-1);}toShow.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});},_animate:function(toShow,toHide,data){var total,easing,duration,that=this,adjust=0,boxSizing=toShow.css("box-sizing"),down=toShow.length&&(!toHide.length||(toShow.index()<toHide.index())),animate=this.options.animate||{},options=down&&animate.down||animate,complete=function(){that._toggleComplete(data);};if(typeof options==="number"){duration=options;}if(typeof options==="string"){easing=options;}easing=easing||options.easing||animate.easing;duration=duration||options.duration||animate.duration;if(!toHide.length){return toShow.animate(this.showProps,duration,easing,complete);}if(!toShow.length){return toHide.animate(this.hideProps,duration,easing,complete);}total=toShow.show().outerHeight();toHide.animate(this.hideProps,{duration:duration,easing:easing,step:function(now,fx){fx.now=Math.round(now);}});toShow.hide().animate(this.showProps,{duration:duration,easing:easing,complete:complete,step:function(now,fx){fx.now=Math.round(now);if(fx.prop!=="height"){if(boxSizing==="content-box"){adjust+=fx.now;}}else if(that.options.heightStyle!=="content"){fx.now=Math.round(total-toHide.outerHeight()-adjust);adjust=0;}}});},_toggleComplete:function(data){var toHide=data.oldPanel,prev=toHide.prev();this._removeClass(toHide,"ui-accordion-content-active");this._removeClass(prev,"ui-accordion-header-active")._addClass(prev,"ui-accordion-header-collapsed");if(toHide.length){toHide.parent()[0].className=toHide.parent()[0].className;}this._trigger("activate",null,data);}});var safeActiveElement=$.ui.safeActiveElement=function(document){var activeElement;try{activeElement=document.activeElement;}catch(error){activeElement=document.body;}if(!activeElement){activeElement=document.body;}if(!activeElement.nodeName){activeElement=document.body;}return activeElement;};var widgetsMenu=$.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().attr({role:this.options.role,tabIndex:0});this._addClass("ui-menu","ui-widget ui-widget-content");this._on({"mousedown .ui-menu-item":function(event){event.preventDefault();},"click .ui-menu-item":function(event){var target=$(event.target);var active=$($.ui.safeActiveElement(this.document[0]));if(!this.mouseHandled&&target.not(".ui-state-disabled").length){this.select(event);if(!event.isPropagationStopped()){this.mouseHandled=true;}if(target.has(".ui-menu").length){this.expand(event);}else if(!this.element.is(":focus")&&active.closest(".ui-menu").length){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer);}}}},"mouseenter .ui-menu-item":function(event){if(this.previousFilter){return;}var actualTarget=$(event.target).closest(".ui-menu-item"),target=$(event.currentTarget);if(actualTarget[0]!==target[0]){return;}this._removeClass(target.siblings().children(".ui-state-active"),null,"ui-state-active");this.focus(event,target);},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=this.active||this.element.find(this.options.items).eq(0);if(!keepActiveItem){this.focus(event,item);}},blur:function(event){this._delay(function(){var notContained=!$.contains(this.element[0],$.ui.safeActiveElement(this.document[0]));if(notContained){this.collapseAll(event);}});},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(event){if(this._closeOnDocumentClick(event)){this.collapseAll(event);}this.mouseHandled=false;}});},_destroy:function(){var items=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),submenus=items.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled "+"tabIndex").removeUniqueId().show();submenus.children().each(function(){var elem=$(this);if(elem.data("ui-menu-submenu-caret")){elem.remove();}});},_keydown:function(event){var match,prev,character,skip,preventDefault=true;switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(event);}break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=false;prev=this.previousFilter||"";skip=false;character=event.keyCode>=96&&event.keyCode<=105?(event.keyCode-96).toString():String.fromCharCode(event.keyCode);clearTimeout(this.filterTimer);if(character===prev){skip=true;}else{character=prev+character;}match=this._filterMenuItems(character);match=skip&&match.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):match;if(!match.length){character=String.fromCharCode(event.keyCode);match=this._filterMenuItems(character);}if(match.length){this.focus(event,match);this.previousFilter=character;this.filterTimer=this._delay(function(){delete this.previousFilter;},1000);}else{delete this.previousFilter;}}if(preventDefault){event.preventDefault();}},_activate:function(event){if(this.active&&!this.active.is(".ui-state-disabled")){if(this.active.children("[aria-haspopup='true']").length){this.expand(event);}else{this.select(event);}}},refresh:function(){var menus,items,newSubmenus,newItems,newWrappers,that=this,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length);newSubmenus=submenus.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var menu=$(this),item=menu.prev(),submenuCaret=$("<span>").data("ui-menu-submenu-caret",true);that._addClass(submenuCaret,"ui-menu-icon","ui-icon "+icon);item.attr("aria-haspopup","true").prepend(submenuCaret);menu.attr("aria-labelledby",item.attr("id"));});this._addClass(newSubmenus,"ui-menu","ui-widget ui-widget-content ui-front");menus=submenus.add(this.element);items=menus.find(this.options.items);items.not(".ui-menu-item").each(function(){var item=$(this);if(that._isDivider(item)){that._addClass(item,"ui-menu-divider","ui-widget-content");}});newItems=items.not(".ui-menu-item, .ui-menu-divider");newWrappers=newItems.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()});this._addClass(newItems,"ui-menu-item")._addClass(newWrappers,"ui-menu-item-wrapper");items.filter(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!$.contains(this.element[0],this.active[0])){this.blur();}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role];},_setOption:function(key,value){if(key==="icons"){var icons=this.element.find(".ui-menu-icon");this._removeClass(icons,null,this.options.icons.submenu)._addClass(icons,null,value.submenu);}this._super(key,value);},_setOptionDisabled:function(value){this._super(value);this.element.attr("aria-disabled",String(value));this._toggleClass(null,"ui-state-disabled",!!value);},focus:function(event,item){var nested,focused,activeParent;this.blur(event,event&&event.type==="focus");this._scrollIntoView(item);this.active=item.first();focused=this.active.children(".ui-menu-item-wrapper");this._addClass(focused,null,"ui-state-active");if(this.options.role){this.element.attr("aria-activedescendant",focused.attr("id"));}activeParent=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper");this._addClass(activeParent,null,"ui-state-active");if(event&&event.type==="keydown"){this._close();}else{this.timer=this._delay(function(){this._close();},this.delay);}nested=item.children(".ui-menu");if(nested.length&&event&&(/^mouse/.test(event.type))){this._startOpening(nested);}this.activeMenu=item.parent();this._trigger("focus",event,{item:item});},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;if(this._hasScroll()){borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0;paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0;offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop;scroll=this.activeMenu.scrollTop();elementHeight=this.activeMenu.height();itemHeight=item.outerHeight();if(offset<0){this.activeMenu.scrollTop(scroll+offset);}else if(offset+itemHeight>elementHeight){this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight);}}},blur:function(event,fromFocus){if(!fromFocus){clearTimeout(this.timer);}if(!this.active){return;}this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active");this._trigger("blur",event,{item:this.active});this.active=null;},_startOpening:function(submenu){clearTimeout(this.timer);if(submenu.attr("aria-hidden")!=="true"){return;}this.timer=this._delay(function(){this._close();this._open(submenu);},this.delay);},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true");submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position);},collapseAll:function(event,all){clearTimeout(this.timer);this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));if(!currentMenu.length){currentMenu=this.element;}this._close(currentMenu);this.blur(event);this._removeClass(currentMenu.find(".ui-state-active"),null,"ui-state-active");this.activeMenu=currentMenu;},this.delay);},_close:function(startMenu){if(!startMenu){startMenu=this.active?this.active.parent():this.element;}startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false");},_closeOnDocumentClick:function(event){return!$(event.target).closest(".ui-menu").length;},_isDivider:function(item){return!/[^\-\u2014\u2013\s]/.test(item.text());},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(newItem&&newItem.length){this._close();this.focus(event,newItem);}},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();if(newItem&&newItem.length){this._open(newItem.parent());this._delay(function(){this.focus(event,newItem);});}},next:function(event){this._move("next","first",event);},previous:function(event){this._move("prev","last",event);},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length;},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length;},_move:function(direction,filter,event){var next;if(this.active){if(direction==="first"||direction==="last"){next=this.active
[direction==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1);}else{next=this.active
[direction+"All"](".ui-menu-item").eq(0);}}if(!next||!next.length||!this.active){next=this.activeMenu.find(this.options.items)[filter]();}this.focus(event,next);},nextPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}if(this.isLastItem()){return;}if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base-height<0;});this.focus(event,item);}else{this.focus(event,this.activeMenu.find(this.options.items)[!this.active?"first":"last"]());}},previousPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}if(this.isFirstItem()){return;}if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base+height>0;});this.focus(event,item);}else{this.focus(event,this.activeMenu.find(this.options.items).first());}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight");},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");var ui={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(event,true);}this._trigger("select",event,ui);},_filterMenuItems:function(character){var escapedCharacter=character.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),regex=new RegExp("^"+escapedCharacter,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return regex.test($.trim($(this).children(".ui-menu-item-wrapper").text()));});}});$.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var suppressKeyPress,suppressKeyPressRepeat,suppressInput,nodeName=this.element[0].nodeName.toLowerCase(),isTextarea=nodeName==="textarea",isInput=nodeName==="input";this.isMultiLine=isTextarea||!isInput&&this._isContentEditable(this.element);this.valueMethod=this.element[isTextarea||isInput?"val":"text"];this.isNewMenu=true;this._addClass("ui-autocomplete-input");this.element.attr("autocomplete","off");this._on(this.element,{keydown:function(event){if(this.element.prop("readOnly")){suppressKeyPress=true;suppressInput=true;suppressKeyPressRepeat=true;return;}suppressKeyPress=false;suppressInput=false;suppressKeyPressRepeat=false;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:suppressKeyPress=true;this._move("previousPage",event);break;case keyCode.PAGE_DOWN:suppressKeyPress=true;this._move("nextPage",event);break;case keyCode.UP:suppressKeyPress=true;this._keyEvent("previous",event);break;case keyCode.DOWN:suppressKeyPress=true;this._keyEvent("next",event);break;case keyCode.ENTER:if(this.menu.active){suppressKeyPress=true;event.preventDefault();this.menu.select(event);}break;case keyCode.TAB:if(this.menu.active){this.menu.select(event);}break;case keyCode.ESCAPE:if(this.menu.element.is(":visible")){if(!this.isMultiLine){this._value(this.term);}this.close(event);event.preventDefault();}break;default:suppressKeyPressRepeat=true;this._searchTimeout(event);break;}},keypress:function(event){if(suppressKeyPress){suppressKeyPress=false;if(!this.isMultiLine||this.menu.element.is(":visible")){event.preventDefault();}return;}if(suppressKeyPressRepeat){return;}var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:this._move("previousPage",event);break;case keyCode.PAGE_DOWN:this._move("nextPage",event);break;case keyCode.UP:this._keyEvent("previous",event);break;case keyCode.DOWN:this._keyEvent("next",event);break;}},input:function(event){if(suppressInput){suppressInput=false;event.preventDefault();return;}this._searchTimeout(event);},focus:function(){this.selectedItem=null;this.previous=this._value();},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return;}clearTimeout(this.searching);this.close(event);this._change(event);}});this._initSource();this.menu=$("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._addClass(this.menu.element,"ui-autocomplete","ui-front");this._on(this.menu.element,{mousedown:function(event){event.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;if(this.element[0]!==$.ui.safeActiveElement(this.document[0])){this.element.trigger("focus");}});},menufocus:function(event,ui){var label,item;if(this.isNewMenu){this.isNewMenu=false;if(event.originalEvent&&/^mouse/.test(event.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){$(event.target).trigger(event.originalEvent);});return;}}item=ui.item.data("ui-autocomplete-item");if(false!==this._trigger("focus",event,{item:item})){if(event.originalEvent&&/^key/.test(event.originalEvent.type)){this._value(item.value);}}label=ui.item.attr("aria-label")||item.value;if(label&&$.trim(label).length){this.liveRegion.children().hide();$("<div>").text(label).appendTo(this.liveRegion);}},menuselect:function(event,ui){var item=ui.item.data("ui-autocomplete-item"),previous=this.previous;if(this.element[0]!==$.ui.safeActiveElement(this.document[0])){this.element.trigger("focus");this.previous=previous;this._delay(function(){this.previous=previous;this.selectedItem=item;});}if(false!==this._trigger("select",event,{item:item})){this._value(item.value);}this.term=this._value();this.close(event);this.selectedItem=item;}});this.liveRegion=$("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete");}});},_destroy:function(){clearTimeout(this.searching);this.element.removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove();},_setOption:function(key,value){this._super(key,value);if(key==="source"){this._initSource();}if(key==="appendTo"){this.menu.element.appendTo(this._appendTo());}if(key==="disabled"&&value&&this.xhr){this.xhr.abort();}},_isEventTargetInWidget:function(event){var menuElement=this.menu.element[0];return event.target===this.element[0]||event.target===menuElement||$.contains(menuElement,event.target);},_closeOnClickOutside:function(event){if(!this._isEventTargetInWidget(event)){this.close();}},_appendTo:function(){var element=this.options.appendTo;if(element){element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0);}if(!element||!element[0]){element=this.element.closest(".ui-front, dialog");}if(!element.length){element=this.document[0].body;}return element;},_initSource:function(){var array,url,that=this;if($.isArray(this.options.source)){array=this.options.source;this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term));};}else if(typeof this.options.source==="string"){url=this.options.source;this.source=function(request,response){if(that.xhr){that.xhr.abort();}that.xhr=$.ajax({url:url,data:request,dataType:"json",success:function(data){response(data);},error:function(){response([]);}});};}else{this.source=this.options.source;}},_searchTimeout:function(event){clearTimeout(this.searching);this.searching=this._delay(function(){var equalValues=this.term===this._value(),menuVisible=this.menu.element.is(":visible"),modifierKey=event.altKey||event.ctrlKey||event.metaKey||event.shiftKey;if(!equalValues||(equalValues&&!menuVisible&&!modifierKey)){this.selectedItem=null;this.search(null,event);}},this.options.delay);},search:function(value,event){value=value!=null?value:this._value();this.term=this._value();if(value.length<this.options.minLength){return this.close(event);}if(this._trigger("search",event)===false){return;}return this._search(value);},_search:function(value){this.pending++;this._addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:value},this._response());},_response:function(){var index=++this.requestIndex;return $.proxy(function(content){if(index===this.requestIndex){this.__response(content);}this.pending--;if(!this.pending){this._removeClass("ui-autocomplete-loading");}},this);},__response:function(content){if(content){content=this._normalize(content);}this._trigger("response",null,{content:content});if(!this.options.disabled&&content&&content.length&&!this.cancelSearch){this._suggest(content);this._trigger("open");}else{this._close();}},close:function(event){this.cancelSearch=true;this._close(event);},_close:function(event){this._off(this.document,"mousedown");if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",event);}},_change:function(event){if(this.previous!==this._value()){this._trigger("change",event,{item:this.selectedItem});}},_normalize:function(items){if(items.length&&items[0].label&&items[0].value){return items;}return $.map(items,function(item){if(typeof item==="string"){return{label:item,value:item};}return $.extend({},item,{label:item.label||item.value,value:item.value||item.label});});},_suggest:function(items){var ul=this.menu.element.empty();this._renderMenu(ul,items);this.isNewMenu=true;this.menu.refresh();ul.show();this._resizeMenu();ul.position($.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next();}this._on(this.document,{mousedown:"_closeOnClickOutside"});},_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()));},_renderMenu:function(ul,items){var that=this;$.each(items,function(index,item){that._renderItemData(ul,item);});},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-autocomplete-item",item);},_renderItem:function(ul,item){return $("<li>").append($("<div>").text(item.label)).appendTo(ul);},_move:function(direction,event){if(!this.menu.element.is(":visible")){this.search(null,event);return;}if(this.menu.isFirstItem()&&/^previous/.test(direction)||this.menu.isLastItem()&&/^next/.test(direction)){if(!this.isMultiLine){this._value(this.term);}this.menu.blur();return;}this.menu[direction](event);},widget:function(){return this.menu.element;},_value:function(){return this.valueMethod.apply(this.element,arguments);},_keyEvent:function(keyEvent,event){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(keyEvent,event);event.preventDefault();}},_isContentEditable:function(element){if(!element.length){return false;}var editable=element.prop("contentEditable");if(editable==="inherit"){return this._isContentEditable(element.parent());}return editable==="true";}});$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||value.value||value);});}});$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(amount){return amount+(amount>1?" results are":" result is")+" available, use up and down arrow keys to navigate.";}}},__response:function(content){var message;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return;}if(content&&content.length){message=this.options.messages.results(content.length);}else{message=this.options.messages.noResults;}this.liveRegion.children().hide();$("<div>").text(message).appendTo(this.liveRegion);}});var widgetsAutocomplete=$.ui.autocomplete;var controlgroupCornerRegex=/ui-corner-([a-z]){2,6}/g;var widgetsControlgroup=$.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:true,items:{"button":"input[type=button], input[type=submit], input[type=reset], button, a","controlgroupLabel":".ui-controlgroup-label","checkboxradio":"input[type='checkbox'], input[type='radio']","selectmenu":"select","spinner":".ui-spinner-input"}},_create:function(){this._enhance();},_enhance:function(){this.element.attr("role","toolbar");this.refresh();},_destroy:function(){this._callChildMethod("destroy");this.childWidgets.removeData("ui-controlgroup-data");this.element.removeAttr("role");if(this.options.items.controlgroupLabel){this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap();}},_initWidgets:function(){var that=this,childWidgets=[];$.each(this.options.items,function(widget,selector){var labels;var options={};if(!selector){return;}if(widget==="controlgroupLabel"){labels=that.element.find(selector);labels.each(function(){var element=$(this);if(element.children(".ui-controlgroup-label-contents").length){return;}element.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>");});that._addClass(labels,null,"ui-widget ui-widget-content ui-state-default");childWidgets=childWidgets.concat(labels.get());return;}if(!$.fn[widget]){return;}if(that["_"+widget+"Options"]){options=that["_"+widget+"Options"]("middle");}else{options={classes:{}};}that.element.find(selector).each(function(){var element=$(this);var instance=element[widget]("instance");var instanceOptions=$.widget.extend({},options);if(widget==="button"&&element.parent(".ui-spinner").length){return;}if(!instance){instance=element[widget]()[widget]("instance");}if(instance){instanceOptions.classes=that._resolveClassesValues(instanceOptions.classes,instance);}element[widget](instanceOptions);var widgetElement=element[widget]("widget");$.data(widgetElement[0],"ui-controlgroup-data",instance?instance:element[widget]("instance"));childWidgets.push(widgetElement[0]);});});this.childWidgets=$($.unique(childWidgets));this._addClass(this.childWidgets,"ui-controlgroup-item");},_callChildMethod:function(method){this.childWidgets.each(function(){var element=$(this),data=element.data("ui-controlgroup-data");if(data&&data[method]){data[method]();}});},_updateCornerClass:function(element,position){var remove="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all";var add=this._buildSimpleOptions(position,"label").classes.label;this._removeClass(element,null,remove);this._addClass(element,null,add);},_buildSimpleOptions:function(position,key){var direction=this.options.direction==="vertical";var result={classes:{}};result.classes[key]={"middle":"","first":"ui-corner-"+(direction?"top":"left"),"last":"ui-corner-"+(direction?"bottom":"right"),"only":"ui-corner-all"}[position];return result;},_spinnerOptions:function(position){var options=this._buildSimpleOptions(position,"ui-spinner");options.classes["ui-spinner-up"]="";options.classes["ui-spinner-down"]="";return options;},_buttonOptions:function(position){return this._buildSimpleOptions(position,"ui-button");},_checkboxradioOptions:function(position){return this._buildSimpleOptions(position,"ui-checkboxradio-label");},_selectmenuOptions:function(position){var direction=this.options.direction==="vertical";return{width:direction?"auto":false,classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(direction?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(direction?"top":"left")},last:{"ui-selectmenu-button-open":direction?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(direction?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[position]};},_resolveClassesValues:function(classes,instance){var result={};$.each(classes,function(key){var current=instance.options.classes[key]||"";current=$.trim(current.replace(controlgroupCornerRegex,""));result[key]=(current+" "+classes[key]).replace(/\s+/g," ");});return result;},_setOption:function(key,value){if(key==="direction"){this._removeClass("ui-controlgroup-"+this.options.direction);}this._super(key,value);if(key==="disabled"){this._callChildMethod(value?"disable":"enable");return;}this.refresh();},refresh:function(){var children,that=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction);if(this.options.direction==="horizontal"){this._addClass(null,"ui-helper-clearfix");}this._initWidgets();children=this.childWidgets;if(this.options.onlyVisible){children=children.filter(":visible");}if(children.length){$.each(["first","last"],function(index,value){var instance=children[value]().data("ui-controlgroup-data");if(instance&&that["_"+instance.widgetName+"Options"]){var options=that["_"+instance.widgetName+"Options"](children.length===1?"only":value);options.classes=that._resolveClassesValues(options.classes,instance);instance.element[instance.widgetName](options);}else{that._updateCornerClass(children[value](),value);}});this._callChildMethod("refresh");}}});$.widget("ui.checkboxradio",[$.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:true,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var disabled,labels;var that=this;var options=this._super()||{};this._readType();labels=this.element.labels();this.label=$(labels[labels.length-1]);if(!this.label.length){$.error("No label found for checkboxradio widget");}this.originalLabel="";this.label.contents().not(this.element[0]).each(function(){that.originalLabel+=this.nodeType===3?$(this).text():this.outerHTML;});if(this.originalLabel){options.label=this.originalLabel;}disabled=this.element[0].disabled;if(disabled!=null){options.disabled=disabled;}return options;},_create:function(){var checked=this.element[0].checked;this._bindFormResetHandler();if(this.options.disabled==null){this.options.disabled=this.element[0].disabled;}this._setOption("disabled",this.options.disabled);this._addClass("ui-checkboxradio","ui-helper-hidden-accessible");this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget");if(this.type==="radio"){this._addClass(this.label,"ui-checkboxradio-radio-label");}if(this.options.label&&this.options.label!==this.originalLabel){this._updateLabel();}else if(this.originalLabel){this.options.label=this.originalLabel;}this._enhance();if(checked){this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active");if(this.icon){this._addClass(this.icon,null,"ui-state-hover");}}this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus");},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus");}});},_readType:function(){var nodeName=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type;if(nodeName!=="input"||!/radio|checkbox/.test(this.type)){$.error("Can't create checkboxradio on element.nodeName="+nodeName+" and element.type="+this.type);}},_enhance:function(){this._updateIcon(this.element[0].checked);},widget:function(){return this.label;},_getRadioGroup:function(){var group;var name=this.element[0].name;var nameSelector="input[name='"+$.ui.escapeSelector(name)+"']";if(!name){return $([]);}if(this.form.length){group=$(this.form[0].elements).filter(nameSelector);}else{group=$(nameSelector).filter(function(){return $(this).form().length===0;});}return group.not(this.element);},_toggleClasses:function(){var checked=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",checked);if(this.options.icon&&this.type==="checkbox"){this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",checked)._toggleClass(this.icon,null,"ui-icon-blank",!checked);}if(this.type==="radio"){this._getRadioGroup().each(function(){var instance=$(this).checkboxradio("instance");if(instance){instance._removeClass(instance.label,"ui-checkboxradio-checked","ui-state-active");}});}},_destroy:function(){this._unbindFormResetHandler();if(this.icon){this.icon.remove();this.iconSpace.remove();}},_setOption:function(key,value){if(key==="label"&&!value){return;}this._super(key,value);if(key==="disabled"){this._toggleClass(this.label,null,"ui-state-disabled",value);this.element[0].disabled=value;return;}this.refresh();},_updateIcon:function(checked){var toAdd="ui-icon ui-icon-background ";if(this.options.icon){if(!this.icon){this.icon=$("<span>");this.iconSpace=$("<span> </span>");this._addClass(this.iconSpace,"ui-checkboxradio-icon-space");}if(this.type==="checkbox"){toAdd+=checked?"ui-icon-check ui-state-checked":"ui-icon-blank";this._removeClass(this.icon,null,checked?"ui-icon-blank":"ui-icon-check");}else{toAdd+="ui-icon-blank";}this._addClass(this.icon,"ui-checkboxradio-icon",toAdd);if(!checked){this._removeClass(this.icon,null,"ui-icon-check ui-state-checked");}this.icon.prependTo(this.label).after(this.iconSpace);}else if(this.icon!==undefined){this.icon.remove();this.iconSpace.remove();delete this.icon;}},_updateLabel:function(){var contents=this.label.contents().not(this.element[0]);if(this.icon){contents=contents.not(this.icon[0]);}if(this.iconSpace){contents=contents.not(this.iconSpace[0]);}contents.remove();this.label.append(this.options.label);},refresh:function(){var checked=this.element[0].checked,isDisabled=this.element[0].disabled;this._updateIcon(checked);this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",checked);if(this.options.label!==null){this._updateLabel();}if(isDisabled!==this.options.disabled){this._setOptions({"disabled":isDisabled});}}}]);var widgetsCheckboxradio=$.ui.checkboxradio;$.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:true},_getCreateOptions:function(){var disabled,options=this._super()||{};this.isInput=this.element.is("input");disabled=this.element[0].disabled;if(disabled!=null){options.disabled=disabled;}this.originalLabel=this.isInput?this.element.val():this.element.html();if(this.originalLabel){options.label=this.originalLabel;}return options;},_create:function(){if(!this.option.showLabel&!this.options.icon){this.options.showLabel=true;}if(this.options.disabled==null){this.options.disabled=this.element[0].disabled||false;}this.hasTitle=!!this.element.attr("title");if(this.options.label&&this.options.label!==this.originalLabel){if(this.isInput){this.element.val(this.options.label);}else{this.element.html(this.options.label);}}this._addClass("ui-button","ui-widget");this._setOption("disabled",this.options.disabled);this._enhance();if(this.element.is("a")){this._on({"keyup":function(event){if(event.keyCode===$.ui.keyCode.SPACE){event.preventDefault();if(this.element[0].click){this.element[0].click();}else{this.element.trigger("click");}}}});}},_enhance:function(){if(!this.element.is("button")){this.element.attr("role","button");}if(this.options.icon){this._updateIcon("icon",this.options.icon);this._updateTooltip();}},_updateTooltip:function(){this.title=this.element.attr("title");if(!this.options.showLabel&&!this.title){this.element.attr("title",this.options.label);}},_updateIcon:function(option,value){var icon=option!=="iconPosition",position=icon?this.options.iconPosition:value,displayBlock=position==="top"||position==="bottom";if(!this.icon){this.icon=$("<span>");this._addClass(this.icon,"ui-button-icon","ui-icon");if(!this.options.showLabel){this._addClass("ui-button-icon-only");}}else if(icon){this._removeClass(this.icon,null,this.options.icon);}if(icon){this._addClass(this.icon,null,value);}this._attachIcon(position);if(displayBlock){this._addClass(this.icon,null,"ui-widget-icon-block");if(this.iconSpace){this.iconSpace.remove();}}else{if(!this.iconSpace){this.iconSpace=$("<span> </span>");this._addClass(this.iconSpace,"ui-button-icon-space");}this._removeClass(this.icon,null,"ui-wiget-icon-block");this._attachIconSpace(position);}},_destroy:function(){this.element.removeAttr("role");if(this.icon){this.icon.remove();}if(this.iconSpace){this.iconSpace.remove();}if(!this.hasTitle){this.element.removeAttr("title");}},_attachIconSpace:function(iconPosition){this.icon[/^(?:end|bottom)/.test(iconPosition)?"before":"after"](this.iconSpace);},_attachIcon:function(iconPosition){this.element[/^(?:end|bottom)/.test(iconPosition)?"append":"prepend"](this.icon);},_setOptions:function(options){var newShowLabel=options.showLabel===undefined?this.options.showLabel:options.showLabel,newIcon=options.icon===undefined?this.options.icon:options.icon;if(!newShowLabel&&!newIcon){options.showLabel=true;}this._super(options);},_setOption:function(key,value){if(key==="icon"){if(value){this._updateIcon(key,value);}else if(this.icon){this.icon.remove();if(this.iconSpace){this.iconSpace.remove();}}}if(key==="iconPosition"){this._updateIcon(key,value);}if(key==="showLabel"){this._toggleClass("ui-button-icon-only",null,!value);this._updateTooltip();}if(key==="label"){if(this.isInput){this.element.val(value);}else{this.element.html(value);if(this.icon){this._attachIcon(this.options.iconPosition);this._attachIconSpace(this.options.iconPosition);}}}this._super(key,value);if(key==="disabled"){this._toggleClass(null,"ui-state-disabled",value);this.element[0].disabled=value;if(value){this.element.blur();}}},refresh:function(){var isDisabled=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");if(isDisabled!==this.options.disabled){this._setOptions({disabled:isDisabled});}this._updateTooltip();}});if($.uiBackCompat!==false){$.widget("ui.button",$.ui.button,{options:{text:true,icons:{primary:null,secondary:null}},_create:function(){if(this.options.showLabel&&!this.options.text){this.options.showLabel=this.options.text;}if(!this.options.showLabel&&this.options.text){this.options.text=this.options.showLabel;}if(!this.options.icon&&(this.options.icons.primary||this.options.icons.secondary)){if(this.options.icons.primary){this.options.icon=this.options.icons.primary;}else{this.options.icon=this.options.icons.secondary;this.options.iconPosition="end";}}else if(this.options.icon){this.options.icons.primary=this.options.icon;}this._super();},_setOption:function(key,value){if(key==="text"){this._super("showLabel",value);return;}if(key==="showLabel"){this.options.text=value;}if(key==="icon"){this.options.icons.primary=value;}if(key==="icons"){if(value.primary){this._super("icon",value.primary);this._super("iconPosition","beginning");}else if(value.secondary){this._super("icon",value.secondary);this._super("iconPosition","end");}}this._superApply(arguments);}});$.fn.button=(function(orig){return function(){if(!this.length||(this.length&&this[0].tagName!=="INPUT")||(this.length&&this[0].tagName==="INPUT"&&(this.attr("type")!=="checkbox"&&this.attr("type")!=="radio"))){return orig.apply(this,arguments);}if(!$.ui.checkboxradio){$.error("Checkboxradio widget missing");}if(arguments.length===0){return this.checkboxradio({"icon":false});}return this.checkboxradio.apply(this,arguments);};})($.fn.button);$.fn.buttonset=function(){if(!$.ui.controlgroup){$.error("Controlgroup widget missing");}if(arguments[0]==="option"&&arguments[1]==="items"&&arguments[2]){return this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]);}if(arguments[0]==="option"&&arguments[1]==="items"){return this.controlgroup.apply(this,[arguments[0],"items.button"]);}if(typeof arguments[0]==="object"&&arguments[0].items){arguments[0].items={button:arguments[0].items};}return this.controlgroup.apply(this,arguments);};}var widgetsButton=$.ui.button;$.extend($.ui,{datepicker:{version:"1.12.1"}});var datepicker_instActive;function datepicker_getZindex(elem){var position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}elem=elem.parent();}return 0;}function Datepicker(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};$.extend(this._defaults,this.regional[""]);this.regional.en=$.extend(true,{},this.regional[""]);this.regional["en-US"]=$.extend(true,{},this.regional.en);this.dpDiv=datepicker_bindHover($("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv;},setDefaults:function(settings){datepicker_extendRemove(this._defaults,settings||{});return this;},_attachDatepicker:function(target,settings){var nodeName,inline,inst;nodeName=target.nodeName.toLowerCase();inline=(nodeName==="div"||nodeName==="span");if(!target.id){this.uuid+=1;target.id="dp"+this.uuid;}inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{});if(nodeName==="input"){this._connectDatepicker(target,inst);}else if(inline){this._inlineDatepicker(target,inst);}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:datepicker_bindHover($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")))};},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return;}this._attachments(input,inst);input.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp);this._autoSize(inst);$.data(target,"datepicker",inst);if(inst.settings.disabled){this._disableDatepicker(target);}},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove();}if(appendText){inst.append=$("<span class='"+this._appendClass+"'>"+appendText+"</span>");input[isRTL?"before":"after"](inst.append);}input.off("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove();}showOn=this._get(inst,"showOn");if(showOn==="focus"||showOn==="both"){input.on("focus",this._showDatepicker);}if(showOn==="button"||showOn==="both"){buttonText=this._get(inst,"buttonText");buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$("<button type='button'></button>").addClass(this._triggerClass).html(!buttonImage?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.on("click",function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0]){$.datepicker._hideDatepicker();}else if($.datepicker._datepickerShowing&&$.datepicker._lastInput!==input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0]);}else{$.datepicker._showDatepicker(input[0]);}return false;});}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,max,maxI,i,date=new Date(2009,12-1,20),dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){findMax=function(names){max=0;maxI=0;for(i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i;}}return maxI;};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?"dayNames":"dayNamesShort")))+20-date.getDay());}inst.input.attr("size",this._formatDate(inst,date).length);}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return;}divSpan.addClass(this.markerClassName).append(inst.dpDiv);$.data(target,"datepicker",inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);if(inst.settings.disabled){this._disableDatepicker(target);}inst.dpDiv.css("display","block");},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;if(!inst){this.uuid+=1;id="dp"+this.uuid;this._dialogInput=$("<input type='text' id='"+id+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.on("keydown",this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],"datepicker",inst);}datepicker_extendRemove(inst.settings,settings||{});date=(date&&date.constructor===Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){browserWidth=document.documentElement.clientWidth;browserHeight=document.documentElement.clientHeight;scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY];}this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv);}$.data(this._dialogInput[0],"datepicker",inst);return this;},_destroyDatepicker:function(target){var nodeName,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}nodeName=target.nodeName.toLowerCase();$.removeData(target,"datepicker");if(nodeName==="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp);}else if(nodeName==="div"||nodeName==="span"){$target.removeClass(this.markerClassName).empty();}if(datepicker_instActive===inst){datepicker_instActive=null;}},_enableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false;}).end().filter("img").css({opacity:"1.0",cursor:""});}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false);}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===target?null:value);});},_disableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true;}).end().filter("img").css({opacity:"0.5",cursor:"default"});}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true);}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===target?null:value);});this._disabledInputs[this._disabledInputs.length]=target;},_isDisabledDatepicker:function(target){if(!target){return false;}for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]===target){return true;}}return false;},_getInst:function(target){try{return $.data(target,"datepicker");}catch(err){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(target,name,value){var settings,date,minDate,maxDate,inst=this._getInst(target);if(arguments.length===2&&typeof name==="string"){return(name==="defaults"?$.extend({},$.datepicker._defaults):(inst?(name==="all"?$.extend({},inst.settings):this._get(inst,name)):null));}settings=name||{};if(typeof name==="string"){settings={};settings[name]=value;}if(inst){if(this._curInst===inst){this._hideDatepicker();}date=this._getDateDatepicker(target,true);minDate=this._getMinMaxDate(inst,"min");maxDate=this._getMinMaxDate(inst,"max");datepicker_extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined){inst.settings.minDate=this._formatDate(inst,minDate);}if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined){inst.settings.maxDate=this._formatDate(inst,maxDate);}if("disabled"in settings){if(settings.disabled){this._disableDatepicker(target);}else{this._enableDatepicker(target);}}this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,date);this._updateAlternate(inst);this._updateDatepicker(inst);}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value);},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst);}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst);}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault);}return(inst?this._getDate(inst):null);},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=true,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]);}onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){dateStr=$.datepicker._formatDate(inst);onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else{$.datepicker._hideDatepicker();}return false;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target);}handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target);}handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D");}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");}break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D");}handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D");}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");}break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D");}handled=event.ctrlKey||event.metaKey;break;default:handled=false;}}else if(event.keyCode===36&&event.ctrlKey){$.datepicker._showDatepicker(this);}else{handled=false;}if(handled){event.preventDefault();event.stopPropagation();}},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));chr=String.fromCharCode(event.charCode==null?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<" "||!chars||chars.indexOf(chr)>-1);}},_doKeyUp:function(event){var date,inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal){try{date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),(inst.input?inst.input.val():null),$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst);}}catch(err){}}return true;},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!=="input"){input=$("input",input.parentNode)[0];}if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput===input){return;}var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!==inst){$.datepicker._curInst.dpDiv.stop(true,true);if(inst&&$.datepicker._datepickerShowing){$.datepicker._hideDatepicker($.datepicker._curInst.input[0]);}}beforeShow=$.datepicker._get(inst,"beforeShow");beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false){return;}datepicker_extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value="";}if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight;}isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")==="fixed";return!isFixed;});offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){showAnim=$.datepicker._get(inst,"showAnim");duration=$.datepicker._get(inst,"duration");inst.dpDiv.css("z-index",datepicker_getZindex($(input))+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects.effect[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration);}else{inst.dpDiv[showAnim||"show"](showAnim?duration:null);}if($.datepicker._shouldFocusInput(inst)){inst.input.trigger("focus");}$.datepicker._curInst=inst;}},_updateDatepicker:function(inst){this.maxRows=4;datepicker_instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17,activeCell=inst.dpDiv.find("."+this._dayOverClass+" a");if(activeCell.length>0){datepicker_handleMouseover.apply(activeCell.get(0));}inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em");}inst.dpDiv[(numMonths[0]!==1||numMonths[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(inst)){inst.input.trigger("focus");}if(inst.yearshtml){origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml){inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);}origyearshtml=inst.yearshtml=null;},0);}},_shouldFocusInput:function(inst){return inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&!inst.input.is(":focus");},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left===inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top===(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset;},_findPos:function(obj){var position,inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");while(obj&&(obj.type==="hidden"||obj.nodeType!==1||$.expr.filters.hidden(obj))){obj=obj[isRTL?"previousSibling":"nextSibling"];}position=$(obj).offset();return[position.left,position.top];},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;if(!inst||(input&&inst!==$.data(input,"datepicker"))){return;}if(this._datepickerShowing){showAnim=this._get(inst,"showAnim");duration=this._get(inst,"duration");postProcess=function(){$.datepicker._tidyDialog(inst);};if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim])){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess);}else{inst.dpDiv[(showAnim==="slideDown"?"slideUp":(showAnim==="fadeIn"?"fadeOut":"hide"))]((showAnim?duration:null),postProcess);}if(!showAnim){postProcess();}this._datepickerShowing=false;onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst]);}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv);}}this._inDialog=false;}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar");},_checkExternalClick:function(event){if(!$.datepicker._curInst){return;}var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if((($target[0].id!==$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length===0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)))||($target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!==inst)){$.datepicker._hideDatepicker();}},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return;}this._adjustInstDate(inst,offset+(period==="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst);},_gotoToday:function(id){var date,target=$(id),inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear;}else{date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();}this._notifyChange(inst);this._adjustDate(target);},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+(period==="M"?"Month":"Year")]=inst["draw"+(period==="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target);},_selectDay:function(id,month,year,td){var inst,target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return;}inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear));},_clearDate:function(id){var target=$(id);this._selectDate(target,"");},_selectDate:function(id,dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr);}this._updateAlternate(inst);onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else if(inst.input){inst.input.trigger("change");}if(inst.inline){this._updateDatepicker(inst);}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof(inst.input[0])!=="object"){inst.input.trigger("focus");}this._lastInput=null;}},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");if(altField){altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");date=this._getDate(inst);dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).val(dateStr);}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""];},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1;},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments";}value=(typeof value==="object"?value.toString():value+"");if(value===""){return null;}var iFormat,dim,extra,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff=(typeof shortYearCutoffTemp!=="string"?shortYearCutoffTemp:new Date().getFullYear()%100+parseInt(shortYearCutoffTemp,10)),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=false,date,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}return matches;},getNumber=function(match){var isDoubled=lookAhead(match),size=(match==="@"?14:(match==="!"?20:(match==="y"&&isDoubled?4:(match==="o"?3:2)))),minSize=(match==="y"?size:1),digits=new RegExp("^\\d{"+minSize+","+size+"}"),num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue;}iValue+=num[0].length;return parseInt(num[0],10);},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]];}).sort(function(a,b){return-(a[1].length-b[1].length);});$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()===name.toLowerCase()){index=pair[0];iValue+=name.length;return false;}});if(index!==-1){return index+1;}else{throw"Unknown name at position "+iValue;}},checkLiteral=function(){if(value.charAt(iValue)!==format.charAt(iFormat)){throw"Unexpected literal at position "+iValue;}iValue++;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{checkLiteral();}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":date=new Date((getNumber("!")-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral();}else{literal=true;}break;default:checkLiteral();}}}if(iValue<value.length){extra=value.substr(iValue);if(!/^\s+/.test(extra)){throw"Extra/unparsed characters found in date: "+extra;}}if(year===-1){year=new Date().getFullYear();}else if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+(year<=shortYearCutoff?0:-100);}if(doy>-1){month=1;day=doy;do{dim=this._getDaysInMonth(year,month-1);if(day<=dim){break;}month++;day-=dim;}while(true);}date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day){throw"Invalid date";}return date;},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date){return"";}var iFormat,dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}return matches;},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num;}}return num;},formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value]);},output="",literal=false;if(date){for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{output+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getFullYear()%100<10?"0":"")+date.getFullYear()%100);break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'";}else{literal=true;}break;default:output+=format.charAt(iFormat);}}}}return output;},_possibleChars:function(format){var iFormat,chars="",literal=false,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}return matches;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{chars+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'";}else{literal=true;}break;default:chars+=format.charAt(iFormat);}}}return chars;},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name];},_setDateFromField:function(inst,noDefault){if(inst.input.val()===inst.lastVal){return;}var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate;}catch(event){dates=(noDefault?"":dates);}inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst);},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date()));},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date;},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst));}catch(e){}var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date(),year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;}matches=pattern.exec(offset);}return new Date(year,month,day);},newDate=(date==null||date===""?defaultDate:(typeof date==="string"?offsetString(date):(typeof date==="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):new Date(date.getTime()))));newDate=(newDate&&newDate.toString()==="Invalid Date"?defaultDate:newDate);if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0);}return this._daylightSavingAdjust(newDate);},_daylightSavingAdjust:function(date){if(!date){return null;}date.setHours(date.getHours()>12?date.getHours()+2:0);return date;},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!==inst.selectedMonth||origYear!==inst.selectedYear)&&!noChange){this._notifyChange(inst);}this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst));}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()==="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate;},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){$.datepicker._adjustDate(id,-stepMonths,"M");},next:function(){$.datepicker._adjustDate(id,+stepMonths,"M");},hide:function(){$.datepicker._hideDatepicker();},today:function(){$.datepicker._gotoToday(id);},selectDay:function(){$.datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false;},selectMonth:function(){$.datepicker._selectMonthYear(id,this,"M");return false;},selectYear:function(){$.datepicker._selectMonthYear(id,this,"Y");return false;}};$(this).on(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")]);});},_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date(),today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=(numMonths[0]!==1||numMonths[1]!==1),currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay))),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--;}if(maxDate){maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--;}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+" title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>":(hideIfNoPrevNext?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>"));nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+" title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>":(hideIfNoPrevNext?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>"));currentText=this._get(inst,"currentText");gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));controls=(!inst.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(inst,"closeText")+"</button>":"");buttonPanel=(showButtonPanel)?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);showWeek=this._get(inst,"showWeek");dayNames=this._get(inst,"dayNames");dayNamesMin=this._get(inst,"dayNamesMin");monthNames=this._get(inst,"monthNames");monthNamesShort=this._get(inst,"monthNamesShort");beforeShowDay=this._get(inst,"beforeShowDay");showOtherMonths=this._get(inst,"showOtherMonths");selectOtherMonths=this._get(inst,"selectOtherMonths");defaultDate=this._getDefaultDate(inst);html="";for(row=0;row<numMonths[0];row++){group="";this.maxRows=4;for(col=0;col<numMonths[1];col++){selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));cornerClass=" ui-corner-all";calender="";if(isMultiMonth){calender+="<div class='ui-datepicker-group";if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break;}}calender+="'>";}calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'>"+(/all|left/.test(cornerClass)&&row===0?(isRTL?next:prev):"")+(/all|right/.test(cornerClass)&&row===0?(isRTL?prev:next):"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";thead=(showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"");for(dow=0;dow<7;dow++){day=(dow+firstDay)%7;thead+="<th scope='col'"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+dayNames[day]+"'>"+dayNamesMin[day]+"</span></th>";}calender+=thead+"</tr></thead><tbody>";daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth);}leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;curRows=Math.ceil((leadDays+daysInMonth)/7);numRows=(isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows);this.maxRows=numRows;printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(dRow=0;dRow<numRows;dRow++){calender+="<tr>";tbody=(!showWeek?"":"<td class='ui-datepicker-week-col'>"+this._get(inst,"calculateWeek")(printDate)+"</td>");for(dow=0;dow<7;dow++){daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);otherMonth=(printDate.getMonth()!==drawMonth);unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+="<td class='"+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+((printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime())?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+((!otherMonth||showOtherMonths)&&daySettings[2]?" title='"+daySettings[2].replace(/'/g,"&#39;")+"'":"")+(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+(otherMonth&&!showOtherMonths?"&#xa0;":(unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+"' href='#'>"+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate);}calender+=tbody+"</tr>";}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++;}calender+="</tbody></table>"+(isMultiMonth?"</div>"+((numMonths[0]>0&&col===numMonths[1]-1)?"<div class='ui-datepicker-row-break'></div>":""):"");group+=calender;}html+=group;}html+=buttonPanel;inst._keyEvent=false;return html;},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html="<div class='ui-datepicker-title'>",monthHtml="";if(secondary||!changeMonth){monthHtml+="<span class='ui-datepicker-month'>"+monthNames[drawMonth]+"</span>";}else{inMinYear=(minDate&&minDate.getFullYear()===drawYear);inMaxYear=(maxDate&&maxDate.getFullYear()===drawYear);monthHtml+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+="<option value='"+month+"'"+(month===drawMonth?" selected='selected'":"")+">"+monthNamesShort[month]+"</option>";}}monthHtml+="</select>";}if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"");}if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear){html+="<span class='ui-datepicker-year'>"+drawYear+"</span>";}else{years=this._get(inst,"yearRange").split(":");thisYear=new Date().getFullYear();determineYear=function(value){var year=(value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year);};year=determineYear(years[0]);endYear=Math.max(year,determineYear(years[1]||""));year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);inst.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;year<=endYear;year++){inst.yearshtml+="<option value='"+year+"'"+(year===drawYear?" selected='selected'":"")+">"+year+"</option>";}inst.yearshtml+="</select>";html+=inst.yearshtml;inst.yearshtml=null;}}html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml;}html+="</div>";return html;},_adjustInstDate:function(inst,offset,period){var year=inst.selectedYear+(period==="Y"?offset:0),month=inst.selectedMonth+(period==="M"?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period==="D"?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period==="M"||period==="Y"){this._notifyChange(inst);}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=(minDate&&date<minDate?minDate:date);return(maxDate&&newDate>maxDate?maxDate:newDate);},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst]);}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths==="number"?[1,numMonths]:numMonths));},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null);},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate();},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay();},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));}return this._isInRange(inst,date);},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,"yearRange");if(years){yearSplit=years.split(":");currentYear=new Date().getFullYear();minYear=parseInt(yearSplit[0],10);maxYear=parseInt(yearSplit[1],10);if(yearSplit[0].match(/[+\-].*/)){minYear+=currentYear;}if(yearSplit[1].match(/[+\-].*/)){maxYear+=currentYear;}}return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())&&(!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear));},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!=="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")};},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear;}var date=(day?(typeof day==="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst));}});function datepicker_bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.on("mouseout",selector,function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).removeClass("ui-datepicker-prev-hover");}if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).removeClass("ui-datepicker-next-hover");}}).on("mouseover",selector,datepicker_handleMouseover);}function datepicker_handleMouseover(){if(!$.datepicker._isDisabledDatepicker(datepicker_instActive.inline?datepicker_instActive.dpDiv.parent()[0]:datepicker_instActive.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).addClass("ui-datepicker-prev-hover");}if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).addClass("ui-datepicker-next-hover");}}}function datepicker_extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null){target[name]=props[name];}}return target;}$.fn.datepicker=function(options){if(!this.length){return this;}if(!$.datepicker.initialized){$(document).on("mousedown",$.datepicker._checkExternalClick);$.datepicker.initialized=true;}if($("#"+$.datepicker._mainDivId).length===0){$("body").append($.datepicker.dpDiv);}var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options==="string"&&(options==="isDisabled"||options==="getDate"||options==="widget")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}if(options==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}return this.each(function(){typeof options==="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options);});};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.12.1";var widgetsDatepicker=$.datepicker;var ie=$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var mouseHandled=false;$(document).on("mouseup",function(){mouseHandled=false;});var widgetsMouse=$.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.on("mousedown."+this.widgetName,function(event){return that._mouseDown(event);}).on("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");event.stopImmediatePropagation();return false;}});this.started=false;},_mouseDestroy:function(){this.element.off("."+this.widgetName);if(this._mouseMoveDelegate){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);}},_mouseDown:function(event){if(mouseHandled){return;}this._mouseMoved=false;(this._mouseStarted&&this._mouseUp(event));this._mouseDownEvent=event;var that=this,btnIsLeft=(event.which===1),elIsCancel=(typeof this.options.cancel==="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false);if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true;}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true;},this.options.delay);}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(event)!==false);if(!this._mouseStarted){event.preventDefault();return true;}}if(true===$.data(event.target,this.widgetName+".preventClickEvent")){$.removeData(event.target,this.widgetName+".preventClickEvent");}this._mouseMoveDelegate=function(event){return that._mouseMove(event);};this._mouseUpDelegate=function(event){return that._mouseUp(event);};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true;},_mouseMove:function(event){if(this._mouseMoved){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button){return this._mouseUp(event);}else if(!event.which){if(event.originalEvent.altKey||event.originalEvent.ctrlKey||event.originalEvent.metaKey||event.originalEvent.shiftKey){this.ignoreMissingWhich=true;}else if(!this.ignoreMissingWhich){return this._mouseUp(event);}}}if(event.which||event.button){this._mouseMoved=true;}if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault();}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,event)!==false);(this._mouseStarted?this._mouseDrag(event):this._mouseUp(event));}return!this._mouseStarted;},_mouseUp:function(event){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(event.target===this._mouseDownEvent.target){$.data(event.target,this.widgetName+".preventClickEvent",true);}this._mouseStop(event);}if(this._mouseDelayTimer){clearTimeout(this._mouseDelayTimer);delete this._mouseDelayTimer;}this.ignoreMissingWhich=false;mouseHandled=false;event.preventDefault();},_mouseDistanceMet:function(event){return(Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance);},_mouseDelayMet:function(){return this.mouseDelayMet;},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true;}});var plugin=$.ui.plugin={add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(!set){return;}if(!allowDisconnected&&(!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11)){return;}for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}};var safeBlur=$.ui.safeBlur=function(element){if(element&&element.nodeName.toLowerCase()!=="body"){$(element).trigger("blur");}};$.widget("ui.draggable",$.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative();}if(this.options.addClasses){this._addClass("ui-draggable");}this._setHandleClassName();this._mouseInit();},_setOption:function(key,value){this._super(key,value);if(key==="handle"){this._removeHandleClassName();this._setHandleClassName();}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return;}this._removeHandleClassName();this._mouseDestroy();},_mouseCapture:function(event){var o=this.options;if(this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0){return false;}this.handle=this._getHandle(event);if(!this.handle){return false;}this._blurActiveElement(event);this._blockFrames(o.iframeFix===true?"iframe":o.iframeFix);return true;},_blockFrames:function(selector){this.iframeBlocks=this.document.find(selector).map(function(){var iframe=$(this);return $("<div>").css("position","absolute").appendTo(iframe.parent()).outerWidth(iframe.outerWidth()).outerHeight(iframe.outerHeight()).offset(iframe.offset())[0];});},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks;}},_blurActiveElement:function(event){var activeElement=$.ui.safeActiveElement(this.document[0]),target=$(event.target);if(target.closest(activeElement).length){return;}$.ui.safeBlur(activeElement);},_mouseStart:function(event){var o=this.options;this.helper=this._createHelper(event);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();if($.ui.ddmanager){$.ui.ddmanager.current=this;}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return $(this).css("position")==="fixed";}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(event);this.originalPosition=this.position=this._generatePosition(event,false);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));this._setContainment();if(this._trigger("start",event)===false){this._clear();return false;}this._cacheHelperProportions();if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}this._mouseDrag(event,true);if($.ui.ddmanager){$.ui.ddmanager.dragStart(this,event);}return true;},_refreshOffsets:function(event){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:event.pageX-this.offset.left,top:event.pageY-this.offset.top};},_mouseDrag:function(event,noPropagation){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset();}this.position=this._generatePosition(event,true);this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===false){this._mouseUp(new $.Event("mouseup",event));return false;}this.position=ui.position;}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}return false;},_mouseStop:function(event){var that=this,dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour){dropped=$.ui.ddmanager.drop(this,event);}if(this.dropped){dropped=this.dropped;this.dropped=false;}if((this.options.revert==="invalid"&&!dropped)||(this.options.revert==="valid"&&dropped)||this.options.revert===true||($.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped))){$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(that._trigger("stop",event)!==false){that._clear();}});}else{if(this._trigger("stop",event)!==false){this._clear();}}return false;},_mouseUp:function(event){this._unblockFrames();if($.ui.ddmanager){$.ui.ddmanager.dragStop(this,event);}if(this.handleElement.is(event.target)){this.element.trigger("focus");}return $.ui.mouse.prototype._mouseUp.call(this,event);},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp(new $.Event("mouseup",{target:this.element[0]}));}else{this._clear();}return this;},_getHandle:function(event){return this.options.handle?!!$(event.target).closest(this.element.find(this.options.handle)).length:true;},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle");},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle");},_createHelper:function(event){var o=this.options,helperIsFunction=$.isFunction(o.helper),helper=helperIsFunction?$(o.helper.apply(this.element[0],[event])):(o.helper==="clone"?this.element.clone().removeAttr("id"):this.element);if(!helper.parents("body").length){helper.appendTo((o.appendTo==="parent"?this.element[0].parentNode:o.appendTo));}if(helperIsFunction&&helper[0]===this.element[0]){this._setPositionRelative();}if(helper[0]!==this.element[0]&&!(/(fixed|absolute)/).test(helper.css("position"))){helper.css("position","absolute");}return helper;},_setPositionRelative:function(){if(!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative";}},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string"){obj=obj.split(" ");}if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}if("left"in obj){this.offset.click.left=obj.left+this.margins.left;}if("right"in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}if("top"in obj){this.offset.click.top=obj.top+this.margins.top;}if("bottom"in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_isRootNode:function(element){return(/(html|body)/i).test(element.tagName)||element===this.document[0];},_getParentOffset:function(){var po=this.offsetParent.offset(),document=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}if(this._isRootNode(this.offsetParent[0])){po={top:0,left:0};}return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0};}var p=this.element.position(),scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+(!scrollIsRootNode?this.scrollParent.scrollTop():0),left:p.left-(parseInt(this.helper.css("left"),10)||0)+(!scrollIsRootNode?this.scrollParent.scrollLeft():0)};},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var isUserScrollable,c,ce,o=this.options,document=this.document[0];this.relativeContainer=null;if(!o.containment){this.containment=null;return;}if(o.containment==="window"){this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return;}if(o.containment==="document"){this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,($(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return;}if(o.containment.constructor===Array){this.containment=o.containment;return;}if(o.containment==="parent"){o.containment=this.helper[0].parentNode;}c=$(o.containment);ce=c[0];if(!ce){return;}isUserScrollable=/(scroll|auto)/.test(c.css("overflow"));this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(isUserScrollable?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(isUserScrollable?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=c;},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}var mod=d==="absolute"?1:-1,scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:(pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-((this.cssPosition==="fixed"?-this.offset.scroll.top:(scrollIsRootNode?0:this.offset.scroll.top))*mod)),left:(pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-((this.cssPosition==="fixed"?-this.offset.scroll.left:(scrollIsRootNode?0:this.offset.scroll.left))*mod))};},_generatePosition:function(event,constrainPosition){var containment,co,top,left,o=this.options,scrollIsRootNode=this._isRootNode(this.scrollParent[0]),pageX=event.pageX,pageY=event.pageY;if(!scrollIsRootNode||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()};}if(constrainPosition){if(this.containment){if(this.relativeContainer){co=this.relativeContainer.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top];}else{containment=this.containment;}if(event.pageX-this.offset.click.left<containment[0]){pageX=containment[0]+this.offset.click.left;}if(event.pageY-this.offset.click.top<containment[1]){pageY=containment[1]+this.offset.click.top;}if(event.pageX-this.offset.click.left>containment[2]){pageX=containment[2]+this.offset.click.left;}if(event.pageY-this.offset.click.top>containment[3]){pageY=containment[3]+this.offset.click.top;}}if(o.grid){top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment?((top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3])?top:((top-this.offset.click.top>=containment[1])?top-o.grid[1]:top+o.grid[1])):top;left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment?((left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2])?left:((left-this.offset.click.left>=containment[0])?left-o.grid[0]:left+o.grid[0])):left;}if(o.axis==="y"){pageX=this.originalPageX;}if(o.axis==="x"){pageY=this.originalPageY;}}return{top:(pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:(scrollIsRootNode?0:this.offset.scroll.top))),left:(pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:(scrollIsRootNode?0:this.offset.scroll.left)))};},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove();}this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy();}},_trigger:function(type,event,ui){ui=ui||this._uiHash();$.ui.plugin.call(this,type,[event,ui,this],true);if(/^(drag|start|stop)/.test(type)){this.positionAbs=this._convertPositionTo("absolute");ui.offset=this.positionAbs;}return $.Widget.prototype._trigger.call(this,type,event,ui);},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs};}});$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.sortables=[];$(draggable.options.connectToSortable).each(function(){var sortable=$(this).sortable("instance");if(sortable&&!sortable.options.disabled){draggable.sortables.push(sortable);sortable.refreshPositions();sortable._trigger("activate",event,uiSortable);}});},stop:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.cancelHelperRemoval=false;$.each(draggable.sortables,function(){var sortable=this;if(sortable.isOver){sortable.isOver=0;draggable.cancelHelperRemoval=true;sortable.cancelHelperRemoval=false;sortable._storedCSS={position:sortable.placeholder.css("position"),top:sortable.placeholder.css("top"),left:sortable.placeholder.css("left")};sortable._mouseStop(event);sortable.options.helper=sortable.options._helper;}else{sortable.cancelHelperRemoval=true;sortable._trigger("deactivate",event,uiSortable);}});},drag:function(event,ui,draggable){$.each(draggable.sortables,function(){var innermostIntersecting=false,sortable=this;sortable.positionAbs=draggable.positionAbs;sortable.helperProportions=draggable.helperProportions;sortable.offset.click=draggable.offset.click;if(sortable._intersectsWith(sortable.containerCache)){innermostIntersecting=true;$.each(draggable.sortables,function(){this.positionAbs=draggable.positionAbs;this.helperProportions=draggable.helperProportions;this.offset.click=draggable.offset.click;if(this!==sortable&&this._intersectsWith(this.containerCache)&&$.contains(sortable.element[0],this.element[0])){innermostIntersecting=false;}return innermostIntersecting;});}if(innermostIntersecting){if(!sortable.isOver){sortable.isOver=1;draggable._parent=ui.helper.parent();sortable.currentItem=ui.helper.appendTo(sortable.element).data("ui-sortable-item",true);sortable.options._helper=sortable.options.helper;sortable.options.helper=function(){return ui.helper[0];};event.target=sortable.currentItem[0];sortable._mouseCapture(event,true);sortable._mouseStart(event,true,true);sortable.offset.click.top=draggable.offset.click.top;sortable.offset.click.left=draggable.offset.click.left;sortable.offset.parent.left-=draggable.offset.parent.left-sortable.offset.parent.left;sortable.offset.parent.top-=draggable.offset.parent.top-sortable.offset.parent.top;draggable._trigger("toSortable",event);draggable.dropped=sortable.element;$.each(draggable.sortables,function(){this.refreshPositions();});draggable.currentItem=draggable.element;sortable.fromOutside=draggable;}if(sortable.currentItem){sortable._mouseDrag(event);ui.position=sortable.position;}}else{if(sortable.isOver){sortable.isOver=0;sortable.cancelHelperRemoval=true;sortable.options._revert=sortable.options.revert;sortable.options.revert=false;sortable._trigger("out",event,sortable._uiHash(sortable));sortable._mouseStop(event,true);sortable.options.revert=sortable.options._revert;sortable.options.helper=sortable.options._helper;if(sortable.placeholder){sortable.placeholder.remove();}ui.helper.appendTo(draggable._parent);draggable._refreshOffsets(event);ui.position=draggable._generatePosition(event,true);draggable._trigger("fromSortable",event);draggable.dropped=false;$.each(draggable.sortables,function(){this.refreshPositions();});}}});}});$.ui.plugin.add("draggable","cursor",{start:function(event,ui,instance){var t=$("body"),o=instance.options;if(t.css("cursor")){o._cursor=t.css("cursor");}t.css("cursor",o.cursor);},stop:function(event,ui,instance){var o=instance.options;if(o._cursor){$("body").css("cursor",o._cursor);}}});$.ui.plugin.add("draggable","opacity",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;if(t.css("opacity")){o._opacity=t.css("opacity");}t.css("opacity",o.opacity);},stop:function(event,ui,instance){var o=instance.options;if(o._opacity){$(ui.helper).css("opacity",o._opacity);}}});$.ui.plugin.add("draggable","scroll",{start:function(event,ui,i){if(!i.scrollParentNotHidden){i.scrollParentNotHidden=i.helper.scrollParent(false);}if(i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML"){i.overflowOffset=i.scrollParentNotHidden.offset();}},drag:function(event,ui,i){var o=i.options,scrolled=false,scrollParent=i.scrollParentNotHidden[0],document=i.document[0];if(scrollParent!==document&&scrollParent.tagName!=="HTML"){if(!o.axis||o.axis!=="x"){if((i.overflowOffset.top+scrollParent.offsetHeight)-event.pageY<o.scrollSensitivity){scrollParent.scrollTop=scrolled=scrollParent.scrollTop+o.scrollSpeed;}else if(event.pageY-i.overflowOffset.top<o.scrollSensitivity){scrollParent.scrollTop=scrolled=scrollParent.scrollTop-o.scrollSpeed;}}if(!o.axis||o.axis!=="y"){if((i.overflowOffset.left+scrollParent.offsetWidth)-event.pageX<o.scrollSensitivity){scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft+o.scrollSpeed;}else if(event.pageX-i.overflowOffset.left<o.scrollSensitivity){scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft-o.scrollSpeed;}}}else{if(!o.axis||o.axis!=="x"){if(event.pageY-$(document).scrollTop()<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);}else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);}}if(!o.axis||o.axis!=="y"){if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);}else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}}}if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(i,event);}}});$.ui.plugin.add("draggable","snap",{start:function(event,ui,i){var o=i.options;i.snapElements=[];$(o.snap.constructor!==String?(o.snap.items||":data(ui-draggable)"):o.snap).each(function(){var $t=$(this),$o=$t.offset();if(this!==i.element[0]){i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left});}});},drag:function(event,ui,inst){var ts,bs,ls,rs,l,r,t,b,i,first,o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--){l=inst.snapElements[i].left-inst.margins.left;r=l+inst.snapElements[i].width;t=inst.snapElements[i].top-inst.margins.top;b=t+inst.snapElements[i].height;if(x2<l-d||x1>r+d||y2<t-d||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)){if(inst.snapElements[i].snapping){(inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}inst.snapElements[i].snapping=false;continue;}if(o.snapMode!=="inner"){ts=Math.abs(t-y2)<=d;bs=Math.abs(b-y1)<=d;ls=Math.abs(l-x2)<=d;rs=Math.abs(r-x1)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top;}if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top;}if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left;}if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left;}}first=(ts||bs||ls||rs);if(o.snapMode!=="outer"){ts=Math.abs(t-y1)<=d;bs=Math.abs(b-y2)<=d;ls=Math.abs(l-x1)<=d;rs=Math.abs(r-x2)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top;}if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top;}if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left;}if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left;}}if(!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)){(inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}inst.snapElements[i].snapping=(ts||bs||ls||rs||first);}}});$.ui.plugin.add("draggable","stack",{start:function(event,ui,instance){var min,o=instance.options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0);});if(!group.length){return;}min=parseInt($(group[0]).css("zIndex"),10)||0;$(group).each(function(i){$(this).css("zIndex",min+i);});this.css("zIndex",(min+group.length));}});$.ui.plugin.add("draggable","zIndex",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;if(t.css("zIndex")){o._zIndex=t.css("zIndex");}t.css("zIndex",o.zIndex);},stop:function(event,ui,instance){var o=instance.options;if(o._zIndex){$(ui.helper).css("zIndex",o._zIndex);}}});var widgetsDraggable=$.ui.draggable;$.widget("ui.resizable",$.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(value){return parseFloat(value)||0;},_isNumber:function(value){return!isNaN(parseFloat(value));},_hasScroll:function(el,a){if($(el).css("overflow")==="hidden"){return false;}var scroll=(a&&a==="left")?"scrollLeft":"scrollTop",has=false;if(el[scroll]>0){return true;}el[scroll]=1;has=(el[scroll]>0);el[scroll]=0;return has;},_create:function(){var margins,o=this.options,that=this;this._addClass("ui-resizable");$.extend(this,{_aspectRatio:!!(o.aspectRatio),aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;margins={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")};this.element.css(margins);this.originalElement.css("margin",0);this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css(margins);this._proportionallyResize();}this._setupHandles();if(o.autoHide){$(this.element).on("mouseenter",function(){if(o.disabled){return;}that._removeClass("ui-resizable-autohide");that._handles.show();}).on("mouseleave",function(){if(o.disabled){return;}if(!that.resizing){that._addClass("ui-resizable-autohide");that._handles.hide();}});}this._mouseInit();},_destroy:function(){this._mouseDestroy();var wrapper,_destroy=function(exp){$(exp).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove();};if(this.elementIsWrapper){_destroy(this.element);wrapper=this.element;this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper);wrapper.remove();}this.originalElement.css("resize",this.originalResizeStyle);_destroy(this.originalElement);return this;},_setOption:function(key,value){this._super(key,value);switch(key){case"handles":this._removeHandles();this._setupHandles();break;default:break;}},_setupHandles:function(){var o=this.options,handle,i,n,hname,axis,that=this;this.handles=o.handles||(!$(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=$();if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw";}n=this.handles.split(",");this.handles={};for(i=0;i<n.length;i++){handle=$.trim(n[i]);hname="ui-resizable-"+handle;axis=$("<div>");this._addClass(axis,"ui-resizable-handle "+hname);axis.css({zIndex:o.zIndex});this.handles[handle]=".ui-resizable-"+handle;this.element.append(axis);}}this._renderAxis=function(target){var i,axis,padPos,padWrapper;target=target||this.element;for(i in this.handles){if(this.handles[i].constructor===String){this.handles[i]=this.element.children(this.handles[i]).first().show();}else if(this.handles[i].jquery||this.handles[i].nodeType){this.handles[i]=$(this.handles[i]);this._on(this.handles[i],{"mousedown":that._mouseDown});}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){axis=$(this.handles[i],this.element);padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");target.css(padPos,padWrapper);this._proportionallyResize();}this._handles=this._handles.add(this.handles[i]);}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",function(){if(!that.resizing){if(this.className){axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);}that.axis=axis&&axis[1]?axis[1]:"se";}});if(o.autoHide){this._handles.hide();this._addClass("ui-resizable-autohide");}},_removeHandles:function(){this._handles.remove();},_mouseCapture:function(event){var i,handle,capture=false;for(i in this.handles){handle=$(this.handles[i])[0];if(handle===event.target||$.contains(handle,event.target)){capture=true;}}return!this.options.disabled&&capture;},_mouseStart:function(event){var curleft,curtop,cursor,o=this.options,el=this.element;this.resizing=true;this._renderProxy();curleft=this._num(this.helper.css("left"));curtop=this._num(this.helper.css("top"));if(o.containment){curleft+=$(o.containment).scrollLeft()||0;curtop+=$(o.containment).scrollTop()||0;}this.offset=this.helper.offset();this.position={left:curleft,top:curtop};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:el.width(),height:el.height()};this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};this.originalPosition={left:curleft,top:curtop};this.originalMousePosition={left:event.pageX,top:event.pageY};this.aspectRatio=(typeof o.aspectRatio==="number")?o.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);cursor=$(".ui-resizable-"+this.axis).css("cursor");$("body").css("cursor",cursor==="auto"?this.axis+"-resize":cursor);this._addClass("ui-resizable-resizing");this._propagate("start",event);return true;},_mouseDrag:function(event){var data,props,smp=this.originalMousePosition,a=this.axis,dx=(event.pageX-smp.left)||0,dy=(event.pageY-smp.top)||0,trigger=this._change[a];this._updatePrevProperties();if(!trigger){return false;}data=trigger.apply(this,[event,dx,dy]);this._updateVirtualBoundaries(event.shiftKey);if(this._aspectRatio||event.shiftKey){data=this._updateRatio(data,event);}data=this._respectSize(data,event);this._updateCache(data);this._propagate("resize",event);props=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize();}if(!$.isEmptyObject(props)){this._updatePrevProperties();this._trigger("resize",event,this.ui());this._applyChanges();}return false;},_mouseStop:function(event){this.resizing=false;var pr,ista,soffseth,soffsetw,s,left,top,o=this.options,that=this;if(this._helper){pr=this._proportionallyResizeElements;ista=pr.length&&(/textarea/i).test(pr[0].nodeName);soffseth=ista&&this._hasScroll(pr[0],"left")?0:that.sizeDiff.height;soffsetw=ista?0:that.sizeDiff.width;s={width:(that.helper.width()-soffsetw),height:(that.helper.height()-soffseth)};left=(parseFloat(that.element.css("left"))+(that.position.left-that.originalPosition.left))||null;top=(parseFloat(that.element.css("top"))+(that.position.top-that.originalPosition.top))||null;if(!o.animate){this.element.css($.extend(s,{top:top,left:left}));}that.helper.height(that.size.height);that.helper.width(that.size.width);if(this._helper&&!o.animate){this._proportionallyResize();}}$("body").css("cursor","auto");this._removeClass("ui-resizable-resizing");this._propagate("stop",event);if(this._helper){this.helper.remove();}return false;},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height};},_applyChanges:function(){var props={};if(this.position.top!==this.prevPosition.top){props.top=this.position.top+"px";}if(this.position.left!==this.prevPosition.left){props.left=this.position.left+"px";}if(this.size.width!==this.prevSize.width){props.width=this.size.width+"px";}if(this.size.height!==this.prevSize.height){props.height=this.size.height+"px";}this.helper.css(props);return props;},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||forceAspectRatio){pMinWidth=b.minHeight*this.aspectRatio;pMinHeight=b.minWidth/this.aspectRatio;pMaxWidth=b.maxHeight*this.aspectRatio;pMaxHeight=b.maxWidth/this.aspectRatio;if(pMinWidth>b.minWidth){b.minWidth=pMinWidth;}if(pMinHeight>b.minHeight){b.minHeight=pMinHeight;}if(pMaxWidth<b.maxWidth){b.maxWidth=pMaxWidth;}if(pMaxHeight<b.maxHeight){b.maxHeight=pMaxHeight;}}this._vBoundaries=b;},_updateCache:function(data){this.offset=this.helper.offset();if(this._isNumber(data.left)){this.position.left=data.left;}if(this._isNumber(data.top)){this.position.top=data.top;}if(this._isNumber(data.height)){this.size.height=data.height;}if(this._isNumber(data.width)){this.size.width=data.width;}},_updateRatio:function(data){var cpos=this.position,csize=this.size,a=this.axis;if(this._isNumber(data.height)){data.width=(data.height*this.aspectRatio);}else if(this._isNumber(data.width)){data.height=(data.width/this.aspectRatio);}if(a==="sw"){data.left=cpos.left+(csize.width-data.width);data.top=null;}if(a==="nw"){data.top=cpos.top+(csize.height-data.height);data.left=cpos.left+(csize.width-data.width);}return data;},_respectSize:function(data){var o=this._vBoundaries,a=this.axis,ismaxw=this._isNumber(data.width)&&o.maxWidth&&(o.maxWidth<data.width),ismaxh=this._isNumber(data.height)&&o.maxHeight&&(o.maxHeight<data.height),isminw=this._isNumber(data.width)&&o.minWidth&&(o.minWidth>data.width),isminh=this._isNumber(data.height)&&o.minHeight&&(o.minHeight>data.height),dw=this.originalPosition.left+this.originalSize.width,dh=this.originalPosition.top+this.originalSize.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);if(isminw){data.width=o.minWidth;}if(isminh){data.height=o.minHeight;}if(ismaxw){data.width=o.maxWidth;}if(ismaxh){data.height=o.maxHeight;}if(isminw&&cw){data.left=dw-o.minWidth;}if(ismaxw&&cw){data.left=dw-o.maxWidth;}if(isminh&&ch){data.top=dh-o.minHeight;}if(ismaxh&&ch){data.top=dh-o.maxHeight;}if(!data.width&&!data.height&&!data.left&&data.top){data.top=null;}else if(!data.width&&!data.height&&!data.top&&data.left){data.left=null;}return data;},_getPaddingPlusBorderDimensions:function(element){var i=0,widths=[],borders=[element.css("borderTopWidth"),element.css("borderRightWidth"),element.css("borderBottomWidth"),element.css("borderLeftWidth")],paddings=[element.css("paddingTop"),element.css("paddingRight"),element.css("paddingBottom"),element.css("paddingLeft")];for(;i<4;i++){widths[i]=(parseFloat(borders[i])||0);widths[i]+=(parseFloat(paddings[i])||0);}return{height:widths[0]+widths[2],width:widths[1]+widths[3]};},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return;}var prel,i=0,element=this.helper||this.element;for(;i<this._proportionallyResizeElements.length;i++){prel=this._proportionallyResizeElements[i];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(prel);}prel.css({height:(element.height()-this.outerDimensions.height)||0,width:(element.width()-this.outerDimensions.width)||0});}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$("<div style='overflow:hidden;'></div>");this._addClass(this.helper,this._helper);this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex});this.helper.appendTo("body").disableSelection();}else{this.helper=this.element;}},_change:{e:function(event,dx){return{width:this.originalSize.width+dx};},w:function(event,dx){var cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx};},n:function(event,dx,dy){var cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy};},s:function(event,dx,dy){return{height:this.originalSize.height+dy};},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]);(n!=="resize"&&this._trigger(n,event,this.ui()));},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition};}});$.ui.plugin.add("resizable","animate",{stop:function(event){var that=$(this).resizable("instance"),o=that.options,pr=that._proportionallyResizeElements,ista=pr.length&&(/textarea/i).test(pr[0].nodeName),soffseth=ista&&that._hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:(that.size.width-soffsetw),height:(that.size.height-soffseth)},left=(parseFloat(that.element.css("left"))+(that.position.left-that.originalPosition.left))||null,top=(parseFloat(that.element.css("top"))+(that.position.top-that.originalPosition.top))||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseFloat(that.element.css("width")),height:parseFloat(that.element.css("height")),top:parseFloat(that.element.css("top")),left:parseFloat(that.element.css("left"))};if(pr&&pr.length){$(pr[0]).css({width:data.width,height:data.height});}that._updateCache(data);that._propagate("resize",event);}});}});$.ui.plugin.add("resizable","containment",{start:function(){var element,p,co,ch,cw,width,height,that=$(this).resizable("instance"),o=that.options,el=that.element,oc=o.containment,ce=(oc instanceof $)?oc.get(0):(/parent/.test(oc))?el.parent().get(0):oc;if(!ce){return;}that.containerElement=$(ce);if(/document/.test(oc)||oc===document){that.containerOffset={left:0,top:0};that.containerPosition={left:0,top:0};that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight};}else{element=$(ce);p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=that._num(element.css("padding"+name));});that.containerOffset=element.offset();that.containerPosition=element.position();that.containerSize={height:(element.innerHeight()-p[3]),width:(element.innerWidth()-p[1])};co=that.containerOffset;ch=that.containerSize.height;cw=that.containerSize.width;width=(that._hasScroll(ce,"left")?ce.scrollWidth:cw);height=(that._hasScroll(ce)?ce.scrollHeight:ch);that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height};}},resize:function(event){var woset,hoset,isParent,isOffsetRelative,that=$(this).resizable("instance"),o=that.options,co=that.containerOffset,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement,continueResize=true;if(ce[0]!==document&&(/static/).test(ce.css("position"))){cop=co;}if(cp.left<(that._helper?co.left:0)){that.size.width=that.size.width+(that._helper?(that.position.left-co.left):(that.position.left-cop.left));if(pRatio){that.size.height=that.size.width/that.aspectRatio;continueResize=false;}that.position.left=o.helper?co.left:0;}if(cp.top<(that._helper?co.top:0)){that.size.height=that.size.height+(that._helper?(that.position.top-co.top):that.position.top);if(pRatio){that.size.width=that.size.height*that.aspectRatio;continueResize=false;}that.position.top=that._helper?co.top:0;}isParent=that.containerElement.get(0)===that.element.parent().get(0);isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position"));if(isParent&&isOffsetRelative){that.offset.left=that.parentData.left+that.position.left;that.offset.top=that.parentData.top+that.position.top;}else{that.offset.left=that.element.offset().left;that.offset.top=that.element.offset().top;}woset=Math.abs(that.sizeDiff.width+(that._helper?that.offset.left-cop.left:(that.offset.left-co.left)));hoset=Math.abs(that.sizeDiff.height+(that._helper?that.offset.top-cop.top:(that.offset.top-co.top)));if(woset+that.size.width>=that.parentData.width){that.size.width=that.parentData.width-woset;if(pRatio){that.size.height=that.size.width/that.aspectRatio;continueResize=false;}}if(hoset+that.size.height>=that.parentData.height){that.size.height=that.parentData.height-hoset;if(pRatio){that.size.width=that.size.height*that.aspectRatio;continueResize=false;}}if(!continueResize){that.position.left=that.prevPosition.left;that.position.top=that.prevPosition.top;that.size.width=that.prevSize.width;that.size.height=that.prevSize.height;}},stop:function(){var that=$(this).resizable("instance"),o=that.options,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;if(that._helper&&!o.animate&&(/relative/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}if(that._helper&&!o.animate&&(/static/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}}});$.ui.plugin.add("resizable","alsoResize",{start:function(){var that=$(this).resizable("instance"),o=that.options;$(o.alsoResize).each(function(){var el=$(this);el.data("ui-resizable-alsoresize",{width:parseFloat(el.width()),height:parseFloat(el.height()),left:parseFloat(el.css("left")),top:parseFloat(el.css("top"))});});},resize:function(event,ui){var that=$(this).resizable("instance"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:(that.size.height-os.height)||0,width:(that.size.width-os.width)||0,top:(that.position.top-op.top)||0,left:(that.position.left-op.left)||0};$(o.alsoResize).each(function(){var el=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},css=el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);if(sum&&sum>=0){style[prop]=sum||null;}});el.css(style);});},stop:function(){$(this).removeData("ui-resizable-alsoresize");}});$.ui.plugin.add("resizable","ghost",{start:function(){var that=$(this).resizable("instance"),cs=that.size;that.ghost=that.originalElement.clone();that.ghost.css({opacity:0.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0});that._addClass(that.ghost,"ui-resizable-ghost");if($.uiBackCompat!==false&&typeof that.options.ghost==="string"){that.ghost.addClass(this.options.ghost);}that.ghost.appendTo(that.helper);},resize:function(){var that=$(this).resizable("instance");if(that.ghost){that.ghost.css({position:"relative",height:that.size.height,width:that.size.width});}},stop:function(){var that=$(this).resizable("instance");if(that.ghost&&that.helper){that.helper.get(0).removeChild(that.ghost.get(0));}}});$.ui.plugin.add("resizable","grid",{resize:function(){var outerDimensions,that=$(this).resizable("instance"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,grid=typeof o.grid==="number"?[o.grid,o.grid]:o.grid,gridX=(grid[0]||1),gridY=(grid[1]||1),ox=Math.round((cs.width-os.width)/gridX)*gridX,oy=Math.round((cs.height-os.height)/gridY)*gridY,newWidth=os.width+ox,newHeight=os.height+oy,isMaxWidth=o.maxWidth&&(o.maxWidth<newWidth),isMaxHeight=o.maxHeight&&(o.maxHeight<newHeight),isMinWidth=o.minWidth&&(o.minWidth>newWidth),isMinHeight=o.minHeight&&(o.minHeight>newHeight);o.grid=grid;if(isMinWidth){newWidth+=gridX;}if(isMinHeight){newHeight+=gridY;}if(isMaxWidth){newWidth-=gridX;}if(isMaxHeight){newHeight-=gridY;}if(/^(se|s|e)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;}else if(/^(ne)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.top=op.top-oy;}else if(/^(sw)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.left=op.left-ox;}else{if(newHeight-gridY<=0||newWidth-gridX<=0){outerDimensions=that._getPaddingPlusBorderDimensions(this);}if(newHeight-gridY>0){that.size.height=newHeight;that.position.top=op.top-oy;}else{newHeight=gridY-outerDimensions.height;that.size.height=newHeight;that.position.top=op.top+os.height-newHeight;}if(newWidth-gridX>0){that.size.width=newWidth;that.position.left=op.left-ox;}else{newWidth=gridX-outerDimensions.width;that.size.width=newWidth;that.position.left=op.left+os.width-newWidth;}}}});var widgetsResizable=$.ui.resizable;$.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:true,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:true,closeText:"Close",draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(pos){var topOffset=$(this).css(pos).offset().top;if(topOffset<0){$(this).css("top",pos.top-topOffset);}}},resizable:true,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions:{maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");if(this.options.title==null&&this.originalTitle!=null){this.options.title=this.originalTitle;}if(this.options.disabled){this.options.disabled=false;}this._createWrapper();this.element.show().removeAttr("title").appendTo(this.uiDialog);this._addClass("ui-dialog-content","ui-widget-content");this._createTitlebar();this._createButtonPane();if(this.options.draggable&&$.fn.draggable){this._makeDraggable();}if(this.options.resizable&&$.fn.resizable){this._makeResizable();}this._isOpen=false;this._trackFocus();},_init:function(){if(this.options.autoOpen){this.open();}},_appendTo:function(){var element=this.options.appendTo;if(element&&(element.jquery||element.nodeType)){return $(element);}return this.document.find(element||"body").eq(0);},_destroy:function(){var next,originalPosition=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().css(this.originalCss).detach();this.uiDialog.remove();if(this.originalTitle){this.element.attr("title",this.originalTitle);}next=originalPosition.parent.children().eq(originalPosition.index);if(next.length&&next[0]!==this.element[0]){next.before(this.element);}else{originalPosition.parent.append(this.element);}},widget:function(){return this.uiDialog;},disable:$.noop,enable:$.noop,close:function(event){var that=this;if(!this._isOpen||this._trigger("beforeClose",event)===false){return;}this._isOpen=false;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();if(!this.opener.filter(":focusable").trigger("focus").length){$.ui.safeBlur($.ui.safeActiveElement(this.document[0]));}this._hide(this.uiDialog,this.options.hide,function(){that._trigger("close",event);});},isOpen:function(){return this._isOpen;},moveToTop:function(){this._moveToTop();},_moveToTop:function(event,silent){var moved=false,zIndices=this.uiDialog.siblings(".ui-front:visible").map(function(){return+$(this).css("z-index");}).get(),zIndexMax=Math.max.apply(null,zIndices);if(zIndexMax>=+this.uiDialog.css("z-index")){this.uiDialog.css("z-index",zIndexMax+1);moved=true;}if(moved&&!silent){this._trigger("focus",event);}return moved;},open:function(){var that=this;if(this._isOpen){if(this._moveToTop()){this._focusTabbable();}return;}this._isOpen=true;this.opener=$($.ui.safeActiveElement(this.document[0]));this._size();this._position();this._createOverlay();this._moveToTop(null,true);if(this.overlay){this.overlay.css("z-index",this.uiDialog.css("z-index")-1);}this._show(this.uiDialog,this.options.show,function(){that._focusTabbable();that._trigger("focus");});this._makeFocusTarget();this._trigger("open");},_focusTabbable:function(){var hasFocus=this._focusedElement;if(!hasFocus){hasFocus=this.element.find("[autofocus]");}if(!hasFocus.length){hasFocus=this.element.find(":tabbable");}if(!hasFocus.length){hasFocus=this.uiDialogButtonPane.find(":tabbable");}if(!hasFocus.length){hasFocus=this.uiDialogTitlebarClose.filter(":tabbable");}if(!hasFocus.length){hasFocus=this.uiDialog;}hasFocus.eq(0).trigger("focus");},_keepFocus:function(event){function checkFocus(){var activeElement=$.ui.safeActiveElement(this.document[0]),isActive=this.uiDialog[0]===activeElement||$.contains(this.uiDialog[0],activeElement);if(!isActive){this._focusTabbable();}}event.preventDefault();checkFocus.call(this);this._delay(checkFocus);},_createWrapper:function(){this.uiDialog=$("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front");this._on(this.uiDialog,{keydown:function(event){if(this.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){event.preventDefault();this.close(event);return;}if(event.keyCode!==$.ui.keyCode.TAB||event.isDefaultPrevented()){return;}var tabbables=this.uiDialog.find(":tabbable"),first=tabbables.filter(":first"),last=tabbables.filter(":last");if((event.target===last[0]||event.target===this.uiDialog[0])&&!event.shiftKey){this._delay(function(){first.trigger("focus");});event.preventDefault();}else if((event.target===first[0]||event.target===this.uiDialog[0])&&event.shiftKey){this._delay(function(){last.trigger("focus");});event.preventDefault();}},mousedown:function(event){if(this._moveToTop(event)){this._focusTabbable();}}});if(!this.element.find("[aria-describedby]").length){this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")});}},_createTitlebar:function(){var uiDialogTitle;this.uiDialogTitlebar=$("<div>");this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix");this._on(this.uiDialogTitlebar,{mousedown:function(event){if(!$(event.target).closest(".ui-dialog-titlebar-close")){this.uiDialog.trigger("focus");}}});this.uiDialogTitlebarClose=$("<button type='button'></button>").button({label:$("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:false}).appendTo(this.uiDialogTitlebar);this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close");this._on(this.uiDialogTitlebarClose,{click:function(event){event.preventDefault();this.close(event);}});uiDialogTitle=$("<span>").uniqueId().prependTo(this.uiDialogTitlebar);this._addClass(uiDialogTitle,"ui-dialog-title");this._title(uiDialogTitle);this.uiDialogTitlebar.prependTo(this.uiDialog);this.uiDialog.attr({"aria-labelledby":uiDialogTitle.attr("id")});},_title:function(title){if(this.options.title){title.text(this.options.title);}else{title.html("&#160;");}},_createButtonPane:function(){this.uiDialogButtonPane=$("<div>");this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix");this.uiButtonSet=$("<div>").appendTo(this.uiDialogButtonPane);this._addClass(this.uiButtonSet,"ui-dialog-buttonset");this._createButtons();},_createButtons:function(){var that=this,buttons=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if($.isEmptyObject(buttons)||($.isArray(buttons)&&!buttons.length)){this._removeClass(this.uiDialog,"ui-dialog-buttons");return;}$.each(buttons,function(name,props){var click,buttonOptions;props=$.isFunction(props)?{click:props,text:name}:props;props=$.extend({type:"button"},props);click=props.click;buttonOptions={icon:props.icon,iconPosition:props.iconPosition,showLabel:props.showLabel,icons:props.icons,text:props.text};delete props.click;delete props.icon;delete props.iconPosition;delete props.showLabel;delete props.icons;if(typeof props.text==="boolean"){delete props.text;}$("<button></button>",props).button(buttonOptions).appendTo(that.uiButtonSet).on("click",function(){click.apply(that.element[0],arguments);});});this._addClass(this.uiDialog,"ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog);},_makeDraggable:function(){var that=this,options=this.options;function filteredUi(ui){return{position:ui.position,offset:ui.offset};}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){that._addClass($(this),"ui-dialog-dragging");that._blockFrames();that._trigger("dragStart",event,filteredUi(ui));},drag:function(event,ui){that._trigger("drag",event,filteredUi(ui));},stop:function(event,ui){var left=ui.offset.left-that.document.scrollLeft(),top=ui.offset.top-that.document.scrollTop();options.position={my:"left top",at:"left"+(left>=0?"+":"")+left+" "+"top"+(top>=0?"+":"")+top,of:that.window};that._removeClass($(this),"ui-dialog-dragging");that._unblockFrames();that._trigger("dragStop",event,filteredUi(ui));}});},_makeResizable:function(){var that=this,options=this.options,handles=options.resizable,position=this.uiDialog.css("position"),resizeHandles=typeof handles==="string"?handles:"n,e,s,w,se,sw,ne,nw";function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size};}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:this._minHeight(),handles:resizeHandles,start:function(event,ui){that._addClass($(this),"ui-dialog-resizing");that._blockFrames();that._trigger("resizeStart",event,filteredUi(ui));},resize:function(event,ui){that._trigger("resize",event,filteredUi(ui));},stop:function(event,ui){var offset=that.uiDialog.offset(),left=offset.left-that.document.scrollLeft(),top=offset.top-that.document.scrollTop();options.height=that.uiDialog.height();options.width=that.uiDialog.width();options.position={my:"left top",at:"left"+(left>=0?"+":"")+left+" "+"top"+(top>=0?"+":"")+top,of:that.window};that._removeClass($(this),"ui-dialog-resizing");that._unblockFrames();that._trigger("resizeStop",event,filteredUi(ui));}}).css("position",position);},_trackFocus:function(){this._on(this.widget(),{focusin:function(event){this._makeFocusTarget();this._focusedElement=$(event.target);}});},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this);},_untrackInstance:function(){var instances=this._trackingInstances(),exists=$.inArray(this,instances);if(exists!==-1){instances.splice(exists,1);}},_trackingInstances:function(){var instances=this.document.data("ui-dialog-instances");if(!instances){instances=[];this.document.data("ui-dialog-instances",instances);}return instances;},_minHeight:function(){var options=this.options;return options.height==="auto"?options.minHeight:Math.min(options.minHeight,options.height);},_position:function(){var isVisible=this.uiDialog.is(":visible");if(!isVisible){this.uiDialog.show();}this.uiDialog.position(this.options.position);if(!isVisible){this.uiDialog.hide();}},_setOptions:function(options){var that=this,resize=false,resizableOptions={};$.each(options,function(key,value){that._setOption(key,value);if(key in that.sizeRelatedOptions){resize=true;}if(key in that.resizableRelatedOptions){resizableOptions[key]=value;}});if(resize){this._size();this._position();}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option",resizableOptions);}},_setOption:function(key,value){var isDraggable,isResizable,uiDialog=this.uiDialog;if(key==="disabled"){return;}this._super(key,value);if(key==="appendTo"){this.uiDialog.appendTo(this._appendTo());}if(key==="buttons"){this._createButtons();}if(key==="closeText"){this.uiDialogTitlebarClose.button({label:$("<a>").text(""+this.options.closeText).html()});}if(key==="draggable"){isDraggable=uiDialog.is(":data(ui-draggable)");if(isDraggable&&!value){uiDialog.draggable("destroy");}if(!isDraggable&&value){this._makeDraggable();}}if(key==="position"){this._position();}if(key==="resizable"){isResizable=uiDialog.is(":data(ui-resizable)");if(isResizable&&!value){uiDialog.resizable("destroy");}if(isResizable&&typeof value==="string"){uiDialog.resizable("option","handles",value);}if(!isResizable&&value!==false){this._makeResizable();}}if(key==="title"){this._title(this.uiDialogTitlebar.find(".ui-dialog-title"));}},_size:function(){var nonContentHeight,minContentHeight,maxContentHeight,options=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(options.minWidth>options.width){options.width=options.minWidth;}nonContentHeight=this.uiDialog.css({height:"auto",width:options.width}).outerHeight();minContentHeight=Math.max(0,options.minHeight-nonContentHeight);maxContentHeight=typeof options.maxHeight==="number"?Math.max(0,options.maxHeight-nonContentHeight):"none";if(options.height==="auto"){this.element.css({minHeight:minContentHeight,maxHeight:maxContentHeight,height:"auto"});}else{this.element.height(Math.max(0,options.height-nonContentHeight));}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight());}},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var iframe=$(this);return $("<div>").css({position:"absolute",width:iframe.outerWidth(),height:iframe.outerHeight()}).appendTo(iframe.parent()).offset(iframe.offset())[0];});},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks;}},_allowInteraction:function(event){if($(event.target).closest(".ui-dialog").length){return true;}return!!$(event.target).closest(".ui-datepicker").length;},_createOverlay:function(){if(!this.options.modal){return;}var isOpening=true;this._delay(function(){isOpening=false;});if(!this.document.data("ui-dialog-overlays")){this._on(this.document,{focusin:function(event){if(isOpening){return;}if(!this._allowInteraction(event)){event.preventDefault();this._trackingInstances()[0]._focusTabbable();}}});}this.overlay=$("<div>").appendTo(this._appendTo());this._addClass(this.overlay,null,"ui-widget-overlay ui-front");this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1);},_destroyOverlay:function(){if(!this.options.modal){return;}if(this.overlay){var overlays=this.document.data("ui-dialog-overlays")-1;if(!overlays){this._off(this.document,"focusin");this.document.removeData("ui-dialog-overlays");}else{this.document.data("ui-dialog-overlays",overlays);}this.overlay.remove();this.overlay=null;}}});if($.uiBackCompat!==false){$.widget("ui.dialog",$.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super();this.uiDialog.addClass(this.options.dialogClass);},_setOption:function(key,value){if(key==="dialogClass"){this.uiDialog.removeClass(this.options.dialogClass).addClass(value);}this._superApply(arguments);}});}var widgetsDialog=$.ui.dialog;$.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:true,greedy:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var proportions,o=this.options,accept=o.accept;this.isover=false;this.isout=true;this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept);};this.proportions=function(){if(arguments.length){proportions=arguments[0];}else{return proportions?proportions:proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};}};this._addToManager(o.scope);o.addClasses&&this._addClass("ui-droppable");},_addToManager:function(scope){$.ui.ddmanager.droppables[scope]=$.ui.ddmanager.droppables[scope]||[];$.ui.ddmanager.droppables[scope].push(this);},_splice:function(drop){var i=0;for(;i<drop.length;i++){if(drop[i]===this){drop.splice(i,1);}}},_destroy:function(){var drop=$.ui.ddmanager.droppables[this.options.scope];this._splice(drop);},_setOption:function(key,value){if(key==="accept"){this.accept=$.isFunction(value)?value:function(d){return d.is(value);};}else if(key==="scope"){var drop=$.ui.ddmanager.droppables[this.options.scope];this._splice(drop);this._addToManager(value);}this._super(key,value);},_activate:function(event){var draggable=$.ui.ddmanager.current;this._addActiveClass();if(draggable){this._trigger("activate",event,this.ui(draggable));}},_deactivate:function(event){var draggable=$.ui.ddmanager.current;this._removeActiveClass();if(draggable){this._trigger("deactivate",event,this.ui(draggable));}},_over:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return;}if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this._addHoverClass();this._trigger("over",event,this.ui(draggable));}},_out:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return;}if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this._removeHoverClass();this._trigger("out",event,this.ui(draggable));}},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current,childrenIntersection=false;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return false;}this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var inst=$(this).droppable("instance");if(inst.options.greedy&&!inst.options.disabled&&inst.options.scope===draggable.options.scope&&inst.accept.call(inst.element[0],(draggable.currentItem||draggable.element))&&intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance,event)){childrenIntersection=true;return false;}});if(childrenIntersection){return false;}if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this._removeActiveClass();this._removeHoverClass();this._trigger("drop",event,this.ui(draggable));return this.element;}return false;},ui:function(c){return{draggable:(c.currentItem||c.element),helper:c.helper,position:c.position,offset:c.positionAbs};},_addHoverClass:function(){this._addClass("ui-droppable-hover");},_removeHoverClass:function(){this._removeClass("ui-droppable-hover");},_addActiveClass:function(){this._addClass("ui-droppable-active");},_removeActiveClass:function(){this._removeClass("ui-droppable-active");}});var intersect=$.ui.intersect=(function(){function isOverAxis(x,reference,size){return(x>=reference)&&(x<(reference+size));}return function(draggable,droppable,toleranceMode,event){if(!droppable.offset){return false;}var x1=(draggable.positionAbs||draggable.position.absolute).left+draggable.margins.left,y1=(draggable.positionAbs||draggable.position.absolute).top+draggable.margins.top,x2=x1+draggable.helperProportions.width,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,t=droppable.offset.top,r=l+droppable.proportions().width,b=t+droppable.proportions().height;switch(toleranceMode){case"fit":return(l<=x1&&x2<=r&&t<=y1&&y2<=b);case"intersect":return(l<x1+(draggable.helperProportions.width/2)&&x2-(draggable.helperProportions.width/2)<r&&t<y1+(draggable.helperProportions.height/2)&&y2-(draggable.helperProportions.height/2)<b);case"pointer":return isOverAxis(event.pageY,t,droppable.proportions().height)&&isOverAxis(event.pageX,l,droppable.proportions().width);case"touch":return((y1>=t&&y1<=b)||(y2>=t&&y2<=b)||(y1<t&&y2>b))&&((x1>=l&&x1<=r)||(x2>=l&&x2<=r)||(x1<l&&x2>r));default:return false;}};})();$.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,event){var i,j,m=$.ui.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(i=0;i<m.length;i++){if(m[i].options.disabled||(t&&!m[i].accept.call(m[i].element[0],(t.currentItem||t.element)))){continue;}for(j=0;j<list.length;j++){if(list[j]===m[i].element[0]){m[i].proportions().height=0;continue droppablesLoop;}}m[i].visible=m[i].element.css("display")!=="none";if(!m[i].visible){continue;}if(type==="mousedown"){m[i]._activate.call(m[i],event);}m[i].offset=m[i].element.offset();m[i].proportions({width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight});}},drop:function(draggable,event){var dropped=false;$.each(($.ui.ddmanager.droppables[draggable.options.scope]||[]).slice(),function(){if(!this.options){return;}if(!this.options.disabled&&this.visible&&intersect(draggable,this,this.options.tolerance,event)){dropped=this._drop.call(this,event)||dropped;}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this.isout=true;this.isover=false;this._deactivate.call(this,event);}});return dropped;},dragStart:function(draggable,event){draggable.element.parentsUntil("body").on("scroll.droppable",function(){if(!draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}});},drag:function(draggable,event){if(draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return;}var parentInstance,scope,parent,intersects=intersect(draggable,this,this.options.tolerance,event),c=!intersects&&this.isover?"isout":(intersects&&!this.isover?"isover":null);if(!c){return;}if(this.options.greedy){scope=this.options.scope;parent=this.element.parents(":data(ui-droppable)").filter(function(){return $(this).droppable("instance").options.scope===scope;});if(parent.length){parentInstance=$(parent[0]).droppable("instance");parentInstance.greedyChild=(c==="isover");}}if(parentInstance&&c==="isover"){parentInstance.isover=false;parentInstance.isout=true;parentInstance._out.call(parentInstance,event);}this[c]=true;this[c==="isout"?"isover":"isout"]=false;this[c==="isover"?"_over":"_out"].call(this,event);if(parentInstance&&c==="isout"){parentInstance.isout=false;parentInstance.isover=true;parentInstance._over.call(parentInstance,event);}});},dragStop:function(draggable,event){draggable.element.parentsUntil("body").off("scroll.droppable");if(!draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}}};if($.uiBackCompat!==false){$.widget("ui.droppable",$.ui.droppable,{options:{hoverClass:false,activeClass:false},_addActiveClass:function(){this._super();if(this.options.activeClass){this.element.addClass(this.options.activeClass);}},_removeActiveClass:function(){this._super();if(this.options.activeClass){this.element.removeClass(this.options.activeClass);}},_addHoverClass:function(){this._super();if(this.options.hoverClass){this.element.addClass(this.options.hoverClass);}},_removeHoverClass:function(){this._super();if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass);}}});}var widgetsDroppable=$.ui.droppable;var widgetsProgressbar=$.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.attr({role:"progressbar","aria-valuemin":this.min});this._addClass("ui-progressbar","ui-widget ui-widget-content");this.valueDiv=$("<div>").appendTo(this.element);this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header");this._refreshValue();},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow");this.valueDiv.remove();},value:function(newValue){if(newValue===undefined){return this.options.value;}this.options.value=this._constrainedValue(newValue);this._refreshValue();},_constrainedValue:function(newValue){if(newValue===undefined){newValue=this.options.value;}this.indeterminate=newValue===false;if(typeof newValue!=="number"){newValue=0;}return this.indeterminate?false:Math.min(this.options.max,Math.max(this.min,newValue));},_setOptions:function(options){var value=options.value;delete options.value;this._super(options);this.options.value=this._constrainedValue(value);this._refreshValue();},_setOption:function(key,value){if(key==="max"){value=Math.max(this.min,value);}this._super(key,value);},_setOptionDisabled:function(value){this._super(value);this.element.attr("aria-disabled",value);this._toggleClass(null,"ui-state-disabled",!!value);},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min);},_refreshValue:function(){var value=this.options.value,percentage=this._percentage();this.valueDiv.toggle(this.indeterminate||value>this.min).width(percentage.toFixed(0)+"%");this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,value===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate);if(this.indeterminate){this.element.removeAttr("aria-valuenow");if(!this.overlayDiv){this.overlayDiv=$("<div>").appendTo(this.valueDiv);this._addClass(this.overlayDiv,"ui-progressbar-overlay");}}else{this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":value});if(this.overlayDiv){this.overlayDiv.remove();this.overlayDiv=null;}}if(this.oldValue!==value){this.oldValue=value;this._trigger("change");}if(value===this.options.max){this._trigger("complete");}}});var widgetsSelectable=$.widget("ui.selectable",$.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var that=this;this._addClass("ui-selectable");this.dragged=false;this.refresh=function(){that.elementPos=$(that.element[0]).offset();that.selectees=$(that.options.filter,that.element[0]);that._addClass(that.selectees,"ui-selectee");that.selectees.each(function(){var $this=$(this),selecteeOffset=$this.offset(),pos={left:selecteeOffset.left-that.elementPos.left,top:selecteeOffset.top-that.elementPos.top};$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:false,selected:$this.hasClass("ui-selected"),selecting:$this.hasClass("ui-selecting"),unselecting:$this.hasClass("ui-unselecting")});});};this.refresh();this._mouseInit();this.helper=$("<div>");this._addClass(this.helper,"ui-selectable-helper");},_destroy:function(){this.selectees.removeData("selectable-item");this._mouseDestroy();},_mouseStart:function(event){var that=this,options=this.options;this.opos=[event.pageX,event.pageY];this.elementPos=$(this.element[0]).offset();if(this.options.disabled){return;}this.selectees=$(options.filter,this.element[0]);this._trigger("start",event);$(options.appendTo).append(this.helper);this.helper.css({"left":event.pageX,"top":event.pageY,"width":0,"height":0});if(options.autoRefresh){this.refresh();}this.selectees.filter(".ui-selected").each(function(){var selectee=$.data(this,"selectable-item");selectee.startselected=true;if(!event.metaKey&&!event.ctrlKey){that._removeClass(selectee.$element,"ui-selected");selectee.selected=false;that._addClass(selectee.$element,"ui-unselecting");selectee.unselecting=true;that._trigger("unselecting",event,{unselecting:selectee.element});}});$(event.target).parents().addBack().each(function(){var doSelect,selectee=$.data(this,"selectable-item");if(selectee){doSelect=(!event.metaKey&&!event.ctrlKey)||!selectee.$element.hasClass("ui-selected");that._removeClass(selectee.$element,doSelect?"ui-unselecting":"ui-selected")._addClass(selectee.$element,doSelect?"ui-selecting":"ui-unselecting");selectee.unselecting=!doSelect;selectee.selecting=doSelect;selectee.selected=doSelect;if(doSelect){that._trigger("selecting",event,{selecting:selectee.element});}else{that._trigger("unselecting",event,{unselecting:selectee.element});}return false;}});},_mouseDrag:function(event){this.dragged=true;if(this.options.disabled){return;}var tmp,that=this,options=this.options,x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;if(x1>x2){tmp=x2;x2=x1;x1=tmp;}if(y1>y2){tmp=y2;y2=y1;y1=tmp;}this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1});this.selectees.each(function(){var selectee=$.data(this,"selectable-item"),hit=false,offset={};if(!selectee||selectee.element===that.element[0]){return;}offset.left=selectee.left+that.elementPos.left;offset.right=selectee.right+that.elementPos.left;offset.top=selectee.top+that.elementPos.top;offset.bottom=selectee.bottom+that.elementPos.top;if(options.tolerance==="touch"){hit=(!(offset.left>x2||offset.right<x1||offset.top>y2||offset.bottom<y1));}else if(options.tolerance==="fit"){hit=(offset.left>x1&&offset.right<x2&&offset.top>y1&&offset.bottom<y2);}if(hit){if(selectee.selected){that._removeClass(selectee.$element,"ui-selected");selectee.selected=false;}if(selectee.unselecting){that._removeClass(selectee.$element,"ui-unselecting");selectee.unselecting=false;}if(!selectee.selecting){that._addClass(selectee.$element,"ui-selecting");selectee.selecting=true;that._trigger("selecting",event,{selecting:selectee.element});}}else{if(selectee.selecting){if((event.metaKey||event.ctrlKey)&&selectee.startselected){that._removeClass(selectee.$element,"ui-selecting");selectee.selecting=false;that._addClass(selectee.$element,"ui-selected");selectee.selected=true;}else{that._removeClass(selectee.$element,"ui-selecting");selectee.selecting=false;if(selectee.startselected){that._addClass(selectee.$element,"ui-unselecting");selectee.unselecting=true;}that._trigger("unselecting",event,{unselecting:selectee.element});}}if(selectee.selected){if(!event.metaKey&&!event.ctrlKey&&!selectee.startselected){that._removeClass(selectee.$element,"ui-selected");selectee.selected=false;that._addClass(selectee.$element,"ui-unselecting");selectee.unselecting=true;that._trigger("unselecting",event,{unselecting:selectee.element});}}}});return false;},_mouseStop:function(event){var that=this;this.dragged=false;$(".ui-unselecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");that._removeClass(selectee.$element,"ui-unselecting");selectee.unselecting=false;selectee.startselected=false;that._trigger("unselected",event,{unselected:selectee.element});});$(".ui-selecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");that._removeClass(selectee.$element,"ui-selecting")._addClass(selectee.$element,"ui-selected");selectee.selecting=false;selectee.selected=true;selectee.startselected=true;that._trigger("selected",event,{selected:selectee.element});});this._trigger("stop",event);this.helper.remove();return false;}});var widgetsSelectmenu=$.widget("ui.selectmenu",[$.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:false,change:null,close:null,focus:null,open:null,select:null},_create:function(){var selectmenuId=this.element.uniqueId().attr("id");this.ids={element:selectmenuId,button:selectmenuId+"-button",menu:selectmenuId+"-menu"};this._drawButton();this._drawMenu();this._bindFormResetHandler();this._rendered=false;this.menuItems=$();},_drawButton:function(){var icon,that=this,item=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button);this._on(this.labels,{click:function(event){this.button.focus();event.preventDefault();}});this.element.hide();this.button=$("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element);this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget");icon=$("<span>").appendTo(this.button);this._addClass(icon,"ui-selectmenu-icon","ui-icon "+this.options.icons.button);this.buttonItem=this._renderButtonItem(item).appendTo(this.button);if(this.options.width!==false){this._resizeButton();}this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){if(!that._rendered){that._refreshMenu();}});},_drawMenu:function(){var that=this;this.menu=$("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=$("<div>").append(this.menu);this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front");this.menuWrap.appendTo(this._appendTo());this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(event,ui){event.preventDefault();that._setSelection();that._select(ui.item.data("ui-selectmenu-item"),event);},focus:function(event,ui){var item=ui.item.data("ui-selectmenu-item");if(that.focusIndex!=null&&item.index!==that.focusIndex){that._trigger("focus",event,{item:item});if(!that.isOpen){that._select(item,event);}}that.focusIndex=item.index;that.button.attr("aria-activedescendant",that.menuItems.eq(item.index).attr("id"));}}).menu("instance");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return false;};this.menuInstance._isDivider=function(){return false;};},refresh:function(){this._refreshMenu();this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{}));if(this.options.width===null){this._resizeButton();}},_refreshMenu:function(){var item,options=this.element.find("option");this.menu.empty();this._parseOptions(options);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper");this._rendered=true;if(!options.length){return;}item=this._getSelectedItem();this.menuInstance.focus(null,item);this._setAria(item.data("ui-selectmenu-item"));this._setOption("disabled",this.element.prop("disabled"));},open:function(event){if(this.options.disabled){return;}if(!this._rendered){this._refreshMenu();}else{this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active");this.menuInstance.focus(null,this._getSelectedItem());}if(!this.menuItems.length){return;}this.isOpen=true;this._toggleAttr();this._resizeMenu();this._position();this._on(this.document,this._documentClick);this._trigger("open",event);},_position:function(){this.menuWrap.position($.extend({of:this.button},this.options.position));},close:function(event){if(!this.isOpen){return;}this.isOpen=false;this._toggleAttr();this.range=null;this._off(this.document);this._trigger("close",event);},widget:function(){return this.button;},menuWidget:function(){return this.menu;},_renderButtonItem:function(item){var buttonItem=$("<span>");this._setText(buttonItem,item.label);this._addClass(buttonItem,"ui-selectmenu-text");return buttonItem;},_renderMenu:function(ul,items){var that=this,currentOptgroup="";$.each(items,function(index,item){var li;if(item.optgroup!==currentOptgroup){li=$("<li>",{text:item.optgroup});that._addClass(li,"ui-selectmenu-optgroup","ui-menu-divider"+(item.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""));li.appendTo(ul);currentOptgroup=item.optgroup;}that._renderItemData(ul,item);});},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-selectmenu-item",item);},_renderItem:function(ul,item){var li=$("<li>"),wrapper=$("<div>",{title:item.element.attr("title")});if(item.disabled){this._addClass(li,null,"ui-state-disabled");}this._setText(wrapper,item.label);return li.append(wrapper).appendTo(ul);},_setText:function(element,value){if(value){element.text(value);}else{element.html("&#160;");}},_move:function(direction,event){var item,next,filter=".ui-menu-item";if(this.isOpen){item=this.menuItems.eq(this.focusIndex).parent("li");}else{item=this.menuItems.eq(this.element[0].selectedIndex).parent("li");filter+=":not(.ui-state-disabled)";}if(direction==="first"||direction==="last"){next=item[direction==="first"?"prevAll":"nextAll"](filter).eq(-1);}else{next=item[direction+"All"](filter).eq(0);}if(next.length){this.menuInstance.focus(event,next);}},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li");},_toggle:function(event){this[this.isOpen?"close":"open"](event);},_setSelection:function(){var selection;if(!this.range){return;}if(window.getSelection){selection=window.getSelection();selection.removeAllRanges();selection.addRange(this.range);}else{this.range.select();}this.button.focus();},_documentClick:{mousedown:function(event){if(!this.isOpen){return;}if(!$(event.target).closest(".ui-selectmenu-menu, #"+$.ui.escapeSelector(this.ids.button)).length){this.close(event);}}},_buttonEvents:{mousedown:function(){var selection;if(window.getSelection){selection=window.getSelection();if(selection.rangeCount){this.range=selection.getRangeAt(0);}}else{this.range=document.selection.createRange();}},click:function(event){this._setSelection();this._toggle(event);},keydown:function(event){var preventDefault=true;switch(event.keyCode){case $.ui.keyCode.TAB:case $.ui.keyCode.ESCAPE:this.close(event);preventDefault=false;break;case $.ui.keyCode.ENTER:if(this.isOpen){this._selectFocusedItem(event);}break;case $.ui.keyCode.UP:if(event.altKey){this._toggle(event);}else{this._move("prev",event);}break;case $.ui.keyCode.DOWN:if(event.altKey){this._toggle(event);}else{this._move("next",event);}break;case $.ui.keyCode.SPACE:if(this.isOpen){this._selectFocusedItem(event);}else{this._toggle(event);}break;case $.ui.keyCode.LEFT:this._move("prev",event);break;case $.ui.keyCode.RIGHT:this._move("next",event);break;case $.ui.keyCode.HOME:case $.ui.keyCode.PAGE_UP:this._move("first",event);break;case $.ui.keyCode.END:case $.ui.keyCode.PAGE_DOWN:this._move("last",event);break;default:this.menu.trigger(event);preventDefault=false;}if(preventDefault){event.preventDefault();}}},_selectFocusedItem:function(event){var item=this.menuItems.eq(this.focusIndex).parent("li");if(!item.hasClass("ui-state-disabled")){this._select(item.data("ui-selectmenu-item"),event);}},_select:function(item,event){var oldIndex=this.element[0].selectedIndex;this.element[0].selectedIndex=item.index;this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(item));this._setAria(item);this._trigger("select",event,{item:item});if(item.index!==oldIndex){this._trigger("change",event,{item:item});}this.close(event);},_setAria:function(item){var id=this.menuItems.eq(item.index).attr("id");this.button.attr({"aria-labelledby":id,"aria-activedescendant":id});this.menu.attr("aria-activedescendant",id);},_setOption:function(key,value){if(key==="icons"){var icon=this.button.find("span.ui-icon");this._removeClass(icon,null,this.options.icons.button)._addClass(icon,null,value.button);}this._super(key,value);if(key==="appendTo"){this.menuWrap.appendTo(this._appendTo());}if(key==="width"){this._resizeButton();}},_setOptionDisabled:function(value){this._super(value);this.menuInstance.option("disabled",value);this.button.attr("aria-disabled",value);this._toggleClass(this.button,null,"ui-state-disabled",value);this.element.prop("disabled",value);if(value){this.button.attr("tabindex",-1);this.close();}else{this.button.attr("tabindex",0);}},_appendTo:function(){var element=this.options.appendTo;if(element){element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0);}if(!element||!element[0]){element=this.element.closest(".ui-front, dialog");}if(!element.length){element=this.document[0].body;}return element;},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen);this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen);this.menu.attr("aria-hidden",!this.isOpen);},_resizeButton:function(){var width=this.options.width;if(width===false){this.button.css("width","");return;}if(width===null){width=this.element.show().outerWidth();this.element.hide();}this.button.outerWidth(width);},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1));},_getCreateOptions:function(){var options=this._super();options.disabled=this.element.prop("disabled");return options;},_parseOptions:function(options){var that=this,data=[];options.each(function(index,item){data.push(that._parseOption($(item),index));});this.items=data;},_parseOption:function(option,index){var optgroup=option.parent("optgroup");return{element:option,index:index,value:option.val(),label:option.text(),optgroup:optgroup.attr("label")||"",disabled:optgroup.prop("disabled")||option.prop("disabled")};},_destroy:function(){this._unbindFormResetHandler();this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.labels.attr("for",this.ids.element);}}]);var widgetsSlider=$.widget("ui.slider",$.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:false,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content");this._refresh();this._animateOff=false;},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue();},_createHandles:function(){var i,handleCount,options=this.options,existingHandles=this.element.find(".ui-slider-handle"),handle="<span tabindex='0'></span>",handles=[];handleCount=(options.values&&options.values.length)||1;if(existingHandles.length>handleCount){existingHandles.slice(handleCount).remove();existingHandles=existingHandles.slice(0,handleCount);}for(i=existingHandles.length;i<handleCount;i++){handles.push(handle);}this.handles=existingHandles.add($(handles.join("")).appendTo(this.element));this._addClass(this.handles,"ui-slider-handle","ui-state-default");this.handle=this.handles.eq(0);this.handles.each(function(i){$(this).data("ui-slider-handle-index",i).attr("tabIndex",0);});},_createRange:function(){var options=this.options;if(options.range){if(options.range===true){if(!options.values){options.values=[this._valueMin(),this._valueMin()];}else if(options.values.length&&options.values.length!==2){options.values=[options.values[0],options.values[0]];}else if($.isArray(options.values)){options.values=options.values.slice(0);}}if(!this.range||!this.range.length){this.range=$("<div>").appendTo(this.element);this._addClass(this.range,"ui-slider-range");}else{this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max");this.range.css({"left":"","bottom":""});}if(options.range==="min"||options.range==="max"){this._addClass(this.range,"ui-slider-range-"+options.range);}}else{if(this.range){this.range.remove();}this.range=null;}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles);},_destroy:function(){this.handles.remove();if(this.range){this.range.remove();}this._mouseDestroy();},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;if(o.disabled){return false;}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();position={x:event.pageX,y:event.pageY};normValue=this._normValueFromMouse(position);distance=this._valueMax()-this._valueMin()+1;this.handles.each(function(i){var thisDistance=Math.abs(normValue-that.values(i));if((distance>thisDistance)||(distance===thisDistance&&(i===that._lastChangedValue||that.values(i)===o.min))){distance=thisDistance;closestHandle=$(this);index=i;}});allowed=this._start(event,index);if(allowed===false){return false;}this._mouseSliding=true;this._handleIndex=index;this._addClass(closestHandle,null,"ui-state-active");closestHandle.trigger("focus");offset=closestHandle.offset();mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-(closestHandle.width()/2),top:event.pageY-offset.top-(closestHandle.height()/2)-(parseInt(closestHandle.css("borderTopWidth"),10)||0)-(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+(parseInt(closestHandle.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(event,index,normValue);}this._animateOff=true;return true;},_mouseStart:function(){return true;},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);this._slide(event,this._handleIndex,normValue);return false;},_mouseStop:function(event){this._removeClass(this.handles,null,"ui-state-active");this._mouseSliding=false;this._stop(event,this._handleIndex);this._change(event,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false;},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal";},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;if(this.orientation==="horizontal"){pixelTotal=this.elementSize.width;pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0);}else{pixelTotal=this.elementSize.height;pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);}percentMouse=(pixelMouse/pixelTotal);if(percentMouse>1){percentMouse=1;}if(percentMouse<0){percentMouse=0;}if(this.orientation==="vertical"){percentMouse=1-percentMouse;}valueTotal=this._valueMax()-this._valueMin();valueMouse=this._valueMin()+percentMouse*valueTotal;return this._trimAlignValue(valueMouse);},_uiHash:function(index,value,values){var uiHash={handle:this.handles[index],handleIndex:index,value:value!==undefined?value:this.value()};if(this._hasMultipleValues()){uiHash.value=value!==undefined?value:this.values(index);uiHash.values=values||this.values();}return uiHash;},_hasMultipleValues:function(){return this.options.values&&this.options.values.length;},_start:function(event,index){return this._trigger("start",event,this._uiHash(index));},_slide:function(event,index,newVal){var allowed,otherVal,currentValue=this.value(),newValues=this.values();if(this._hasMultipleValues()){otherVal=this.values(index?0:1);currentValue=this.values(index);if(this.options.values.length===2&&this.options.range===true){newVal=index===0?Math.min(otherVal,newVal):Math.max(otherVal,newVal);}newValues[index]=newVal;}if(newVal===currentValue){return;}allowed=this._trigger("slide",event,this._uiHash(index,newVal,newValues));if(allowed===false){return;}if(this._hasMultipleValues()){this.values(index,newVal);}else{this.value(newVal);}},_stop:function(event,index){this._trigger("stop",event,this._uiHash(index));},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){this._lastChangedValue=index;this._trigger("change",event,this._uiHash(index));}},value:function(newValue){if(arguments.length){this.options.value=this._trimAlignValue(newValue);this._refreshValue();this._change(null,0);return;}return this._value();},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1){this.options.values[index]=this._trimAlignValue(newValue);this._refreshValue();this._change(null,index);return;}if(arguments.length){if($.isArray(arguments[0])){vals=this.options.values;newValues=arguments[0];for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(newValues[i]);this._change(null,i);}this._refreshValue();}else{if(this._hasMultipleValues()){return this._values(index);}else{return this.value();}}}else{return this._values();}},_setOption:function(key,value){var i,valsLength=0;if(key==="range"&&this.options.range===true){if(value==="min"){this.options.value=this._values(0);this.options.values=null;}else if(value==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null;}}if($.isArray(this.options.values)){valsLength=this.options.values.length;}this._super(key,value);switch(key){case"orientation":this._detectOrientation();this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation);this._refreshValue();if(this.options.range){this._refreshRange(value);}this.handles.css(value==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=valsLength-1;i>=0;i--){this._change(null,i);}this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break;}},_setOptionDisabled:function(value){this._super(value);this._toggleClass(null,"ui-state-disabled",!!value);},_value:function(){var val=this.options.value;val=this._trimAlignValue(val);return val;},_values:function(index){var val,vals,i;if(arguments.length){val=this.options.values[index];val=this._trimAlignValue(val);return val;}else if(this._hasMultipleValues()){vals=this.options.values.slice();for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(vals[i]);}return vals;}else{return[];}},_trimAlignValue:function(val){if(val<=this._valueMin()){return this._valueMin();}if(val>=this._valueMax()){return this._valueMax();}var step=(this.options.step>0)?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;if(Math.abs(valModStep)*2>=step){alignValue+=(valModStep>0)?step:(-step);}return parseFloat(alignValue.toFixed(5));},_calculateNewMax:function(){var max=this.options.max,min=this._valueMin(),step=this.options.step,aboveMin=Math.round((max-min)/step)*step;max=aboveMin+min;if(max>this.options.max){max-=step;}this.max=parseFloat(max.toFixed(this._precision()));},_precision:function(){var precision=this._precisionOf(this.options.step);if(this.options.min!==null){precision=Math.max(precision,this._precisionOf(this.options.min));}return precision;},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return decimal===-1?0:str.length-decimal-1;},_valueMin:function(){return this.options.min;},_valueMax:function(){return this.max;},_refreshRange:function(orientation){if(orientation==="vertical"){this.range.css({"width":"","left":""});}if(orientation==="horizontal"){this.range.css({"height":"","bottom":""});}},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=(!this._animateOff)?o.animate:false,_set={};if(this._hasMultipleValues()){this.handles.each(function(i){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100;_set[that.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate);if(that.options.range===true){if(that.orientation==="horizontal"){if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate);}if(i===1){that.range[animate?"animate":"css"]({width:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}else{if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({bottom:(valPercent)+"%"},o.animate);}if(i===1){that.range[animate?"animate":"css"]({height:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}}lastValPercent=valPercent;});}else{value=this.value();valueMin=this._valueMin();valueMax=this._valueMax();valPercent=(valueMax!==valueMin)?(value-valueMin)/(valueMax-valueMin)*100:0;_set[this.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate);if(oRange==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate);}if(oRange==="max"&&this.orientation==="horizontal"){this.range.stop(1,1)[animate?"animate":"css"]({width:(100-valPercent)+"%"},o.animate);}if(oRange==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate);}if(oRange==="max"&&this.orientation==="vertical"){this.range.stop(1,1)[animate?"animate":"css"]({height:(100-valPercent)+"%"},o.animate);}}},_handleEvents:{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:event.preventDefault();if(!this._keySliding){this._keySliding=true;this._addClass($(event.target),null,"ui-state-active");allowed=this._start(event,index);if(allowed===false){return;}}break;}step=this.options.step;if(this._hasMultipleValues()){curVal=newVal=this.values(index);}else{curVal=newVal=this.value();}switch(event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+((this._valueMax()-this._valueMin())/this.numPages));break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-((this._valueMax()-this._valueMin())/this.numPages));break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax()){return;}newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin()){return;}newVal=this._trimAlignValue(curVal-step);break;}this._slide(event,index,newVal);},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(event,index);this._change(event,index);this._removeClass($(event.target),null,"ui-state-active");}}}});var widgetsSortable=$.widget("ui.sortable",$.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(x,reference,size){return(x>=reference)&&(x<(reference+size));},_isFloating:function(item){return(/left|right/).test(item.css("float"))||(/inline|table-cell/).test(item.css("display"));},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true;},_setOption:function(key,value){this._super(key,value);if(key==="handle"){this._setHandleClassName();}},_setHandleClassName:function(){var that=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");$.each(this.items,function(){that._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle");});},_destroy:function(){this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--){this.items[i].item.removeData(this.widgetName+"-item");}return this;},_mouseCapture:function(event,overrideHandle){var currentItem=null,validHandle=false,that=this;if(this.reverting){return false;}if(this.options.disabled||this.options.type==="static"){return false;}this._refreshItems(event);$(event.target).parents().each(function(){if($.data(this,that.widgetName+"-item")===that){currentItem=$(this);return false;}});if($.data(event.target,that.widgetName+"-item")===that){currentItem=$(event.target);}if(!currentItem){return false;}if(this.options.handle&&!overrideHandle){$(this.options.handle,currentItem).find("*").addBack().each(function(){if(this===event.target){validHandle=true;}});if(!validHandle){return false;}}this.currentItem=currentItem;this._removeCurrentsFromItems();return true;},_mouseStart:function(event,overrideHandle,noActivation){var i,body,o=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(event);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide();}this._createPlaceholder();if(o.containment){this._setContainment();}if(o.cursor&&o.cursor!=="auto"){body=this.document.find("body");this.storedCursor=body.css("cursor");body.css("cursor",o.cursor);this.storedStylesheet=$("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(body);}if(o.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity");}this.helper.css("opacity",o.opacity);}if(o.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex");}this.helper.css("zIndex",o.zIndex);}if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset();}this._trigger("start",event,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions();}if(!noActivation){for(i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("activate",event,this._uiHash(this));}}if($.ui.ddmanager){$.ui.ddmanager.current=this;}if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}this.dragging=true;this._addClass(this.helper,"ui-sortable-helper");this._mouseDrag(event);return true;},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options,scrolled=false;this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs;}if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-event.pageY<o.scrollSensitivity){this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed;}else if(event.pageY-this.overflowOffset.top<o.scrollSensitivity){this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed;}if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-event.pageX<o.scrollSensitivity){this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed;}else if(event.pageX-this.overflowOffset.left<o.scrollSensitivity){this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed;}}else{if(event.pageY-this.document.scrollTop()<o.scrollSensitivity){scrolled=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed);}else if(this.window.height()-(event.pageY-this.document.scrollTop())<o.scrollSensitivity){scrolled=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed);}if(event.pageX-this.document.scrollLeft()<o.scrollSensitivity){scrolled=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed);}else if(this.window.width()-(event.pageX-this.document.scrollLeft())<o.scrollSensitivity){scrolled=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed);}}if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px";}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px";}for(i=this.items.length-1;i>=0;i--){item=this.items[i];itemElement=item.item[0];intersection=this._intersectsWithPointer(item);if(!intersection){continue;}if(item.instance!==this.currentContainer){continue;}if(itemElement!==this.currentItem[0]&&this.placeholder[intersection===1?"next":"prev"]()[0]!==itemElement&&!$.contains(this.placeholder[0],itemElement)&&(this.options.type==="semi-dynamic"?!$.contains(this.element[0],itemElement):true)){this.direction=intersection===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(item)){this._rearrange(event,item);}else{break;}this._trigger("change",event,this._uiHash());break;}}this._contactContainers(event);if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}this._trigger("sort",event,this._uiHash());this.lastPositionAbs=this.positionAbs;return false;},_mouseStop:function(event,noPropagation){if(!event){return;}if($.ui.ddmanager&&!this.options.dropBehaviour){$.ui.ddmanager.drop(this,event);}if(this.options.revert){var that=this,cur=this.placeholder.offset(),axis=this.options.axis,animation={};if(!axis||axis==="x"){animation.left=cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft);}if(!axis||axis==="y"){animation.top=cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop);}this.reverting=true;$(this.helper).animate(animation,parseInt(this.options.revert,10)||500,function(){that._clear(event);});}else{this._clear(event,noPropagation);}return false;},cancel:function(){if(this.dragging){this._mouseUp(new $.Event("mouseup",{target:null}));if(this.options.helper==="original"){this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper");}else{this.currentItem.show();}for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("deactivate",null,this._uiHash(this));if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",null,this._uiHash(this));this.containers[i].containerCache.over=0;}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0]);}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove();}$.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){$(this.domPosition.prev).after(this.currentItem);}else{$(this.domPosition.parent).prepend(this.currentItem);}}return this;},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];o=o||{};$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||(/(.+)[\-=_](.+)/));if(res){str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]));}});if(!str.length&&o.key){str.push(o.key+"=");}return str.join("&");},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];o=o||{};items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"");});return ret;},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElementHeight=(this.options.axis==="x")||((y1+dyClick)>t&&(y1+dyClick)<b),isOverElementWidth=(this.options.axis==="y")||((x1+dxClick)>l&&(x1+dxClick)<r),isOverElement=isOverElementHeight&&isOverElementWidth;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"])){return isOverElement;}else{return(l<x1+(this.helperProportions.width/2)&&x2-(this.helperProportions.width/2)<r&&t<y1+(this.helperProportions.height/2)&&y2-(this.helperProportions.height/2)<b);}},_intersectsWithPointer:function(item){var verticalDirection,horizontalDirection,isOverElementHeight=(this.options.axis==="x")||this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth=(this.options.axis==="y")||this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth;if(!isOverElement){return false;}verticalDirection=this._getDragVerticalDirection();horizontalDirection=this._getDragHorizontalDirection();return this.floating?((horizontalDirection==="right"||verticalDirection==="down")?2:1):(verticalDirection&&(verticalDirection==="down"?2:1));},_intersectsWithSides:function(item){var isOverBottomHalf=this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+(item.height/2),item.height),isOverRightHalf=this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+(item.width/2),item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(this.floating&&horizontalDirection){return((horizontalDirection==="right"&&isOverRightHalf)||(horizontalDirection==="left"&&!isOverRightHalf));}else{return verticalDirection&&((verticalDirection==="down"&&isOverBottomHalf)||(verticalDirection==="up"&&!isOverBottomHalf));}},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return delta!==0&&(delta>0?"down":"up");},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return delta!==0&&(delta>0?"right":"left");},refresh:function(event){this._refreshItems(event);this._setHandleClassName();this.refreshPositions();return this;},_connectWith:function(){var options=this.options;return options.connectWith.constructor===String?[options.connectWith]:options.connectWith;},_getItemsAsjQuery:function(connected){var i,j,cur,inst,items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected){for(i=connectWith.length-1;i>=0;i--){cur=$(connectWith[i],this.document[0]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&inst!==this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst]);}}}}queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function addItems(){items.push(this);}for(i=queries.length-1;i>=0;i--){queries[i][0].each(addItems);}return $(items);},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(item){for(var j=0;j<list.length;j++){if(list[j]===item.item[0]){return false;}}return true;});},_refreshItems:function(event){this.items=[];this.containers=[this];var i,j,cur,inst,targetData,_queries,item,queriesLength,items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready){for(i=connectWith.length-1;i>=0;i--){cur=$(connectWith[i],this.document[0]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&inst!==this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]);this.containers.push(inst);}}}}for(i=queries.length-1;i>=0;i--){targetData=queries[i][1];_queries=queries[i][0];for(j=0,queriesLength=_queries.length;j<queriesLength;j++){item=$(_queries[j]);item.data(this.widgetName+"-item",targetData);items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0});}}},refreshPositions:function(fast){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset();}var i,item,t,p;for(i=this.items.length-1;i>=0;i--){item=this.items[i];if(item.instance!==this.currentContainer&&this.currentContainer&&item.item[0]!==this.currentItem[0]){continue;}t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item;if(!fast){item.width=t.outerWidth();item.height=t.outerHeight();}p=t.offset();item.left=p.left;item.top=p.top;}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this);}else{for(i=this.containers.length-1;i>=0;i--){p=this.containers[i].element.offset();this.containers[i].containerCache.left=p.left;this.containers[i].containerCache.top=p.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight();}}return this;},_createPlaceholder:function(that){that=that||this;var className,o=that.options;if(!o.placeholder||o.placeholder.constructor===String){className=o.placeholder;o.placeholder={element:function(){var nodeName=that.currentItem[0].nodeName.toLowerCase(),element=$("<"+nodeName+">",that.document[0]);that._addClass(element,"ui-sortable-placeholder",className||that.currentItem[0].className)._removeClass(element,"ui-sortable-helper");if(nodeName==="tbody"){that._createTrPlaceholder(that.currentItem.find("tr").eq(0),$("<tr>",that.document[0]).appendTo(element));}else if(nodeName==="tr"){that._createTrPlaceholder(that.currentItem,element);}else if(nodeName==="img"){element.attr("src",that.currentItem.attr("src"));}if(!className){element.css("visibility","hidden");}return element;},update:function(container,p){if(className&&!o.forcePlaceholderSize){return;}if(!p.height()){p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10));}if(!p.width()){p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10));}}};}that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem));that.currentItem.after(that.placeholder);o.placeholder.update(that,that.placeholder);},_createTrPlaceholder:function(sourceTr,targetTr){var that=this;sourceTr.children().each(function(){$("<td>&#160;</td>",that.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(targetTr);});},_contactContainers:function(event){var i,j,dist,itemWithLeastDistance,posProperty,sizeProperty,cur,nearBottom,floating,axis,innermostContainer=null,innermostIndex=null;for(i=this.containers.length-1;i>=0;i--){if($.contains(this.currentItem[0],this.containers[i].element[0])){continue;}if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0])){continue;}innermostContainer=this.containers[i];innermostIndex=i;}else{if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",event,this._uiHash(this));this.containers[i].containerCache.over=0;}}}if(!innermostContainer){return;}if(this.containers.length===1){if(!this.containers[innermostIndex].containerCache.over){this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}}else{dist=10000;itemWithLeastDistance=null;floating=innermostContainer.floating||this._isFloating(this.currentItem);posProperty=floating?"left":"top";sizeProperty=floating?"width":"height";axis=floating?"pageX":"pageY";for(j=this.items.length-1;j>=0;j--){if(!$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0])){continue;}if(this.items[j].item[0]===this.currentItem[0]){continue;}cur=this.items[j].item.offset()[posProperty];nearBottom=false;if(event[axis]-cur>this.items[j][sizeProperty]/2){nearBottom=true;}if(Math.abs(event[axis]-cur)<dist){dist=Math.abs(event[axis]-cur);itemWithLeastDistance=this.items[j];this.direction=nearBottom?"up":"down";}}if(!itemWithLeastDistance&&!this.options.dropOnEmpty){return;}if(this.currentContainer===this.containers[innermostIndex]){if(!this.currentContainer.containerCache.over){this.containers[innermostIndex]._trigger("over",event,this._uiHash());this.currentContainer.containerCache.over=1;}return;}itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,true):this._rearrange(event,null,this.containers[innermostIndex].element,true);this._trigger("change",event,this._uiHash());this.containers[innermostIndex]._trigger("change",event,this._uiHash(this));this.currentContainer=this.containers[innermostIndex];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):(o.helper==="clone"?this.currentItem.clone():this.currentItem);if(!helper.parents("body").length){$(o.appendTo!=="parent"?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]);}if(helper[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};}if(!helper[0].style.width||o.forceHelperSize){helper.width(this.currentItem.width());}if(!helper[0].style.height||o.forceHelperSize){helper.height(this.currentItem.height());}return helper;},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string"){obj=obj.split(" ");}if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}if("left"in obj){this.offset.click.left=obj.left+this.margins.left;}if("right"in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}if("top"in obj){this.offset.click.top=obj.top+this.margins.top;}if("bottom"in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}if(this.offsetParent[0]===this.document[0].body||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&$.ui.ie)){po={top:0,left:0};}return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var ce,co,over,o=this.options;if(o.containment==="parent"){o.containment=this.helper[0].parentNode;}if(o.containment==="document"||o.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,o.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(o.containment==="document"?(this.document.height()||document.body.parentNode.scrollHeight):this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];}if(!(/^(document|window|parent)$/).test(o.containment)){ce=$(o.containment)[0];co=$(o.containment).offset();over=($(ce).css("overflow")!=="hidden");this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top];}},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}var mod=d==="absolute"?1:-1,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);return{top:(pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop()))*mod)),left:(pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod))};},_generatePosition:function(event){var top,left,o=this.options,pageX=event.pageX,pageY=event.pageY,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset();}if(this.originalPosition){if(this.containment){if(event.pageX-this.offset.click.left<this.containment[0]){pageX=this.containment[0]+this.offset.click.left;}if(event.pageY-this.offset.click.top<this.containment[1]){pageY=this.containment[1]+this.offset.click.top;}if(event.pageX-this.offset.click.left>this.containment[2]){pageX=this.containment[2]+this.offset.click.left;}if(event.pageY-this.offset.click.top>this.containment[3]){pageY=this.containment[3]+this.offset.click.top;}}if(o.grid){top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment?((top-this.offset.click.top>=this.containment[1]&&top-this.offset.click.top<=this.containment[3])?top:((top-this.offset.click.top>=this.containment[1])?top-o.grid[1]:top+o.grid[1])):top;left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];pageX=this.containment?((left-this.offset.click.left>=this.containment[0]&&left-this.offset.click.left<=this.containment[2])?left:((left-this.offset.click.left>=this.containment[0])?left-o.grid[0]:left+o.grid[0])):left;}}return{top:(pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop())))),left:(pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())))};},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction==="down"?i.item[0]:i.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){if(counter===this.counter){this.refreshPositions(!hardRefresh);}});},_clear:function(event,noPropagation){this.reverting=false;var i,delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem);}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS){if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static"){this._storedCSS[i]="";}}this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper");}else{this.currentItem.show();}if(this.fromOutside&&!noPropagation){delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside));});}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!noPropagation){delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash());});}if(this!==this.currentContainer){if(!noPropagation){delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash());});delayedTriggers.push((function(c){return function(event){c._trigger("receive",event,this._uiHash(this));};}).call(this,this.currentContainer));delayedTriggers.push((function(c){return function(event){c._trigger("update",event,this._uiHash(this));};}).call(this,this.currentContainer));}}function delayEvent(type,instance,container){return function(event){container._trigger(type,event,instance._uiHash(instance));};}for(i=this.containers.length-1;i>=0;i--){if(!noPropagation){delayedTriggers.push(delayEvent("deactivate",this,this.containers[i]));}if(this.containers[i].containerCache.over){delayedTriggers.push(delayEvent("out",this,this.containers[i]));this.containers[i].containerCache.over=0;}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove();}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity);}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex);}this.dragging=false;if(!noPropagation){this._trigger("beforeStop",event,this._uiHash());}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove();}this.helper=null;}if(!noPropagation){for(i=0;i<delayedTriggers.length;i++){delayedTriggers[i].call(this,event);}this._trigger("stop",event,this._uiHash());}this.fromOutside=false;return!this.cancelHelperRemoval;},_trigger:function(){if($.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel();}},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null};}});function spinnerModifer(fn){return function(){var previous=this.element.val();fn.apply(this,arguments);this._refresh();if(previous!==this.element.val()){this._trigger("change");}};}$.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);if(this.value()!==""){this._value(this.element.val(),true);}this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete");}});},_getCreateOptions:function(){var options=this._super();var element=this.element;$.each(["min","max","step"],function(i,option){var value=element.attr(option);if(value!=null&&value.length){options[option]=value;}});return options;},_events:{keydown:function(event){if(this._start(event)&&this._keydown(event)){event.preventDefault();}},keyup:"_stop",focus:function(){this.previous=this.element.val();},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return;}this._stop();this._refresh();if(this.previous!==this.element.val()){this._trigger("change",event);}},mousewheel:function(event,delta){if(!delta){return;}if(!this.spinning&&!this._start(event)){return false;}this._spin((delta>0?1:-1)*this.options.step,event);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){if(this.spinning){this._stop(event);}},100);event.preventDefault();},"mousedown .ui-spinner-button":function(event){var previous;previous=this.element[0]===$.ui.safeActiveElement(this.document[0])?this.previous:this.element.val();function checkFocus(){var isActive=this.element[0]===$.ui.safeActiveElement(this.document[0]);if(!isActive){this.element.trigger("focus");this.previous=previous;this._delay(function(){this.previous=previous;});}}event.preventDefault();checkFocus.call(this);this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;checkFocus.call(this);});if(this._start(event)===false){return;}this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event);},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(event){if(!$(event.currentTarget).hasClass("ui-state-active")){return;}if(this._start(event)===false){return false;}this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event);},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>");},_draw:function(){this._enhance();this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content");this._addClass("ui-spinner-input");this.element.attr("role","spinbutton");this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",true).button({classes:{"ui-button":""}});this._removeClass(this.buttons,"ui-corner-all");this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up");this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down");this.buttons.first().button({"icon":this.options.icons.up,"showLabel":false});this.buttons.last().button({"icon":this.options.icons.down,"showLabel":false});if(this.buttons.height()>Math.ceil(this.uiSpinner.height()*0.5)&&this.uiSpinner.height()>0){this.uiSpinner.height(this.uiSpinner.height());}},_keydown:function(event){var options=this.options,keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.UP:this._repeat(null,1,event);return true;case keyCode.DOWN:this._repeat(null,-1,event);return true;case keyCode.PAGE_UP:this._repeat(null,options.page,event);return true;case keyCode.PAGE_DOWN:this._repeat(null,-options.page,event);return true;}return false;},_start:function(event){if(!this.spinning&&this._trigger("start",event)===false){return false;}if(!this.counter){this.counter=1;}this.spinning=true;return true;},_repeat:function(i,steps,event){i=i||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,steps,event);},i);this._spin(steps*this.options.step,event);},_spin:function(step,event){var value=this.value()||0;if(!this.counter){this.counter=1;}value=this._adjustValue(value+step*this._increment(this.counter));if(!this.spinning||this._trigger("spin",event,{value:value})!==false){this._value(value);this.counter++;}},_increment:function(i){var incremental=this.options.incremental;if(incremental){return $.isFunction(incremental)?incremental(i):Math.floor(i*i*i/50000-i*i/500+17*i/200+1);}return 1;},_precision:function(){var precision=this._precisionOf(this.options.step);if(this.options.min!==null){precision=Math.max(precision,this._precisionOf(this.options.min));}return precision;},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return decimal===-1?0:str.length-decimal-1;},_adjustValue:function(value){var base,aboveMin,options=this.options;base=options.min!==null?options.min:0;aboveMin=value-base;aboveMin=Math.round(aboveMin/options.step)*options.step;value=base+aboveMin;value=parseFloat(value.toFixed(this._precision()));if(options.max!==null&&value>options.max){return options.max;}if(options.min!==null&&value<options.min){return options.min;}return value;},_stop:function(event){if(!this.spinning){return;}clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("stop",event);},_setOption:function(key,value){var prevValue,first,last;if(key==="culture"||key==="numberFormat"){prevValue=this._parse(this.element.val());this.options[key]=value;this.element.val(this._format(prevValue));return;}if(key==="max"||key==="min"||key==="step"){if(typeof value==="string"){value=this._parse(value);}}if(key==="icons"){first=this.buttons.first().find(".ui-icon");this._removeClass(first,null,this.options.icons.up);this._addClass(first,null,value.up);last=this.buttons.last().find(".ui-icon");this._removeClass(last,null,this.options.icons.down);this._addClass(last,null,value.down);}this._super(key,value);},_setOptionDisabled:function(value){this._super(value);this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!value);this.element.prop("disabled",!!value);this.buttons.button(value?"disable":"enable");},_setOptions:spinnerModifer(function(options){this._super(options);}),_parse:function(val){if(typeof val==="string"&&val!==""){val=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(val,10,this.options.culture):+val;}return val===""||isNaN(val)?null:val;},_format:function(value){if(value===""){return"";}return window.Globalize&&this.options.numberFormat?Globalize.format(value,this.options.numberFormat,this.options.culture):value;},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())});},isValid:function(){var value=this.value();if(value===null){return false;}return value===this._adjustValue(value);},_value:function(value,allowAny){var parsed;if(value!==""){parsed=this._parse(value);if(parsed!==null){if(!allowAny){parsed=this._adjustValue(parsed);}value=this._format(parsed);}}this.element.val(value);this._refresh();},_destroy:function(){this.element.prop("disabled",false).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow");this.uiSpinner.replaceWith(this.element);},stepUp:spinnerModifer(function(steps){this._stepUp(steps);}),_stepUp:function(steps){if(this._start()){this._spin((steps||1)*this.options.step);this._stop();}},stepDown:spinnerModifer(function(steps){this._stepDown(steps);}),_stepDown:function(steps){if(this._start()){this._spin((steps||1)*-this.options.step);this._stop();}},pageUp:spinnerModifer(function(pages){this._stepUp((pages||1)*this.options.page);}),pageDown:spinnerModifer(function(pages){this._stepDown((pages||1)*this.options.page);}),value:function(newVal){if(!arguments.length){return this._parse(this.element.val());}spinnerModifer(this._value).call(this,newVal);},widget:function(){return this.uiSpinner;}});if($.uiBackCompat!==false){$.widget("ui.spinner",$.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());},_uiSpinnerHtml:function(){return"<span>";},_buttonHtml:function(){return"<a></a><a></a>";}});}var widgetsSpinner=$.ui.spinner;$.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(function(){var rhash=/#.*$/;return function(anchor){var anchorUrl,locationUrl;anchorUrl=anchor.href.replace(rhash,"");locationUrl=location.href.replace(rhash,"");try{anchorUrl=decodeURIComponent(anchorUrl);}catch(error){}try{locationUrl=decodeURIComponent(locationUrl);}catch(error){}return anchor.hash.length>1&&anchorUrl===locationUrl;};})(),_create:function(){var that=this,options=this.options;this.running=false;this._addClass("ui-tabs","ui-widget ui-widget-content");this._toggleClass("ui-tabs-collapsible",null,options.collapsible);this._processTabs();options.active=this._initialActive();if($.isArray(options.disabled)){options.disabled=$.unique(options.disabled.concat($.map(this.tabs.filter(".ui-state-disabled"),function(li){return that.tabs.index(li);}))).sort();}if(this.options.active!==false&&this.anchors.length){this.active=this._findActive(options.active);}else{this.active=$();}this._refresh();if(this.active.length){this.load(options.active);}},_initialActive:function(){var active=this.options.active,collapsible=this.options.collapsible,locationHash=location.hash.substring(1);if(active===null){if(locationHash){this.tabs.each(function(i,tab){if($(tab).attr("aria-controls")===locationHash){active=i;return false;}});}if(active===null){active=this.tabs.index(this.tabs.filter(".ui-tabs-active"));}if(active===null||active===-1){active=this.tabs.length?0:false;}}if(active!==false){active=this.tabs.index(this.tabs.eq(active));if(active===-1){active=collapsible?false:0;}}if(!collapsible&&active===false&&this.anchors.length){active=0;}return active;},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?$():this._getPanelForTab(this.active)};},_tabKeydown:function(event){var focusedTab=$($.ui.safeActiveElement(this.document[0])).closest("li"),selectedIndex=this.tabs.index(focusedTab),goingForward=true;if(this._handlePageNav(event)){return;}switch(event.keyCode){case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:selectedIndex++;break;case $.ui.keyCode.UP:case $.ui.keyCode.LEFT:goingForward=false;selectedIndex--;break;case $.ui.keyCode.END:selectedIndex=this.anchors.length-1;break;case $.ui.keyCode.HOME:selectedIndex=0;break;case $.ui.keyCode.SPACE:event.preventDefault();clearTimeout(this.activating);this._activate(selectedIndex);return;case $.ui.keyCode.ENTER:event.preventDefault();clearTimeout(this.activating);this._activate(selectedIndex===this.options.active?false:selectedIndex);return;default:return;}event.preventDefault();clearTimeout(this.activating);selectedIndex=this._focusNextTab(selectedIndex,goingForward);if(!event.ctrlKey&&!event.metaKey){focusedTab.attr("aria-selected","false");this.tabs.eq(selectedIndex).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",selectedIndex);},this.delay);}},_panelKeydown:function(event){if(this._handlePageNav(event)){return;}if(event.ctrlKey&&event.keyCode===$.ui.keyCode.UP){event.preventDefault();this.active.trigger("focus");}},_handlePageNav:function(event){if(event.altKey&&event.keyCode===$.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true;}if(event.altKey&&event.keyCode===$.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true;}},_findNextTab:function(index,goingForward){var lastTabIndex=this.tabs.length-1;function constrain(){if(index>lastTabIndex){index=0;}if(index<0){index=lastTabIndex;}return index;}while($.inArray(constrain(),this.options.disabled)!==-1){index=goingForward?index+1:index-1;}return index;},_focusNextTab:function(index,goingForward){index=this._findNextTab(index,goingForward);this.tabs.eq(index).trigger("focus");return index;},_setOption:function(key,value){if(key==="active"){this._activate(value);return;}this._super(key,value);if(key==="collapsible"){this._toggleClass("ui-tabs-collapsible",null,value);if(!value&&this.options.active===false){this._activate(0);}}if(key==="event"){this._setupEvents(value);}if(key==="heightStyle"){this._setupHeightStyle(value);}},_sanitizeSelector:function(hash){return hash?hash.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):"";},refresh:function(){var options=this.options,lis=this.tablist.children(":has(a[href])");options.disabled=$.map(lis.filter(".ui-state-disabled"),function(tab){return lis.index(tab);});this._processTabs();if(options.active===false||!this.anchors.length){options.active=false;this.active=$();}else if(this.active.length&&!$.contains(this.tablist[0],this.active[0])){if(this.tabs.length===options.disabled.length){options.active=false;this.active=$();}else{this._activate(this._findNextTab(Math.max(0,options.active-1),false));}}else{options.active=this.tabs.index(this.active);}this._refresh();},_refresh:function(){this._setOptionDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});if(!this.active.length){this.tabs.eq(0).attr("tabIndex",0);}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});this._addClass(this.active,"ui-tabs-active","ui-state-active");this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"});}},_processTabs:function(){var that=this,prevTabs=this.tabs,prevAnchors=this.anchors,prevPanels=this.panels;this.tablist=this._getList().attr("role","tablist");this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header");this.tablist.on("mousedown"+this.eventNamespace,"> li",function(event){if($(this).is(".ui-state-disabled")){event.preventDefault();}}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){if($(this).closest("li").is(".ui-state-disabled")){this.blur();}});this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1});this._addClass(this.tabs,"ui-tabs-tab","ui-state-default");this.anchors=this.tabs.map(function(){return $("a",this)[0];}).attr({role:"presentation",tabIndex:-1});this._addClass(this.anchors,"ui-tabs-anchor");this.panels=$();this.anchors.each(function(i,anchor){var selector,panel,panelId,anchorId=$(anchor).uniqueId().attr("id"),tab=$(anchor).closest("li"),originalAriaControls=tab.attr("aria-controls");if(that._isLocal(anchor)){selector=anchor.hash;panelId=selector.substring(1);panel=that.element.find(that._sanitizeSelector(selector));}else{panelId=tab.attr("aria-controls")||$({}).uniqueId()[0].id;selector="#"+panelId;panel=that.element.find(selector);if(!panel.length){panel=that._createPanel(panelId);panel.insertAfter(that.panels[i-1]||that.tablist);}panel.attr("aria-live","polite");}if(panel.length){that.panels=that.panels.add(panel);}if(originalAriaControls){tab.data("ui-tabs-aria-controls",originalAriaControls);}tab.attr({"aria-controls":panelId,"aria-labelledby":anchorId});panel.attr("aria-labelledby",anchorId);});this.panels.attr("role","tabpanel");this._addClass(this.panels,"ui-tabs-panel","ui-widget-content");if(prevTabs){this._off(prevTabs.not(this.tabs));this._off(prevAnchors.not(this.anchors));this._off(prevPanels.not(this.panels));}},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0);},_createPanel:function(id){return $("<div>").attr("id",id).data("ui-tabs-destroy",true);},_setOptionDisabled:function(disabled){var currentItem,li,i;if($.isArray(disabled)){if(!disabled.length){disabled=false;}else if(disabled.length===this.anchors.length){disabled=true;}}for(i=0;(li=this.tabs[i]);i++){currentItem=$(li);if(disabled===true||$.inArray(i,disabled)!==-1){currentItem.attr("aria-disabled","true");this._addClass(currentItem,null,"ui-state-disabled");}else{currentItem.removeAttr("aria-disabled");this._removeClass(currentItem,null,"ui-state-disabled");}}this.options.disabled=disabled;this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,disabled===true);},_setupEvents:function(event){var events={};if(event){$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler";});}this._off(this.anchors.add(this.tabs).add(this.panels));this._on(true,this.anchors,{click:function(event){event.preventDefault();}});this._on(this.anchors,events);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs);},_setupHeightStyle:function(heightStyle){var maxHeight,parent=this.element.parent();if(heightStyle==="fill"){maxHeight=parent.height();maxHeight-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed"){return;}maxHeight-=elem.outerHeight(true);});this.element.children().not(this.panels).each(function(){maxHeight-=$(this).outerHeight(true);});this.panels.each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()));}).css("overflow","auto");}else if(heightStyle==="auto"){maxHeight=0;this.panels.each(function(){maxHeight=Math.max(maxHeight,$(this).height("").height());}).height(maxHeight);}},_eventHandler:function(event){var options=this.options,active=this.active,anchor=$(event.currentTarget),tab=anchor.closest("li"),clickedIsActive=tab[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():this._getPanelForTab(tab),toHide=!active.length?$():this._getPanelForTab(active),eventData={oldTab:active,oldPanel:toHide,newTab:collapsing?$():tab,newPanel:toShow};event.preventDefault();if(tab.hasClass("ui-state-disabled")||tab.hasClass("ui-tabs-loading")||this.running||(clickedIsActive&&!options.collapsible)||(this._trigger("beforeActivate",event,eventData)===false)){return;}options.active=collapsing?false:this.tabs.index(tab);this.active=clickedIsActive?$():tab;if(this.xhr){this.xhr.abort();}if(!toHide.length&&!toShow.length){$.error("jQuery UI Tabs: Mismatching fragment identifier.");}if(toShow.length){this.load(this.tabs.index(tab),event);}this._toggle(event,eventData);},_toggle:function(event,eventData){var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel;this.running=true;function complete(){that.running=false;that._trigger("activate",event,eventData);}function show(){that._addClass(eventData.newTab.closest("li"),"ui-tabs-active","ui-state-active");if(toShow.length&&that.options.show){that._show(toShow,that.options.show,complete);}else{toShow.show();complete();}}if(toHide.length&&this.options.hide){this._hide(toHide,this.options.hide,function(){that._removeClass(eventData.oldTab.closest("li"),"ui-tabs-active","ui-state-active");show();});}else{this._removeClass(eventData.oldTab.closest("li"),"ui-tabs-active","ui-state-active");toHide.hide();show();}toHide.attr("aria-hidden","true");eventData.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});if(toShow.length&&toHide.length){eventData.oldTab.attr("tabIndex",-1);}else if(toShow.length){this.tabs.filter(function(){return $(this).attr("tabIndex")===0;}).attr("tabIndex",-1);}toShow.attr("aria-hidden","false");eventData.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});},_activate:function(index){var anchor,active=this._findActive(index);if(active[0]===this.active[0]){return;}if(!active.length){active=this.active;}anchor=active.find(".ui-tabs-anchor")[0];this._eventHandler({target:anchor,currentTarget:anchor,preventDefault:$.noop});},_findActive:function(index){return index===false?$():this.tabs.eq(index);},_getIndex:function(index){if(typeof index==="string"){index=this.anchors.index(this.anchors.filter("[href$='"+$.ui.escapeSelector(index)+"']"));}return index;},_destroy:function(){if(this.xhr){this.xhr.abort();}this.tablist.removeAttr("role").off(this.eventNamespace);this.anchors.removeAttr("role tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){if($.data(this,"ui-tabs-destroy")){$(this).remove();}else{$(this).removeAttr("role tabIndex "+"aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded");}});this.tabs.each(function(){var li=$(this),prev=li.data("ui-tabs-aria-controls");if(prev){li.attr("aria-controls",prev).removeData("ui-tabs-aria-controls");}else{li.removeAttr("aria-controls");}});this.panels.show();if(this.options.heightStyle!=="content"){this.panels.css("height","");}},enable:function(index){var disabled=this.options.disabled;if(disabled===false){return;}if(index===undefined){disabled=false;}else{index=this._getIndex(index);if($.isArray(disabled)){disabled=$.map(disabled,function(num){return num!==index?num:null;});}else{disabled=$.map(this.tabs,function(li,num){return num!==index?num:null;});}}this._setOptionDisabled(disabled);},disable:function(index){var disabled=this.options.disabled;if(disabled===true){return;}if(index===undefined){disabled=true;}else{index=this._getIndex(index);if($.inArray(index,disabled)!==-1){return;}if($.isArray(disabled)){disabled=$.merge([index],disabled).sort();}else{disabled=[index];}}this._setOptionDisabled(disabled);},load:function(index,event){index=this._getIndex(index);var that=this,tab=this.tabs.eq(index),anchor=tab.find(".ui-tabs-anchor"),panel=this._getPanelForTab(tab),eventData={tab:tab,panel:panel},complete=function(jqXHR,status){if(status==="abort"){that.panels.stop(false,true);}that._removeClass(tab,"ui-tabs-loading");panel.removeAttr("aria-busy");if(jqXHR===that.xhr){delete that.xhr;}};if(this._isLocal(anchor[0])){return;}this.xhr=$.ajax(this._ajaxSettings(anchor,event,eventData));if(this.xhr&&this.xhr.statusText!=="canceled"){this._addClass(tab,"ui-tabs-loading");panel.attr("aria-busy","true");this.xhr.done(function(response,status,jqXHR){setTimeout(function(){panel.html(response);that._trigger("load",event,eventData);complete(jqXHR,status);},1);}).fail(function(jqXHR,status){setTimeout(function(){complete(jqXHR,status);},1);});}},_ajaxSettings:function(anchor,event,eventData){var that=this;return{url:anchor.attr("href").replace(/#.*$/,""),beforeSend:function(jqXHR,settings){return that._trigger("beforeLoad",event,$.extend({jqXHR:jqXHR,ajaxSettings:settings},eventData));}};},_getPanelForTab:function(tab){var id=$(tab).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+id));}});if($.uiBackCompat!==false){$.widget("ui.tabs",$.ui.tabs,{_processTabs:function(){this._superApply(arguments);this._addClass(this.tabs,"ui-tab");}});}var widgetsTabs=$.ui.tabs;$.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var title=$(this).attr("title")||"";return $("<a>").text(title).html();},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,track:false,close:null,open:null},_addDescribedBy:function(elem,id){var describedby=(elem.attr("aria-describedby")||"").split(/\s+/);describedby.push(id);elem.data("ui-tooltip-id",id).attr("aria-describedby",$.trim(describedby.join(" ")));},_removeDescribedBy:function(elem){var id=elem.data("ui-tooltip-id"),describedby=(elem.attr("aria-describedby")||"").split(/\s+/),index=$.inArray(id,describedby);if(index!==-1){describedby.splice(index,1);}elem.removeData("ui-tooltip-id");describedby=$.trim(describedby.join(" "));if(describedby){elem.attr("aria-describedby",describedby);}else{elem.removeAttr("aria-describedby");}},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.liveRegion=$("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this.disabledTitles=$([]);},_setOption:function(key,value){var that=this;this._super(key,value);if(key==="content"){$.each(this.tooltips,function(id,tooltipData){that._updateContent(tooltipData.element);});}},_setOptionDisabled:function(value){this[value?"_disable":"_enable"]();},_disable:function(){var that=this;$.each(this.tooltips,function(id,tooltipData){var event=$.Event("blur");event.target=event.currentTarget=tooltipData.element[0];that.close(event,true);});this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var element=$(this);if(element.is("[title]")){return element.data("ui-tooltip-title",element.attr("title")).removeAttr("title");}}));},_enable:function(){this.disabledTitles.each(function(){var element=$(this);if(element.data("ui-tooltip-title")){element.attr("title",element.data("ui-tooltip-title"));}});this.disabledTitles=$([]);},open:function(event){var that=this,target=$(event?event.target:this.element).closest(this.options.items);if(!target.length||target.data("ui-tooltip-id")){return;}if(target.attr("title")){target.data("ui-tooltip-title",target.attr("title"));}target.data("ui-tooltip-open",true);if(event&&event.type==="mouseover"){target.parents().each(function(){var parent=$(this),blurEvent;if(parent.data("ui-tooltip-open")){blurEvent=$.Event("blur");blurEvent.target=blurEvent.currentTarget=this;that.close(blurEvent,true);}if(parent.attr("title")){parent.uniqueId();that.parents[this.id]={element:this,title:parent.attr("title")};parent.attr("title","");}});}this._registerCloseHandlers(event,target);this._updateContent(target,event);},_updateContent:function(target,event){var content,contentOption=this.options.content,that=this,eventType=event?event.type:null;if(typeof contentOption==="string"||contentOption.nodeType||contentOption.jquery){return this._open(event,target,contentOption);}content=contentOption.call(target[0],function(response){that._delay(function(){if(!target.data("ui-tooltip-open")){return;}if(event){event.type=eventType;}this._open(event,target,response);});});if(content){this._open(event,target,content);}},_open:function(event,target,content){var tooltipData,tooltip,delayedShow,a11yContent,positionOption=$.extend({},this.options.position);if(!content){return;}tooltipData=this._find(target);if(tooltipData){tooltipData.tooltip.find(".ui-tooltip-content").html(content);return;}if(target.is("[title]")){if(event&&event.type==="mouseover"){target.attr("title","");}else{target.removeAttr("title");}}tooltipData=this._tooltip(target);tooltip=tooltipData.tooltip;this._addDescribedBy(target,tooltip.attr("id"));tooltip.find(".ui-tooltip-content").html(content);this.liveRegion.children().hide();a11yContent=$("<div>").html(tooltip.find(".ui-tooltip-content").html());a11yContent.removeAttr("name").find("[name]").removeAttr("name");a11yContent.removeAttr("id").find("[id]").removeAttr("id");a11yContent.appendTo(this.liveRegion);function position(event){positionOption.of=event;if(tooltip.is(":hidden")){return;}tooltip.position(positionOption);}if(this.options.track&&event&&/^mouse/.test(event.type)){this._on(this.document,{mousemove:position});position(event);}else{tooltip.position($.extend({of:target},this.options.position));}tooltip.hide();this._show(tooltip,this.options.show);if(this.options.track&&this.options.show&&this.options.show.delay){delayedShow=this.delayedShow=setInterval(function(){if(tooltip.is(":visible")){position(positionOption.of);clearInterval(delayedShow);}},$.fx.interval);}this._trigger("open",event,{tooltip:tooltip});},_registerCloseHandlers:function(event,target){var events={keyup:function(event){if(event.keyCode===$.ui.keyCode.ESCAPE){var fakeEvent=$.Event(event);fakeEvent.currentTarget=target[0];this.close(fakeEvent,true);}}};if(target[0]!==this.element[0]){events.remove=function(){this._removeTooltip(this._find(target).tooltip);};}if(!event||event.type==="mouseover"){events.mouseleave="close";}if(!event||event.type==="focusin"){events.focusout="close";}this._on(true,target,events);},close:function(event){var tooltip,that=this,target=$(event?event.currentTarget:this.element),tooltipData=this._find(target);if(!tooltipData){target.removeData("ui-tooltip-open");return;}tooltip=tooltipData.tooltip;if(tooltipData.closing){return;}clearInterval(this.delayedShow);if(target.data("ui-tooltip-title")&&!target.attr("title")){target.attr("title",target.data("ui-tooltip-title"));}this._removeDescribedBy(target);tooltipData.hiding=true;tooltip.stop(true);this._hide(tooltip,this.options.hide,function(){that._removeTooltip($(this));});target.removeData("ui-tooltip-open");this._off(target,"mouseleave focusout keyup");if(target[0]!==this.element[0]){this._off(target,"remove");}this._off(this.document,"mousemove");if(event&&event.type==="mouseleave"){$.each(this.parents,function(id,parent){$(parent.element).attr("title",parent.title);delete that.parents[id];});}tooltipData.closing=true;this._trigger("close",event,{tooltip:tooltip});if(!tooltipData.hiding){tooltipData.closing=false;}},_tooltip:function(element){var tooltip=$("<div>").attr("role","tooltip"),content=$("<div>").appendTo(tooltip),id=tooltip.uniqueId().attr("id");this._addClass(content,"ui-tooltip-content");this._addClass(tooltip,"ui-tooltip","ui-widget ui-widget-content");tooltip.appendTo(this._appendTo(element));return this.tooltips[id]={element:element,tooltip:tooltip};},_find:function(target){var id=target.data("ui-tooltip-id");return id?this.tooltips[id]:null;},_removeTooltip:function(tooltip){tooltip.remove();delete this.tooltips[tooltip.attr("id")];},_appendTo:function(target){var element=target.closest(".ui-front, dialog");if(!element.length){element=this.document[0].body;}return element;},_destroy:function(){var that=this;$.each(this.tooltips,function(id,tooltipData){var event=$.Event("blur"),element=tooltipData.element;event.target=event.currentTarget=element[0];that.close(event,true);$("#"+id).remove();if(element.data("ui-tooltip-title")){if(!element.attr("title")){element.attr("title",element.data("ui-tooltip-title"));}element.removeData("ui-tooltip-title");}});this.liveRegion.remove();}});if($.uiBackCompat!==false){$.widget("ui.tooltip",$.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var tooltipData=this._superApply(arguments);if(this.options.tooltipClass){tooltipData.tooltip.addClass(this.options.tooltipClass);}return tooltipData;}});}var widgetsTooltip=$.ui.tooltip;}));
(function($,Views,Models,Collections){$(document).ready(function(){function distance(lat1,lon1,lat2,lon2){var radlat1=Math.PI*lat1/180;var radlat2=Math.PI*lat2/180;var theta=lon1-lon2;var radtheta=Math.PI*theta/180;var dist=Math.sin(radlat1)*Math.sin(radlat2)+Math.cos(radlat1)*Math.cos(radlat2)*Math.cos(radtheta);dist=Math.acos(dist);dist=dist*180/Math.PI;dist=dist*60*1.1515;var unit=ae_globals.units_of_measurement;if(unit==='km'){if(dist<1){dist=Math.ceil(dist*1000)+' m';}else{dist=Math.ceil(dist*1.609)+' Km';}}else{dist=Math.ceil(dist)+' Mi';}
return dist;}
if(parseInt(ae_globals.geolocation)===1){if($('.place-item, .event-item, .togo-item, .review-item').length>0){var location_lat,location_lng;if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){location_lat=position.coords.latitude;location_lng=position.coords.longitude;$('.place-item, .event-item, .togo-item, .review-item').each(function(){var lat_item=$('#latitude',this).attr('content'),lng_item=$('#longitude',this).attr('content');var dist=distance(lat_item,lng_item,location_lat,location_lng);$('.distance',this).text("a "+dist+' de tí -');});});}}}
$('.slider-value-default').slider({min:0,max:10,step:1,orientation:'horizontal',value:0,selection:'before',tooltip:'show',handle:'round',formater:function(value){return value;}});AreaItem=Views.PostItem.extend({tagName:'li',className:'area-item col-md-4 col-sm-4 col-xs-6',template:_.template($('#ae-area-loop').html()),});ListArea=Views.ListPost.extend({tagName:'ul',itemView:AreaItem,itemClass:'area-item'});if($('.block-area').length>0){$('.block-area').each(function(){console.log($(this));var collection=new Collections.Posts();collection.action='ae-sync-areas';new ListArea({el:$(this).find('.list-areas'),collection:collection,itemView:AreaItem,itemClass:''});new Views.BlockControl({collection:collection,el:$(this),onAfterInit:function(){},onAfterFetch:function(result,res){console.log(result);},switchTo:function(){return;}});});}
if($('#ae-place-loop').length>0){PostItem=Views.PostItem.extend({template:_.template($('#ae-place-loop').html()),onItemBeforeRender:function(){var parent=this.$el.parents('ul'),img=parent.attr('data-thumb');if(typeof img!=='undefined'){var thum=this.model.get(img);if(thum){this.model.set('the_post_thumnail',thum);}}},onItemRendered:function(){if(typeof this.model.get('page')!=='undefined'){this.$el.addClass('page-'+this.model.get('page'));}else{this.$el.addClass('page-1');}
var view=this;this.$('.rate-it').raty({half:true,score:view.model.get('rating_score'),readOnly:true,hints:raty.hint});if(parseInt(ae_globals.geolocation)===1){var location_lat,location_lng;if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){location_lat=position.coords.latitude;location_lng=position.coords.longitude;var lat_item=view.model.get('et_location_lat'),lng_item=view.model.get('et_location_lng');var dist=distance(lat_item,lng_item,location_lat,location_lng);view.$('.distance',this).text("a "+dist+' de tí -');});}}}});ListView=Views.ListPost.extend({tagName:'ul',itemView:PostItem,itemClass:'place-item'});if($('#publish-places .postdata').length>0){var postdata=JSON.parse($('#publish-places .postdata').html()),publish_collection=new Collections.Posts(postdata);}else{var publish_collection=new Collections.Posts();}
new Views.BlockControl({collection:publish_collection,el:'.publish_place_wrapper',thumbnail:$('#publish-places').attr('data-thumb'),onAfterInit:function(){var view=this;if(typeof view.query!='undefined'){if(ae_globals.is_search==1){view.query['is_search']=parseInt(ae_globals.is_search);}
if(ae_globals.is_tax==1){view.query['is_tax']=ae_globals.is_tax;}
if(ae_globals.is_archive==1){view.query['is_archive']=ae_globals.is_archive;}}},onAfterFetch:function(result,res){var view=this;if(res&&res.success){$('.top-title-post-place span.found_search').each(function(){$(this).text(res.status);});}}});if($('#pending-places').length>0){var postdata=JSON.parse($('#pending-places .postdata').html()),pending_collection=new Collections.Posts(postdata);}else{var pending_collection=new Collections.Posts();}
new Views.Index({el:$('#list-places-wrapper'),pending:pending_collection,publish:publish_collection});$('.block-posts').each(function(){var postdata=JSON.parse($(this).find('.postdata').html()),collection=new Collections.Posts(postdata);var defaultdisplay=$(this).attr('data-defaultdisplay');new ListView({itemView:PostItem,collection:collection,el:$(this).find('ul')});new Views.BlockControl({collection:collection,el:$(this),thumbnail:$(this).attr('data-thumb'),grid:(defaultdisplay==='1')?'list':'grid',onAfterChangeView:function(){this.switchTo();},onAfterLoadMore:function(){this.switchTo();},onAfterFetch:function(){this.switchTo();},switchTo:function(){var view=this;if(view.grid=='grid'){view.$('ul > li').addClass('col-md-3 col-xs-6').removeClass('col-md-12');view.$('ul').removeClass('fullwidth');}else{view.$('ul > li').removeClass('col-md-3 col-xs-6').addClass('col-md-12');view.$('ul').addClass('fullwidth');}}});});ReviewItem=Views.PostItem.extend({template:_.template($('#de-review-item').html()),className:'col-md-4 col-sm-6 review-item',onItemRendered:function(){var view=this;this.$('.rate-it').raty({half:true,score:view.model.get('et_rate'),readOnly:true,hints:raty.hint});if(parseInt(ae_globals.geolocation)===1){var location_lat,location_lng;if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){location_lat=position.coords.latitude;location_lng=position.coords.longitude;var post_data=view.model.get('post_data'),lat_item=post_data.et_location_lat,lng_item=post_data.et_location_lng;var dist=distance(lat_item,lng_item,location_lat,location_lng);view.$('.distance',this).text(dist+' -');});}}}});ListReview=Views.ListPost.extend({tagName:'ul',itemView:ReviewItem,itemClass:'review-item'});$('.comment-block').each(function(){if($(this).find('.postdata').length>0){var postdata=JSON.parse($(this).find('.postdata').html()),collection=new Collections.Comments(postdata);collection.action='ae-fetch-comments';new ListReview({itemView:ReviewItem,collection:collection,el:$(this).find('ul')});new Views.BlockControl({collection:collection,el:$(this)});}});BlogItem=Views.PostItem.extend({template:_.template($('#ae-post-loop').html()),className:'post type-post'});ListBlog=Views.ListPost.extend({tagName:'ul',itemView:BlogItem,itemClass:'type-post'});$('.blog-wrapper').each(function(){if($(this).find('.postdata').length>0){var postdata=JSON.parse($(this).find('.postdata').html()),collection=new Collections.Blogs(postdata);new ListBlog({itemView:BlogItem,collection:collection,el:$(this).find('ul')});if(typeof de_blog==='undefined'){de_blog=new Views.BlockControl({collection:collection,el:$(this)});}}});}
$(".social-list-footer").append('<li><a target="_blank" class="ico-social-link" href="https://www.youtube.com/channel/UC92UNo3L_conmz7ys3kih8Q"><span><i class="fa fa-youtube"></i></span>Youtube</a></li>');setTimeout(function()
{$('body').find('div.zopim').eq(0).addClass('zopim_custom3');$('body').find('div.zopim').eq(1).addClass('zopim_custom4');},1000);});})(jQuery,AE.Views,AE.Models,AE.Collections);
/*! This file is auto-generated */
!function(d,l){"use strict";var e=!1,o=!1;if(l.querySelector)if(d.addEventListener)e=!0;if(d.wp=d.wp||{},!d.wp.receiveEmbedMessage)if(d.wp.receiveEmbedMessage=function(e){var t=e.data;if(t)if(t.secret||t.message||t.value)if(!/[^a-zA-Z0-9]/.test(t.secret)){var r,a,i,s,n,o=l.querySelectorAll('iframe[data-secret="'+t.secret+'"]'),c=l.querySelectorAll('blockquote[data-secret="'+t.secret+'"]');for(r=0;r<c.length;r++)c[r].style.display="none";for(r=0;r<o.length;r++)if(a=o[r],e.source===a.contentWindow){if(a.removeAttribute("style"),"height"===t.message){if(1e3<(i=parseInt(t.value,10)))i=1e3;else if(~~i<200)i=200;a.height=i}if("link"===t.message)if(s=l.createElement("a"),n=l.createElement("a"),s.href=a.getAttribute("src"),n.href=t.value,n.host===s.host)if(l.activeElement===a)d.top.location.href=t.value}}},e)d.addEventListener("message",d.wp.receiveEmbedMessage,!1),l.addEventListener("DOMContentLoaded",t,!1),d.addEventListener("load",t,!1);function t(){if(!o){o=!0;var e,t,r,a,i=-1!==navigator.appVersion.indexOf("MSIE 10"),s=!!navigator.userAgent.match(/Trident.*rv:11\./),n=l.querySelectorAll("iframe.wp-embedded-content");for(t=0;t<n.length;t++){if(!(r=n[t]).getAttribute("data-secret"))a=Math.random().toString(36).substr(2,10),r.src+="#?secret="+a,r.setAttribute("data-secret",a);if(i||s)(e=r.cloneNode(!0)).removeAttribute("security"),r.parentNode.replaceChild(e,r)}}}}(window,document);
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,'script','https://sedeportista.com/wp-content/themes/directoryengine-child/js/fbevents.js');fbq('init','1218875451532250');fbq('track','PageView');;
(function($,Views,Models,AE){$(document).ready(function(){var post;var currentUser;if($('img.lazy').length>0){$("img.lazy").lazyload({effect:"fadeIn"});}
if($('#place_id').length>0){post=new Models.Post(JSON.parse($('#place_id').html()));post.fetch();}
if($('#user_id').length>0){currentUser=new Models.User(JSON.parse($('#user_id').html()));currentUser.fetch();}else{currentUser=new Models.User();}
if(typeof Views.Front!=='undefined'){AE.App=new Views.Front({user:currentUser});}
if(typeof Views.PostForm!=='undefined'){var options={"use_plan":false,"user_login":0,"free_plan_used":false,"limit_free_plan":"1","el":"#post-place","step":4}
AE.PostFormView=new Views.PostForm(options);}
if(typeof Views.Map!=='undefined'){AE.MapView=new Views.Map({el:$('body'),latitude:ae_globals.map_center.latitude,longitude:ae_globals.map_center.longitude,model:post});}});})(jQuery,AE.Views,AE.Models,window.AE);;
(function($){if(typeof $.validator!=='undefined'){$.extend($.validator.messages,{required:"Este campo es obligatorio",email:"Por favor introduce un Correo electrónico válido",url:"Por favor introduce una URL válida",number:"Por favor introduce un numero valido",digits:"Por favor introduce sólo dígitos.",equalTo:"Por favor introduce el mismo valor como anteriormente",date:"Please enter a valid date.",creditcard:"Please enter a valid credit card number.",accept:"Please enter a value with a valid extension.",maxlength:$.validator.format("No debe introducir más de {0} caracteres."),minlength:$.validator.format("Debe introducir al menos {0} caracteres."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:jQuery.validator.format("Please enter a value between {0} and {1}."),min:$.validator.format("Please enter a value greater than or equal to {0}."),max:$.validator.format("Please enter a value less than or equal to {0}.")});}})(jQuery);;